(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zy={exports:{}},Tu={},By={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),Fw=Symbol.for("react.portal"),Uw=Symbol.for("react.fragment"),zw=Symbol.for("react.strict_mode"),Bw=Symbol.for("react.profiler"),$w=Symbol.for("react.provider"),qw=Symbol.for("react.context"),Hw=Symbol.for("react.forward_ref"),Ww=Symbol.for("react.suspense"),Kw=Symbol.for("react.memo"),Gw=Symbol.for("react.lazy"),tm=Symbol.iterator;function Qw(t){return t===null||typeof t!="object"?null:(t=tm&&t[tm]||t["@@iterator"],typeof t=="function"?t:null)}var $y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qy=Object.assign,Hy={};function Ti(t,e,n){this.props=t,this.context=e,this.refs=Hy,this.updater=n||$y}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ti.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wy(){}Wy.prototype=Ti.prototype;function bh(t,e,n){this.props=t,this.context=e,this.refs=Hy,this.updater=n||$y}var kh=bh.prototype=new Wy;kh.constructor=bh;qy(kh,Ti.prototype);kh.isPureReactComponent=!0;var nm=Array.isArray,Ky=Object.prototype.hasOwnProperty,Nh={current:null},Gy={key:!0,ref:!0,__self:!0,__source:!0};function Qy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ky.call(e,r)&&!Gy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ta,type:t,key:i,ref:o,props:s,_owner:Nh.current}}function Yw(t,e){return{$$typeof:ta,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ch(t){return typeof t=="object"&&t!==null&&t.$$typeof===ta}function Xw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rm=/\/+/g;function Ec(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xw(""+t.key):e.toString(36)}function ul(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ta:case Fw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ec(o,0):r,nm(s)?(n="",t!=null&&(n=t.replace(rm,"$&/")+"/"),ul(s,e,n,"",function(h){return h})):s!=null&&(Ch(s)&&(s=Yw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",nm(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Ec(i,l);o+=ul(i,e,n,c,s)}else if(c=Qw(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Ec(i,l++),o+=ul(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ua(t,e,n){if(t==null)return t;var r=[],s=0;return ul(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Jw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},cl={transition:null},Zw={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:cl,ReactCurrentOwner:Nh};function Yy(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Ua,forEach:function(t,e,n){Ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ua(t,function(){e++}),e},toArray:function(t){return Ua(t,function(e){return e})||[]},only:function(t){if(!Ch(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Ti;ce.Fragment=Uw;ce.Profiler=Bw;ce.PureComponent=bh;ce.StrictMode=zw;ce.Suspense=Ww;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zw;ce.act=Yy;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Nh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Ky.call(e,c)&&!Gy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ta,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:qw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$w,_context:t},t.Consumer=t};ce.createElement=Qy;ce.createFactory=function(t){var e=Qy.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:Hw,render:t}};ce.isValidElement=Ch;ce.lazy=function(t){return{$$typeof:Gw,_payload:{_status:-1,_result:t},_init:Jw}};ce.memo=function(t,e){return{$$typeof:Kw,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};ce.unstable_act=Yy;ce.useCallback=function(t,e){return It.current.useCallback(t,e)};ce.useContext=function(t){return It.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ce.useEffect=function(t,e){return It.current.useEffect(t,e)};ce.useId=function(){return It.current.useId()};ce.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return It.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ce.useRef=function(t){return It.current.useRef(t)};ce.useState=function(t){return It.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return It.current.useTransition()};ce.version="18.3.1";By.exports=ce;var W=By.exports;const Xy=Mw(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE=W,tE=Symbol.for("react.element"),nE=Symbol.for("react.fragment"),rE=Object.prototype.hasOwnProperty,sE=eE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iE={key:!0,ref:!0,__self:!0,__source:!0};function Jy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rE.call(e,r)&&!iE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tE,type:t,key:i,ref:o,props:s,_owner:sE.current}}Tu.Fragment=nE;Tu.jsx=Jy;Tu.jsxs=Jy;zy.exports=Tu;var u=zy.exports,od={},Zy={exports:{}},$t={},e0={exports:{}},t0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Z){var re=H.length;H.push(Z);e:for(;0<re;){var le=re-1>>>1,he=H[le];if(0<s(he,Z))H[le]=Z,H[re]=he,re=le;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],re=H.pop();if(re!==Z){H[0]=re;e:for(var le=0,he=H.length,Ie=he>>>1;le<Ie;){var Vt=2*(le+1)-1,Ht=H[Vt],Ot=Vt+1,F=H[Ot];if(0>s(Ht,re))Ot<he&&0>s(F,Ht)?(H[le]=F,H[Ot]=re,le=Ot):(H[le]=Ht,H[Vt]=re,le=Vt);else if(Ot<he&&0>s(F,re))H[le]=F,H[Ot]=re,le=Ot;else break e}}return Z}function s(H,Z){var re=H.sortIndex-Z.sortIndex;return re!==0?re:H.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,v=3,C=!1,P=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(H){for(var Z=n(h);Z!==null;){if(Z.callback===null)r(h);else if(Z.startTime<=H)r(h),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=n(h)}}function V(H){if(R=!1,k(H),!P)if(n(c)!==null)P=!0,Cn(L);else{var Z=n(h);Z!==null&&_t(V,Z.startTime-H)}}function L(H,Z){P=!1,R&&(R=!1,S(y),y=-1),C=!0;var re=v;try{for(k(Z),m=n(c);m!==null&&(!(m.expirationTime>Z)||H&&!N());){var le=m.callback;if(typeof le=="function"){m.callback=null,v=m.priorityLevel;var he=le(m.expirationTime<=Z);Z=t.unstable_now(),typeof he=="function"?m.callback=he:m===n(c)&&r(c),k(Z)}else r(c);m=n(c)}if(m!==null)var Ie=!0;else{var Vt=n(h);Vt!==null&&_t(V,Vt.startTime-Z),Ie=!1}return Ie}finally{m=null,v=re,C=!1}}var D=!1,x=null,y=-1,w=5,E=-1;function N(){return!(t.unstable_now()-E<w)}function b(){if(x!==null){var H=t.unstable_now();E=H;var Z=!0;try{Z=x(!0,H)}finally{Z?I():(D=!1,x=null)}}else D=!1}var I;if(typeof T=="function")I=function(){T(b)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,Ue=Ve.port2;Ve.port1.onmessage=b,I=function(){Ue.postMessage(null)}}else I=function(){M(b,0)};function Cn(H){x=H,D||(D=!0,I())}function _t(H,Z){y=M(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){P||C||(P=!0,Cn(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var re=v;v=Z;try{return H()}finally{v=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=v;v=H;try{return Z()}finally{v=re}},t.unstable_scheduleCallback=function(H,Z,re){var le=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?le+re:le):re=le,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=re+he,H={id:p++,callback:Z,priorityLevel:H,startTime:re,expirationTime:he,sortIndex:-1},re>le?(H.sortIndex=re,e(h,H),n(c)===null&&H===n(h)&&(R?(S(y),y=-1):R=!0,_t(V,re-le))):(H.sortIndex=he,e(c,H),P||C||(P=!0,Cn(L))),H},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(H){var Z=v;return function(){var re=v;v=Z;try{return H.apply(this,arguments)}finally{v=re}}}})(t0);e0.exports=t0;var oE=e0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE=W,Bt=oE;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n0=new Set,Co={};function xs(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Co[t]=e,t=0;t<e.length;t++)n0.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ad=Object.prototype.hasOwnProperty,lE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sm={},im={};function uE(t){return ad.call(im,t)?!0:ad.call(sm,t)?!1:lE.test(t)?im[t]=!0:(sm[t]=!0,!1)}function cE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dE(t,e,n,r){if(e===null||typeof e>"u"||cE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ah=/[\-:]([a-z])/g;function Ph(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ah,Ph);ot[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ah,Ph);ot[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ah,Ph);ot[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rh(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dE(e,n,s,r)&&(n=null),r||s===null?uE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=aE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,za=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),Os=Symbol.for("react.fragment"),jh=Symbol.for("react.strict_mode"),ld=Symbol.for("react.profiler"),r0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),ud=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),i0=Symbol.for("react.offscreen"),om=Symbol.iterator;function Gi(t){return t===null||typeof t!="object"?null:(t=om&&t[om]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,Tc;function ro(t){if(Tc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tc=e&&e[1]||""}return`
`+Tc+t}var Ic=!1;function Sc(t,e){if(!t||Ic)return"";Ic=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ic=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ro(t):""}function hE(t){switch(t.tag){case 5:return ro(t.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 2:case 15:return t=Sc(t.type,!1),t;case 11:return t=Sc(t.type.render,!1),t;case 1:return t=Sc(t.type,!0),t;default:return""}}function dd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Os:return"Fragment";case Vs:return"Portal";case ld:return"Profiler";case jh:return"StrictMode";case ud:return"Suspense";case cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s0:return(t.displayName||"Context")+".Consumer";case r0:return(t._context.displayName||"Context")+".Provider";case Dh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vh:return e=t.displayName||null,e!==null?e:dd(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return dd(t(e))}catch{}}return null}function fE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dd(e);case 8:return e===jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pE(t){var e=o0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ba(t){t._valueTracker||(t._valueTracker=pE(t))}function a0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=o0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hd(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function am(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l0(t,e){e=e.checked,e!=null&&Rh(t,"checked",e,!1)}function fd(t,e){l0(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pd(t,e.type,n):e.hasOwnProperty("defaultValue")&&pd(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pd(t,e,n){(e!=="number"||Pl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var so=Array.isArray;function Gs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function md(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function um(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(so(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function u0(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $a,d0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$a.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mE=["Webkit","ms","Moz","O"];Object.keys(mo).forEach(function(t){mE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mo[e]=mo[t]})});function h0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mo.hasOwnProperty(t)&&mo[t]?(""+e).trim():e+"px"}function f0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=h0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gE=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yd(t,e){if(e){if(gE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function vd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=null;function Oh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xd=null,Qs=null,Ys=null;function dm(t){if(t=sa(t)){if(typeof xd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Nu(e),xd(t.stateNode,t.type,e))}}function p0(t){Qs?Ys?Ys.push(t):Ys=[t]:Qs=t}function m0(){if(Qs){var t=Qs,e=Ys;if(Ys=Qs=null,dm(t),e)for(t=0;t<e.length;t++)dm(e[t])}}function g0(t,e){return t(e)}function y0(){}var bc=!1;function v0(t,e,n){if(bc)return t(e,n);bc=!0;try{return g0(t,e,n)}finally{bc=!1,(Qs!==null||Ys!==null)&&(y0(),m0())}}function Po(t,e){var n=t.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var wd=!1;if($n)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{wd=!1}function yE(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var go=!1,Rl=null,jl=!1,Ed=null,vE={onError:function(t){go=!0,Rl=t}};function _E(t,e,n,r,s,i,o,l,c){go=!1,Rl=null,yE.apply(vE,arguments)}function xE(t,e,n,r,s,i,o,l,c){if(_E.apply(this,arguments),go){if(go){var h=Rl;go=!1,Rl=null}else throw Error(B(198));jl||(jl=!0,Ed=h)}}function ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hm(t){if(ws(t)!==t)throw Error(B(188))}function wE(t){var e=t.alternate;if(!e){if(e=ws(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hm(s),t;if(i===r)return hm(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function x0(t){return t=wE(t),t!==null?w0(t):null}function w0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w0(t);if(e!==null)return e;t=t.sibling}return null}var E0=Bt.unstable_scheduleCallback,fm=Bt.unstable_cancelCallback,EE=Bt.unstable_shouldYield,TE=Bt.unstable_requestPaint,$e=Bt.unstable_now,IE=Bt.unstable_getCurrentPriorityLevel,Lh=Bt.unstable_ImmediatePriority,T0=Bt.unstable_UserBlockingPriority,Dl=Bt.unstable_NormalPriority,SE=Bt.unstable_LowPriority,I0=Bt.unstable_IdlePriority,Iu=null,xn=null;function bE(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Iu,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:CE,kE=Math.log,NE=Math.LN2;function CE(t){return t>>>=0,t===0?32:31-(kE(t)/NE|0)|0}var qa=64,Ha=4194304;function io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=io(l):(i&=o,i!==0&&(r=io(i)))}else o=n&~s,o!==0?r=io(o):i!==0&&(r=io(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),s=1<<n,r|=t[n],e&=~s;return r}function AE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-dn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=AE(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Td(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function S0(){var t=qa;return qa<<=1,!(qa&4194240)&&(qa=64),t}function kc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function na(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function RE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Mh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function b0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k0,Fh,N0,C0,A0,Id=!1,Wa=[],Er=null,Tr=null,Ir=null,Ro=new Map,jo=new Map,fr=[],jE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pm(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(e.pointerId)}}function Yi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=sa(e),e!==null&&Fh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DE(t,e,n,r,s){switch(e){case"focusin":return Er=Yi(Er,t,e,n,r,s),!0;case"dragenter":return Tr=Yi(Tr,t,e,n,r,s),!0;case"mouseover":return Ir=Yi(Ir,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ro.set(i,Yi(Ro.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,jo.set(i,Yi(jo.get(i)||null,t,e,n,r,s)),!0}return!1}function P0(t){var e=ns(t.target);if(e!==null){var n=ws(e);if(n!==null){if(e=n.tag,e===13){if(e=_0(n),e!==null){t.blockedOn=e,A0(t.priority,function(){N0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_d=r,n.target.dispatchEvent(r),_d=null}else return e=sa(n),e!==null&&Fh(e),t.blockedOn=n,!1;e.shift()}return!0}function mm(t,e,n){dl(t)&&n.delete(e)}function VE(){Id=!1,Er!==null&&dl(Er)&&(Er=null),Tr!==null&&dl(Tr)&&(Tr=null),Ir!==null&&dl(Ir)&&(Ir=null),Ro.forEach(mm),jo.forEach(mm)}function Xi(t,e){t.blockedOn===e&&(t.blockedOn=null,Id||(Id=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,VE)))}function Do(t){function e(s){return Xi(s,t)}if(0<Wa.length){Xi(Wa[0],t);for(var n=1;n<Wa.length;n++){var r=Wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&Xi(Er,t),Tr!==null&&Xi(Tr,t),Ir!==null&&Xi(Ir,t),Ro.forEach(e),jo.forEach(e),n=0;n<fr.length;n++)r=fr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)P0(n),n.blockedOn===null&&fr.shift()}var Xs=Jn.ReactCurrentBatchConfig,Ol=!0;function OE(t,e,n,r){var s=_e,i=Xs.transition;Xs.transition=null;try{_e=1,Uh(t,e,n,r)}finally{_e=s,Xs.transition=i}}function LE(t,e,n,r){var s=_e,i=Xs.transition;Xs.transition=null;try{_e=4,Uh(t,e,n,r)}finally{_e=s,Xs.transition=i}}function Uh(t,e,n,r){if(Ol){var s=Sd(t,e,n,r);if(s===null)Lc(t,e,r,Ll,n),pm(t,r);else if(DE(s,t,e,n,r))r.stopPropagation();else if(pm(t,r),e&4&&-1<jE.indexOf(t)){for(;s!==null;){var i=sa(s);if(i!==null&&k0(i),i=Sd(t,e,n,r),i===null&&Lc(t,e,r,Ll,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Lc(t,e,r,null,n)}}var Ll=null;function Sd(t,e,n,r){if(Ll=null,t=Oh(r),t=ns(t),t!==null)if(e=ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ll=t,null}function R0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IE()){case Lh:return 1;case T0:return 4;case Dl:case SE:return 16;case I0:return 536870912;default:return 16}default:return 16}}var _r=null,zh=null,hl=null;function j0(){if(hl)return hl;var t,e=zh,n=e.length,r,s="value"in _r?_r.value:_r.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return hl=s.slice(t,1<r?1-r:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ka(){return!0}function gm(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ka:gm,this.isPropagationStopped=gm,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bh=qt(Ii),ra=je({},Ii,{view:0,detail:0}),ME=qt(ra),Nc,Cc,Ji,Su=je({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$h,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ji&&(Ji&&t.type==="mousemove"?(Nc=t.screenX-Ji.screenX,Cc=t.screenY-Ji.screenY):Cc=Nc=0,Ji=t),Nc)},movementY:function(t){return"movementY"in t?t.movementY:Cc}}),ym=qt(Su),FE=je({},Su,{dataTransfer:0}),UE=qt(FE),zE=je({},ra,{relatedTarget:0}),Ac=qt(zE),BE=je({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),$E=qt(BE),qE=je({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HE=qt(qE),WE=je({},Ii,{data:0}),vm=qt(WE),KE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QE[t])?!!e[t]:!1}function $h(){return YE}var XE=je({},ra,{key:function(t){if(t.key){var e=KE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$h,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JE=qt(XE),ZE=je({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_m=qt(ZE),e1=je({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$h}),t1=qt(e1),n1=je({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),r1=qt(n1),s1=je({},Su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i1=qt(s1),o1=[9,13,27,32],qh=$n&&"CompositionEvent"in window,yo=null;$n&&"documentMode"in document&&(yo=document.documentMode);var a1=$n&&"TextEvent"in window&&!yo,D0=$n&&(!qh||yo&&8<yo&&11>=yo),xm=" ",wm=!1;function V0(t,e){switch(t){case"keyup":return o1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function l1(t,e){switch(t){case"compositionend":return O0(e);case"keypress":return e.which!==32?null:(wm=!0,xm);case"textInput":return t=e.data,t===xm&&wm?null:t;default:return null}}function u1(t,e){if(Ls)return t==="compositionend"||!qh&&V0(t,e)?(t=j0(),hl=zh=_r=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D0&&e.locale!=="ko"?null:e.data;default:return null}}var c1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c1[t.type]:e==="textarea"}function L0(t,e,n,r){p0(r),e=Ml(e,"onChange"),0<e.length&&(n=new Bh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vo=null,Vo=null;function d1(t){G0(t,0)}function bu(t){var e=Us(t);if(a0(e))return t}function h1(t,e){if(t==="change")return e}var M0=!1;if($n){var Pc;if($n){var Rc="oninput"in document;if(!Rc){var Tm=document.createElement("div");Tm.setAttribute("oninput","return;"),Rc=typeof Tm.oninput=="function"}Pc=Rc}else Pc=!1;M0=Pc&&(!document.documentMode||9<document.documentMode)}function Im(){vo&&(vo.detachEvent("onpropertychange",F0),Vo=vo=null)}function F0(t){if(t.propertyName==="value"&&bu(Vo)){var e=[];L0(e,Vo,t,Oh(t)),v0(d1,e)}}function f1(t,e,n){t==="focusin"?(Im(),vo=e,Vo=n,vo.attachEvent("onpropertychange",F0)):t==="focusout"&&Im()}function p1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bu(Vo)}function m1(t,e){if(t==="click")return bu(e)}function g1(t,e){if(t==="input"||t==="change")return bu(e)}function y1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:y1;function Oo(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ad.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function Sm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bm(t,e){var n=Sm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sm(n)}}function U0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?U0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function z0(){for(var t=window,e=Pl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pl(t.document)}return e}function Hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function v1(t){var e=z0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&U0(n.ownerDocument.documentElement,n)){if(r!==null&&Hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=bm(n,i);var o=bm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _1=$n&&"documentMode"in document&&11>=document.documentMode,Ms=null,bd=null,_o=null,kd=!1;function km(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kd||Ms==null||Ms!==Pl(r)||(r=Ms,"selectionStart"in r&&Hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_o&&Oo(_o,r)||(_o=r,r=Ml(bd,"onSelect"),0<r.length&&(e=new Bh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ms)))}function Ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fs={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},jc={},B0={};$n&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function ku(t){if(jc[t])return jc[t];if(!Fs[t])return t;var e=Fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B0)return jc[t]=e[n];return t}var $0=ku("animationend"),q0=ku("animationiteration"),H0=ku("animationstart"),W0=ku("transitionend"),K0=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){K0.set(t,e),xs(e,[t])}for(var Dc=0;Dc<Nm.length;Dc++){var Vc=Nm[Dc],x1=Vc.toLowerCase(),w1=Vc[0].toUpperCase()+Vc.slice(1);Ur(x1,"on"+w1)}Ur($0,"onAnimationEnd");Ur(q0,"onAnimationIteration");Ur(H0,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(W0,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("cancel close invalid load scroll toggle".split(" ").concat(oo));function Cm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xE(r,e,void 0,t),t.currentTarget=null}function G0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Cm(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Cm(s,l,h),i=c}}}if(jl)throw t=Ed,jl=!1,Ed=null,t}function ke(t,e){var n=e[Rd];n===void 0&&(n=e[Rd]=new Set);var r=t+"__bubble";n.has(r)||(Q0(e,t,2,!1),n.add(r))}function Oc(t,e,n){var r=0;e&&(r|=4),Q0(n,t,r,e)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[Qa]){t[Qa]=!0,n0.forEach(function(n){n!=="selectionchange"&&(E1.has(n)||Oc(n,!1,t),Oc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qa]||(e[Qa]=!0,Oc("selectionchange",!1,e))}}function Q0(t,e,n,r){switch(R0(e)){case 1:var s=OE;break;case 4:s=LE;break;default:s=Uh}n=s.bind(null,e,n,t),s=void 0,!wd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Lc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ns(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}v0(function(){var h=i,p=Oh(n),m=[];e:{var v=K0.get(t);if(v!==void 0){var C=Bh,P=t;switch(t){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":C=JE;break;case"focusin":P="focus",C=Ac;break;case"focusout":P="blur",C=Ac;break;case"beforeblur":case"afterblur":C=Ac;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=UE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=t1;break;case $0:case q0:case H0:C=$E;break;case W0:C=r1;break;case"scroll":C=ME;break;case"wheel":C=i1;break;case"copy":case"cut":case"paste":C=HE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=_m}var R=(e&4)!==0,M=!R&&t==="scroll",S=R?v!==null?v+"Capture":null:v;R=[];for(var T=h,k;T!==null;){k=T;var V=k.stateNode;if(k.tag===5&&V!==null&&(k=V,S!==null&&(V=Po(T,S),V!=null&&R.push(Mo(T,V,k)))),M)break;T=T.return}0<R.length&&(v=new C(v,P,null,n,p),m.push({event:v,listeners:R}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",v&&n!==_d&&(P=n.relatedTarget||n.fromElement)&&(ns(P)||P[qn]))break e;if((C||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,C?(P=n.relatedTarget||n.toElement,C=h,P=P?ns(P):null,P!==null&&(M=ws(P),P!==M||P.tag!==5&&P.tag!==6)&&(P=null)):(C=null,P=h),C!==P)){if(R=ym,V="onMouseLeave",S="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(R=_m,V="onPointerLeave",S="onPointerEnter",T="pointer"),M=C==null?v:Us(C),k=P==null?v:Us(P),v=new R(V,T+"leave",C,n,p),v.target=M,v.relatedTarget=k,V=null,ns(p)===h&&(R=new R(S,T+"enter",P,n,p),R.target=k,R.relatedTarget=M,V=R),M=V,C&&P)t:{for(R=C,S=P,T=0,k=R;k;k=As(k))T++;for(k=0,V=S;V;V=As(V))k++;for(;0<T-k;)R=As(R),T--;for(;0<k-T;)S=As(S),k--;for(;T--;){if(R===S||S!==null&&R===S.alternate)break t;R=As(R),S=As(S)}R=null}else R=null;C!==null&&Am(m,v,C,R,!1),P!==null&&M!==null&&Am(m,M,P,R,!0)}}e:{if(v=h?Us(h):window,C=v.nodeName&&v.nodeName.toLowerCase(),C==="select"||C==="input"&&v.type==="file")var L=h1;else if(Em(v))if(M0)L=g1;else{L=p1;var D=f1}else(C=v.nodeName)&&C.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(L=m1);if(L&&(L=L(t,h))){L0(m,L,n,p);break e}D&&D(t,v,h),t==="focusout"&&(D=v._wrapperState)&&D.controlled&&v.type==="number"&&pd(v,"number",v.value)}switch(D=h?Us(h):window,t){case"focusin":(Em(D)||D.contentEditable==="true")&&(Ms=D,bd=h,_o=null);break;case"focusout":_o=bd=Ms=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,km(m,n,p);break;case"selectionchange":if(_1)break;case"keydown":case"keyup":km(m,n,p)}var x;if(qh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ls?V0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(D0&&n.locale!=="ko"&&(Ls||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ls&&(x=j0()):(_r=p,zh="value"in _r?_r.value:_r.textContent,Ls=!0)),D=Ml(h,y),0<D.length&&(y=new vm(y,t,null,n,p),m.push({event:y,listeners:D}),x?y.data=x:(x=O0(n),x!==null&&(y.data=x)))),(x=a1?l1(t,n):u1(t,n))&&(h=Ml(h,"onBeforeInput"),0<h.length&&(p=new vm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=x))}G0(m,e)})}function Mo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Po(t,n),i!=null&&r.unshift(Mo(t,i,s)),i=Po(t,e),i!=null&&r.push(Mo(t,i,s))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Am(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=Po(n,i),c!=null&&o.unshift(Mo(n,c,l))):s||(c=Po(n,i),c!=null&&o.push(Mo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var T1=/\r\n?/g,I1=/\u0000|\uFFFD/g;function Pm(t){return(typeof t=="string"?t:""+t).replace(T1,`
`).replace(I1,"")}function Ya(t,e,n){if(e=Pm(e),Pm(t)!==e&&n)throw Error(B(425))}function Fl(){}var Nd=null,Cd=null;function Ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pd=typeof setTimeout=="function"?setTimeout:void 0,S1=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,b1=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(t){return Rm.resolve(null).then(t).catch(k1)}:Pd;function k1(t){setTimeout(function(){throw t})}function Mc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Do(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Do(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Si=Math.random().toString(36).slice(2),vn="__reactFiber$"+Si,Fo="__reactProps$"+Si,qn="__reactContainer$"+Si,Rd="__reactEvents$"+Si,N1="__reactListeners$"+Si,C1="__reactHandles$"+Si;function ns(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qn]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jm(t);t!==null;){if(n=t[vn])return n;t=jm(t)}return e}t=n,n=t.parentNode}return null}function sa(t){return t=t[vn]||t[qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Us(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Nu(t){return t[Fo]||null}var jd=[],zs=-1;function zr(t){return{current:t}}function Ne(t){0>zs||(t.current=jd[zs],jd[zs]=null,zs--)}function Te(t,e){zs++,jd[zs]=t.current,t.current=e}var Vr={},yt=zr(Vr),Pt=zr(!1),us=Vr;function ai(t,e){var n=t.type.contextTypes;if(!n)return Vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function Ul(){Ne(Pt),Ne(yt)}function Dm(t,e,n){if(yt.current!==Vr)throw Error(B(168));Te(yt,e),Te(Pt,n)}function Y0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,fE(t)||"Unknown",s));return je({},n,r)}function zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vr,us=yt.current,Te(yt,t),Te(Pt,Pt.current),!0}function Vm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Y0(t,e,us),r.__reactInternalMemoizedMergedChildContext=t,Ne(Pt),Ne(yt),Te(yt,t)):Ne(Pt),Te(Pt,n)}var Dn=null,Cu=!1,Fc=!1;function X0(t){Dn===null?Dn=[t]:Dn.push(t)}function A1(t){Cu=!0,X0(t)}function Br(){if(!Fc&&Dn!==null){Fc=!0;var t=0,e=_e;try{var n=Dn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,Cu=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(t+1)),E0(Lh,Br),s}finally{_e=e,Fc=!1}}return null}var Bs=[],$s=0,Bl=null,$l=0,Qt=[],Yt=0,cs=null,Vn=1,On="";function Zr(t,e){Bs[$s++]=$l,Bs[$s++]=Bl,Bl=t,$l=e}function J0(t,e,n){Qt[Yt++]=Vn,Qt[Yt++]=On,Qt[Yt++]=cs,cs=t;var r=Vn;t=On;var s=32-dn(r)-1;r&=~(1<<s),n+=1;var i=32-dn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vn=1<<32-dn(e)+s|n<<s|r,On=i+t}else Vn=1<<i|n<<s|r,On=t}function Wh(t){t.return!==null&&(Zr(t,1),J0(t,1,0))}function Kh(t){for(;t===Bl;)Bl=Bs[--$s],Bs[$s]=null,$l=Bs[--$s],Bs[$s]=null;for(;t===cs;)cs=Qt[--Yt],Qt[Yt]=null,On=Qt[--Yt],Qt[Yt]=null,Vn=Qt[--Yt],Qt[Yt]=null}var zt=null,Ft=null,Ce=!1,cn=null;function Z0(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Om(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ft=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:Vn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ft=null,!0):!1;default:return!1}}function Dd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vd(t){if(Ce){var e=Ft;if(e){var n=e;if(!Om(t,e)){if(Dd(t))throw Error(B(418));e=Sr(n.nextSibling);var r=zt;e&&Om(t,e)?Z0(r,n):(t.flags=t.flags&-4097|2,Ce=!1,zt=t)}}else{if(Dd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ce=!1,zt=t}}}function Lm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Xa(t){if(t!==zt)return!1;if(!Ce)return Lm(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ad(t.type,t.memoizedProps)),e&&(e=Ft)){if(Dd(t))throw ev(),Error(B(418));for(;e;)Z0(t,e),e=Sr(e.nextSibling)}if(Lm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=zt?Sr(t.stateNode.nextSibling):null;return!0}function ev(){for(var t=Ft;t;)t=Sr(t.nextSibling)}function li(){Ft=zt=null,Ce=!1}function Gh(t){cn===null?cn=[t]:cn.push(t)}var P1=Jn.ReactCurrentBatchConfig;function Zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ja(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mm(t){var e=t._init;return e(t._payload)}function tv(t){function e(S,T){if(t){var k=S.deletions;k===null?(S.deletions=[T],S.flags|=16):k.push(T)}}function n(S,T){if(!t)return null;for(;T!==null;)e(S,T),T=T.sibling;return null}function r(S,T){for(S=new Map;T!==null;)T.key!==null?S.set(T.key,T):S.set(T.index,T),T=T.sibling;return S}function s(S,T){return S=Cr(S,T),S.index=0,S.sibling=null,S}function i(S,T,k){return S.index=k,t?(k=S.alternate,k!==null?(k=k.index,k<T?(S.flags|=2,T):k):(S.flags|=2,T)):(S.flags|=1048576,T)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,T,k,V){return T===null||T.tag!==6?(T=Wc(k,S.mode,V),T.return=S,T):(T=s(T,k),T.return=S,T)}function c(S,T,k,V){var L=k.type;return L===Os?p(S,T,k.props.children,V,k.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===dr&&Mm(L)===T.type)?(V=s(T,k.props),V.ref=Zi(S,T,k),V.return=S,V):(V=xl(k.type,k.key,k.props,null,S.mode,V),V.ref=Zi(S,T,k),V.return=S,V)}function h(S,T,k,V){return T===null||T.tag!==4||T.stateNode.containerInfo!==k.containerInfo||T.stateNode.implementation!==k.implementation?(T=Kc(k,S.mode,V),T.return=S,T):(T=s(T,k.children||[]),T.return=S,T)}function p(S,T,k,V,L){return T===null||T.tag!==7?(T=as(k,S.mode,V,L),T.return=S,T):(T=s(T,k),T.return=S,T)}function m(S,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Wc(""+T,S.mode,k),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case za:return k=xl(T.type,T.key,T.props,null,S.mode,k),k.ref=Zi(S,null,T),k.return=S,k;case Vs:return T=Kc(T,S.mode,k),T.return=S,T;case dr:var V=T._init;return m(S,V(T._payload),k)}if(so(T)||Gi(T))return T=as(T,S.mode,k,null),T.return=S,T;Ja(S,T)}return null}function v(S,T,k,V){var L=T!==null?T.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return L!==null?null:l(S,T,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case za:return k.key===L?c(S,T,k,V):null;case Vs:return k.key===L?h(S,T,k,V):null;case dr:return L=k._init,v(S,T,L(k._payload),V)}if(so(k)||Gi(k))return L!==null?null:p(S,T,k,V,null);Ja(S,k)}return null}function C(S,T,k,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return S=S.get(k)||null,l(T,S,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case za:return S=S.get(V.key===null?k:V.key)||null,c(T,S,V,L);case Vs:return S=S.get(V.key===null?k:V.key)||null,h(T,S,V,L);case dr:var D=V._init;return C(S,T,k,D(V._payload),L)}if(so(V)||Gi(V))return S=S.get(k)||null,p(T,S,V,L,null);Ja(T,V)}return null}function P(S,T,k,V){for(var L=null,D=null,x=T,y=T=0,w=null;x!==null&&y<k.length;y++){x.index>y?(w=x,x=null):w=x.sibling;var E=v(S,x,k[y],V);if(E===null){x===null&&(x=w);break}t&&x&&E.alternate===null&&e(S,x),T=i(E,T,y),D===null?L=E:D.sibling=E,D=E,x=w}if(y===k.length)return n(S,x),Ce&&Zr(S,y),L;if(x===null){for(;y<k.length;y++)x=m(S,k[y],V),x!==null&&(T=i(x,T,y),D===null?L=x:D.sibling=x,D=x);return Ce&&Zr(S,y),L}for(x=r(S,x);y<k.length;y++)w=C(x,S,y,k[y],V),w!==null&&(t&&w.alternate!==null&&x.delete(w.key===null?y:w.key),T=i(w,T,y),D===null?L=w:D.sibling=w,D=w);return t&&x.forEach(function(N){return e(S,N)}),Ce&&Zr(S,y),L}function R(S,T,k,V){var L=Gi(k);if(typeof L!="function")throw Error(B(150));if(k=L.call(k),k==null)throw Error(B(151));for(var D=L=null,x=T,y=T=0,w=null,E=k.next();x!==null&&!E.done;y++,E=k.next()){x.index>y?(w=x,x=null):w=x.sibling;var N=v(S,x,E.value,V);if(N===null){x===null&&(x=w);break}t&&x&&N.alternate===null&&e(S,x),T=i(N,T,y),D===null?L=N:D.sibling=N,D=N,x=w}if(E.done)return n(S,x),Ce&&Zr(S,y),L;if(x===null){for(;!E.done;y++,E=k.next())E=m(S,E.value,V),E!==null&&(T=i(E,T,y),D===null?L=E:D.sibling=E,D=E);return Ce&&Zr(S,y),L}for(x=r(S,x);!E.done;y++,E=k.next())E=C(x,S,y,E.value,V),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),T=i(E,T,y),D===null?L=E:D.sibling=E,D=E);return t&&x.forEach(function(b){return e(S,b)}),Ce&&Zr(S,y),L}function M(S,T,k,V){if(typeof k=="object"&&k!==null&&k.type===Os&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case za:e:{for(var L=k.key,D=T;D!==null;){if(D.key===L){if(L=k.type,L===Os){if(D.tag===7){n(S,D.sibling),T=s(D,k.props.children),T.return=S,S=T;break e}}else if(D.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===dr&&Mm(L)===D.type){n(S,D.sibling),T=s(D,k.props),T.ref=Zi(S,D,k),T.return=S,S=T;break e}n(S,D);break}else e(S,D);D=D.sibling}k.type===Os?(T=as(k.props.children,S.mode,V,k.key),T.return=S,S=T):(V=xl(k.type,k.key,k.props,null,S.mode,V),V.ref=Zi(S,T,k),V.return=S,S=V)}return o(S);case Vs:e:{for(D=k.key;T!==null;){if(T.key===D)if(T.tag===4&&T.stateNode.containerInfo===k.containerInfo&&T.stateNode.implementation===k.implementation){n(S,T.sibling),T=s(T,k.children||[]),T.return=S,S=T;break e}else{n(S,T);break}else e(S,T);T=T.sibling}T=Kc(k,S.mode,V),T.return=S,S=T}return o(S);case dr:return D=k._init,M(S,T,D(k._payload),V)}if(so(k))return P(S,T,k,V);if(Gi(k))return R(S,T,k,V);Ja(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,T!==null&&T.tag===6?(n(S,T.sibling),T=s(T,k),T.return=S,S=T):(n(S,T),T=Wc(k,S.mode,V),T.return=S,S=T),o(S)):n(S,T)}return M}var ui=tv(!0),nv=tv(!1),ql=zr(null),Hl=null,qs=null,Qh=null;function Yh(){Qh=qs=Hl=null}function Xh(t){var e=ql.current;Ne(ql),t._currentValue=e}function Od(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Js(t,e){Hl=t,Qh=qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(Qh!==t)if(t={context:t,memoizedValue:e,next:null},qs===null){if(Hl===null)throw Error(B(308));qs=t,Hl.dependencies={lanes:0,firstContext:t}}else qs=qs.next=t;return e}var rs=null;function Jh(t){rs===null?rs=[t]:rs.push(t)}function rv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hr=!1;function Zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Jh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}function Fm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wl(t,e,n,r){var s=t.updateQueue;hr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,l=i;do{var v=l.lane,C=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,R=l;switch(v=e,C=n,R.tag){case 1:if(P=R.payload,typeof P=="function"){m=P.call(C,m,v);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,v=typeof P=="function"?P.call(C,m,v):P,v==null)break e;m=je({},m,v);break e;case 2:hr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else C={eventTime:C,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=C,c=m):p=p.next=C,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hs|=o,t.lanes=o,t.memoizedState=m}}function Um(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var ia={},wn=zr(ia),Uo=zr(ia),zo=zr(ia);function ss(t){if(t===ia)throw Error(B(174));return t}function ef(t,e){switch(Te(zo,e),Te(Uo,t),Te(wn,ia),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gd(e,t)}Ne(wn),Te(wn,e)}function ci(){Ne(wn),Ne(Uo),Ne(zo)}function iv(t){ss(zo.current);var e=ss(wn.current),n=gd(e,t.type);e!==n&&(Te(Uo,t),Te(wn,n))}function tf(t){Uo.current===t&&(Ne(wn),Ne(Uo))}var Pe=zr(0);function Kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uc=[];function nf(){for(var t=0;t<Uc.length;t++)Uc[t]._workInProgressVersionPrimary=null;Uc.length=0}var ml=Jn.ReactCurrentDispatcher,zc=Jn.ReactCurrentBatchConfig,ds=0,Re=null,Ke=null,Je=null,Gl=!1,xo=!1,Bo=0,R1=0;function ct(){throw Error(B(321))}function rf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function sf(t,e,n,r,s,i){if(ds=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ml.current=t===null||t.memoizedState===null?O1:L1,t=n(r,s),xo){i=0;do{if(xo=!1,Bo=0,25<=i)throw Error(B(301));i+=1,Je=Ke=null,e.updateQueue=null,ml.current=M1,t=n(r,s)}while(xo)}if(ml.current=Ql,e=Ke!==null&&Ke.next!==null,ds=0,Je=Ke=Re=null,Gl=!1,e)throw Error(B(300));return t}function of(){var t=Bo!==0;return Bo=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Re.memoizedState=Je=t:Je=Je.next=t,Je}function tn(){if(Ke===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Je===null?Re.memoizedState:Je.next;if(e!==null)Je=e,Ke=t;else{if(t===null)throw Error(B(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Je===null?Re.memoizedState=Je=t:Je=Je.next=t}return Je}function $o(t,e){return typeof e=="function"?e(t):e}function Bc(t){var e=tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var p=h.lane;if((ds&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Re.lanes|=p,hs|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,fn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $c(t){var e=tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);fn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ov(){}function av(t,e){var n=Re,r=tn(),s=e(),i=!fn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,af(cv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,qo(9,uv.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(B(349));ds&30||lv(n,e,s)}return s}function lv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uv(t,e,n,r){e.value=n,e.getSnapshot=r,dv(e)&&hv(t)}function cv(t,e,n){return n(function(){dv(e)&&hv(t)})}function dv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function hv(t){var e=Hn(t,1);e!==null&&hn(e,t,1,-1)}function zm(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},e.queue=t,t=t.dispatch=V1.bind(null,Re,t),[e.memoizedState,t]}function qo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fv(){return tn().memoizedState}function gl(t,e,n,r){var s=yn();Re.flags|=t,s.memoizedState=qo(1|e,n,void 0,r===void 0?null:r)}function Au(t,e,n,r){var s=tn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&rf(r,o.deps)){s.memoizedState=qo(e,n,i,r);return}}Re.flags|=t,s.memoizedState=qo(1|e,n,i,r)}function Bm(t,e){return gl(8390656,8,t,e)}function af(t,e){return Au(2048,8,t,e)}function pv(t,e){return Au(4,2,t,e)}function mv(t,e){return Au(4,4,t,e)}function gv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yv(t,e,n){return n=n!=null?n.concat([t]):null,Au(4,4,gv.bind(null,e,t),n)}function lf(){}function vv(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _v(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xv(t,e,n){return ds&21?(fn(n,e)||(n=S0(),Re.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function j1(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=zc.transition;zc.transition={};try{t(!1),e()}finally{_e=n,zc.transition=r}}function wv(){return tn().memoizedState}function D1(t,e,n){var r=Nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ev(t))Tv(e,n);else if(n=rv(t,e,n,r),n!==null){var s=Et();hn(n,t,r,s),Iv(n,e,r)}}function V1(t,e,n){var r=Nr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ev(t))Tv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,fn(l,o)){var c=e.interleaved;c===null?(s.next=s,Jh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=rv(t,e,s,r),n!==null&&(s=Et(),hn(n,t,r,s),Iv(n,e,r))}}function Ev(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function Tv(t,e){xo=Gl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Iv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}var Ql={readContext:en,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},O1={readContext:en,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:Bm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,gv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=D1.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:zm,useDebugValue:lf,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=zm(!1),e=t[0];return t=j1.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=yn();if(Ce){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Ze===null)throw Error(B(349));ds&30||lv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Bm(cv.bind(null,r,i,t),[t]),r.flags|=2048,qo(9,uv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yn(),e=Ze.identifierPrefix;if(Ce){var n=On,r=Vn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=R1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L1={readContext:en,useCallback:vv,useContext:en,useEffect:af,useImperativeHandle:yv,useInsertionEffect:pv,useLayoutEffect:mv,useMemo:_v,useReducer:Bc,useRef:fv,useState:function(){return Bc($o)},useDebugValue:lf,useDeferredValue:function(t){var e=tn();return xv(e,Ke.memoizedState,t)},useTransition:function(){var t=Bc($o)[0],e=tn().memoizedState;return[t,e]},useMutableSource:ov,useSyncExternalStore:av,useId:wv,unstable_isNewReconciler:!1},M1={readContext:en,useCallback:vv,useContext:en,useEffect:af,useImperativeHandle:yv,useInsertionEffect:pv,useLayoutEffect:mv,useMemo:_v,useReducer:$c,useRef:fv,useState:function(){return $c($o)},useDebugValue:lf,useDeferredValue:function(t){var e=tn();return Ke===null?e.memoizedState=t:xv(e,Ke.memoizedState,t)},useTransition:function(){var t=$c($o)[0],e=tn().memoizedState;return[t,e]},useMutableSource:ov,useSyncExternalStore:av,useId:wv,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ld(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pu={isMounted:function(t){return(t=t._reactInternals)?ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Nr(t),i=Un(r,s);i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(hn(e,t,s,r),pl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Nr(t),i=Un(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(hn(e,t,s,r),pl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Nr(t),s=Un(n,r);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,r),e!==null&&(hn(e,t,r,n),pl(e,t,r))}};function $m(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function Sv(t,e,n){var r=!1,s=Vr,i=e.contextType;return typeof i=="object"&&i!==null?i=en(i):(s=Rt(e)?us:yt.current,r=e.contextTypes,i=(r=r!=null)?ai(t,s):Vr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function qm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pu.enqueueReplaceState(e,e.state,null)}function Md(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=en(i):(i=Rt(e)?us:yt.current,s.context=ai(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ld(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pu.enqueueReplaceState(s,s.state,null),Wl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function di(t,e){try{var n="",r=e;do n+=hE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F1=typeof WeakMap=="function"?WeakMap:Map;function bv(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xl||(Xl=!0,Qd=r),Fd(t,e)},n}function kv(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Fd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fd(t,e),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new F1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Z1.bind(null,t,e,n),e.then(t,t))}function Wm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Km(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var U1=Jn.ReactCurrentOwner,At=!1;function wt(t,e,n,r){e.child=t===null?nv(e,null,n,r):ui(e,t.child,n,r)}function Gm(t,e,n,r,s){n=n.render;var i=e.ref;return Js(e,s),r=sf(t,e,n,r,i,s),n=of(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ce&&n&&Wh(e),e.flags|=1,wt(t,e,r,s),e.child)}function Qm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Nv(t,e,i,r,s)):(t=xl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(o,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Cr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Nv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return Ud(t,e,n,r,s)}function Cv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ws,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ws,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ws,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ws,Mt),Mt|=r;return wt(t,e,s,n),e.child}function Av(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ud(t,e,n,r,s){var i=Rt(n)?us:yt.current;return i=ai(e,i),Js(e,s),n=sf(t,e,n,r,i,s),r=of(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ce&&r&&Wh(e),e.flags|=1,wt(t,e,n,s),e.child)}function Ym(t,e,n,r,s){if(Rt(n)){var i=!0;zl(e)}else i=!1;if(Js(e,s),e.stateNode===null)yl(t,e),Sv(e,n,r),Md(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=en(h):(h=Rt(n)?us:yt.current,h=ai(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&qm(e,o,r,h),hr=!1;var v=e.memoizedState;o.state=v,Wl(e,r,o,s),c=e.memoizedState,l!==r||v!==c||Pt.current||hr?(typeof p=="function"&&(Ld(e,n,p,r),c=e.memoizedState),(l=hr||$m(e,n,l,r,v,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:ln(e.type,l),o.props=h,m=e.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=en(c):(c=Rt(n)?us:yt.current,c=ai(e,c));var C=n.getDerivedStateFromProps;(p=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==c)&&qm(e,o,r,c),hr=!1,v=e.memoizedState,o.state=v,Wl(e,r,o,s);var P=e.memoizedState;l!==m||v!==P||Pt.current||hr?(typeof C=="function"&&(Ld(e,n,C,r),P=e.memoizedState),(h=hr||$m(e,n,h,r,v,P,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return zd(t,e,n,r,i,s)}function zd(t,e,n,r,s,i){Av(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Vm(e,n,!1),Wn(t,e,i);r=e.stateNode,U1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ui(e,t.child,null,i),e.child=ui(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&Vm(e,n,!0),e.child}function Pv(t){var e=t.stateNode;e.pendingContext?Dm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dm(t,e.context,!1),ef(t,e.containerInfo)}function Xm(t,e,n,r,s){return li(),Gh(s),e.flags|=256,wt(t,e,n,r),e.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function $d(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rv(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Pe,s&1),t===null)return Vd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Du(o,r,0,null),t=as(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$d(n),e.memoizedState=Bd,t):uf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return z1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Cr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Cr(l,i):(i=as(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$d(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bd,r}return i=t.child,t=i.sibling,r=Cr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uf(t,e){return e=Du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Za(t,e,n,r){return r!==null&&Gh(r),ui(e,t.child,null,n),t=uf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function z1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=qc(Error(B(422))),Za(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Du({mode:"visible",children:r.children},s,0,null),i=as(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ui(e,t.child,null,o),e.child.memoizedState=$d(o),e.memoizedState=Bd,i);if(!(e.mode&1))return Za(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=qc(i,r,void 0),Za(t,e,o,r)}if(l=(o&t.childLanes)!==0,At||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),hn(r,t,s,-1))}return mf(),r=qc(Error(B(421))),Za(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=Sr(s.nextSibling),zt=e,Ce=!0,cn=null,t!==null&&(Qt[Yt++]=Vn,Qt[Yt++]=On,Qt[Yt++]=cs,Vn=t.id,On=t.overflow,cs=e),e=uf(e,r.children),e.flags|=4096,e)}function Jm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Od(t.return,e,n)}function Hc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function jv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jm(t,n,e);else if(t.tag===19)Jm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hc(e,!0,n,null,i);break;case"together":Hc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B1(t,e,n){switch(e.tag){case 3:Pv(e),li();break;case 5:iv(e);break;case 1:Rt(e.type)&&zl(e);break;case 4:ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(ql,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Rv(t,e,n):(Te(Pe,Pe.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);Te(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Cv(t,e,n)}return Wn(t,e,n)}var Dv,qd,Vv,Ov;Dv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qd=function(){};Vv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ss(wn.current);var i=null;switch(n){case"input":s=hd(t,s),r=hd(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=md(t,s),r=md(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fl)}yd(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Co.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Co.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ke("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ov=function(t,e,n,r){n!==r&&(e.flags|=4)};function eo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $1(t,e,n){var r=e.pendingProps;switch(Kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Rt(e.type)&&Ul(),dt(e),null;case 3:return r=e.stateNode,ci(),Ne(Pt),Ne(yt),nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(Jd(cn),cn=null))),qd(t,e),dt(e),null;case 5:tf(e);var s=ss(zo.current);if(n=e.type,t!==null&&e.stateNode!=null)Vv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return dt(e),null}if(t=ss(wn.current),Xa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vn]=e,r[Fo]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<oo.length;s++)ke(oo[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":am(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":um(r,i),ke("invalid",r)}yd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),s=["children",""+l]):Co.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":Ba(r),lm(r,i,!0);break;case"textarea":Ba(r),cm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vn]=e,t[Fo]=r,Dv(t,e,!1,!1),e.stateNode=t;e:{switch(o=vd(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<oo.length;s++)ke(oo[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":am(t,r),s=hd(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),ke("invalid",t);break;case"textarea":um(t,r),s=md(t,r),ke("invalid",t);break;default:s=r}yd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?f0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&d0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ao(t,c):typeof c=="number"&&Ao(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Co.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",t):c!=null&&Rh(t,i,c,o))}switch(n){case"input":Ba(t),lm(t,r,!1);break;case"textarea":Ba(t),cm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Gs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Gs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)Ov(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ss(zo.current),ss(wn.current),Xa(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Ya(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ya(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return dt(e),null;case 13:if(Ne(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Ft!==null&&e.mode&1&&!(e.flags&128))ev(),li(),e.flags|=98560,i=!1;else if(i=Xa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[vn]=e}else li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else cn!==null&&(Jd(cn),cn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Qe===0&&(Qe=3):mf())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return ci(),qd(t,e),t===null&&Lo(e.stateNode.containerInfo),dt(e),null;case 10:return Xh(e.type._context),dt(e),null;case 17:return Rt(e.type)&&Ul(),dt(e),null;case 19:if(Ne(Pe),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)eo(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kl(t),o!==null){for(e.flags|=128,eo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>hi&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Kl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return dt(e),null}else 2*$e()-i.renderingStartTime>hi&&n!==1073741824&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=Pe.current,Te(Pe,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return pf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function q1(t,e){switch(Kh(e),e.tag){case 1:return Rt(e.type)&&Ul(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ci(),Ne(Pt),Ne(yt),nf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tf(e),null;case 13:if(Ne(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Pe),null;case 4:return ci(),null;case 10:return Xh(e.type._context),null;case 22:case 23:return pf(),null;case 24:return null;default:return null}}var el=!1,mt=!1,H1=typeof WeakSet=="function"?WeakSet:Set,G=null;function Hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Hd(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Zm=!1;function W1(t,e){if(Nd=Ol,t=z0(),Hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,v=null;t:for(;;){for(var C;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(C=m.firstChild)!==null;)v=m,m=C;for(;;){if(m===t)break t;if(v===n&&++h===s&&(l=o),v===i&&++p===r&&(c=o),(C=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=C}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:t,selectionRange:n},Ol=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,M=P.memoizedState,S=e.stateNode,T=S.getSnapshotBeforeUpdate(e.elementType===e.type?R:ln(e.type,R),M);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(V){Fe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return P=Zm,Zm=!1,P}function wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hd(e,n,i)}s=s.next}while(s!==r)}}function Ru(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lv(t){var e=t.alternate;e!==null&&(t.alternate=null,Lv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Fo],delete e[Rd],delete e[N1],delete e[C1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mv(t){return t.tag===5||t.tag===3||t.tag===4}function eg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fl));else if(r!==4&&(t=t.child,t!==null))for(Kd(t,e,n),t=t.sibling;t!==null;)Kd(t,e,n),t=t.sibling}function Gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}var tt=null,un=!1;function or(t,e,n){for(n=n.child;n!==null;)Fv(t,e,n),n=n.sibling}function Fv(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Iu,n)}catch{}switch(n.tag){case 5:mt||Hs(n,e);case 6:var r=tt,s=un;tt=null,or(t,e,n),tt=r,un=s,tt!==null&&(un?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(un?(t=tt,n=n.stateNode,t.nodeType===8?Mc(t.parentNode,n):t.nodeType===1&&Mc(t,n),Do(t)):Mc(tt,n.stateNode));break;case 4:r=tt,s=un,tt=n.stateNode.containerInfo,un=!0,or(t,e,n),tt=r,un=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hd(n,e,o),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!mt&&(Hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,or(t,e,n),mt=r):or(t,e,n);break;default:or(t,e,n)}}function tg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new H1),e.forEach(function(r){var s=tT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,un=!1;break e;case 3:tt=l.stateNode.containerInfo,un=!0;break e;case 4:tt=l.stateNode.containerInfo,un=!0;break e}l=l.return}if(tt===null)throw Error(B(160));Fv(i,o,s),tt=null,un=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Fe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Uv(e,t),e=e.sibling}function Uv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),gn(t),r&4){try{wo(3,t,t.return),Ru(3,t)}catch(R){Fe(t,t.return,R)}try{wo(5,t,t.return)}catch(R){Fe(t,t.return,R)}}break;case 1:an(e,t),gn(t),r&512&&n!==null&&Hs(n,n.return);break;case 5:if(an(e,t),gn(t),r&512&&n!==null&&Hs(n,n.return),t.flags&32){var s=t.stateNode;try{Ao(s,"")}catch(R){Fe(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&l0(s,i),vd(l,o);var h=vd(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?f0(s,m):p==="dangerouslySetInnerHTML"?d0(s,m):p==="children"?Ao(s,m):Rh(s,p,m,h)}switch(l){case"input":fd(s,i);break;case"textarea":u0(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?Gs(s,!!i.multiple,C,!1):v!==!!i.multiple&&(i.defaultValue!=null?Gs(s,!!i.multiple,i.defaultValue,!0):Gs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fo]=i}catch(R){Fe(t,t.return,R)}}break;case 6:if(an(e,t),gn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Fe(t,t.return,R)}}break;case 3:if(an(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Do(e.containerInfo)}catch(R){Fe(t,t.return,R)}break;case 4:an(e,t),gn(t);break;case 13:an(e,t),gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hf=$e())),r&4&&tg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(h=mt)||p,an(e,t),mt=h):an(e,t),gn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(G=t,p=t.child;p!==null;){for(m=G=p;G!==null;){switch(v=G,C=v.child,v.tag){case 0:case 11:case 14:case 15:wo(4,v,v.return);break;case 1:Hs(v,v.return);var P=v.stateNode;if(typeof P.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(R){Fe(r,n,R)}}break;case 5:Hs(v,v.return);break;case 22:if(v.memoizedState!==null){rg(m);continue}}C!==null?(C.return=v,G=C):rg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=h0("display",o))}catch(R){Fe(t,t.return,R)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(R){Fe(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:an(e,t),gn(t),r&4&&tg(t);break;case 21:break;default:an(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Mv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ao(s,""),r.flags&=-33);var i=eg(t);Gd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=eg(t);Kd(t,l,o);break;default:throw Error(B(161))}}catch(c){Fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function K1(t,e,n){G=t,zv(t)}function zv(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||el;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||mt;l=el;var h=mt;if(el=o,(mt=c)&&!h)for(G=s;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?sg(s):c!==null?(c.return=o,G=c):sg(s);for(;i!==null;)G=i,zv(i),i=i.sibling;G=s,el=l,mt=h}ng(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):ng(t)}}function ng(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Ru(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Um(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Um(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Do(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}mt||e.flags&512&&Wd(e)}catch(v){Fe(e,e.return,v)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function rg(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function sg(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ru(4,e)}catch(c){Fe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Fe(e,s,c)}}var i=e.return;try{Wd(e)}catch(c){Fe(e,i,c)}break;case 5:var o=e.return;try{Wd(e)}catch(c){Fe(e,o,c)}}}catch(c){Fe(e,e.return,c)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var G1=Math.ceil,Yl=Jn.ReactCurrentDispatcher,cf=Jn.ReactCurrentOwner,Jt=Jn.ReactCurrentBatchConfig,ge=0,Ze=null,He=null,st=0,Mt=0,Ws=zr(0),Qe=0,Ho=null,hs=0,ju=0,df=0,Eo=null,Nt=null,hf=0,hi=1/0,jn=null,Xl=!1,Qd=null,kr=null,tl=!1,xr=null,Jl=0,To=0,Yd=null,vl=-1,_l=0;function Et(){return ge&6?$e():vl!==-1?vl:vl=$e()}function Nr(t){return t.mode&1?ge&2&&st!==0?st&-st:P1.transition!==null?(_l===0&&(_l=S0()),_l):(t=_e,t!==0||(t=window.event,t=t===void 0?16:R0(t.type)),t):1}function hn(t,e,n,r){if(50<To)throw To=0,Yd=null,Error(B(185));na(t,n,r),(!(ge&2)||t!==Ze)&&(t===Ze&&(!(ge&2)&&(ju|=n),Qe===4&&pr(t,st)),jt(t,r),n===1&&ge===0&&!(e.mode&1)&&(hi=$e()+500,Cu&&Br()))}function jt(t,e){var n=t.callbackNode;PE(t,e);var r=Vl(t,t===Ze?st:0);if(r===0)n!==null&&fm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fm(n),e===1)t.tag===0?A1(ig.bind(null,t)):X0(ig.bind(null,t)),b1(function(){!(ge&6)&&Br()}),n=null;else{switch(b0(r)){case 1:n=Lh;break;case 4:n=T0;break;case 16:n=Dl;break;case 536870912:n=I0;break;default:n=Dl}n=Qv(n,Bv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bv(t,e){if(vl=-1,_l=0,ge&6)throw Error(B(327));var n=t.callbackNode;if(Zs()&&t.callbackNode!==n)return null;var r=Vl(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zl(t,r);else{e=r;var s=ge;ge|=2;var i=qv();(Ze!==t||st!==e)&&(jn=null,hi=$e()+500,os(t,e));do try{X1();break}catch(l){$v(t,l)}while(!0);Yh(),Yl.current=i,ge=s,He!==null?e=0:(Ze=null,st=0,e=Qe)}if(e!==0){if(e===2&&(s=Td(t),s!==0&&(r=s,e=Xd(t,s))),e===1)throw n=Ho,os(t,0),pr(t,r),jt(t,$e()),n;if(e===6)pr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Q1(s)&&(e=Zl(t,r),e===2&&(i=Td(t),i!==0&&(r=i,e=Xd(t,i))),e===1))throw n=Ho,os(t,0),pr(t,r),jt(t,$e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:es(t,Nt,jn);break;case 3:if(pr(t,r),(r&130023424)===r&&(e=hf+500-$e(),10<e)){if(Vl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pd(es.bind(null,t,Nt,jn),e);break}es(t,Nt,jn);break;case 4:if(pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-dn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G1(r/1960))-r,10<r){t.timeoutHandle=Pd(es.bind(null,t,Nt,jn),r);break}es(t,Nt,jn);break;case 5:es(t,Nt,jn);break;default:throw Error(B(329))}}}return jt(t,$e()),t.callbackNode===n?Bv.bind(null,t):null}function Xd(t,e){var n=Eo;return t.current.memoizedState.isDehydrated&&(os(t,e).flags|=256),t=Zl(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Jd(e)),t}function Jd(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function Q1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pr(t,e){for(e&=~df,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function ig(t){if(ge&6)throw Error(B(327));Zs();var e=Vl(t,0);if(!(e&1))return jt(t,$e()),null;var n=Zl(t,e);if(t.tag!==0&&n===2){var r=Td(t);r!==0&&(e=r,n=Xd(t,r))}if(n===1)throw n=Ho,os(t,0),pr(t,e),jt(t,$e()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,Nt,jn),jt(t,$e()),null}function ff(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(hi=$e()+500,Cu&&Br())}}function fs(t){xr!==null&&xr.tag===0&&!(ge&6)&&Zs();var e=ge;ge|=1;var n=Jt.transition,r=_e;try{if(Jt.transition=null,_e=1,t)return t()}finally{_e=r,Jt.transition=n,ge=e,!(ge&6)&&Br()}}function pf(){Mt=Ws.current,Ne(Ws)}function os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S1(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ul();break;case 3:ci(),Ne(Pt),Ne(yt),nf();break;case 5:tf(r);break;case 4:ci();break;case 13:Ne(Pe);break;case 19:Ne(Pe);break;case 10:Xh(r.type._context);break;case 22:case 23:pf()}n=n.return}if(Ze=t,He=t=Cr(t.current,null),st=Mt=e,Qe=0,Ho=null,df=ju=hs=0,Nt=Eo=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}rs=null}return t}function $v(t,e){do{var n=He;try{if(Yh(),ml.current=Ql,Gl){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gl=!1}if(ds=0,Je=Ke=Re=null,xo=!1,Bo=0,cf.current=null,n===null||n.return===null){Qe=1,Ho=e,He=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=st,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=Wm(o);if(C!==null){C.flags&=-257,Km(C,o,l,i,e),C.mode&1&&Hm(i,h,e),e=C,c=h;var P=e.updateQueue;if(P===null){var R=new Set;R.add(c),e.updateQueue=R}else P.add(c);break e}else{if(!(e&1)){Hm(i,h,e),mf();break e}c=Error(B(426))}}else if(Ce&&l.mode&1){var M=Wm(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Km(M,o,l,i,e),Gh(di(c,l));break e}}i=c=di(c,l),Qe!==4&&(Qe=2),Eo===null?Eo=[i]:Eo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=bv(i,c,e);Fm(i,S);break e;case 1:l=c;var T=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(kr===null||!kr.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=kv(i,l,e);Fm(i,V);break e}}i=i.return}while(i!==null)}Wv(n)}catch(L){e=L,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function qv(){var t=Yl.current;return Yl.current=Ql,t===null?Ql:t}function mf(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ze===null||!(hs&268435455)&&!(ju&268435455)||pr(Ze,st)}function Zl(t,e){var n=ge;ge|=2;var r=qv();(Ze!==t||st!==e)&&(jn=null,os(t,e));do try{Y1();break}catch(s){$v(t,s)}while(!0);if(Yh(),ge=n,Yl.current=r,He!==null)throw Error(B(261));return Ze=null,st=0,Qe}function Y1(){for(;He!==null;)Hv(He)}function X1(){for(;He!==null&&!EE();)Hv(He)}function Hv(t){var e=Gv(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?Wv(t):He=e,cf.current=null}function Wv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=q1(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=$1(n,e,Mt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function es(t,e,n){var r=_e,s=Jt.transition;try{Jt.transition=null,_e=1,J1(t,e,n,r)}finally{Jt.transition=s,_e=r}return null}function J1(t,e,n,r){do Zs();while(xr!==null);if(ge&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(RE(t,i),t===Ze&&(He=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tl||(tl=!0,Qv(Dl,function(){return Zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jt.transition,Jt.transition=null;var o=_e;_e=1;var l=ge;ge|=4,cf.current=null,W1(t,n),Uv(n,t),v1(Cd),Ol=!!Nd,Cd=Nd=null,t.current=n,K1(n),TE(),ge=l,_e=o,Jt.transition=i}else t.current=n;if(tl&&(tl=!1,xr=t,Jl=s),i=t.pendingLanes,i===0&&(kr=null),bE(n.stateNode),jt(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xl)throw Xl=!1,t=Qd,Qd=null,t;return Jl&1&&t.tag!==0&&Zs(),i=t.pendingLanes,i&1?t===Yd?To++:(To=0,Yd=t):To=0,Br(),null}function Zs(){if(xr!==null){var t=b0(Jl),e=Jt.transition,n=_e;try{if(Jt.transition=null,_e=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,Jl=0,ge&6)throw Error(B(331));var s=ge;for(ge|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(G=h;G!==null;){var p=G;switch(p.tag){case 0:case 11:case 15:wo(8,p,i)}var m=p.child;if(m!==null)m.return=p,G=m;else for(;G!==null;){p=G;var v=p.sibling,C=p.return;if(Lv(p),p===h){G=null;break}if(v!==null){v.return=C,G=v;break}G=C}}}var P=i.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var M=R.sibling;R.sibling=null,R=M}while(R!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wo(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,G=S;break e}G=i.return}}var T=t.current;for(G=T;G!==null;){o=G;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,G=k;else e:for(o=T;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ru(9,l)}}catch(L){Fe(l,l.return,L)}if(l===o){G=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,G=V;break e}G=l.return}}if(ge=s,Br(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Iu,t)}catch{}r=!0}return r}finally{_e=n,Jt.transition=e}}return!1}function og(t,e,n){e=di(n,e),e=bv(t,e,1),t=br(t,e,1),e=Et(),t!==null&&(na(t,1,e),jt(t,e))}function Fe(t,e,n){if(t.tag===3)og(t,t,n);else for(;e!==null;){if(e.tag===3){og(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){t=di(n,t),t=kv(e,t,1),e=br(e,t,1),t=Et(),e!==null&&(na(e,1,t),jt(e,t));break}}e=e.return}}function Z1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(Qe===4||Qe===3&&(st&130023424)===st&&500>$e()-hf?os(t,0):df|=n),jt(t,e)}function Kv(t,e){e===0&&(t.mode&1?(e=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):e=1);var n=Et();t=Hn(t,e),t!==null&&(na(t,e,n),jt(t,n))}function eT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kv(t,n)}function tT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Kv(t,n)}var Gv;Gv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,B1(t,e,n);At=!!(t.flags&131072)}else At=!1,Ce&&e.flags&1048576&&J0(e,$l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yl(t,e),t=e.pendingProps;var s=ai(e,yt.current);Js(e,n),s=sf(null,e,r,t,s,n);var i=of();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,zl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zh(e),s.updater=Pu,e.stateNode=s,s._reactInternals=e,Md(e,r,t,n),e=zd(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Wh(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rT(r),t=ln(r,t),s){case 0:e=Ud(null,e,r,t,n);break e;case 1:e=Ym(null,e,r,t,n);break e;case 11:e=Gm(null,e,r,t,n);break e;case 14:e=Qm(null,e,r,ln(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Ud(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Ym(t,e,r,s,n);case 3:e:{if(Pv(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,sv(t,e),Wl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=di(Error(B(423)),e),e=Xm(t,e,r,n,s);break e}else if(r!==s){s=di(Error(B(424)),e),e=Xm(t,e,r,n,s);break e}else for(Ft=Sr(e.stateNode.containerInfo.firstChild),zt=e,Ce=!0,cn=null,n=nv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),r===s){e=Wn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return iv(e),t===null&&Vd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ad(r,s)?o=null:i!==null&&Ad(r,i)&&(e.flags|=32),Av(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Vd(e),null;case 13:return Rv(t,e,n);case 4:return ef(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ui(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Gm(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(ql,r._currentValue),r._currentValue=o,i!==null)if(fn(i.value,o)){if(i.children===s.children&&!Pt.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Un(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Od(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Od(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Js(e,n),s=en(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=ln(r,e.pendingProps),s=ln(r.type,s),Qm(t,e,r,s,n);case 15:return Nv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),yl(t,e),e.tag=1,Rt(r)?(t=!0,zl(e)):t=!1,Js(e,n),Sv(e,r,s),Md(e,r,s,n),zd(null,e,r,!0,t,n);case 19:return jv(t,e,n);case 22:return Cv(t,e,n)}throw Error(B(156,e.tag))};function Qv(t,e){return E0(t,e)}function nT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new nT(t,e,n,r)}function gf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rT(t){if(typeof t=="function")return gf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dh)return 11;if(t===Vh)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Os:return as(n.children,s,i,e);case jh:o=8,s|=8;break;case ld:return t=Xt(12,n,e,s|2),t.elementType=ld,t.lanes=i,t;case ud:return t=Xt(13,n,e,s),t.elementType=ud,t.lanes=i,t;case cd:return t=Xt(19,n,e,s),t.elementType=cd,t.lanes=i,t;case i0:return Du(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case r0:o=10;break e;case s0:o=9;break e;case Dh:o=11;break e;case Vh:o=14;break e;case dr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function as(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function Du(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=i0,t.lanes=n,t.stateNode={isHidden:!1},t}function Wc(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Kc(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yf(t,e,n,r,s,i,o,l,c){return t=new sT(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zh(i),t}function iT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yv(t){if(!t)return Vr;t=t._reactInternals;e:{if(ws(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Rt(n))return Y0(t,n,e)}return e}function Xv(t,e,n,r,s,i,o,l,c){return t=yf(n,r,!0,t,s,i,o,l,c),t.context=Yv(null),n=t.current,r=Et(),s=Nr(n),i=Un(r,s),i.callback=e??null,br(n,i,s),t.current.lanes=s,na(t,s,r),jt(t,r),t}function Vu(t,e,n,r){var s=e.current,i=Et(),o=Nr(s);return n=Yv(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(s,e,o),t!==null&&(hn(t,s,o,i),pl(t,s,o)),o}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ag(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vf(t,e){ag(t,e),(t=t.alternate)&&ag(t,e)}function oT(){return null}var Jv=typeof reportError=="function"?reportError:function(t){console.error(t)};function _f(t){this._internalRoot=t}Ou.prototype.render=_f.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Vu(t,e,null,null)};Ou.prototype.unmount=_f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Vu(null,t,null,null)}),e[qn]=null}};function Ou(t){this._internalRoot=t}Ou.prototype.unstable_scheduleHydration=function(t){if(t){var e=C0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fr.length&&e!==0&&e<fr[n].priority;n++);fr.splice(n,0,t),n===0&&P0(t)}};function xf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lg(){}function aT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=eu(o);i.call(h)}}var o=Xv(e,r,t,0,null,!1,!1,"",lg);return t._reactRootContainer=o,t[qn]=o.current,Lo(t.nodeType===8?t.parentNode:t),fs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=eu(c);l.call(h)}}var c=yf(t,0,!1,null,null,!1,!1,"",lg);return t._reactRootContainer=c,t[qn]=c.current,Lo(t.nodeType===8?t.parentNode:t),fs(function(){Vu(e,c,n,r)}),c}function Mu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=eu(o);l.call(c)}}Vu(e,o,t,s)}else o=aT(n,e,t,s,r);return eu(o)}k0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=io(e.pendingLanes);n!==0&&(Mh(e,n|1),jt(e,$e()),!(ge&6)&&(hi=$e()+500,Br()))}break;case 13:fs(function(){var r=Hn(t,1);if(r!==null){var s=Et();hn(r,t,1,s)}}),vf(t,1)}};Fh=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=Et();hn(e,t,134217728,n)}vf(t,134217728)}};N0=function(t){if(t.tag===13){var e=Nr(t),n=Hn(t,e);if(n!==null){var r=Et();hn(n,t,e,r)}vf(t,e)}};C0=function(){return _e};A0=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};xd=function(t,e,n){switch(e){case"input":if(fd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nu(r);if(!s)throw Error(B(90));a0(r),fd(r,s)}}}break;case"textarea":u0(t,n);break;case"select":e=n.value,e!=null&&Gs(t,!!n.multiple,e,!1)}};g0=ff;y0=fs;var lT={usingClientEntryPoint:!1,Events:[sa,Us,Nu,p0,m0,ff]},to={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uT={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x0(t),t===null?null:t.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||oT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{Iu=nl.inject(uT),xn=nl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lT;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xf(e))throw Error(B(200));return iT(t,e,null,n)};$t.createRoot=function(t,e){if(!xf(t))throw Error(B(299));var n=!1,r="",s=Jv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yf(t,1,!1,null,null,n,!1,r,s),t[qn]=e.current,Lo(t.nodeType===8?t.parentNode:t),new _f(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=x0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return fs(t)};$t.hydrate=function(t,e,n){if(!Lu(e))throw Error(B(200));return Mu(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!xf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Jv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Xv(e,null,t,1,n??null,s,!1,i,o),t[qn]=e.current,Lo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ou(e)};$t.render=function(t,e,n){if(!Lu(e))throw Error(B(200));return Mu(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Lu(t))throw Error(B(40));return t._reactRootContainer?(fs(function(){Mu(null,null,t,!1,function(){t._reactRootContainer=null,t[qn]=null})}),!0):!1};$t.unstable_batchedUpdates=ff;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Mu(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function Zv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zv)}catch(t){console.error(t)}}Zv(),Zy.exports=$t;var cT=Zy.exports,ug=cT;od.createRoot=ug.createRoot,od.hydrateRoot=ug.hydrateRoot;var cg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},t_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,C=h&63;c||(C=64,o||(v=64)),r.push(n[p],n[m],n[v],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(e_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new hT;const v=i<<2|l>>4;if(r.push(v),h!==64){const C=l<<4&240|h>>2;if(r.push(C),m!==64){const P=h<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fT=function(t){const e=e_(t);return t_.encodeByteArray(e,!0)},tu=function(t){return fT(t).replace(/\./g,"")},n_=function(t){try{return t_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=()=>pT().__FIREBASE_DEFAULTS__,gT=()=>{if(typeof process>"u"||typeof cg>"u")return;const t=cg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&n_(t[1]);return e&&JSON.parse(e)},Fu=()=>{try{return mT()||gT()||yT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},r_=t=>{var e,n;return(n=(e=Fu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vT=t=>{const e=r_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},s_=()=>{var t;return(t=Fu())===null||t===void 0?void 0:t.config},i_=t=>{var e;return(e=Fu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tu(JSON.stringify(n)),tu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function ET(){var t;const e=(t=Fu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ST(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bT(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kT(){return!ET()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NT(){try{return typeof indexedDB=="object"}catch{return!1}}function CT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="FirebaseError";class Zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AT,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?PT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Zn(s,l,r)}}function PT(t,e){return t.replace(RT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RT=/\{\$([^}]+)}/g;function jT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(dg(i)&&dg(o)){if(!nu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function dg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ao(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function lo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DT(t,e){const n=new VT(t,e);return n.subscribe.bind(n)}class VT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Gc),s.error===void 0&&(s.error=Gc),s.complete===void 0&&(s.complete=Gc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _T;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FT(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MT(t){return t===ts?void 0:t}function FT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const zT={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},BT=pe.INFO,$T={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},qT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$T[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=BT,this._logHandler=qT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const HT=(t,e)=>e.some(n=>t instanceof n);let hg,fg;function WT(){return hg||(hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KT(){return fg||(fg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o_=new WeakMap,Zd=new WeakMap,a_=new WeakMap,Qc=new WeakMap,Ef=new WeakMap;function GT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&o_.set(n,t)}).catch(()=>{}),Ef.set(e,t),e}function QT(t){if(Zd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zd.set(t,e)}let eh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||a_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YT(t){eh=t(eh)}function XT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yc(this),e,...n);return a_.set(r,e.sort?e.sort():[e]),Ar(r)}:KT().includes(t)?function(...e){return t.apply(Yc(this),e),Ar(o_.get(this))}:function(...e){return Ar(t.apply(Yc(this),e))}}function JT(t){return typeof t=="function"?XT(t):(t instanceof IDBTransaction&&QT(t),HT(t,WT())?new Proxy(t,eh):t)}function Ar(t){if(t instanceof IDBRequest)return GT(t);if(Qc.has(t))return Qc.get(t);const e=JT(t);return e!==t&&(Qc.set(t,e),Ef.set(e,t)),e}const Yc=t=>Ef.get(t);function ZT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ar(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ar(o.result),c.oldVersion,c.newVersion,Ar(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const eI=["get","getKey","getAll","getAllKeys","count"],tI=["put","add","delete","clear"],Xc=new Map;function pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eI.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return Xc.set(e,i),i}YT(t=>({...t,get:(e,n,r)=>pg(e,n)||t.get(e,n,r),has:(e,n)=>!!pg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const th="@firebase/app",mg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new wf("@firebase/app"),sI="@firebase/app-compat",iI="@firebase/analytics-compat",oI="@firebase/analytics",aI="@firebase/app-check-compat",lI="@firebase/app-check",uI="@firebase/auth",cI="@firebase/auth-compat",dI="@firebase/database",hI="@firebase/data-connect",fI="@firebase/database-compat",pI="@firebase/functions",mI="@firebase/functions-compat",gI="@firebase/installations",yI="@firebase/installations-compat",vI="@firebase/messaging",_I="@firebase/messaging-compat",xI="@firebase/performance",wI="@firebase/performance-compat",EI="@firebase/remote-config",TI="@firebase/remote-config-compat",II="@firebase/storage",SI="@firebase/storage-compat",bI="@firebase/firestore",kI="@firebase/vertexai-preview",NI="@firebase/firestore-compat",CI="firebase",AI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="[DEFAULT]",PI={[th]:"fire-core",[sI]:"fire-core-compat",[oI]:"fire-analytics",[iI]:"fire-analytics-compat",[lI]:"fire-app-check",[aI]:"fire-app-check-compat",[uI]:"fire-auth",[cI]:"fire-auth-compat",[dI]:"fire-rtdb",[hI]:"fire-data-connect",[fI]:"fire-rtdb-compat",[pI]:"fire-fn",[mI]:"fire-fn-compat",[gI]:"fire-iid",[yI]:"fire-iid-compat",[vI]:"fire-fcm",[_I]:"fire-fcm-compat",[xI]:"fire-perf",[wI]:"fire-perf-compat",[EI]:"fire-rc",[TI]:"fire-rc-compat",[II]:"fire-gcs",[SI]:"fire-gcs-compat",[bI]:"fire-fst",[NI]:"fire-fst-compat",[kI]:"fire-vertex","fire-js":"fire-js",[CI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,RI=new Map,rh=new Map;function gg(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fi(t){const e=t.name;if(rh.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;rh.set(e,t);for(const n of ru.values())gg(n,t);for(const n of RI.values())gg(n,t);return!0}function Tf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new oa("app","Firebase",jI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=AI;function l_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Pr.create("bad-app-name",{appName:String(s)});if(n||(n=s_()),!n)throw Pr.create("no-options");const i=ru.get(s);if(i){if(nu(n,i.options)&&nu(r,i.config))return i;throw Pr.create("duplicate-app",{appName:s})}const o=new UT(s);for(const c of rh.values())o.addComponent(c);const l=new DI(n,r,o);return ru.set(s,l),l}function u_(t=nh){const e=ru.get(t);if(!e&&t===nh&&s_())return l_();if(!e)throw Pr.create("no-app",{appName:t});return e}function Rr(t,e,n){var r;let s=(r=PI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(l.join(" "));return}fi(new ps(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="firebase-heartbeat-database",OI=1,Wo="firebase-heartbeat-store";let Jc=null;function c_(){return Jc||(Jc=ZT(VI,OI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pr.create("idb-open",{originalErrorMessage:t.message})})),Jc}async function LI(t){try{const n=(await c_()).transaction(Wo),r=await n.objectStore(Wo).get(d_(t));return await n.done,r}catch(e){if(e instanceof Zn)Kn.warn(e.message);else{const n=Pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function yg(t,e){try{const r=(await c_()).transaction(Wo,"readwrite");await r.objectStore(Wo).put(e,d_(t)),await r.done}catch(n){if(n instanceof Zn)Kn.warn(n.message);else{const r=Pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function d_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=1024,FI=30*24*60*60*1e3;class UI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=FI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vg(),{heartbeatsToSend:r,unsentEntries:s}=zI(this._heartbeatsCache.heartbeats),i=tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function vg(){return new Date().toISOString().substring(0,10)}function zI(t,e=MI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_g(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_g(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NT()?CT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _g(t){return tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){fi(new ps("platform-logger",e=>new nI(e),"PRIVATE")),fi(new ps("heartbeat",e=>new UI(e),"PRIVATE")),Rr(th,mg,t),Rr(th,mg,"esm2017"),Rr("fire-js","")}$I("");function If(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function h_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qI=h_,f_=new oa("auth","Firebase",h_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new wf("@firebase/auth");function HI(t,...e){su.logLevel<=pe.WARN&&su.warn(`Auth (${bi}): ${t}`,...e)}function wl(t,...e){su.logLevel<=pe.ERROR&&su.error(`Auth (${bi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,...e){throw Sf(t,...e)}function En(t,...e){return Sf(t,...e)}function p_(t,e,n){const r=Object.assign(Object.assign({},qI()),{[e]:n});return new oa("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return p_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return f_.create(t,...e)}function se(t,e,...n){if(!t)throw Sf(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wl(e),new Error(e)}function Gn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WI(){return xg()==="http:"||xg()==="https:"}function xg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WI()||IT()||"connection"in navigator)?navigator.onLine:!0}function GI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gn(n>e,"Short delay should be less than long delay!"),this.isMobile=wT()||ST()}get(){return KI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t,e){Gn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new la(3e4,6e4);function er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nn(t,e,n,r,s={}){return g_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=aa(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return TT()||(h.referrerPolicy="no-referrer"),m_.fetch()(y_(t,t.config.apiHost,n,l),h)})}async function g_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},QI),e);try{const s=new JI(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw rl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw rl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw rl(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw p_(t,p,h);pn(t,p)}}catch(s){if(s instanceof Zn)throw s;pn(t,"network-request-failed",{message:String(s)})}}async function ua(t,e,n,r,s={}){const i=await Nn(t,e,n,r,s);return"mfaPendingCredential"in i&&pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function y_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?bf(t.config,s):`${t.config.apiScheme}://${s}`}function XI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),YI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=En(t,e,r);return s.customData._tokenResponse=n,s}function wg(t){return t!==void 0&&t.enterprise!==void 0}class ZI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function eS(t,e){return Nn(t,"GET","/v2/recaptchaConfig",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e){return Nn(t,"POST","/v1/accounts:delete",e)}async function v_(t,e){return Nn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nS(t,e=!1){const n=We(t),r=await n.getIdToken(e),s=kf(r);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Io(Zc(s.auth_time)),issuedAtTime:Io(Zc(s.iat)),expirationTime:Io(Zc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Zc(t){return Number(t)*1e3}function kf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wl("JWT malformed, contained fewer than 3 sections"),null;try{const s=n_(n);return s?JSON.parse(s):(wl("Failed to decode base64 JWT payload"),null)}catch(s){return wl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Eg(t){const e=kf(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zn&&rS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Io(this.lastLoginAt),this.creationTime=Io(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pi(t,v_(n,{idToken:r}));se(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?__(i.providerUserInfo):[],l=oS(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new ih(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function iS(t){const e=We(t);await iu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function __(t){return t.map(e=>{var{providerId:n}=e,r=If(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(t,e){const n=await g_(t,{},async()=>{const r=aa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=y_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",m_.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lS(t,e){return Nn(t,"POST","/v2/accounts:revokeToken",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Eg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=Eg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await aS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ei;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(se(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ei,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=If(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ih(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pi(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nS(this,e)}reload(){return iS(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await iu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await pi(this,tS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,C=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,M=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(h=n.createdAt)!==null&&h!==void 0?h:void 0,T=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:k,emailVerified:V,isAnonymous:L,providerData:D,stsTokenManager:x}=n;se(k&&x,e,"internal-error");const y=ei.fromJSON(this.name,x);se(typeof k=="string",e,"internal-error"),ar(m,e.name),ar(v,e.name),se(typeof V=="boolean",e,"internal-error"),se(typeof L=="boolean",e,"internal-error"),ar(C,e.name),ar(P,e.name),ar(R,e.name),ar(M,e.name),ar(S,e.name),ar(T,e.name);const w=new Mn({uid:k,auth:e,email:v,emailVerified:V,displayName:m,isAnonymous:L,photoURL:P,phoneNumber:C,tenantId:R,stsTokenManager:y,createdAt:S,lastLoginAt:T});return D&&Array.isArray(D)&&(w.providerData=D.map(E=>Object.assign({},E))),M&&(w._redirectEventId=M),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new ei;s.updateFromServerResponse(n);const i=new Mn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await iu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?__(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ei;l.updateFromIdToken(r);const c=new Mn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ih(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;function Fn(t){Gn(t instanceof Function,"Expected a class definition");let e=Tg.get(t);return e?(Gn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}x_.type="NONE";const Ig=x_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t,e,n){return`firebase:${t}:${e}:${n}`}class ti{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=El(this.userKey,s.apiKey,i),this.fullPersistenceKey=El("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ti(Fn(Ig),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Fn(Ig);const o=El(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Mn._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ti(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new ti(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b_(e))return"Blackberry";if(k_(e))return"Webos";if(E_(e))return"Safari";if((e.includes("chrome/")||T_(e))&&!e.includes("edge/"))return"Chrome";if(S_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function w_(t=vt()){return/firefox\//i.test(t)}function E_(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T_(t=vt()){return/crios\//i.test(t)}function I_(t=vt()){return/iemobile/i.test(t)}function S_(t=vt()){return/android/i.test(t)}function b_(t=vt()){return/blackberry/i.test(t)}function k_(t=vt()){return/webos/i.test(t)}function Nf(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uS(t=vt()){var e;return Nf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cS(){return bT()&&document.documentMode===10}function N_(t=vt()){return Nf(t)||S_(t)||k_(t)||b_(t)||/windows phone/i.test(t)||I_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e=[]){let n;switch(t){case"Browser":n=Sg(vt());break;case"Worker":n=`${Sg(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e={}){return Nn(t,"GET","/v2/passwordPolicy",er(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=6;class pS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bg(this),this.idTokenSubscription=new bg(this),this.beforeStateQueue=new dS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ti.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await v_(this,{idToken:e}),r=await Mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await iu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(zn(this));const n=e?We(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hS(this),n=new pS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await ti.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $r(t){return We(t)}class bg{constructor(e){this.auth=e,this.observer=null,this.addObserver=DT(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gS(t){Uu=t}function A_(t){return Uu.loadJS(t)}function yS(){return Uu.recaptchaEnterpriseScript}function vS(){return Uu.gapiScript}function _S(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const xS="recaptcha-enterprise",wS="NO_RECAPTCHA";class ES{constructor(e){this.type=xS,this.auth=$r(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{eS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new ZI(c);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;wg(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(wS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&wg(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=yS();c.length!==0&&(c+=l),A_(c).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function kg(t,e,n,r=!1){const s=new ES(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ou(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await kg(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await kg(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e){const n=Tf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(nu(i,e??{}))return s;pn(s,"already-initialized")}return n.initialize({options:e})}function IS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SS(t,e,n){const r=$r(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=P_(e),{host:o,port:l}=bS(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),kS()}function P_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bS(t){const e=P_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ng(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ng(o)}}}function Ng(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function NS(t,e){return Nn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",er(t,e))}async function AS(t,e){return Nn(t,"POST","/v1/accounts:sendOobCode",er(t,e))}async function PS(t,e){return AS(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}async function jS(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends Cf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ko(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ko(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ou(e,n,"signInWithPassword",CS);case"emailLink":return RS(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ou(e,r,"signUpPassword",NS);case"emailLink":return jS(e,{idToken:n,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="http://localhost";class ms extends Cf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=If(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ni(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ni(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ni(e,n)}buildRequest(){const e={requestUri:DS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=aa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OS(t){const e=ao(lo(t)).link,n=e?ao(lo(e)).deep_link_id:null,r=ao(lo(t)).deep_link_id;return(r?ao(lo(r)).link:null)||r||n||e||t}class Af{constructor(e){var n,r,s,i,o,l;const c=ao(lo(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=VS((s=c.mode)!==null&&s!==void 0?s:null);se(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=OS(e);try{return new Af(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.providerId=Es.PROVIDER_ID}static credential(e,n){return Ko._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Af.parseLink(n);return se(r,"argument-error"),Ko._fromEmailAndCode(e,r.code,r.tenantId)}}Es.PROVIDER_ID="password";Es.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Es.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends R_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends ca{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends ca{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends ca{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(t,e){return ua(t,"POST","/v1/accounts:signUp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Mn._fromIdTokenResponse(e,r,s),o=Cg(r);return new gs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Cg(r);return new gs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Cg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,au.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new au(e,n,r,s)}}function j_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?au._fromErrorAndOperation(t,i,e,r):i})}async function MS(t,e,n=!1){const r=await pi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D_(t,e,n=!1){const{auth:r}=t;if(_n(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const i=await pi(t,j_(r,s,e,t),n);se(i.idToken,r,"internal-error");const o=kf(i.idToken);se(o,r,"internal-error");const{sub:l}=o;return se(t.uid===l,r,"user-mismatch"),gs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&pn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V_(t,e,n=!1){if(_n(t.app))return Promise.reject(zn(t));const r="signIn",s=await j_(t,r,e),i=await gs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function FS(t,e){return V_($r(t),e)}async function US(t,e){return D_(We(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O_(t){const e=$r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zS(t,e,n){const r=$r(t);await ou(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",PS)}async function BS(t,e,n){if(_n(t.app))return Promise.reject(zn(t));const r=$r(t),o=await ou(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LS).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&O_(t),c}),l=await gs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Ag(t,e,n){return _n(t.app)?Promise.reject(zn(t)):FS(We(t),Es.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&O_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t,e){return Nn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=We(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await pi(r,$S(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function HS(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function WS(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function KS(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function Pg(t){return We(t).signOut()}const lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lu,"1"),this.storage.removeItem(lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=1e3,QS=10;class M_ extends L_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);cS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}M_.type="LOCAL";const YS=M_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends L_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}F_.type="SESSION";const U_=F_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new zu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await XS(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Pf("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const v=m;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(v.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function ZS(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function eb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nb(){return z_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="firebaseLocalStorageDb",rb=1,uu="firebaseLocalStorage",$_="fbase_key";class da{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bu(t,e){return t.transaction([uu],e?"readwrite":"readonly").objectStore(uu)}function sb(){const t=indexedDB.deleteDatabase(B_);return new da(t).toPromise()}function oh(){const t=indexedDB.open(B_,rb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uu,{keyPath:$_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uu)?e(r):(r.close(),await sb(),e(await oh()))})})}async function Rg(t,e,n){const r=Bu(t,!0).put({[$_]:e,value:n});return new da(r).toPromise()}async function ib(t,e){const n=Bu(t,!1).get(e),r=await new da(n).toPromise();return r===void 0?null:r.value}function jg(t,e){const n=Bu(t,!0).delete(e);return new da(n).toPromise()}const ob=800,ab=3;class q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ab)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zu._getInstance(nb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eb(),!this.activeServiceWorker)return;this.sender=new JS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oh();return await Rg(e,lu,"1"),await jg(e,lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ib(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Bu(s,!1).getAll();return new da(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ob)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q_.type="LOCAL";const lb=q_;new la(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t,e){return e?Fn(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends Cf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ni(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ni(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ni(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cb(t){return V_(t.auth,new Rf(t),t.bypassAuthState)}function db(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),D_(n,new Rf(t),t.bypassAuthState)}async function hb(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),MS(n,new Rf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cb;case"linkViaPopup":case"linkViaRedirect":return hb;case"reauthViaPopup":case"reauthViaRedirect":return db;default:pn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new la(2e3,1e4);class Ks extends H_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ks.currentPopupAction&&Ks.currentPopupAction.cancel(),Ks.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=Pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ks.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fb.get())};e()}}Ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="pendingRedirect",Tl=new Map;class mb extends H_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tl.get(this.auth._key());if(!e){try{const r=await gb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tl.set(this.auth._key(),e)}return this.bypassAuthState||Tl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gb(t,e){const n=_b(e),r=vb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function yb(t,e){Tl.set(t._key(),e)}function vb(t){return Fn(t._redirectPersistence)}function _b(t){return El(pb,t.config.apiKey,t.name)}async function xb(t,e,n=!1){if(_n(t.app))return Promise.reject(zn(t));const r=$r(t),s=ub(r,e),o=await new mb(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=10*60*1e3;class Eb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!W_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dg(e))}saveEventToCache(e){this.cachedEventUids.add(Dg(e)),this.lastProcessedEventTime=Date.now()}}function Dg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function W_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Tb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ib(t,e={}){return Nn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bb=/^https?/;async function kb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ib(t);for(const n of e)try{if(Nb(n))return}catch{}pn(t,"unauthorized-domain")}function Nb(t){const e=sh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bb.test(n))return!1;if(Sb.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=new la(3e4,6e4);function Vg(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ab(t){return new Promise((e,n)=>{var r,s,i;function o(){Vg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vg(),n(En(t,"network-request-failed"))},timeout:Cb.get()})}if(!((s=(r=Tn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Tn().gapi)===null||i===void 0)&&i.load)o();else{const l=_S("iframefcb");return Tn()[l]=()=>{gapi.load?o():n(En(t,"network-request-failed"))},A_(`${vS()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Il=null,e})}let Il=null;function Pb(t){return Il=Il||Ab(t),Il}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=new la(5e3,15e3),jb="__/auth/iframe",Db="emulator/auth/iframe",Vb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ob=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lb(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bf(e,Db):`https://${t.config.authDomain}/${jb}`,r={apiKey:e.apiKey,appName:t.name,v:bi},s=Ob.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${aa(r).slice(1)}`}async function Mb(t){const e=await Pb(t),n=Tn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:Lb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),l=Tn().setTimeout(()=>{i(o)},Rb.get());function c(){Tn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ub=500,zb=600,Bb="_blank",$b="http://localhost";class Og{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qb(t,e,n,r=Ub,s=zb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Fb),{width:r.toString(),height:s.toString(),top:i,left:o}),h=vt().toLowerCase();n&&(l=T_(h)?Bb:n),w_(h)&&(e=e||$b,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[C,P])=>`${v}${C}=${P},`,"");if(uS(h)&&l!=="_self")return Hb(e||"",l),new Og(null);const m=window.open(e||"",l,p);se(m,t,"popup-blocked");try{m.focus()}catch{}return new Og(m)}function Hb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="__/auth/handler",Kb="emulator/auth/handler",Gb=encodeURIComponent("fac");async function Lg(t,e,n,r,s,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bi,eventId:s};if(e instanceof R_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof ca){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${Gb}=${encodeURIComponent(c)}`:"";return`${Qb(t)}?${aa(l).slice(1)}${h}`}function Qb({config:t}){return t.emulator?bf(t,Kb):`https://${t.authDomain}/${Wb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="webStorageSupport";class Yb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U_,this._completeRedirectFn=xb,this._overrideRedirectResult=yb}async _openPopup(e,n,r,s){var i;Gn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Lg(e,n,r,sh(),s);return qb(e,o,Pf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Lg(e,n,r,sh(),s);return ZS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Gn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Mb(e),r=new Eb(e);return n.register("authEvent",s=>(se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ed,{type:ed},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ed];o!==void 0&&n(!!o),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return N_()||E_()||Nf()}}const Xb=Yb;var Mg="@firebase/auth",Fg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ek(t){fi(new ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C_(t)},h=new mS(r,s,i,c);return IS(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fi(new ps("auth-internal",e=>{const n=$r(e.getProvider("auth").getImmediate());return(r=>new Jb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(Mg,Fg,Zb(t)),Rr(Mg,Fg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=5*60,nk=i_("authIdTokenMaxAge")||tk;let Ug=null;const rk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nk)return;const s=n==null?void 0:n.token;Ug!==s&&(Ug=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sk(t=u_()){const e=Tf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=TS(t,{popupRedirectResolver:Xb,persistence:[lb,YS,U_]}),r=i_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=rk(i.toString());WS(n,o,()=>o(n.currentUser)),HS(n,l=>o(l))}}const s=r_("auth");return s&&SS(n,`http://${s}`),n}function ik(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=En("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ik().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ek("Browser");var zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,K_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function w(){}w.prototype=y.prototype,x.D=y.prototype,x.prototype=new w,x.prototype.constructor=x,x.C=function(E,N,b){for(var I=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)I[Ve-2]=arguments[Ve];return y.prototype[N].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)E[N]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(N=0;16>N;++N)E[N]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=x.g[0],w=x.g[1],N=x.g[2];var b=x.g[3],I=y+(b^w&(N^b))+E[0]+3614090360&4294967295;y=w+(I<<7&4294967295|I>>>25),I=b+(N^y&(w^N))+E[1]+3905402710&4294967295,b=y+(I<<12&4294967295|I>>>20),I=N+(w^b&(y^w))+E[2]+606105819&4294967295,N=b+(I<<17&4294967295|I>>>15),I=w+(y^N&(b^y))+E[3]+3250441966&4294967295,w=N+(I<<22&4294967295|I>>>10),I=y+(b^w&(N^b))+E[4]+4118548399&4294967295,y=w+(I<<7&4294967295|I>>>25),I=b+(N^y&(w^N))+E[5]+1200080426&4294967295,b=y+(I<<12&4294967295|I>>>20),I=N+(w^b&(y^w))+E[6]+2821735955&4294967295,N=b+(I<<17&4294967295|I>>>15),I=w+(y^N&(b^y))+E[7]+4249261313&4294967295,w=N+(I<<22&4294967295|I>>>10),I=y+(b^w&(N^b))+E[8]+1770035416&4294967295,y=w+(I<<7&4294967295|I>>>25),I=b+(N^y&(w^N))+E[9]+2336552879&4294967295,b=y+(I<<12&4294967295|I>>>20),I=N+(w^b&(y^w))+E[10]+4294925233&4294967295,N=b+(I<<17&4294967295|I>>>15),I=w+(y^N&(b^y))+E[11]+2304563134&4294967295,w=N+(I<<22&4294967295|I>>>10),I=y+(b^w&(N^b))+E[12]+1804603682&4294967295,y=w+(I<<7&4294967295|I>>>25),I=b+(N^y&(w^N))+E[13]+4254626195&4294967295,b=y+(I<<12&4294967295|I>>>20),I=N+(w^b&(y^w))+E[14]+2792965006&4294967295,N=b+(I<<17&4294967295|I>>>15),I=w+(y^N&(b^y))+E[15]+1236535329&4294967295,w=N+(I<<22&4294967295|I>>>10),I=y+(N^b&(w^N))+E[1]+4129170786&4294967295,y=w+(I<<5&4294967295|I>>>27),I=b+(w^N&(y^w))+E[6]+3225465664&4294967295,b=y+(I<<9&4294967295|I>>>23),I=N+(y^w&(b^y))+E[11]+643717713&4294967295,N=b+(I<<14&4294967295|I>>>18),I=w+(b^y&(N^b))+E[0]+3921069994&4294967295,w=N+(I<<20&4294967295|I>>>12),I=y+(N^b&(w^N))+E[5]+3593408605&4294967295,y=w+(I<<5&4294967295|I>>>27),I=b+(w^N&(y^w))+E[10]+38016083&4294967295,b=y+(I<<9&4294967295|I>>>23),I=N+(y^w&(b^y))+E[15]+3634488961&4294967295,N=b+(I<<14&4294967295|I>>>18),I=w+(b^y&(N^b))+E[4]+3889429448&4294967295,w=N+(I<<20&4294967295|I>>>12),I=y+(N^b&(w^N))+E[9]+568446438&4294967295,y=w+(I<<5&4294967295|I>>>27),I=b+(w^N&(y^w))+E[14]+3275163606&4294967295,b=y+(I<<9&4294967295|I>>>23),I=N+(y^w&(b^y))+E[3]+4107603335&4294967295,N=b+(I<<14&4294967295|I>>>18),I=w+(b^y&(N^b))+E[8]+1163531501&4294967295,w=N+(I<<20&4294967295|I>>>12),I=y+(N^b&(w^N))+E[13]+2850285829&4294967295,y=w+(I<<5&4294967295|I>>>27),I=b+(w^N&(y^w))+E[2]+4243563512&4294967295,b=y+(I<<9&4294967295|I>>>23),I=N+(y^w&(b^y))+E[7]+1735328473&4294967295,N=b+(I<<14&4294967295|I>>>18),I=w+(b^y&(N^b))+E[12]+2368359562&4294967295,w=N+(I<<20&4294967295|I>>>12),I=y+(w^N^b)+E[5]+4294588738&4294967295,y=w+(I<<4&4294967295|I>>>28),I=b+(y^w^N)+E[8]+2272392833&4294967295,b=y+(I<<11&4294967295|I>>>21),I=N+(b^y^w)+E[11]+1839030562&4294967295,N=b+(I<<16&4294967295|I>>>16),I=w+(N^b^y)+E[14]+4259657740&4294967295,w=N+(I<<23&4294967295|I>>>9),I=y+(w^N^b)+E[1]+2763975236&4294967295,y=w+(I<<4&4294967295|I>>>28),I=b+(y^w^N)+E[4]+1272893353&4294967295,b=y+(I<<11&4294967295|I>>>21),I=N+(b^y^w)+E[7]+4139469664&4294967295,N=b+(I<<16&4294967295|I>>>16),I=w+(N^b^y)+E[10]+3200236656&4294967295,w=N+(I<<23&4294967295|I>>>9),I=y+(w^N^b)+E[13]+681279174&4294967295,y=w+(I<<4&4294967295|I>>>28),I=b+(y^w^N)+E[0]+3936430074&4294967295,b=y+(I<<11&4294967295|I>>>21),I=N+(b^y^w)+E[3]+3572445317&4294967295,N=b+(I<<16&4294967295|I>>>16),I=w+(N^b^y)+E[6]+76029189&4294967295,w=N+(I<<23&4294967295|I>>>9),I=y+(w^N^b)+E[9]+3654602809&4294967295,y=w+(I<<4&4294967295|I>>>28),I=b+(y^w^N)+E[12]+3873151461&4294967295,b=y+(I<<11&4294967295|I>>>21),I=N+(b^y^w)+E[15]+530742520&4294967295,N=b+(I<<16&4294967295|I>>>16),I=w+(N^b^y)+E[2]+3299628645&4294967295,w=N+(I<<23&4294967295|I>>>9),I=y+(N^(w|~b))+E[0]+4096336452&4294967295,y=w+(I<<6&4294967295|I>>>26),I=b+(w^(y|~N))+E[7]+1126891415&4294967295,b=y+(I<<10&4294967295|I>>>22),I=N+(y^(b|~w))+E[14]+2878612391&4294967295,N=b+(I<<15&4294967295|I>>>17),I=w+(b^(N|~y))+E[5]+4237533241&4294967295,w=N+(I<<21&4294967295|I>>>11),I=y+(N^(w|~b))+E[12]+1700485571&4294967295,y=w+(I<<6&4294967295|I>>>26),I=b+(w^(y|~N))+E[3]+2399980690&4294967295,b=y+(I<<10&4294967295|I>>>22),I=N+(y^(b|~w))+E[10]+4293915773&4294967295,N=b+(I<<15&4294967295|I>>>17),I=w+(b^(N|~y))+E[1]+2240044497&4294967295,w=N+(I<<21&4294967295|I>>>11),I=y+(N^(w|~b))+E[8]+1873313359&4294967295,y=w+(I<<6&4294967295|I>>>26),I=b+(w^(y|~N))+E[15]+4264355552&4294967295,b=y+(I<<10&4294967295|I>>>22),I=N+(y^(b|~w))+E[6]+2734768916&4294967295,N=b+(I<<15&4294967295|I>>>17),I=w+(b^(N|~y))+E[13]+1309151649&4294967295,w=N+(I<<21&4294967295|I>>>11),I=y+(N^(w|~b))+E[4]+4149444226&4294967295,y=w+(I<<6&4294967295|I>>>26),I=b+(w^(y|~N))+E[11]+3174756917&4294967295,b=y+(I<<10&4294967295|I>>>22),I=N+(y^(b|~w))+E[2]+718787259&4294967295,N=b+(I<<15&4294967295|I>>>17),I=w+(b^(N|~y))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+b&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var w=y-this.blockSize,E=this.B,N=this.h,b=0;b<y;){if(N==0)for(;b<=w;)s(this,x,b),b+=this.blockSize;if(typeof x=="string"){for(;b<y;)if(E[N++]=x.charCodeAt(b++),N==this.blockSize){s(this,E),N=0;break}}else for(;b<y;)if(E[N++]=x[b++],N==this.blockSize){s(this,E),N=0;break}}this.h=N,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var w=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=w&255,w/=256;for(this.u(x),x=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)x[w++]=this.g[y]>>>E&255;return x};function i(x,y){var w=l;return Object.prototype.hasOwnProperty.call(w,x)?w[x]:w[x]=y(x)}function o(x,y){this.h=y;for(var w=[],E=!0,N=x.length-1;0<=N;N--){var b=x[N]|0;E&&b==y||(w[N]=b,E=!1)}this.g=w}var l={};function c(x){return-128<=x&&128>x?i(x,function(y){return new o([y|0],0>y?-1:0)}):new o([x|0],0>x?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return M(h(-x));for(var y=[],w=1,E=0;x>=w;E++)y[E]=x/w|0,w*=4294967296;return new o(y,0)}function p(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return M(p(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(y,8)),E=m,N=0;N<x.length;N+=8){var b=Math.min(8,x.length-N),I=parseInt(x.substring(N,N+b),y);8>b?(b=h(Math.pow(y,b)),E=E.j(b).add(h(I))):(E=E.j(w),E=E.add(h(I)))}return E}var m=c(0),v=c(1),C=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-M(this).m();for(var x=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);x+=(0<=E?E:4294967296+E)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(P(this))return"0";if(R(this))return"-"+M(this).toString(x);for(var y=h(Math.pow(x,6)),w=this,E="";;){var N=V(w,y).g;w=S(w,N.j(y));var b=((0<w.g.length?w.g[0]:w.h)>>>0).toString(x);if(w=N,P(w))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function P(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function R(x){return x.h==-1}t.l=function(x){return x=S(this,x),R(x)?-1:P(x)?0:1};function M(x){for(var y=x.g.length,w=[],E=0;E<y;E++)w[E]=~x.g[E];return new o(w,~x.h).add(v)}t.abs=function(){return R(this)?M(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),w=[],E=0,N=0;N<=y;N++){var b=E+(this.i(N)&65535)+(x.i(N)&65535),I=(b>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);E=I>>>16,b&=65535,I&=65535,w[N]=I<<16|b}return new o(w,w[w.length-1]&-2147483648?-1:0)};function S(x,y){return x.add(M(y))}t.j=function(x){if(P(this)||P(x))return m;if(R(this))return R(x)?M(this).j(M(x)):M(M(this).j(x));if(R(x))return M(this.j(M(x)));if(0>this.l(C)&&0>x.l(C))return h(this.m()*x.m());for(var y=this.g.length+x.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var N=0;N<x.g.length;N++){var b=this.i(E)>>>16,I=this.i(E)&65535,Ve=x.i(N)>>>16,Ue=x.i(N)&65535;w[2*E+2*N]+=I*Ue,T(w,2*E+2*N),w[2*E+2*N+1]+=b*Ue,T(w,2*E+2*N+1),w[2*E+2*N+1]+=I*Ve,T(w,2*E+2*N+1),w[2*E+2*N+2]+=b*Ve,T(w,2*E+2*N+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new o(w,0)};function T(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function k(x,y){this.g=x,this.h=y}function V(x,y){if(P(y))throw Error("division by zero");if(P(x))return new k(m,m);if(R(x))return y=V(M(x),y),new k(M(y.g),M(y.h));if(R(y))return y=V(x,M(y)),new k(M(y.g),y.h);if(30<x.g.length){if(R(x)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=v,E=y;0>=E.l(x);)w=L(w),E=L(E);var N=D(w,1),b=D(E,1);for(E=D(E,2),w=D(w,2);!P(E);){var I=b.add(E);0>=I.l(x)&&(N=N.add(w),b=I),E=D(E,1),w=D(w,1)}return y=S(x,N.j(y)),new k(N,y)}for(N=m;0<=x.l(y);){for(w=Math.max(1,Math.floor(x.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=h(w),I=b.j(y);R(I)||0<I.l(x);)w-=E,b=h(w),I=b.j(y);P(b)&&(b=v),N=N.add(b),x=S(x,I)}return new k(N,x)}t.A=function(x){return V(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&x.i(E);return new o(w,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|x.i(E);return new o(w,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^x.i(E);return new o(w,this.h^x.h)};function L(x){for(var y=x.g.length+1,w=[],E=0;E<y;E++)w[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(w,x.h)}function D(x,y){var w=y>>5;y%=32;for(var E=x.g.length-w,N=[],b=0;b<E;b++)N[b]=0<y?x.i(b+w)>>>y|x.i(b+w+1)<<32-y:x.i(b+w);return new o(N,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,ls=o}).apply(typeof zg<"u"?zg:typeof self<"u"?self:typeof window<"u"?window:{});var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var G_,uo,Q_,Sl,ah,Y_,X_,J_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof sl=="object"&&sl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var A=a[g];if(!(A in f))break e;f=f[A]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,g=!1,A={next:function(){if(!g&&f<a.length){var j=f++;return{value:d(j,a[j]),done:!1}}return g=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,g),a.apply(d,A)}}return function(){return a.apply(d,arguments)}}function v(a,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function C(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,A,j){for(var $=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)$[Ee-2]=arguments[Ee];return d.prototype[A].apply(g,$)}}function R(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function M(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const A=a.length||0,j=g.length||0;a.length=A+j;for(let $=0;$<j;$++)a[A+$]=g[$]}else a.push(g)}}class S{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function T(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var L=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function D(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function x(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(f in g)a[f]=g[f];for(let j=0;j<w.length;j++)f=w[j],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function N(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function b(a){l.setTimeout(()=>{throw a},0)}function I(){var a=Z;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ve{constructor(){this.h=this.g=null}add(d,f){const g=Ue.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ue=new S(()=>new Cn,a=>a.reset());class Cn{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _t,H=!1,Z=new Ve,re=()=>{const a=l.Promise.resolve(void 0);_t=()=>{a.then(le)}};var le=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){b(f)}var d=Ue;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}H=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Vt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function Ht(a,d){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{V(d.nodeName);var A=!0;break e}catch{}A=!1}A||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ot[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ht.aa.h.call(this)}}P(Ht,Ie);var Ot={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),fe=0;function ue(a,d,f,g,A){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=A,this.key=++fe,this.da=this.fa=!1}function ze(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Oe(a){this.src=a,this.g={},this.h=0}Oe.prototype.add=function(a,d,f,g,A){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var $=Hr(a,d,g,A);return-1<$?(d=a[$],f||(d.fa=!1)):(d=new ue(d,this.src,j,!!g,A),d.fa=f,a.push(d)),d};function Wt(a,d){var f=d.type;if(f in a.g){var g=a.g[f],A=Array.prototype.indexOf.call(g,d,void 0),j;(j=0<=A)&&Array.prototype.splice.call(g,A,1),j&&(ze(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Hr(a,d,f,g){for(var A=0;A<a.length;++A){var j=a[A];if(!j.da&&j.listener==d&&j.capture==!!f&&j.ha==g)return A}return-1}var Wr="closure_lm_"+(1e6*Math.random()|0),Pi={};function _a(a,d,f,g,A){if(Array.isArray(d)){for(var j=0;j<d.length;j++)_a(a,d[j],f,g,A);return null}return f=Vi(f),a&&a[F]?a.K(d,f,h(g)?!!g.capture:!1,A):mn(a,d,f,!1,g,A)}function mn(a,d,f,g,A,j){if(!d)throw Error("Invalid event type");var $=h(A)?!!A.capture:!!A,Ee=ji(a);if(Ee||(a[Wr]=Ee=new Oe(a)),f=Ee.add(d,f,g,$,j),f.proxy)return f;if(g=bt(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)Vt||(A=$),A===void 0&&(A=!1),a.addEventListener(d.toString(),g,A);else if(a.attachEvent)a.attachEvent(xa(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function bt(){function a(f){return d.call(a.src,a.listener,f)}const d=tr;return a}function kt(a,d,f,g,A){if(Array.isArray(d))for(var j=0;j<d.length;j++)kt(a,d[j],f,g,A);else g=h(g)?!!g.capture:!!g,f=Vi(f),a&&a[F]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],f=Hr(j,f,g,A),-1<f&&(ze(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=ji(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Hr(d,f,g,A)),(f=-1<a?d[a]:null)&&Ri(f))}function Ri(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[F])Wt(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(xa(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ji(d))?(Wt(f,a),f.h==0&&(f.src=null,d[Wr]=null)):ze(a)}}}function xa(a){return a in Pi?Pi[a]:Pi[a]="on"+a}function tr(a,d){if(a.da)a=!0;else{d=new Ht(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Ri(a),a=f.call(g,d)}return a}function ji(a){return a=a[Wr],a instanceof Oe?a:null}var Di="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vi(a){return typeof a=="function"?a:(a[Di]||(a[Di]=function(d){return a.handleEvent(d)}),a[Di])}function Le(){he.call(this),this.i=new Oe(this),this.M=this,this.F=null}P(Le,he),Le.prototype[F]=!0,Le.prototype.removeEventListener=function(a,d,f,g){kt(this,a,d,f,g)};function Se(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Ie(d,a);else if(d instanceof Ie)d.target=d.target||a;else{var A=d;d=new Ie(g,a),E(d,A)}if(A=!0,f)for(var j=f.length-1;0<=j;j--){var $=d.g=f[j];A=Kr($,g,!0,d)&&A}if($=d.g=a,A=Kr($,g,!0,d)&&A,A=Kr($,g,!1,d)&&A,f)for(j=0;j<f.length;j++)$=d.g=f[j],A=Kr($,g,!1,d)&&A}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)ze(f[g]);delete a.g[d],a.h--}}this.F=null},Le.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Le.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Kr(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var A=!0,j=0;j<d.length;++j){var $=d[j];if($&&!$.da&&$.capture==f){var Ee=$.listener,et=$.ha||$.src;$.fa&&Wt(a.i,$),A=Ee.call(et,g)!==!1&&A}}return A&&!g.defaultPrevented}function nn(a,d,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function rn(a){a.g=nn(()=>{a.g=null,a.i&&(a.i=!1,rn(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class wa extends he{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(a){he.call(this),this.h=a,this.g={}}P(sn,he);var Ea=[];function Ta(a){D(a.g,function(d,f){this.g.hasOwnProperty(f)&&Ri(d)},a),a.g={}}sn.prototype.N=function(){sn.aa.N.call(this),Ta(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oi=l.JSON.stringify,ac=l.JSON.parse,lc=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Li(){}Li.prototype.h=null;function Ia(a){return a.h||(a.h=a.i())}function Sa(){}var Gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ss(){Ie.call(this,"d")}P(Ss,Ie);function Mi(){Ie.call(this,"c")}P(Mi,Ie);var An={},Fi=null;function _(){return Fi=Fi||new Le}An.La="serverreachability";function O(a){Ie.call(this,An.La,a)}P(O,Ie);function q(a){const d=_();Se(d,new O(d))}An.STAT_EVENT="statevent";function J(a,d){Ie.call(this,An.STAT_EVENT,a),this.stat=d}P(J,Ie);function K(a){const d=_();Se(d,new J(d,a))}An.Ma="timingevent";function we(a,d){Ie.call(this,An.Ma,a),this.size=d}P(we,Ie);function te(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Q(){this.g=!0}Q.prototype.xa=function(){this.g=!1};function Kt(a,d,f,g,A,j){a.info(function(){if(a.g)if(j)for(var $="",Ee=j.split("&"),et=0;et<Ee.length;et++){var ye=Ee[et].split("=");if(1<ye.length){var lt=ye[0];ye=ye[1];var ut=lt.split("_");$=2<=ut.length&&ut[1]=="type"?$+(lt+"="+ye+"&"):$+(lt+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+d+`
`+f+`
`+$})}function Qr(a,d,f,g,A,j,$){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+d+`
`+f+`
`+j+" "+$})}function nr(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+uc(a,f)+(g?" "+g:"")})}function bs(a,d){a.info(function(){return"TIMEOUT: "+d})}Q.prototype.info=function(){};function uc(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var A=g[1];if(Array.isArray(A)&&!(1>A.length)){var j=A[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<A.length;$++)A[$]=""}}}}return Oi(f)}catch{return d}}var ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cc;function ka(){}P(ka,Li),ka.prototype.g=function(){return new XMLHttpRequest},ka.prototype.i=function(){return{}},cc=new ka;function rr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yp}function yp(){this.i=null,this.g="",this.h=!1}var vp={},dc={};function hc(a,d,f){a.L=1,a.v=Pa(Pn(d)),a.m=f,a.P=!0,_p(a,null)}function _p(a,d){a.F=Date.now(),Na(a),a.A=Pn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),jp(f.i,"t",g),a.C=0,f=a.j.J,a.h=new yp,a.g=Xp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new wa(v(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(Ea[0]=A.toString()),A=Ea);for(var j=0;j<A.length;j++){var $=_a(f,A[j],g||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),q(),Kt(a.i,a.u,a.A,a.l,a.R,a.m)}rr.prototype.ca=function(a){a=a.target;const d=this.M;d&&Rn(a)==3?d.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{const ut=Rn(this.g);var d=this.g.Ba();const Cs=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||Up(this.g)))){this.J||ut!=4||d==7||(d==8||0>=Cs?q(3):q(2)),fc(this);var f=this.g.Z();this.X=f;t:if(xp(this)){var g=Up(this.g);a="";var A=g.length,j=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),Ui(this);var $="";break t}this.h.i=new l.TextDecoder}for(d=0;d<A;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(j&&d==A-1)});g.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,Qr(this.i,this.u,this.A,this.l,this.R,ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,et=this.g;if((Ee=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ee)){var ye=Ee;break t}}ye=null}if(f=ye)nr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pc(this,f);else{this.o=!1,this.s=3,K(12),Yr(this),Ui(this);break e}}if(this.P){f=!0;let on;for(;!this.J&&this.C<$.length;)if(on=_w(this,$),on==dc){ut==4&&(this.s=4,K(14),f=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(on==vp){this.s=4,K(15),nr(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else nr(this.i,this.l,on,null),pc(this,on);if(xp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||$.length!=0||this.h.h||(this.s=1,K(16),f=!1),this.o=this.o&&f,!f)nr(this.i,this.l,$,"[Invalid Chunked Response]"),Yr(this),Ui(this);else if(0<$.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),xc(lt),lt.M=!0,K(11))}}else nr(this.i,this.l,$,null),pc(this,$);ut==4&&Yr(this),this.o&&!this.J&&(ut==4?Kp(this.j,this):(this.o=!1,Na(this)))}else Ow(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,K(12)):(this.s=0,K(13)),Yr(this),Ui(this)}}}catch{}finally{}};function xp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function _w(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?dc:(f=Number(d.substring(f,g)),isNaN(f)?vp:(g+=1,g+f>d.length?dc:(d=d.slice(g,g+f),a.C=g+f,d)))}rr.prototype.cancel=function(){this.J=!0,Yr(this)};function Na(a){a.S=Date.now()+a.I,wp(a,a.I)}function wp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=te(v(a.ba,a),d)}function fc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}rr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(bs(this.i,this.A),this.L!=2&&(q(),K(17)),Yr(this),this.s=2,Ui(this)):wp(this,this.S-a)};function Ui(a){a.j.G==0||a.J||Kp(a.j,a)}function Yr(a){fc(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ta(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function pc(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||mc(f.h,a))){if(!a.K&&mc(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)La(f),Va(f);else break e;_c(f),K(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=te(v(f.Za,f),6e3));if(1>=Ip(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Jr(f,11)}else if((a.K||f.g==a)&&La(f),!T(d))for(A=f.Da.g.parse(d),d=0;d<A.length;d++){let ye=A[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];const lt=ye[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));const ut=ye[4];ut!=null&&(f.Aa=ut,f.j.info("SVER="+f.Aa));const Cs=ye[5];Cs!=null&&typeof Cs=="number"&&0<Cs&&(g=1.5*Cs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const on=a.g;if(on){const Fa=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var j=g.h;j.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(gc(j,j.h),j.h=null))}if(g.D){const wc=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;wc&&(g.ya=wc,be(g.I,g.D,wc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var $=a;if(g.qa=Yp(g,g.J?g.ia:null,g.W),$.K){Sp(g.h,$);var Ee=$,et=g.L;et&&(Ee.I=et),Ee.B&&(fc(Ee),Na(Ee)),g.g=$}else Hp(g);0<f.i.length&&Oa(f)}else ye[0]!="stop"&&ye[0]!="close"||Jr(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Jr(f,7):vc(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}q(4)}catch{}}var xw=class{constructor(a,d){this.g=a,this.map=d}};function Ep(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ip(a){return a.h?1:a.g?a.g.size:0}function mc(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function gc(a,d){a.g?a.g.add(d):a.h=d}function Sp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Ep.prototype.cancel=function(){if(this.i=bp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function bp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return R(a.i)}function ww(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function Ew(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function kp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Ew(a),g=ww(a),A=g.length,j=0;j<A;j++)d.call(void 0,g[j],f&&f[j],a)}var Np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tw(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),A=null;if(0<=g){var j=a[f].substring(0,g);A=a[f].substring(g+1)}else j=a[f];d(j,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Xr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Xr){this.h=a.h,Ca(this,a.j),this.o=a.o,this.g=a.g,Aa(this,a.s),this.l=a.l;var d=a.i,f=new $i;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Cp(this,f),this.m=a.m}else a&&(d=String(a).match(Np))?(this.h=!1,Ca(this,d[1]||"",!0),this.o=zi(d[2]||""),this.g=zi(d[3]||"",!0),Aa(this,d[4]),this.l=zi(d[5]||"",!0),Cp(this,d[6]||"",!0),this.m=zi(d[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}Xr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Bi(d,Ap,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Bi(d,Ap,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Bi(f,f.charAt(0)=="/"?bw:Sw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Bi(f,Nw)),a.join("")};function Pn(a){return new Xr(a)}function Ca(a,d,f){a.j=f?zi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Aa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Cp(a,d,f){d instanceof $i?(a.i=d,Cw(a.i,a.h)):(f||(d=Bi(d,kw)),a.i=new $i(d,a.h))}function be(a,d,f){a.i.set(d,f)}function Pa(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function zi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Bi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Iw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Iw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ap=/[#\/\?@]/g,Sw=/[#\?:]/g,bw=/[#\?]/g,kw=/[#\?@]/g,Nw=/#/g;function $i(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function sr(a){a.g||(a.g=new Map,a.h=0,a.i&&Tw(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=$i.prototype,t.add=function(a,d){sr(this),this.i=null,a=ks(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Pp(a,d){sr(a),d=ks(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Rp(a,d){return sr(a),d=ks(a,d),a.g.has(d)}t.forEach=function(a,d){sr(this),this.g.forEach(function(f,g){f.forEach(function(A){a.call(d,A,g,this)},this)},this)},t.na=function(){sr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const A=a[g];for(let j=0;j<A.length;j++)f.push(d[g])}return f},t.V=function(a){sr(this);let d=[];if(typeof a=="string")Rp(this,a)&&(d=d.concat(this.g.get(ks(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return sr(this),this.i=null,a=ks(this,a),Rp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function jp(a,d,f){Pp(a,d),0<f.length&&(a.i=null,a.g.set(ks(a,d),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const j=encodeURIComponent(String(g)),$=this.V(g);for(g=0;g<$.length;g++){var A=j;$[g]!==""&&(A+="="+encodeURIComponent(String($[g]))),a.push(A)}}return this.i=a.join("&")};function ks(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Cw(a,d){d&&!a.j&&(sr(a),a.i=null,a.g.forEach(function(f,g){var A=g.toLowerCase();g!=A&&(Pp(this,g),jp(this,A,f))},a)),a.j=d}function Aw(a,d){const f=new Q;if(l.Image){const g=new Image;g.onload=C(ir,f,"TestLoadImage: loaded",!0,d,g),g.onerror=C(ir,f,"TestLoadImage: error",!1,d,g),g.onabort=C(ir,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=C(ir,f,"TestLoadImage: timeout",!1,d,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function Pw(a,d){const f=new Q,g=new AbortController,A=setTimeout(()=>{g.abort(),ir(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(j=>{clearTimeout(A),j.ok?ir(f,"TestPingServer: ok",!0,d):ir(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(A),ir(f,"TestPingServer: error",!1,d)})}function ir(a,d,f,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(f)}catch{}}function Rw(){this.g=new lc}function jw(a,d,f){const g=f||"";try{kp(a,function(A,j){let $=A;h(A)&&($=Oi(A)),d.push(g+j+"="+encodeURIComponent($))})}catch(A){throw d.push(g+"type="+encodeURIComponent("_badmap")),A}}function Ra(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Ra,Li),Ra.prototype.g=function(){return new ja(this.l,this.j)},Ra.prototype.i=function(a){return function(){return a}}({});function ja(a,d){Le.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(ja,Le),t=ja.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Hi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?qi(this):Hi(this),this.readyState==3&&Dp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,qi(this))},t.Qa=function(a){this.g&&(this.response=a,qi(this))},t.ga=function(){this.g&&qi(this)};function qi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Hi(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Hi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Vp(a){let d="";return D(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function yc(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Vp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):be(a,d,f))}function Me(a){Le.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Me,Le);var Dw=/^https?$/i,Vw=["POST","PUT"];t=Me.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cc.g(),this.v=this.o?Ia(this.o):Ia(cc),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){Op(this,j);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)f.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const j of g.keys())f.set(j,g.get(j));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),A=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Vw,d,void 0))||g||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of f)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fp(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){Op(this,j)}};function Op(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Lp(a),Da(a)}function Lp(a){a.A||(a.A=!0,Se(a,"complete"),Se(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Se(this,"complete"),Se(this,"abort"),Da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Da(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mp(this):this.bb())},t.bb=function(){Mp(this)};function Mp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Rn(a)!=4||a.Z()!=2)){if(a.u&&Rn(a)==4)nn(a.Ea,0,a);else if(Se(a,"readystatechange"),Rn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=$===0){var A=String(a.D).match(Np)[1]||null;!A&&l.self&&l.self.location&&(A=l.self.location.protocol.slice(0,-1)),g=!Dw.test(A?A.toLowerCase():"")}f=g}if(f)Se(a,"complete"),Se(a,"success");else{a.m=6;try{var j=2<Rn(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",Lp(a)}}finally{Da(a)}}}}function Da(a,d){if(a.g){Fp(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Se(a,"ready");try{f.onreadystatechange=g}catch{}}}function Fp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),ac(d)}};function Up(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ow(a){const d={};a=(a.g&&2<=Rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(T(a[g]))continue;var f=N(a[g]);const A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=d[A]||[];d[A]=j,j.push(f)}x(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function zp(a){this.Aa=0,this.i=[],this.j=new Q,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wi("baseRetryDelayMs",5e3,a),this.cb=Wi("retryDelaySeedMs",1e4,a),this.Wa=Wi("forwardChannelMaxRetries",2,a),this.wa=Wi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ep(a&&a.concurrentRequestLimit),this.Da=new Rw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){K(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Yp(this,null,this.W),Oa(this)};function vc(a){if(Bp(a),a.G==3){var d=a.U++,f=Pn(a.I);if(be(f,"SID",a.K),be(f,"RID",d),be(f,"TYPE","terminate"),Ki(a,f),d=new rr(a,a.j,d),d.L=2,d.v=Pa(Pn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=Xp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Na(d)}Qp(a)}function Va(a){a.g&&(xc(a),a.g.cancel(),a.g=null)}function Bp(a){Va(a),a.u&&(l.clearTimeout(a.u),a.u=null),La(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Oa(a){if(!Tp(a.h)&&!a.s){a.s=!0;var d=a.Ga;_t||re(),H||(_t(),H=!0),Z.add(d,a),a.B=0}}function Lw(a,d){return Ip(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=te(v(a.Ga,a,d),Gp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const A=new rr(this,this.j,a);let j=this.o;if(this.S&&(j?(j=y(j),E(j,this.S)):j=this.S),this.m!==null||this.O||(A.H=j,j=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=qp(this,A,d),f=Pn(this.I),be(f,"RID",a),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),Ki(this,f),j&&(this.O?d="headers="+encodeURIComponent(String(Vp(j)))+"&"+d:this.m&&yc(f,this.m,j)),gc(this.h,A),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),A.T=!0,hc(A,f,null)):hc(A,f,d),this.G=2}}else this.G==3&&(a?$p(this,a):this.i.length==0||Tp(this.h)||$p(this))};function $p(a,d){var f;d?f=d.l:f=a.U++;const g=Pn(a.I);be(g,"SID",a.K),be(g,"RID",f),be(g,"AID",a.T),Ki(a,g),a.m&&a.o&&yc(g,a.m,a.o),f=new rr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=qp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),gc(a.h,f),hc(f,g,d)}function Ki(a,d){a.H&&D(a.H,function(f,g){be(d,g,f)}),a.l&&kp({},function(f,g){be(d,g,f)})}function qp(a,d,f){f=Math.min(a.i.length,f);var g=a.l?v(a.l.Na,a.l,a):null;e:{var A=a.i;let j=-1;for(;;){const $=["count="+f];j==-1?0<f?(j=A[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let Ee=!0;for(let et=0;et<f;et++){let ye=A[et].g;const lt=A[et].map;if(ye-=j,0>ye)j=Math.max(0,A[et].g-100),Ee=!1;else try{jw(lt,$,"req"+ye+"_")}catch{g&&g(lt)}}if(Ee){g=$.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function Hp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;_t||re(),H||(_t(),H=!0),Z.add(d,a),a.v=0}}function _c(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=te(v(a.Fa,a),Gp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Wp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=te(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,K(10),Va(this),Wp(this))};function xc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Wp(a){a.g=new rr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Pn(a.qa);be(d,"RID","rpc"),be(d,"SID",a.K),be(d,"AID",a.T),be(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(d,"TO",a.ja),be(d,"TYPE","xmlhttp"),Ki(a,d),a.m&&a.o&&yc(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Pa(Pn(d)),f.m=null,f.P=!0,_p(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Va(this),_c(this),K(19))};function La(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Kp(a,d){var f=null;if(a.g==d){La(a),xc(a),a.g=null;var g=2}else if(mc(a.h,d))f=d.D,Sp(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var A=a.B;g=_(),Se(g,new we(g,f)),Oa(a)}else Hp(a);else if(A=d.s,A==3||A==0&&0<d.X||!(g==1&&Lw(a,d)||g==2&&_c(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),A){case 1:Jr(a,5);break;case 4:Jr(a,10);break;case 3:Jr(a,6);break;default:Jr(a,2)}}}function Gp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Jr(a,d){if(a.j.info("Error code "+d),d==2){var f=v(a.fb,a),g=a.Xa;const A=!g;g=new Xr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ca(g,"https"),Pa(g),A?Aw(g.toString(),f):Pw(g.toString(),f)}else K(2);a.G=0,a.l&&a.l.sa(d),Qp(a),Bp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),K(2)):(this.j.info("Failed to ping google.com"),K(1))};function Qp(a){if(a.G=0,a.ka=[],a.l){const d=bp(a.h);(d.length!=0||a.i.length!=0)&&(M(a.ka,d),M(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function Yp(a,d,f){var g=f instanceof Xr?Pn(f):new Xr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Aa(g,g.s);else{var A=l.location;g=A.protocol,d=d?d+"."+A.hostname:A.hostname,A=+A.port;var j=new Xr(null);g&&Ca(j,g),d&&(j.g=d),A&&Aa(j,A),f&&(j.l=f),g=j}return f=a.D,d=a.ya,f&&d&&be(g,f,d),be(g,"VER",a.la),Ki(a,g),g}function Xp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Me(new Ra({eb:f})):new Me(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jp(){}t=Jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ma(){}Ma.prototype.g=function(a,d){return new Lt(a,d)};function Lt(a,d){Le.call(this),this.g=new zp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!T(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!T(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ns(this)}P(Lt,Le),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){vc(this.g)},Lt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Oi(a),a=f);d.i.push(new xw(d.Ya++,a)),d.G==3&&Oa(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,vc(this.g),delete this.g,Lt.aa.N.call(this)};function Zp(a){Ss.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}P(Zp,Ss);function em(){Mi.call(this),this.status=1}P(em,Mi);function Ns(a){this.g=a}P(Ns,Jp),Ns.prototype.ua=function(){Se(this.g,"a")},Ns.prototype.ta=function(a){Se(this.g,new Zp(a))},Ns.prototype.sa=function(a){Se(this.g,new em)},Ns.prototype.ra=function(){Se(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,J_=function(){return new Ma},X_=function(){return _()},Y_=An,ah={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,Sl=ba,gp.COMPLETE="complete",Q_=gp,Sa.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",Le.prototype.listen=Le.prototype.K,uo=Sa,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,G_=Me}).apply(typeof sl<"u"?sl:typeof self<"u"?self:typeof window<"u"?window:{});const Bg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new wf("@firebase/firestore");function no(){return ys.logLevel}function Y(t,...e){if(ys.logLevel<=pe.DEBUG){const n=e.map(jf);ys.debug(`Firestore (${ki}): ${t}`,...n)}}function Qn(t,...e){if(ys.logLevel<=pe.ERROR){const n=e.map(jf);ys.error(`Firestore (${ki}): ${t}`,...n)}}function mi(t,...e){if(ys.logLevel<=pe.WARN){const n=e.map(jf);ys.warn(`Firestore (${ki}): ${t}`,...n)}}function jf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ki}) INTERNAL ASSERTION FAILED: `+t;throw Qn(e),new Error(e)}function xe(t,e){t||ie()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ok{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class ak{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lk{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new Z_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new ft(e)}}class uk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ck{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new uk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new dk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=fk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function gi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Ye(0,0))}static max(){return new oe(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Go.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Go?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends Go{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const pk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Go{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return pk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new X(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new X(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ae.fromString(e))}static fromName(e){return new ee(Ae.fromString(e).popFirst(5))}static empty(){return new ee(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ae(e.slice()))}}function mk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Or(s,ee.empty(),e)}function gk(t){return new Or(t.readTime,t.key,-1)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(oe.min(),ee.empty(),-1)}static max(){return new Or(oe.max(),ee.empty(),-1)}}function yk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==vk)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function xk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Df.oe=-1;function $u(t){return t==null}function cu(t){return t===0&&1/t==-1/0}function wk(t){return typeof t=="number"&&Number.isInteger(t)&&!cu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qg(this.data.getIterator())}getIteratorFrom(e){return new qg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class qg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new it(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nx("Invalid base64 string: "+i):i}}(e);return new at(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const Ek=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(xe(!!t),typeof t=="string"){let e=0;const n=Ek.exec(t);if(xe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Of(t){const e=t.mapValue.fields.__previous_value__;return Vf(e)?Of(e):e}function Qo(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s,i,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class Yo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Yo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol={mapValue:{}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vf(t)?4:Sk(t)?9007199254740991:Ik(t)?10:11:ie()}function bn(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qo(t).isEqual(Qo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Lr(s.timestampValue),l=Lr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vs(s.bytesValue).isEqual(vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),l=Be(i.doubleValue);return o===l?cu(o)===cu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return gi(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if($g(o)!==$g(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!bn(o[c],l[c])))return!1;return!0}(t,e);default:return ie()}}function Xo(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function yi(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Be(i.integerValue||i.doubleValue),c=Be(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Hg(t.timestampValue,e.timestampValue);case 4:return Hg(Qo(t),Qo(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,o){const l=vs(i),c=vs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=ve(l[h],c[h]);if(p!==0)return p}return ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ve(Be(i.latitude),Be(o.latitude));return l!==0?l:ve(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,p;const m=i.fields||{},v=o.fields||{},C=(l=m.value)===null||l===void 0?void 0:l.arrayValue,P=(c=v.value)===null||c===void 0?void 0:c.arrayValue,R=ve(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((p=P==null?void 0:P.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:Wg(C,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ol.mapValue&&o===ol.mapValue)return 0;if(i===ol.mapValue)return 1;if(o===ol.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const v=ve(c[m],p[m]);if(v!==0)return v;const C=yi(l[c[m]],h[p[m]]);if(C!==0)return C}return ve(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Hg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Lr(t),r=Lr(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function Wg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=yi(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function vi(t){return lh(t)}function lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=lh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${lh(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function uh(t){return!!t&&"integerValue"in t}function Lf(t){return!!t&&"arrayValue"in t}function Kg(t){return!!t&&"nullValue"in t}function Gg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bl(t){return!!t&&"mapValue"in t}function Ik(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function So(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=So(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=So(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Sk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=So(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=So(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];bl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ts(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(So(this.value))}}function rx(t){const e=[];return Ts(t.fields,(n,r)=>{const s=new rt([n]);if(bl(r)){const i=rx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new gt(e,0,oe.min(),oe.min(),oe.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new gt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new gt(e,2,n,oe.min(),oe.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,oe.min(),oe.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.position=e,this.inclusive=n}}function Qg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=yi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function bk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{}class Ge extends sx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nk(e,n,r):n==="array-contains"?new Pk(e,r):n==="in"?new Rk(e,r):n==="not-in"?new jk(e,r):n==="array-contains-any"?new Dk(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ck(e,r):new Ak(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yi(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends sx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kn(e,n)}matches(e){return ix(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ix(t){return t.op==="and"}function ox(t){return kk(t)&&ix(t)}function kk(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function ch(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+vi(t.value);if(ox(t))return t.filters.map(e=>ch(e)).join(",");{const e=t.filters.map(n=>ch(n)).join(",");return`${t.op}(${e})`}}function ax(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&bn(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&ax(o,s.filters[l]),!0):!1}(t,e):void ie()}function lx(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${vi(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(lx).join(" ,")+"}"}(t):"Filter"}class Nk extends Ge{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ck extends Ge{constructor(e,n){super(e,"in",n),this.keys=ux("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ak extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=ux("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ux(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class Pk extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lf(n)&&Xo(n.arrayValue,this.value)}}class Rk extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xo(this.value.arrayValue,n)}}class jk extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xo(this.value.arrayValue,n)}}class Dk extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Xg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Vk(t,e,n,r,s,i,o)}function Mf(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ch(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vi(r)).join(",")),e.ue=n}return e.ue}function Ff(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ax(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yg(t.startAt,e.startAt)&&Yg(t.endAt,e.endAt)}function dh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ok(t,e,n,r,s,i,o,l){return new qu(t,e,n,r,s,i,o,l)}function Hu(t){return new qu(t)}function Jg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lk(t){return t.collectionGroup!==null}function bo(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new it(rt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new hu(i,r))}),n.has(rt.keyField().canonicalString())||e.ce.push(new hu(rt.keyField(),r))}return e.ce}function In(t){const e=ae(t);return e.le||(e.le=Mk(e,bo(t))),e.le}function Mk(t,e){if(t.limitType==="F")return Xg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new hu(s.field,i)});const n=t.endAt?new du(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new du(t.startAt.position,t.startAt.inclusive):null;return Xg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hh(t,e,n){return new qu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wu(t,e){return Ff(In(t),In(e))&&t.limitType===e.limitType}function cx(t){return`${Mf(In(t))}|lt:${t.limitType}`}function Ps(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>lx(s)).join(", ")}]`),$u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>vi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>vi(s)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function Ku(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of bo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=Qg(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,bo(r),s)||r.endAt&&!function(o,l,c){const h=Qg(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,bo(r),s))}(t,e)}function Fk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dx(t){return(e,n)=>{let r=!1;for(const s of bo(t)){const i=Uk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Uk(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?yi(c,h):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return tx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new De(ee.comparator);function Yn(){return zk}const hx=new De(ee.comparator);function co(...t){let e=hx;for(const n of t)e=e.insert(n.key,n);return e}function fx(t){let e=hx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return ko()}function px(){return ko()}function ko(){return new Ni(t=>t.toString(),(t,e)=>t.isEqual(e))}const Bk=new De(ee.comparator),$k=new it(ee.comparator);function de(...t){let e=$k;for(const n of t)e=e.add(n);return e}const qk=new it(ve);function Hk(){return qk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(e)?"-0":e}}function mx(t){return{integerValue:""+t}}function Wk(t,e){return wk(e)?mx(e):Uf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this._=void 0}}function Kk(t,e,n){return t instanceof fu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vf(i)&&(i=Of(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Jo?yx(t,e):t instanceof Zo?vx(t,e):function(s,i){const o=gx(s,i),l=Zg(o)+Zg(s.Pe);return uh(o)&&uh(s.Pe)?mx(l):Uf(s.serializer,l)}(t,e)}function Gk(t,e,n){return t instanceof Jo?yx(t,e):t instanceof Zo?vx(t,e):n}function gx(t,e){return t instanceof pu?function(r){return uh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class fu extends Gu{}class Jo extends Gu{constructor(e){super(),this.elements=e}}function yx(t,e){const n=_x(e);for(const r of t.elements)n.some(s=>bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zo extends Gu{constructor(e){super(),this.elements=e}}function vx(t,e){let n=_x(e);for(const r of t.elements)n=n.filter(s=>!bn(s,r));return{arrayValue:{values:n}}}class pu extends Gu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Zg(t){return Be(t.integerValue||t.doubleValue)}function _x(t){return Lf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Qk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Jo&&s instanceof Jo||r instanceof Zo&&s instanceof Zo?gi(r.elements,s.elements,bn):r instanceof pu&&s instanceof pu?bn(r.Pe,s.Pe):r instanceof fu&&s instanceof fu}(t.transform,e.transform)}class Yk{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qu{}function xx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zf(t.key,Zt.none()):new pa(t.key,t.data,Zt.none());{const n=t.data,r=Ct.empty();let s=new it(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qr(t.key,r,new Ut(s.toArray()),Zt.none())}}function Xk(t,e,n){t instanceof pa?function(s,i,o){const l=s.value.clone(),c=ty(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof qr?function(s,i,o){if(!kl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ty(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(wx(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function No(t,e,n,r){return t instanceof pa?function(i,o,l,c){if(!kl(i.precondition,o))return l;const h=i.value.clone(),p=ny(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof qr?function(i,o,l,c){if(!kl(i.precondition,o))return l;const h=ny(i.fieldTransforms,c,o),p=o.data;return p.setAll(wx(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return kl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Jk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=gx(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gi(r,s,(i,o)=>Qk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends Qu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qr extends Qu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ty(t,e,n){const r=new Map;xe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Gk(o,l,n[s]))}return r}function ny(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Kk(i,o,e))}return r}class zf extends Qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zk extends Qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Xk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=px();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=xx(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&gi(this.mutations,e.mutations,(n,r)=>ey(n,r))&&gi(this.baseMutations,e.baseMutations,(n,r)=>ey(n,r))}}class Bf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length);let s=function(){return Bk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Bf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,me;function r2(t){switch(t){default:return ie();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function Ex(t){if(t===void 0)return Qn("GRPC error has no .code"),U.UNKNOWN;switch(t){case qe.OK:return U.OK;case qe.CANCELLED:return U.CANCELLED;case qe.UNKNOWN:return U.UNKNOWN;case qe.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case qe.INTERNAL:return U.INTERNAL;case qe.UNAVAILABLE:return U.UNAVAILABLE;case qe.UNAUTHENTICATED:return U.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case qe.NOT_FOUND:return U.NOT_FOUND;case qe.ALREADY_EXISTS:return U.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return U.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case qe.ABORTED:return U.ABORTED;case qe.OUT_OF_RANGE:return U.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return U.UNIMPLEMENTED;case qe.DATA_LOSS:return U.DATA_LOSS;default:return ie()}}(me=qe||(qe={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new ls([4294967295,4294967295],0);function ry(t){const e=s2().encode(t),n=new K_;return n.update(e),new Uint8Array(n.digest())}function sy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ls([n,r],0),new ls([s,i],0)]}class $f{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ho(`Invalid padding: ${n}`);if(r<0)throw new ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ho(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ho(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ls.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ls.fromNumber(r)));return s.compare(i2)===1&&(s=new ls([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ry(e),[r,s]=sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $f(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=ry(e),[r,s]=sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yu(oe.min(),s,new De(ve),Yn(),de())}}class ma{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ma(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Tx{constructor(e,n){this.targetId=e,this.me=n}}class Ix{constructor(e,n,r=at.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class iy{constructor(){this.fe=0,this.ge=ay(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new ma(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ay()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class o2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=oy(),this.Qe=new De(ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(dh(i))if(r===0){const o=new ee(i.path);this.Ue(n,o,gt.newNoDocument(o,oe.min()))}else xe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=vs(r).toUint8Array()}catch(c){if(c instanceof nx)return mi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new $f(o,s,i)}catch(c){return mi(c instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&dh(l.target)){const c=new ee(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,gt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=de();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Yu(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=oy(),this.Qe=new De(ve),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function oy(){return new De(ee.comparator)}function ay(){return new De(ee.comparator)}const a2={asc:"ASCENDING",desc:"DESCENDING"},l2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u2={and:"AND",or:"OR"};class c2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fh(t,e){return t.useProto3Json||$u(e)?e:{value:e}}function mu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d2(t,e){return mu(t,e.toTimestamp())}function Sn(t){return xe(!!t),oe.fromTimestamp(function(n){const r=Lr(n);return new Ye(r.seconds,r.nanos)}(t))}function qf(t,e){return ph(t,e).canonicalString()}function ph(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bx(t){const e=Ae.fromString(t);return xe(Px(e)),e}function mh(t,e){return qf(t.databaseId,e.path)}function td(t,e){const n=bx(e);if(n.get(1)!==t.databaseId.projectId)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(Nx(n))}function kx(t,e){return qf(t.databaseId,e)}function h2(t){const e=bx(t);return e.length===4?Ae.emptyPath():Nx(e)}function gh(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Nx(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ly(t,e,n){return{name:mh(t,e),fields:n.value.mapValue.fields}}function f2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(xe(p===void 0||typeof p=="string"),at.fromBase64String(p||"")):(xe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),at.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?U.UNKNOWN:Ex(h.code);return new X(p,h.message||"")}(o);n=new Ix(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=td(t,r.document.name),i=Sn(r.document.updateTime),o=r.document.createTime?Sn(r.document.createTime):oe.min(),l=new Ct({mapValue:{fields:r.document.fields}}),c=gt.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Nl(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=td(t,r.document),i=r.readTime?Sn(r.readTime):oe.min(),o=gt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Nl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=td(t,r.document),i=r.removedTargetIds||[];n=new Nl([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new n2(s,i),l=r.targetId;n=new Tx(l,o)}}return n}function p2(t,e){let n;if(e instanceof pa)n={update:ly(t,e.key,e.value)};else if(e instanceof zf)n={delete:mh(t,e.key)};else if(e instanceof qr)n={update:ly(t,e.key,e.data),updateMask:T2(e.fieldMask)};else{if(!(e instanceof Zk))return ie();n={verify:mh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof fu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:d2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function m2(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Sn(s.updateTime):Sn(i);return o.isEqual(oe.min())&&(o=Sn(i)),new Yk(o,s.transformResults||[])}(n,e))):[]}function g2(t,e){return{documents:[kx(t,e.path)]}}function y2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kx(t,s);const i=function(h){if(h.length!==0)return Ax(kn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:Rs(v.field),direction:x2(v.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=fh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function v2(t){let e=h2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const v=Cx(m);return v instanceof kn&&ox(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(P){return new hu(js(P.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,$u(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(m){const v=!!m.before,C=m.values||[];return new du(C,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,C=m.values||[];return new du(C,v)}(n.endAt)),Ok(e,s,o,i,l,"F",c,h)}function _2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=js(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=js(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=js(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=js(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(js(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>Cx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function x2(t){return a2[t]}function w2(t){return l2[t]}function E2(t){return u2[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function js(t){return rt.fromServerFormat(t.fieldPath)}function Ax(t){return t instanceof Ge?function(n){if(n.op==="=="){if(Gg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(Kg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(Kg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:w2(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>Ax(s));return r.length===1?r[0]:{compositeFilter:{op:E2(n.op),filters:r}}}(t):ie()}function T2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Px(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),l=at.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.ct=e}}function S2(t){const e=v2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.un=new k2}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Or.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class k2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new it(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new it(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _i(0)}static kn(){return new _i(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.changes=new Ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&No(r.mutation,s,Ut.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const s=is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=co();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Yn();const o=ko(),l=function(){return ko()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof qr)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),No(p.mutation,h,p.mutation.getFieldMask(),Ye.now())):o.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new C2(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ko();let s=new De((o,l)=>o-l),i=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||Ut.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(s.get(l.batchId)||de()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=px();p.forEach(v=>{if(!i.has(v)){const C=xx(n.get(v),r.get(v));C!==null&&m.set(v,C),i=i.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(is());let l=-1,c=i;return o.next(h=>z.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{c=c.insert(p,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,de())).next(p=>({batchId:l,changes:fx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=co();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,c=>{const h=function(m,v){return new qu(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,gt.newInvalidDocument(p)))});let l=co();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&No(p.mutation,h,Ut.empty(),Ye.now()),Ku(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Sn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:S2(s.bundledQuery),readTime:Sn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.overlays=new De(ee.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=is(),i=n.length+1,o=new ee(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=is(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=is(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new t2(n,r));let i=this.Ir.get(n);i===void 0&&(i=de(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this.Tr=new it(Xe.Er),this.dr=new it(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Xe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Ae([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Ae([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=de();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new it(Xe.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Xe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(ve);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new ee(i),0);let l=new it(ve);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},o),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Xe(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.Mr=e,this.docs=function(){return new De(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,l=new ee(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||yk(gk(p),r)<=0||(s.has(p.key)||Ku(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new O2(this)}getSize(e){return z.resolve(this.size)}}class O2 extends N2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.persistence=e,this.Nr=new Ni(n=>Mf(n),Ff),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hf,this.targetCount=0,this.kr=_i.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new _i(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Df(0),this.Kr=!1,this.Kr=!0,this.$r=new j2,this.referenceDelegate=e(this),this.Ur=new L2(this),this.indexManager=new b2,this.remoteDocumentCache=function(s){return new V2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new I2(n),this.Gr=new P2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new R2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new D2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new F2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class F2 extends _k{constructor(e){super(),this.currentSequenceNumber=e}}class Wf{constructor(e){this.persistence=e,this.Jr=new Hf,this.Yr=null}static Zr(e){return new Wf(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=ee.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=de(),s=de();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Kf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kT()?8:xk(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new U2;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(no()<=pe.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(no()<=pe.DEBUG&&Y("QueryEngine","Query:",Ps(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(no()<=pe.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):z.resolve())}Yi(e,n){if(Jg(n))return z.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=hh(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=de(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,hh(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return Jg(n)||s.isEqual(oe.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(no()<=pe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ps(n)),this.rs(e,o,n,mk(s,-1)).next(l=>l))})}ts(e,n){let r=new it(dx(e));return n.forEach((s,i)=>{Ku(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return no()<=pe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Ps(n)),this.Ji.getDocumentsMatchingQuery(e,n,Or.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new De(ve),this._s=new Ni(i=>Mf(i),Ff),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $2(t,e,n,r){return new B2(t,e,n,r)}async function Rx(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=de();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function q2(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,v=m.keys();let C=z.resolve();return v.forEach(P=>{C=C.next(()=>p.getEntry(c,P)).next(R=>{const M=h.docVersions.get(P);xe(M!==null),R.version.compareTo(M)<0&&(m.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),p.addEntry(R)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=de();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function jx(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function H2(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const v=s.get(m);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let C=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(at.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),s=s.insert(m,C),function(R,M,S){return R.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(v,C,p)&&l.push(n.Ur.updateTargetData(i,C))});let c=Yn(),h=de();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(W2(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(oe.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function W2(t,e,n){let r=de(),s=de();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function K2(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G2(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function yh(t,e,n){const r=ae(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!fa(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function uy(t,e,n){const r=ae(t);let s=oe.min(),i=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=ae(c),v=m._s.get(p);return v!==void 0?z.resolve(m.os.get(v)):m.Ur.getTargetData(h,p)}(r,o,In(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:de())).next(l=>(Q2(r,Fk(e),l),{documents:l,Ts:i})))}function Q2(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class cy{constructor(){this.activeTargetIds=Hk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y2{constructor(){this.so=new cy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=null;function nd(){return al===null?al=function(){return 268435456+Math.round(2147483648*Math.random())}():al++,"0x"+al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection";class eN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=nd(),c=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(Y("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw mi("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ki}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=J2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=nd();return new Promise((o,l)=>{const c=new G_;c.setWithCredentials(!0),c.listenOnce(Q_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Sl.NO_ERROR:const p=c.getResponseJson();Y(ht,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Sl.TIMEOUT:Y(ht,`RPC '${e}' ${i} timed out`),l(new X(U.DEADLINE_EXCEEDED,"Request time out"));break;case Sl.HTTP_ERROR:const m=c.getStatus();if(Y(ht,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const C=v==null?void 0:v.error;if(C&&C.status&&C.message){const P=function(M){const S=M.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(S)>=0?S:U.UNKNOWN}(C.status);l(new X(P,C.message))}else l(new X(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new X(U.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Y(ht,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);Y(ht,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=nd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=J_(),l=X_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Y(ht,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let v=!1,C=!1;const P=new Z2({Io:M=>{C?Y(ht,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(v||(Y(ht,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),Y(ht,`RPC '${e}' stream ${s} sending:`,M),m.send(M))},To:()=>m.close()}),R=(M,S,T)=>{M.listen(S,k=>{try{T(k)}catch(V){setTimeout(()=>{throw V},0)}})};return R(m,uo.EventType.OPEN,()=>{C||(Y(ht,`RPC '${e}' stream ${s} transport opened.`),P.yo())}),R(m,uo.EventType.CLOSE,()=>{C||(C=!0,Y(ht,`RPC '${e}' stream ${s} transport closed`),P.So())}),R(m,uo.EventType.ERROR,M=>{C||(C=!0,mi(ht,`RPC '${e}' stream ${s} transport errored:`,M),P.So(new X(U.UNAVAILABLE,"The operation could not be completed")))}),R(m,uo.EventType.MESSAGE,M=>{var S;if(!C){const T=M.data[0];xe(!!T);const k=T,V=k.error||((S=k[0])===null||S===void 0?void 0:S.error);if(V){Y(ht,`RPC '${e}' stream ${s} received error:`,V);const L=V.status;let D=function(w){const E=qe[w];if(E!==void 0)return Ex(E)}(L),x=V.message;D===void 0&&(D=U.INTERNAL,x="Unknown error status: "+L+" with message "+V.message),C=!0,P.So(new X(D,x)),m.close()}else Y(ht,`RPC '${e}' stream ${s} received:`,T),P.bo(T)}}),R(l,Y_.STAT_EVENT,M=>{M.stat===ah.PROXY?Y(ht,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===ah.NOPROXY&&Y(ht,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t){return new c2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Dx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new X(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tN extends Vx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=f2(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Sn(o.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=gh(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=dh(c)?{documents:g2(i,c)}:{query:y2(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Sx(i,o.resumeToken);const h=fh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(oe.min())>0){l.readTime=mu(i,o.snapshotVersion.toTimestamp());const h=fh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=_2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=gh(this.serializer),n.removeTarget=e,this.a_(n)}}class nN extends Vx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=m2(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>p2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,ph(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,ph(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qn(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Is(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ae(c);h.L_.add(4),await ga(h),h.q_.set("Unknown"),h.L_.delete(4),await Ju(h)}(this))})}),this.q_=new sN(r,s)}}async function Ju(t){if(Is(t))for(const e of t.B_)await e(!0)}async function ga(t){for(const e of t.B_)await e(!1)}function Ox(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Xf(n)?Yf(n):Ci(n).r_()&&Qf(n,e))}function Gf(t,e){const n=ae(t),r=Ci(n);n.N_.delete(e),r.r_()&&Lx(n,e),n.N_.size===0&&(r.r_()?r.o_():Is(n)&&n.q_.set("Unknown"))}function Qf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ci(t).A_(e)}function Lx(t,e){t.Q_.xe(e),Ci(t).R_(e)}function Yf(t){t.Q_=new o2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ci(t).start(),t.q_.v_()}function Xf(t){return Is(t)&&!Ci(t).n_()&&t.N_.size>0}function Is(t){return ae(t).L_.size===0}function Mx(t){t.Q_=void 0}async function oN(t){t.q_.set("Online")}async function aN(t){t.N_.forEach((e,n)=>{Qf(t,e)})}async function lN(t,e){Mx(t),Xf(t)?(t.q_.M_(e),Yf(t)):t.q_.set("Unknown")}async function uN(t,e,n){if(t.q_.set("Online"),e instanceof Ix&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gu(t,r)}else if(e instanceof Nl?t.Q_.Ke(e):e instanceof Tx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await jx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(at.EMPTY_BYTE_STRING,p.snapshotVersion)),Lx(i,c);const m=new wr(p.target,c,h,p.sequenceNumber);Qf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await gu(t,r)}}async function gu(t,e,n){if(!fa(e))throw e;t.L_.add(1),await ga(t),t.q_.set("Offline"),n||(n=()=>jx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ju(t)})}function Fx(t,e){return e().catch(n=>gu(t,n,e))}async function Zu(t){const e=ae(t),n=Mr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;cN(e);)try{const s=await K2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,dN(e,s)}catch(s){await gu(e,s)}Ux(e)&&zx(e)}function cN(t){return Is(t)&&t.O_.length<10}function dN(t,e){t.O_.push(e);const n=Mr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Ux(t){return Is(t)&&!Mr(t).n_()&&t.O_.length>0}function zx(t){Mr(t).start()}async function hN(t){Mr(t).p_()}async function fN(t){const e=Mr(t);for(const n of t.O_)e.m_(n.mutations)}async function pN(t,e,n){const r=t.O_.shift(),s=Bf.from(r,e,n);await Fx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zu(t)}async function mN(t,e){e&&Mr(t).V_&&await async function(r,s){if(function(o){return r2(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Mr(r).s_(),await Fx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zu(r)}}(t,e),Ux(t)&&zx(t)}async function hy(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=Is(n);n.L_.add(3),await ga(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ju(n)}async function gN(t,e){const n=ae(t);e?(n.L_.delete(2),await Ju(n)):e||(n.L_.add(2),await ga(n),n.q_.set("Unknown"))}function Ci(t){return t.K_||(t.K_=function(n,r,s){const i=ae(n);return i.w_(),new tN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:oN.bind(null,t),Ro:aN.bind(null,t),mo:lN.bind(null,t),d_:uN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xf(t)?Yf(t):t.q_.set("Unknown")):(await t.K_.stop(),Mx(t))})),t.K_}function Mr(t){return t.U_||(t.U_=function(n,r,s){const i=ae(n);return i.w_(),new nN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hN.bind(null,t),mo:mN.bind(null,t),f_:fN.bind(null,t),g_:pN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Zu(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Jf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zf(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),fa(t))return new X(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=co(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new ri(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ri)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ri;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.W_=new De(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class xi{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new xi(e,n,ri.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vN{constructor(){this.queries=py(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=py(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new X(U.ABORTED,"Firestore shutting down"))}}function py(){return new Ni(t=>cx(t),Wu)}async function ep(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new yN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Zf(o,`Initialization of query '${Ps(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&np(n)}async function tp(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _N(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&np(n)}function xN(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function np(t){t.Y_.forEach(e=>{e.next()})}var vh,my;(my=vh||(vh={})).ea="default",my.Cache="cache";class rp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.key=e}}class $x{constructor(e){this.key=e}}class wN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=dx(e),this.Ra=new ri(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const v=s.get(p),C=Ku(this.query,m)?m:null,P=!!v&&this.mutatedKeys.has(v.key),R=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;v&&C?v.data.isEqual(C.data)?P!==R&&(r.track({type:3,doc:C}),M=!0):this.ga(v,C)||(r.track({type:2,doc:C}),M=!0,(c&&this.Aa(C,c)>0||h&&this.Aa(C,h)<0)&&(l=!0)):!v&&C?(r.track({type:0,doc:C}),M=!0):v&&!C&&(r.track({type:1,doc:v}),M=!0,(c||h)&&(l=!0)),M&&(C?(o=o.add(C),i=R?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(C,P){const R=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return R(C)-R(P)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new xi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new $x(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Bx(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class EN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TN{constructor(e){this.key=e,this.va=!1}}class IN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ni(l=>cx(l),Wu),this.Ma=new Map,this.xa=new Set,this.Oa=new De(ee.comparator),this.Na=new Map,this.La=new Hf,this.Ba={},this.ka=new Map,this.qa=_i.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SN(t,e,n=!0){const r=Qx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await qx(r,e,n,!0),s}async function bN(t,e){const n=Qx(t);await qx(n,e,!0,!1)}async function qx(t,e,n,r){const s=await G2(t.localStore,In(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await kN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ox(t.remoteStore,s),l}async function kN(t,e,n,r,s){t.Ka=(m,v,C)=>async function(R,M,S,T){let k=M.view.ma(S);k.ns&&(k=await uy(R.localStore,M.query,!1).then(({documents:x})=>M.view.ma(x,k)));const V=T&&T.targetChanges.get(M.targetId),L=T&&T.targetMismatches.get(M.targetId)!=null,D=M.view.applyChanges(k,R.isPrimaryClient,V,L);return yy(R,M.targetId,D.wa),D.snapshot}(t,m,v,C);const i=await uy(t.localStore,e,!0),o=new wN(e,i.Ts),l=o.ma(i.documents),c=ma.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);yy(t,n,h.wa);const p=new EN(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function NN(t,e,n){const r=ae(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Wu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await yh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gf(r.remoteStore,s.targetId),_h(r,s.targetId)}).catch(ha)):(_h(r,s.targetId),await yh(r.localStore,s.targetId,!0))}async function CN(t,e){const n=ae(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gf(n.remoteStore,r.targetId))}async function AN(t,e,n){const r=LN(t);try{const s=await function(o,l){const c=ae(o),h=Ye.now(),p=l.reduce((C,P)=>C.add(P.key),de());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let P=Yn(),R=de();return c.cs.getEntries(C,p).next(M=>{P=M,P.forEach((S,T)=>{T.isValidDocument()||(R=R.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,P)).next(M=>{m=M;const S=[];for(const T of l){const k=Jk(T,m.get(T.key).overlayedDocument);k!=null&&S.push(new qr(T.key,k,rx(k.value.mapValue),Zt.exists(!0)))}return c.mutationQueue.addMutationBatch(C,h,S,l)}).next(M=>{v=M;const S=M.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(C,M.batchId,S)})}).then(()=>({batchId:v.batchId,changes:fx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new De(ve)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await ya(r,s.changes),await Zu(r.remoteStore)}catch(s){const i=Zf(s,"Failed to persist write");n.reject(i)}}async function Hx(t,e){const n=ae(t);try{const r=await H2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?xe(o.va):s.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),await ya(n,r,e)}catch(r){await ha(r)}}function gy(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ae(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(h=!0)}),h&&np(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PN(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new De(ee.comparator);o=o.insert(i,gt.newNoDocument(i,oe.min()));const l=de().add(i),c=new Yu(oe.min(),new Map,new De(ve),o,l);await Hx(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),sp(r)}else await yh(r.localStore,e,!1).then(()=>_h(r,e,n)).catch(ha)}async function RN(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await q2(n.localStore,e);Kx(n,r,null),Wx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ya(n,s)}catch(s){await ha(s)}}async function jN(t,e,n){const r=ae(t);try{const s=await function(o,l){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(xe(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);Kx(r,e,n),Wx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ya(r,s)}catch(s){await ha(s)}}function Wx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Kx(t,e,n){const r=ae(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function _h(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Gx(t,r)})}function Gx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sp(t))}function yy(t,e,n){for(const r of n)r instanceof Bx?(t.La.addReference(r.key,e),DN(t,r)):r instanceof $x?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Gx(t,r.key)):ie()}function DN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),sp(t))}function sp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new TN(n)),t.Oa=t.Oa.insert(n,r),Ox(t.remoteStore,new wr(In(Hu(n.path)),r,"TargetPurposeLimboResolution",Df.oe))}}async function ya(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Kf.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=ae(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(h,v=>z.forEach(v.$i,C=>p.persistence.referenceDelegate.addReference(m,v.targetId,C)).next(()=>z.forEach(v.Ui,C=>p.persistence.referenceDelegate.removeReference(m,v.targetId,C)))))}catch(m){if(!fa(m))throw m;Y("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const C=p.os.get(v),P=C.snapshotVersion,R=C.withLastLimboFreeSnapshotVersion(P);p.os=p.os.insert(v,R)}}}(r.localStore,i))}async function VN(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await Rx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new X(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ya(n,r.hs)}}function ON(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let s=de();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Qx(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ON.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PN.bind(null,e),e.Ca.d_=_N.bind(null,e.eventManager),e.Ca.$a=xN.bind(null,e.eventManager),e}function LN(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jN.bind(null,e),e}class yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $2(this.persistence,new z2,e.initialUser,this.serializer)}Ga(e){return new M2(Wf.Zr,this.serializer)}Wa(e){return new Y2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yu.provider={build:()=>new yu};class xh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VN.bind(null,this.syncEngine),await gN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vN}()}createDatastore(e){const n=Xu(e.databaseInfo.databaseId),r=function(i){return new eN(i)}(e.databaseInfo);return function(i,o,l,c){return new rN(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new iN(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>gy(this.syncEngine,n,0),function(){return dy.D()?new dy:new X2}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,p){const m=new IN(s,i,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);Y("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ga(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xh.provider={build:()=>new xh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=ex.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sd(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Rx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FN(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hy(e.remoteStore,s)),t._onlineComponents=e}async function FN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await sd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;mi("Error using user provided cache. Falling back to memory cache: "+n),await sd(t,new yu)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await sd(t,new yu);return t._offlineComponents}async function Yx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await vy(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await vy(t,new xh))),t._onlineComponents}function UN(t){return Yx(t).then(e=>e.syncEngine)}async function vu(t){const e=await Yx(t),n=e.eventManager;return n.onListen=SN.bind(null,e.syncEngine),n.onUnlisten=NN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CN.bind(null,e.syncEngine),n}function zN(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new ip({next:v=>{p.Za(),o.enqueueAndForget(()=>tp(i,m));const C=v.docs.has(l);!C&&v.fromCache?h.reject(new X(U.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&v.fromCache&&c&&c.source==="server"?h.reject(new X(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new rp(Hu(l.path),p,{includeMetadataChanges:!0,_a:!0});return ep(i,m)}(await vu(t),t.asyncQueue,e,n,r)),r.promise}function BN(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new ip({next:v=>{p.Za(),o.enqueueAndForget(()=>tp(i,m)),v.fromCache&&c.source==="server"?h.reject(new X(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new rp(l,p,{includeMetadataChanges:!0,_a:!0});return ep(i,m)}(await vu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t,e,n){if(!n)throw new X(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $N(t,e,n,r){if(e===!0&&r===!0)throw new X(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xy(t){if(!ee.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wy(t){if(ee.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=op(t);throw new X(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$N("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ec{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ok;switch(r.type){case"firstParty":return new ck(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_y.get(n);r&&(Y("ComponentProvider","Removing Datastore"),_y.delete(n),r.terminate())}(this),Promise.resolve()}}function qN(t,e,n,r={}){var s;const i=(t=Dt(t,ec))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=ft.MOCK_USER;else{l=xT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new X(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ft(h)}t._authCredentials=new ak(new Z_(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new va(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class jr extends va{constructor(e,n,r){super(e,n,Hu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ee(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function fo(t,e,...n){if(t=We(t),Jx("collection","path",e),t instanceof ec){const r=Ae.fromString(e,...n);return wy(r),new jr(t,null,r)}{if(!(t instanceof Tt||t instanceof jr))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return wy(r),new jr(t.firestore,null,r)}}function Gt(t,e,...n){if(t=We(t),arguments.length===1&&(e=ex.newId()),Jx("doc","path",e),t instanceof ec){const r=Ae.fromString(e,...n);return xy(r),new Tt(t,null,new ee(r))}{if(!(t instanceof Tt||t instanceof jr))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return xy(r),new Tt(t.firestore,t instanceof jr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Dx(this,"async_queue_retry"),this.Vu=()=>{const r=rd();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=rd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=rd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fa(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Qn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Jf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Iy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Xn extends ec{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ty,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ty(e),this._firestoreClient=void 0,await e}}}function HN(t,e){const n=typeof t=="object"?t:u_(),r=typeof t=="string"?t:"(default)",s=Tf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vT("firestore");i&&qN(s,...i)}return s}function tc(t){if(t._terminated)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WN(t),t._firestoreClient}function WN(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new Tk(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Xx(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new MN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(at.fromBase64String(e))}catch(n){throw new X(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^__.*__$/;class GN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class Zx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ew(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class cp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _u(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ew(this.Cu)&&KN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xu(e)}Qu(e,n,r,s=!1){return new cp({Cu:e,methodName:n,qu:r,path:rt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dp(t){const e=t._freezeSettings(),n=Xu(t._databaseId);return new QN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);hp("Data must be an object, but it was:",o,r);const l=nw(r,o);let c,h;if(i.merge)c=new Ut(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const v=wh(e,m,n);if(!o.contains(v))throw new X(U.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);sw(p,v)||p.push(v)}c=new Ut(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new GN(new Ct(l),c,h)}class rc extends ap{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rc}}function YN(t,e,n,r){const s=t.Qu(1,e,n);hp("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();Ts(r,(c,h)=>{const p=fp(e,c,n);h=We(h);const m=s.Nu(p);if(h instanceof rc)i.push(p);else{const v=sc(h,m);v!=null&&(i.push(p),o.set(p,v))}});const l=new Ut(i);return new Zx(o,l,s.fieldTransforms)}function XN(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[wh(e,r,n)],c=[s];if(i.length%2!=0)throw new X(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(wh(e,i[v])),c.push(i[v+1]);const h=[],p=Ct.empty();for(let v=l.length-1;v>=0;--v)if(!sw(h,l[v])){const C=l[v];let P=c[v];P=We(P);const R=o.Nu(C);if(P instanceof rc)h.push(C);else{const M=sc(P,R);M!=null&&(h.push(C),p.set(C,M))}}const m=new Ut(h);return new Zx(p,m,o.fieldTransforms)}function sc(t,e){if(rw(t=We(t)))return hp("Unsupported field value:",e,t),nw(t,e);if(t instanceof ap)return function(r,s){if(!ew(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=sc(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Wk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:mu(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mu(s.serializer,i)}}if(r instanceof lp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:Sx(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof up)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Uf(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${op(r)}`)}(t,e)}function nw(t,e){const n={};return tx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(t,(r,s)=>{const i=sc(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof lp||t instanceof wi||t instanceof Tt||t instanceof ap||t instanceof up)}function hp(t,e,n){if(!rw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=op(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function wh(t,e,n){if((e=We(e))instanceof nc)return e._internalPath;if(typeof e=="string")return fp(t,e);throw _u("Field path arguments must be of type string or ",t,!1,void 0,n)}const JN=new RegExp("[~\\*/\\[\\]]");function fp(t,e,n){if(e.search(JN)>=0)throw _u(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nc(...e.split("."))._internalPath}catch{throw _u(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _u(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new X(U.INVALID_ARGUMENT,l+t+c)}function sw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ow("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZN extends iw{data(){return super.data()}}function ow(t,e){return typeof e=="string"?fp(t,e):e instanceof nc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eC{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ts(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Be(o.doubleValue));return new up(i)}convertGeoPoint(e){return new lp(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Of(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qo(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);xe(Px(r));const s=new Yo(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||Qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uw extends iw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ow("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Cl extends uw{data(e={}){return super.data(e)}}class cw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new po(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cl(this._firestore,this._userDataWriter,r.key,r,new po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Cl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new po(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Cl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new po(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:tC(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){t=Dt(t,Tt);const e=Dt(t.firestore,Xn);return zN(tc(e),t._key).then(n=>hw(e,t,n))}class pp extends eC{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function nC(t){t=Dt(t,va);const e=Dt(t.firestore,Xn),n=tc(e),r=new pp(e);return aw(t._query),BN(n,t._query).then(s=>new cw(e,r,t,s))}function Eh(t,e,n){t=Dt(t,Tt);const r=Dt(t.firestore,Xn),s=lw(t.converter,e);return ic(r,[tw(dp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zt.none())])}function xu(t,e,n,...r){t=Dt(t,Tt);const s=Dt(t.firestore,Xn),i=dp(s);let o;return o=typeof(e=We(e))=="string"||e instanceof nc?XN(i,"updateDoc",t._key,e,n,r):YN(i,"updateDoc",t._key,e),ic(s,[o.toMutation(t._key,Zt.exists(!0))])}function dw(t){return ic(Dt(t.firestore,Xn),[new zf(t._key,Zt.none())])}function by(t,e){const n=Dt(t.firestore,Xn),r=Gt(t),s=lw(t.converter,e);return ic(n,[tw(dp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function ky(t,...e){var n,r,s;t=We(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Iy(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Iy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Tt)h=Dt(t.firestore,Xn),p=Hu(t._key.path),c={next:m=>{e[o]&&e[o](hw(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Dt(t,va);h=Dt(m.firestore,Xn),p=m._query;const v=new pp(h);c={next:C=>{e[o]&&e[o](new cw(h,v,m,C))},error:e[o+1],complete:e[o+2]},aw(t._query)}return function(v,C,P,R){const M=new ip(R),S=new rp(C,M,P);return v.asyncQueue.enqueueAndForget(async()=>ep(await vu(v),S)),()=>{M.Za(),v.asyncQueue.enqueueAndForget(async()=>tp(await vu(v),S))}}(tc(h),p,l,c)}function ic(t,e){return function(r,s){const i=new Bn;return r.asyncQueue.enqueueAndForget(async()=>AN(await UN(r),s,i)),i.promise}(tc(t),e)}function hw(t,e,n){const r=n.docs.get(e._key),s=new pp(t);return new uw(t,s,e._key,r,new po(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ki=s})(bi),fi(new ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Xn(new lk(r.getProvider("auth-internal")),new hk(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Rr(Bg,"4.7.3",e),Rr(Bg,"4.7.3","esm2017")})();var rC="firebase",sC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(rC,sC,"app");const iC={apiKey:"AIzaSyCfoxtQy_MCf5_fqKFq4OsXYvvyhkmwEYo",authDomain:"alfa-app-b4052.firebaseapp.com",projectId:"alfa-app-b4052",storageBucket:"alfa-app-b4052.firebasestorage.app",messagingSenderId:"644138783201",appId:"1:644138783201:web:16308247c9ef93f1d242a0"},fw=l_(iC),lr=sk(fw),pt=HN(fw),pw=W.createContext();function Ai(){return W.useContext(pw)}function mw({children:t}){const[e,n]=W.useState(null),[r,s]=W.useState(null),[i,o]=W.useState(!0),[l,c]=W.useState(!1),h=L=>{const D={admin:{canViewOS:!0,canEditOS:!0,canDeleteOS:!0,canViewFinancial:!0,canEditFinancial:!0,canViewContracts:!0,canEditContracts:!0,canManageUsers:!0,canViewAllClients:!0,canViewOnlyOwnClient:!1,canPrint:!0,canExport:!0},client:{canViewOS:!0,canEditOS:!1,canDeleteOS:!1,canViewFinancial:!1,canEditFinancial:!1,canViewContracts:!1,canEditContracts:!1,canManageUsers:!1,canViewAllClients:!1,canViewOnlyOwnClient:!0,canPrint:!1,canExport:!1}};return D[L]||D.client};async function p(L,D,x,y="client",w=null){console.log(" Iniciando criao de usurio:",{email:L,displayName:x,role:y});try{const E=lr.currentUser,N=E==null?void 0:E.email;if(console.log(" Usurio atual antes da criao:",N),w&&E){console.log(" Reautenticando admin...");try{const Ue=Es.credential(N,w);await US(E,Ue),console.log(" Admin reautenticado com sucesso")}catch(Ue){throw console.error(" Erro na reautenticao:",Ue),new Error("Senha do admin incorreta. Por favor, verifique sua senha.")}}const b=await BS(lr,L,D);console.log(" Usurio criado no Firebase Auth:",b.user.email),x&&(await qS(b.user,{displayName:x}),console.log(" Perfil atualizado no Auth"));const I=h(y),Ve={uid:b.user.uid,email:L,displayName:x||L.split("@")[0],role:y,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),permissions:I,status:"active",emailVerified:!1,createdBy:N||"system"};if(console.log(" Salvando dados no Firestore..."),await Eh(Gt(pt,"users",b.user.uid),Ve),console.log(" Dados salvos no Firestore"),console.log(" Fazendo logout do novo usurio..."),await Pg(lr),console.log(" Logout do novo usurio realizado"),E&&w){console.log(" Tentando restaurar sesso do admin...");try{await Ag(lr,N,w),console.log(" Admin restaurado com sucesso!")}catch(Ue){console.error(" Erro ao restaurar admin:",Ue)}}return console.log(" Usurio criado com sucesso em ambos os sistemas!"),{success:!0,userId:b.user.uid,adminRestored:!!w}}catch(E){console.error(" Erro ao criar usurio:",E);let N=E.message;switch(E.code){case"auth/email-already-in-use":N="Este email j est em uso por outra conta.";break;case"auth/invalid-email":N="Email invlido.";break;case"auth/operation-not-allowed":N="Operao no permitida. Contate o administrador.";break;case"auth/weak-password":N="A senha  muito fraca. Use pelo menos 6 caracteres.";break;case"auth/wrong-password":N="Senha do admin incorreta.";break;default:N="Erro ao criar usurio: "+E.message}throw new Error(N)}}async function m(L,D){console.log("Tentando login para:",L);try{const x=await Ag(lr,L,D);return console.log(" Login bem-sucedido:",x.user.email),x}catch(x){throw console.error(" Erro no login:",x),x}}async function v(){if(l){console.log("Logout j em andamento...");return}c(!0);try{return console.log("Iniciando logout..."),n(null),s(null),await Pg(lr),console.log(" Logout realizado com sucesso"),!0}catch(L){throw console.error(" Erro ao fazer logout:",L),L}finally{c(!1)}}function C(L){return console.log("Solicitando redefinio de senha para:",L),zS(lr,L)}async function P(L,D){console.log("Atualizando dados do usurio:",L),await xu(Gt(pt,"users",L),{...D,updatedAt:new Date().toISOString()}),L===(e==null?void 0:e.uid)&&(console.log("Recarregando dados do usurio atual..."),await R(L))}async function R(L){console.log("Carregando dados do usurio do Firestore:",L);try{const D=await Sy(Gt(pt,"users",L));if(D.exists()){const x=D.data(),y={...h(x.role||"client"),...x.permissions||{}},w={...x,permissions:y};return s(w),w}else return console.log("Usurio no encontrado no Firestore"),s(null),null}catch(D){return console.error("Erro ao carregar dados do usurio:",D),s(null),null}}const M=async(L,D)=>{if(!e||(r==null?void 0:r.role)!=="admin")throw console.warn("Tentativa no autorizada de atualizar cargo"),new Error("Sem permisso para atualizar cargos");console.log("Atualizando cargo do usurio:",L,"para",D);const x=h(D),y={role:D,permissions:x,updatedAt:new Date().toISOString()};return await xu(Gt(pt,"users",L),y),y},S=async L=>{if(!e||(r==null?void 0:r.role)!=="admin")throw console.warn("Tentativa no autorizada de deletar usurio"),new Error("Sem permisso para deletar usurios");console.log("Deletando conta do usurio:",L);try{return await dw(Gt(pt,"users",L)),console.log(" Usurio deletado do Firestore"),{success:!0}}catch(D){throw console.error(" Erro ao deletar usurio:",D),D}};function T(L){var D;return r?r.role==="admin"?!0:((D=r.permissions)==null?void 0:D[L])||!1:!1}const k=async()=>{try{const L=fo(pt,"users"),x=(await nC(L)).docs.map(y=>({id:y.id,...y.data()}));if(console.log("Total de usurios encontrados:",x.length),(r==null?void 0:r.role)!=="admin"&&!T("canViewAllClients")){const y=x.filter(w=>w.createdBy===(e==null?void 0:e.email)||w.id===(e==null?void 0:e.uid));return console.log("Usurios filtrados para visualizao:",y.length),y.sort((w,E)=>{const N=new Date(w.createdAt||0);return new Date(E.createdAt||0)-N}),y}return x.sort((y,w)=>{const E=new Date(y.createdAt||0);return new Date(w.createdAt||0)-E}),x}catch(L){throw console.error("Erro ao buscar todos os usurios:",L),L}};W.useEffect(()=>(console.log(" Configurando listener onAuthStateChanged..."),KS(lr,async D=>{var x,y;if(console.log(" onAuthStateChanged disparado!"),console.log(" Usurio do Firebase:",D?`${D.email} (${D.uid})`:"Nenhum"),D&&!l){console.log(" Processando usurio autenticado...");try{const w=await Sy(Gt(pt,"users",D.uid));if(w.exists()){const E=w.data();console.log(" Dados do Firestore encontrados para:",D.email);const N={...h(E.role||"client"),...E.permissions||{}},b={...E,permissions:N};s(b),console.log(" Dados do usurio carregados com sucesso")}else{console.log(" Usurio no encontrado no Firestore - criando...");const E={uid:D.uid,email:D.email,displayName:D.displayName||((x=D.email)==null?void 0:x.split("@")[0])||"Usurio",role:"client",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),permissions:h("client"),status:"active",emailVerified:D.emailVerified,createdBy:"system"};await Eh(Gt(pt,"users",D.uid),E),s(E),console.log(" Registro criado no Firestore")}n(D),c(!1),console.log(" Estado atualizado com sucesso")}catch(w){console.error(" Erro ao carregar dados do usurio:",w),n(D);const E=h("client"),N={uid:D.uid,email:D.email,displayName:D.displayName||((y=D.email)==null?void 0:y.split("@")[0])||"Usurio",role:"client",permissions:E};s(N),c(!1)}}else console.log(l?" Logout confirmado - limpando estado":" Nenhum usurio autenticado"),n(null),s(null);o(!1)})),[l]);const V={user:e,userData:r,loading:i,isLoggingOut:l,signup:p,login:m,logout:v,resetPassword:C,updateUserRole:M,updateUserData:P,loadUserData:R,deleteUserAccount:S,getAllUsers:k,hasPermission:T,getDefaultPermissions:h};return u.jsx(pw.Provider,{value:V,children:!i&&t})}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=W.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...h},p)=>W.createElement("svg",{ref:p,...oC,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${aC(t)}`,l].join(" "),...h},[...e.map(([m,v])=>W.createElement(m,v)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ne("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ne("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ne("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ne("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ne("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ne("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=ne("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ne("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=ne("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=ne("FileSignature",[["path",{d:"M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5",key:"kd5d3"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ne("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ne("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ne("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ne("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=ne("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ne("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ne("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ne("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ne("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ne("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=ne("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ne("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ne("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=ne("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ne("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fy={admin:"bg-red-100 text-red-800",client:"bg-purple-100 text-purple-800"},Eu={admin:"Administrador",client:"Cliente"},NC=({onClose:t,onSuccess:e})=>{const{signup:n,user:r}=Ai(),[s,i]=W.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"client"}),[o,l]=W.useState(!1),[c,h]=W.useState(""),[p,m]=W.useState(!1),[v,C]=W.useState(!1),[P,R]=W.useState(!1),M=async S=>{if(S.preventDefault(),h(""),m(!1),s.password!==s.confirmPassword){h("As senhas no conferem");return}if(s.password.length<6){h("A senha deve ter pelo menos 6 caracteres");return}l(!0);try{console.log("Criando usurio:",{email:s.email,displayName:s.displayName,role:s.role});const T=await n(s.email,s.password,s.displayName,s.role);T.success&&(console.log("Usurio criado com sucesso!",T),m(!0),i({email:"",password:"",confirmPassword:"",displayName:"",role:"client"}),setTimeout(()=>{e==null||e(),t()},2e3))}catch(T){switch(console.error("Erro ao criar usurio:",T),T.message){case"Senha do admin incorreta.":h("Sua senha de administrador est incorreta. Por favor, verifique e tente novamente.");break;case"Este email j est em uso por outra conta.":h("Este email j est em uso por outra conta.");break;case"Email invlido.":h("Email invlido.");break;case"A senha  muito fraca. Use pelo menos 6 caracteres.":h("A senha  muito fraca. Use pelo menos 6 caracteres.");break;default:h(T.message||"Erro ao criar usurio. Verifique os dados e tente novamente.")}}finally{l(!1)}};return u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:t}),u.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all duration-300 scale-100",children:[u.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:u.jsx(si,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Criar Novo Usurio"}),u.jsx("p",{className:"text-slate-500 text-sm",children:"Adicione um novo usurio ao sistema"})]})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",disabled:o,children:u.jsx(ii,{size:20})})]}),u.jsxs("form",{onSubmit:M,className:"p-6 space-y-4",children:[c&&u.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(Fr,{size:16}),u.jsx("span",{className:"font-bold",children:"Erro"})]}),c]}),p&&u.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(Ei,{size:16}),u.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),"Usurio criado com sucesso! O usurio foi registrado no Authentication e no Firestore.",u.jsx("div",{className:"mt-2 text-xs",children:"Fechando o modal em instantes..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome Completo *"}),u.jsxs("div",{className:"relative",children:[u.jsx(wu,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:"text",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.displayName,onChange:S=>i({...s,displayName:S.target.value}),placeholder:"Joo Silva",disabled:o||p})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email *"}),u.jsxs("div",{className:"relative",children:[u.jsx(mp,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:"email",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.email,onChange:S=>i({...s,email:S.target.value}),placeholder:"usuario@exemplo.com",disabled:o||p})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Senha *"}),u.jsxs("div",{className:"relative",children:[u.jsx(jy,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:v?"text":"password",required:!0,className:"w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.password,onChange:S=>i({...s,password:S.target.value}),placeholder:"",disabled:o||p,minLength:"6"}),u.jsx("button",{type:"button",onClick:()=>C(!v),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",disabled:o||p,children:v?u.jsx(Ay,{size:18}):u.jsx(Py,{size:18})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirmar Senha *"}),u.jsxs("div",{className:"relative",children:[u.jsx(jy,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:P?"text":"password",required:!0,className:"w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.confirmPassword,onChange:S=>i({...s,confirmPassword:S.target.value}),placeholder:"",disabled:o||p,minLength:"6"}),u.jsx("button",{type:"button",onClick:()=>R(!P),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",disabled:o||p,children:P?u.jsx(Ay,{size:18}):u.jsx(Py,{size:18})})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cargo *"}),u.jsxs("div",{className:"relative",children:[u.jsx(oc,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("select",{className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all bg-white",value:s.role,onChange:S=>i({...s,role:S.target.value}),disabled:o||p,children:Object.entries(Eu).map(([S,T])=>u.jsx("option",{value:S,children:T},S))})]})]}),u.jsxs("div",{className:"pt-4 flex gap-3",children:[u.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors disabled:opacity-50",disabled:o,children:"Cancelar"}),u.jsx("button",{type:"submit",disabled:o||p,className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando..."]}):p?u.jsxs(u.Fragment,{children:[u.jsx(Ei,{size:18}),"Usurio Criado!"]}):u.jsxs(u.Fragment,{children:[u.jsx(si,{size:18}),"Criar Usurio"]})})]})]})]})]})},CC=({user:t,onClose:e,onSuccess:n})=>{const{updateUserData:r}=Ai(),[s,i]=W.useState({displayName:t.displayName||"",role:t.role||"client",newPassword:"",confirmNewPassword:""}),[o,l]=W.useState(!1),[c,h]=W.useState(""),[p,m]=W.useState(""),[v,C]=W.useState(!1),[P,R]=W.useState(!1),M=async()=>{if(l(!0),h(""),m(""),s.newPassword||s.confirmNewPassword){if(s.newPassword!==s.confirmNewPassword){h("As novas senhas no conferem"),l(!1);return}if(s.newPassword.length<6){h("A nova senha deve ter pelo menos 6 caracteres"),l(!1);return}}try{const S={displayName:s.displayName,role:s.role,updatedAt:new Date().toISOString()};s.newPassword&&console.log("Nova senha definida (necessitaria Admin SDK para atualizar no Authentication)"),await r(t.id,S),m("Dados do usurio atualizados com sucesso!"),setTimeout(()=>{n==null||n(),e()},2e3)}catch(S){console.error("Erro ao atualizar usurio:",S),h("Erro ao atualizar usurio: "+S.message)}finally{l(!1)}};return u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:e}),u.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all duration-300 scale-100",children:[u.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:u.jsx(EC,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Editar Usurio"}),u.jsx("p",{className:"text-slate-500 text-sm",children:"Atualize os dados do usurio"})]})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",disabled:o,children:u.jsx(ii,{size:20})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[c&&u.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(Fr,{size:16}),u.jsx("span",{className:"font-bold",children:"Erro"})]}),c]}),p&&u.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(Ei,{size:16}),u.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),p]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome Completo"}),u.jsxs("div",{className:"relative",children:[u.jsx(wu,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.displayName,onChange:S=>i({...s,displayName:S.target.value}),placeholder:"Joo Silva",disabled:o})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(mp,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:"email",className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed",value:t.email,disabled:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cargo"}),u.jsxs("div",{className:"relative",children:[u.jsx(oc,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("select",{className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.role,onChange:S=>i({...s,role:S.target.value}),disabled:o,children:Object.entries(Eu).map(([S,T])=>u.jsx("option",{value:S,children:T},S))})]})]}),u.jsxs("div",{className:"pt-4 flex gap-3",children:[u.jsx("button",{onClick:e,disabled:o,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Cancelar"}),u.jsx("button",{onClick:M,disabled:o,className:"flex-1 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ih,{size:16}),"Salvar Alteraes"]})})]})]})]})]})},AC=({user:t,onClose:e,onSuccess:n})=>{const{deleteUserAccount:r}=Ai(),[s,i]=W.useState(!1),[o,l]=W.useState(""),[c,h]=W.useState(""),p=async()=>{i(!0),l("");try{await r(t.id),h("Usurio deletado com sucesso!"),setTimeout(()=>{n==null||n(),e()},2e3)}catch(m){console.error("Erro ao deletar usurio:",m),l("Erro ao deletar usurio: "+m.message)}finally{i(!1)}};return u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:e}),u.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[u.jsx("div",{className:"p-6 border-b",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-red-100 p-2 rounded-lg text-red-600",children:u.jsx(ea,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Deletar Usurio"}),u.jsx("p",{className:"text-slate-500 text-sm",children:"Esta ao no pode ser desfeita"})]})]})}),u.jsxs("div",{className:"p-6 space-y-4",children:[o&&u.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(Fr,{size:16}),u.jsx("span",{className:"font-bold",children:"Erro"})]}),o]}),c&&u.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(Ei,{size:16}),u.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),c]}),u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[u.jsx("p",{className:"text-red-800 font-bold mb-2",children:" Ateno!"}),u.jsxs("p",{className:"text-red-700 text-sm",children:["Voc est prestes a deletar o usurio ",u.jsx("span",{className:"font-bold",children:t.displayName})," (",t.email,"). Esta ao remover permanentemente o usurio do sistema."]}),u.jsxs("p",{className:"text-red-700 text-sm mt-2",children:[u.jsx("span",{className:"font-bold",children:"Nota:"})," A conta do Firebase Authentication no ser deletada automaticamente. O usurio ainda poder fazer login, mas no ter acesso ao sistema."]})]}),u.jsxs("div",{className:"pt-4 flex gap-3",children:[u.jsx("button",{onClick:e,disabled:s,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Cancelar"}),u.jsx("button",{onClick:p,disabled:s||c,className:"flex-1 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:s?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deletando..."]}):c?u.jsxs(u.Fragment,{children:[u.jsx(Ei,{size:16}),"Deletado!"]}):u.jsxs(u.Fragment,{children:[u.jsx(ea,{size:16}),"Deletar Usurio"]})})]})]})]})]})};function PC(){const{userData:t,hasPermission:e,getAllUsers:n}=Ai(),[r,s]=W.useState([]),[i,o]=W.useState(!0),[l,c]=W.useState(null),[h,p]=W.useState(""),[m,v]=W.useState({}),[C,P]=W.useState(!1),[R,M]=W.useState(!1),[S,T]=W.useState(!1),[k,V]=W.useState(null),[L,D]=W.useState(0);W.useEffect(()=>{e("canManageUsers")&&x()},[e,L]);const x=async()=>{o(!0),c(null);try{const b=await n();s(b)}catch(b){console.error("Erro ao carregar usurios:",b),c("Falha ao carregar a lista de usurios. Verifique a conexo e tente novamente.")}finally{o(!1)}},y=b=>{V(b),M(!0)},w=b=>{V(b),T(!0)},E=b=>{v(I=>({...I,[b]:!I[b]}))},N=r.filter(b=>{var I,Ve,Ue;return((I=b.email)==null?void 0:I.toLowerCase().includes(h.toLowerCase()))||((Ve=b.displayName)==null?void 0:Ve.toLowerCase().includes(h.toLowerCase()))||((Ue=b.role)==null?void 0:Ue.toLowerCase().includes(h.toLowerCase()))});return e("canManageUsers")?u.jsxs("div",{className:"p-6 space-y-6 relative",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900",children:"Gerenciamento de Usurios"}),u.jsx("p",{className:"text-slate-500",children:"Controle de cargos e permisses do sistema"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Sh,{className:"absolute left-4 top-3.5 text-slate-400",size:18}),u.jsx("input",{type:"text",placeholder:"Buscar usurios...",className:"pl-11 pr-4 py-3 rounded-xl border border-slate-200 w-64 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:h,onChange:b=>p(b.target.value)})]}),u.jsxs("button",{onClick:()=>D(b=>b+1),className:"bg-slate-200 text-slate-700 px-4 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-300 transition-colors",children:[u.jsx(vw,{size:18}),"Atualizar"]}),u.jsxs("button",{onClick:()=>P(!0),className:"bg-green-600 text-white px-4 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-green-700 transition-colors",children:[u.jsx(si,{size:18}),"Novo Usurio"]})]})]}),l&&u.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-4 border border-red-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(Fr,{size:20}),u.jsx("span",{className:"font-bold",children:"Erro"})]}),l,u.jsx("button",{onClick:x,className:"mt-2 text-sm underline font-bold",children:"Tentar novamente"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[u.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[u.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Total"}),u.jsx("div",{className:"text-2xl font-black text-slate-900",children:r.length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[u.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Administradores"}),u.jsx("div",{className:"text-2xl font-black text-red-600",children:r.filter(b=>b.role==="admin").length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[u.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Clientes"}),u.jsx("div",{className:"text-2xl font-black text-purple-600",children:r.filter(b=>b.role==="client").length})]})]}),u.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-slate-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Usurio"}),u.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Cargo"}),u.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Permisses"}),u.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Aes"})]})}),u.jsx("tbody",{children:i?u.jsx("tr",{children:u.jsx("td",{colSpan:"4",className:"p-8 text-center",children:u.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"})})}):N.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"4",className:"p-8 text-center text-slate-400",children:"Nenhum usurio encontrado"})}):N.map(b=>u.jsxs(Xy.Fragment,{children:[u.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[u.jsxs("td",{className:"p-4",children:[u.jsx("div",{className:"font-bold text-slate-800",children:b.displayName}),u.jsx("div",{className:"text-sm text-slate-500",children:b.email})]}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${Fy[b.role]||"bg-gray-100 text-gray-800"}`,children:Eu[b.role]||b.role})}),u.jsx("td",{className:"p-4",children:u.jsxs("button",{onClick:()=>E(b.id),className:"text-blue-600 hover:text-blue-800 text-sm font-bold flex items-center gap-1 transition-colors",children:[m[b.id]?"Ocultar":"Ver"," Permisses",m[b.id]?u.jsx(yw,{size:14}):u.jsx(gw,{size:14})]})}),u.jsx("td",{className:"p-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>y(b),className:"bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-blue-700 transition-colors",children:u.jsx(xC,{size:14})}),u.jsx("button",{onClick:()=>w(b),className:"bg-red-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-red-700 transition-colors",disabled:b.id===(t==null?void 0:t.uid),children:u.jsx(ea,{size:14})})]})})]}),m[b.id]&&u.jsx("tr",{className:"bg-slate-50",children:u.jsx("td",{colSpan:"4",className:"p-4",children:u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:b.permissions&&Object.entries(b.permissions).map(([I,Ve])=>u.jsxs("div",{className:"flex items-center gap-2",children:[Ve?u.jsx(Ei,{size:16,className:"text-green-500"}):u.jsx(kC,{size:16,className:"text-red-300"}),u.jsx("span",{className:"text-sm text-slate-700 capitalize",children:I.replace(/([A-Z])/g," $1").toLowerCase()})]},I))})})})]},b.id))})]})})}),u.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 shadow-sm",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2",children:[u.jsx(oc,{size:20})," Legenda de Cargos"]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(Eu).map(([b,I])=>u.jsxs("div",{className:"bg-white p-4 rounded-xl border",children:[u.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold inline-block mb-2 ${Fy[b]}`,children:I}),u.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[b==="admin"&&u.jsx("li",{children:" Acesso total ao sistema"}),b==="client"&&u.jsx("li",{children:" Dados prprios apenas"})]})]},b))})]}),C&&u.jsx(NC,{onClose:()=>P(!1),onSuccess:()=>{x(),D(b=>b+1)}}),R&&k&&u.jsx(CC,{user:k,onClose:()=>{M(!1),V(null)},onSuccess:()=>{x(),D(b=>b+1)}}),S&&k&&u.jsx(AC,{user:k,onClose:()=>{T(!1),V(null)},onSuccess:()=>{x(),D(b=>b+1)}})]}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(Fr,{className:"mx-auto text-amber-500 mb-4",size:48}),u.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Acesso Restrito"}),u.jsx("p",{className:"text-slate-600 mt-2",children:"Voc no tem permisso para gerenciar usurios."})]})}function RC(){const{login:t}=Ai(),[e,n]=W.useState(""),[r,s]=W.useState(""),[i,o]=W.useState(""),[l,c]=W.useState(!1),h=async p=>{p.preventDefault(),o(""),c(!0);try{await t(e,r)}catch(m){switch(console.error("Erro de login:",m),m.code){case"auth/user-not-found":case"auth/wrong-password":o("Email ou senha incorretos.");break;case"auth/invalid-email":o("Email invlido.");break;case"auth/too-many-requests":o("Muitas tentativas. Tente novamente mais tarde.");break;case"auth/user-disabled":o("Esta conta foi desativada.");break;default:o("Erro ao fazer login. Tente novamente.")}}finally{c(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-4",children:u.jsx(Dy,{className:"text-white",size:28})}),u.jsx("h1",{className:"text-2xl font-black text-slate-900",children:"ALFA"}),u.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Tecnologia Hospitalar"})]}),u.jsxs("form",{onSubmit:h,className:"space-y-6",children:[i&&u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[u.jsx(Fr,{size:18}),u.jsx("span",{className:"text-sm font-medium",children:i})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(mp,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:"email",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"seu@email.com",value:e,onChange:p=>n(p.target.value),disabled:l})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Senha"}),u.jsxs("div",{className:"relative",children:[u.jsx(Dy,{className:"absolute left-3 top-3 text-slate-400",size:18}),u.jsx("input",{type:"password",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"",value:r,onChange:p=>s(p.target.value),disabled:l})]})]}),u.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:l?u.jsxs(u.Fragment,{children:[u.jsx(Ds,{className:"animate-spin",size:18}),"Entrando..."]}):u.jsxs(u.Fragment,{children:[u.jsx(yC,{size:18}),"Entrar no Sistema"]})})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:u.jsx("p",{className:"text-slate-500 text-sm",children:"Entre em contato com o administrador para criar uma conta."})})]})})}const ur="alfa-tecnologia-hospitalar-prod",jC=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],DC=({data:t,colors:e,onClick:n})=>{const r=t.reduce((i,o)=>i+o.value,0);let s=0;return r===0?u.jsx("div",{className:"text-gray-400 text-xs text-center py-10",children:"Sem dados"}):u.jsxs("div",{className:"relative w-48 h-48 mx-auto group cursor-pointer",children:[u.jsxs("svg",{viewBox:"0 0 100 100",className:"transform -rotate-90 w-full h-full",children:[t.map((i,o)=>{const l=i.value/r*360,c=l>180?1:0,h=50+40*Math.cos(s*Math.PI/180),p=50+40*Math.sin(s*Math.PI/180),m=50+40*Math.cos((s+l)*Math.PI/180),v=50+40*Math.sin((s+l)*Math.PI/180),C=r===i.value?"M 50 10 a 40 40 0 1 1 0 80 a 40 40 0 1 1 0 -80":`M 50 50 L ${h} ${p} A 40 40 0 ${c} 1 ${m} ${v} Z`;return s+=l,u.jsx("path",{d:C,fill:e[o%e.length],stroke:"white",strokeWidth:"2",className:"hover:opacity-80 transition-opacity",onClick:P=>{P.stopPropagation(),n(i.label)}},o)}),u.jsx("circle",{cx:"50",cy:"50",r:"25",fill:"white",className:"pointer-events-none"})]}),u.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col pointer-events-none",children:[u.jsx("span",{className:"text-3xl font-black text-slate-800",children:r}),u.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Total"})]}),u.jsx("div",{className:"absolute -bottom-6 left-0 right-0 text-center opacity-0 group-hover:opacity-100 transition-opacity text-[10px] text-blue-500 font-bold bg-white/90 py-1 rounded-full pointer-events-none",children:"Clique para filtrar"})]})},Uy=({data:t,maxVal:e,colorClass:n,onClick:r,showValues:s=!0})=>u.jsx("div",{className:"space-y-3",children:t.map((i,o)=>u.jsxs("div",{className:"space-y-1 cursor-pointer group hover:bg-slate-50 p-2 rounded-xl transition-colors",onClick:()=>r&&r(i.label),children:[u.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-600 group-hover:text-blue-600 transition-colors",children:[u.jsx("span",{className:"truncate pr-2",children:i.label}),u.jsx("span",{className:"whitespace-nowrap",children:s?i.valueFormatted||i.value:""})]}),u.jsx("div",{className:"h-3 w-full bg-slate-100 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full ${n} group-hover:brightness-90 transition-all`,style:{width:`${e>0?i.value/e*100:0}%`}})})]},o))}),VC=({message:t,type:e="error",onClose:n})=>{const r={error:{bg:"bg-red-500",icon:u.jsx(Fr,{size:20}),title:"Ateno!",border:"border-l-4 border-red-600"},success:{bg:"bg-green-500",icon:u.jsx(Th,{size:20}),title:"Sucesso!",border:"border-l-4 border-green-600"},info:{bg:"bg-blue-500",icon:u.jsx(Al,{size:20}),title:"Informao",border:"border-l-4 border-blue-600"}},{bg:s,icon:i,title:o,border:l}=r[e];return u.jsx("div",{className:"fixed top-6 right-6 z-[100] animate-in slide-in-from-right-8 fade-in duration-300",children:u.jsxs("div",{className:`${s} ${l} text-white px-6 py-4 rounded-r-2xl shadow-2xl flex items-start gap-3 min-w-[320px] max-w-[400px]`,children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-bold text-sm mb-1",children:o}),u.jsx("div",{className:"text-sm opacity-90 whitespace-pre-line",children:t})]}),u.jsx("button",{onClick:n,className:"ml-2 opacity-70 hover:opacity-100 transition-opacity flex-shrink-0",children:u.jsx(ii,{size:16})})]})})},xt=t=>t?typeof t=="number"?t:parseFloat(t.toString().replace(/\./g,"").replace(",","."))||0:0,cr=({icon:t,label:e,active:n,onClick:r,isSidebarOpen:s})=>u.jsxs("button",{onClick:r,className:`w-full flex items-center gap-4 p-3 rounded-xl transition-colors ${n?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[t,s&&u.jsx("span",{className:"text-sm font-bold tracking-tight",children:e})]});function OC(){const{user:t,userData:e,loading:n,hasPermission:r,logout:s}=Ai(),[i,o]=W.useState("os"),[l,c]=W.useState(!0),[h,p]=W.useState(!0),[m,v]=W.useState([]),[C,P]=W.useState([]),[R,M]=W.useState([]),[S,T]=W.useState(!0),[k,V]=W.useState(""),[L,D]=W.useState(!1),[x,y]=W.useState(!1),[w,E]=W.useState(!1),[N,b]=W.useState(!1),[I,Ve]=W.useState(!1),[Ue,Cn]=W.useState(null),[_t,H]=W.useState(null),[Z,re]=W.useState(!1),[le,he]=W.useState([]),[Ie,Vt]=W.useState(""),[Ht,Ot]=W.useState(""),[F,fe]=W.useState({client:"",cnpj:"",contactPerson:"",address:"",email:"",billingType:"Avulso",maintenanceVisit:"",item:"",manufacturer:"",model:"",serial:"",defect:"",solutionType:"Manual",solution:"",solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:"",osNumber:""}),[ue,ze]=W.useState({clientName:"",cnpj:"",address:"",contactPerson:"",email:"",startDate:"",endDate:"",monthlyValue:"",annualValue:"",coveredItems:{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:""}),[Oe,Wt]=W.useState({client:!1,item:!1,defect:!1,solution:!1,notRepairableDetail:!1,solutionsList:!1}),[Hr,Wr]=W.useState({show:!1,message:"",type:"error"}),Pi=["Recebido","Em inspeo","Em oramento","Aguardando aprovao do oramento","Em manuteno","Em rota de entrega","Finalizado"],_a=["Avulso","Cortesia (visita sem custo)","Contrato de manuteno"],mn=jC[new Date().getMonth()],bt=(_,O="error")=>{Wr({show:!0,message:_,type:O}),setTimeout(()=>{Wr(q=>({...q,show:!1}))},5e3)},kt=_=>h?_.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):"R$ ",Ri=()=>{const _=xt(F.costThirdPartyShipping),O=xt(F.costParts),q=xt(F.costClientShipping),J=xt(F.chargedAmount),K=F.solutionsList.reduce((Kt,Qr)=>Kt+xt(Qr.cost),0),we=_+O+q,te=we*1.6,Q=J-we;return{totalCost:we,profit:Q,suggestedValue:te,solutionsTotal:K}},{totalCost:xa,profit:tr,suggestedValue:ji,solutionsTotal:Di}=Ri(),Vi=()=>{const _=[],O={...Oe};return Object.keys(O).forEach(q=>O[q]=!1),F.client.trim()||(_.push(" Cliente  obrigatrio"),O.client=!0),F.item.trim()||(_.push(" Item/Equipamento  obrigatrio"),O.item=!0),F.defect.trim()||(_.push(" Descrio do defeito  obrigatria"),O.defect=!0),F.solutionType==="Manual"&&!F.solution.trim()&&(_.push(" Descrio da soluo  obrigatria no modo manual"),O.solution=!0),F.solutionType==="No passvel de conserto"&&!F.notRepairableDetail&&(_.push(" Selecione uma recomendao para equipamento no reparvel"),O.notRepairableDetail=!0),F.solutionType==="Preenchimento manual, com custo"&&F.solutionsList.length===0&&(_.push(" Adicione pelo menos um item na lista de solues com custo"),O.solutionsList=!0),Wt(O),_.length>0?(bt(`Preencha os campos obrigatrios:
`+_.join(`
`),"error"),!0):!1},Le=_=>{let O=!1;switch(_){case"client":O=!F.client.trim();break;case"item":O=!F.item.trim();break;case"defect":O=!F.defect.trim();break;case"solution":O=F.solutionType==="Manual"&&!F.solution.trim();break;case"notRepairableDetail":O=F.solutionType==="No passvel de conserto"&&!F.notRepairableDetail;break;case"solutionsList":O=F.solutionType==="Preenchimento manual, com custo"&&F.solutionsList.length===0;break}Wt(q=>({...q,[_]:O}))},Se=W.useMemo(()=>{let _=0,O=0,q=0,J={};m.forEach(te=>{const Q=xt(te.chargedAmount),Kt=xt(te.costThirdPartyShipping)+xt(te.costParts)+xt(te.costClientShipping),Qr=Q-Kt;_+=Q,O+=Kt,q+=Qr,Q>0&&(J[te.client]=(J[te.client]||0)+Q)});const K=_>0?q/_*100:0,we=Object.entries(J).map(([te,Q])=>({label:te,value:Q,valueFormatted:`R$ ${Q.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`})).sort((te,Q)=>Q.value-te.value).slice(0,5);return{totalRevenue:_,totalCosts:O,totalProfit:q,margin:K,topClients:we}},[m]),Kr=W.useMemo(()=>{const _=new Set(m.filter(J=>J.billingType==="Contrato de manuteno").map(J=>J.client)),O=new Set(C.map(J=>J.clientName));return[...new Set([..._,...O])].map(J=>{const K=C.find(te=>te.clientName===J),we=m.find(te=>te.client===J);return{clientName:J,cnpj:(K==null?void 0:K.cnpj)||(we==null?void 0:we.cnpj)||"",address:(K==null?void 0:K.address)||(we==null?void 0:we.address)||"",contactPerson:(K==null?void 0:K.contactPerson)||(we==null?void 0:we.contactPerson)||"",email:(K==null?void 0:K.email)||(we==null?void 0:we.email)||"",startDate:(K==null?void 0:K.startDate)||"",endDate:(K==null?void 0:K.endDate)||"",monthlyValue:(K==null?void 0:K.monthlyValue)||"",annualValue:(K==null?void 0:K.annualValue)||"",coveredItems:(K==null?void 0:K.coveredItems)||{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:(K==null?void 0:K.observations)||"",isConfigured:!!K}}).sort((J,K)=>J.clientName.localeCompare(K.clientName))},[m,C]),nn=()=>{if(!e)return!1;if(e.role==="admin")return!0;if(e.role==="client")return["os","status","about"].includes(i);const O={os:"canViewOS",status:"canViewOS",financial:"canViewFinancial",contracts:"canViewContracts",inventory:"canViewOS",clients:"canViewAllClients",users:"canManageUsers",about:!0}[i];return O===!0||r(O)};W.useEffect(()=>{if(!t||n)return;const _=ky(fo(pt,"artifacts",ur,"public","data","serviceOrders"),q=>{const J=q.docs.map(K=>({firestoreId:K.id,...K.data()}));v(J.sort((K,we)=>{var te;return(te=we.osNumber)==null?void 0:te.localeCompare(K.osNumber)})),T(!1)},q=>{console.error("Erro ao buscar OS:",q),T(!1)}),O=ky(fo(pt,"artifacts",ur,"public","data","contracts"),q=>{P(q.docs.map(J=>J.data()))},q=>{console.error("Erro ao buscar contratos:",q)});return()=>{_(),O()}},[t,n]);const rn=W.useMemo(()=>{const _=le.length>0?m.filter(Q=>le.includes(Q.firestoreId)):m,O={};_.forEach(Q=>{O[Q.status]=(O[Q.status]||0)+1});const q=Object.keys(O).map(Q=>({label:Q,value:O[Q]})),J={};_.forEach(Q=>{J[Q.billingType]=(J[Q.billingType]||0)+1});const K=Object.keys(J).map(Q=>({label:Q,value:J[Q]})).sort((Q,Kt)=>Kt.value-Q.value);let we=0,te=0;return _.forEach(Q=>{we+=xt(Q.costThirdPartyShipping)+xt(Q.costParts),te+=xt(Q.costClientShipping)}),{count:_.length,statusChartData:q,billingChartData:K,totalInternalCosts:we,totalClientFreight:te,isFiltered:le.length>0}},[m,le]),wa=_=>{const O=new Date().getFullYear(),q=_.filter(J=>{var K;return(K=J.osNumber)==null?void 0:K.endsWith(`/${O}`)}).length+1;return`${String(q).padStart(4,"0")}/${O}`},sn=(_=null)=>{Vt(""),Ot(""),E(!1),Wt({client:!1,item:!1,defect:!1,solution:!1,notRepairableDetail:!1,solutionsList:!1}),_?(Cn(_),fe({..._,solutionsList:_.solutionsList||[]})):(Cn(null),fe({client:"",cnpj:"",contactPerson:"",address:"",email:"",billingType:"Avulso",maintenanceVisit:"",item:"",manufacturer:"",model:"",serial:"",defect:"",solutionType:"Manual",solution:"",solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:"",osNumber:wa(m)})),D(!0)},Ea=()=>{ze({clientName:"",cnpj:"",address:"",contactPerson:"",email:"",startDate:"",endDate:"",monthlyValue:"",annualValue:"",coveredItems:{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:""}),Ve(!0),b(!0)},Ta=_=>{ze(_),Ve(!1),b(!0)},Oi=async _=>{if(_.preventDefault(),!ue.clientName.trim()){bt("Nome do cliente  obrigatrio","error");return}re(!0);try{const O=ue.clientName.replace(/\s+/g,"_").toLowerCase();await Eh(Gt(pt,"artifacts",ur,"public","data","contracts",O),ue),bt("Contrato salvo com sucesso!","success"),b(!1)}catch(O){console.error("Erro ao salvar contrato",O),bt("Erro ao salvar contrato: "+O.message,"error")}finally{re(!1)}},ac=_=>{H(_),y(!0)},lc=async()=>{if(_t)try{await dw(Gt(pt,"artifacts",ur,"public","data","serviceOrders",_t.firestoreId)),bt("OS excluda com sucesso!","success"),y(!1),H(null)}catch(_){bt("Erro ao excluir: "+_.message,"error")}},Li=()=>{if(!Ie.trim()){bt("Descrio do item/servio  obrigatria","error");return}fe(_=>({..._,solutionsList:[..._.solutionsList,{id:Date.now(),text:Ie,cost:Ht||"0,00"}]})),Vt(""),Ot("")},Ia=_=>{fe(O=>({...O,solutionsList:O.solutionsList.filter(q=>q.id!==_)}))},Sa=async _=>{if(_&&_.preventDefault(),!Vi()){re(!0);try{const{firestoreId:q,...J}=F;Ue?(await xu(Gt(pt,"artifacts",ur,"public","data","serviceOrders",Ue.firestoreId),J),bt("OS atualizada com sucesso!","success")):(await by(fo(pt,"artifacts",ur,"public","data","serviceOrders"),J),bt("OS criada com sucesso!","success")),D(!1)}catch(q){console.error(q),bt(`Erro ao salvar: ${q.message}`,"error")}finally{re(!1)}}},Gr=async()=>{if(!Vi()){re(!0);try{const{firestoreId:O,...q}=F;Ue?await xu(Gt(pt,"artifacts",ur,"public","data","serviceOrders",Ue.firestoreId),q):await by(fo(pt,"artifacts",ur,"public","data","serviceOrders"),q),bt("OS salva e nova em branco criada!","success"),fe({...F,osNumber:wa([...m,F]),item:"",manufacturer:"",model:"",serial:"",defect:"",solutionType:"Manual",solution:"",solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:""}),Cn(null)}catch(O){console.error(O),bt(`Erro ao salvar: ${O.message}`,"error")}finally{re(!1)}}},Ss=_=>{he(m.filter(O=>O.status===_).map(O=>O.firestoreId))},Mi=_=>{he(m.filter(O=>O.billingType===_).map(O=>O.firestoreId))},An=async()=>{try{localStorage.removeItem("adminRestoreToken"),localStorage.removeItem("adminEmail"),await s(),window.location.href="/",setTimeout(()=>{window.location.reload()},100)}catch(_){console.error("Erro ao fazer logout:",_),window.location.reload()}},Fi=_=>{const O=m.filter(te=>le.includes(te.firestoreId));if(O.length===0)return;const q={};O.forEach(te=>{const Q=`${te.client}-${te.cnpj||"no-cnpj"}-${te.billingType}-${te.maintenanceVisit||"no-visit"}`;q[Q]||(q[Q]={header:{client:te.client,cnpj:te.cnpj,contactPerson:te.contactPerson,email:te.email,address:te.address,billingType:te.billingType,maintenanceVisit:te.maintenanceVisit},items:[]}),q[Q].items.push(te)});const J=window.open("","_blank"),we=`<html><head><title>${_==="internal"?"Relatrio INTERNO - Alfa Tecnologia":"Relatrio de Atendimento - Alfa Tecnologia"}</title><style>
@media print{@page{margin:1cm}}body{font-family:'Segoe UI',sans-serif;color:#333;line-height:1.4;padding:0;margin:0}
.report-page{page-break-after:always;padding:20px;position:relative;min-height:27cm;border-bottom:1px solid #eee}
.header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #1a56db;padding-bottom:15px;margin-bottom:20px}
.logo-area{color:#1a56db}.logo-text{font-size:28px;font-weight:900;margin:0}
.logo-sub{font-size:10px;letter-spacing:2px;text-transform:uppercase;margin:0}
.report-info{text-align:right}.report-title{font-size:16px;font-weight:900;color:#1a56db;text-transform:uppercase}
.internal-badge{background:#b91c1c;color:white;padding:2px 6px;font-size:10px;border-radius:4px;font-weight:bold;margin-bottom:4px;display:inline-block}
.section{margin-bottom:25px}.section-title{background:#f8fafc;padding:6px 12px;font-size:11px;font-weight:900;text-transform:uppercase;border-left:5px solid #1a56db;margin-bottom:12px;color:#1e40af}
.client-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:12px;margin-bottom:20px}
.items-table{width:100%;border-collapse:collapse;margin-top:10px}
.items-table th{background:#f8fafc;text-align:left;padding:10px;font-size:10px;text-transform:uppercase;color:#64748b;border-bottom:2px solid #e2e8f0}
.items-table td{padding:12px 10px;font-size:11px;border-bottom:1px solid #f1f5f9;vertical-align:top}
.os-tag{font-weight:900;color:#1a56db;display:block;margin-bottom:4px}
.cost-list-table{width:100%;margin-top:8px;border:1px solid #f1f5f9;font-size:10px;border-radius:4px}
.cost-list-table th{background:#f8fafc;padding:4px 8px;font-size:9px}
.cost-list-table td{padding:4px 8px;border-bottom:1px solid #f8fafc}
.total-row{background:#f1f5f9;font-weight:bold}
.internal-costs{margin-top:8px;padding:8px;background:#fff1f2;border:1px dashed #fda4af;border-radius:4px;font-size:10px;color:#9f1239}
.signature-area{display:flex;justify-content:space-around;margin-top:80px}
.signature-box{border-top:1px solid #333;width:250px;text-align:center;padding-top:8px;font-size:11px;font-weight:600}</style></head><body>${Object.values(q).map(te=>`
        <div class="report-page">
            <div class="header">
                <div class="logo-area">
                    <h1 class="logo-text">ALFA</h1>
                    <p class="logo-sub">TECNOLOGIA HOSPITALAR</p>
                </div>
                <div class="report-info">
                    ${_==="internal"?'<div class="internal-badge">USO INTERNO - CONFIDENCIAL</div>':""}
                    <div class="report-title">${_==="internal"?"Relatrio Gerencial":"Relatrio de Atendimento"}</div>
                    <div style="font-size:10px;">Data: ${new Date().toLocaleDateString()}</div>
                </div>
            </div>
            <div class="section">
                <div class="section-title">Dados do Cliente</div>
                <div class="client-grid">
                    <div><strong>Cliente:</strong> ${te.header.client}</div>
                    <div><strong>Atendimento:</strong> ${te.header.billingType} ${te.header.maintenanceVisit?"- "+te.header.maintenanceVisit:""}</div>
                    <div style="grid-column:span 2;"><strong>Endereo:</strong> ${te.header.address||"---"}</div>
                </div>
            </div>
            <div class="section">
                <div class="section-title">Lista de Equipamentos</div>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th width="15%">OS</th>
                            <th width="30%">Equipamento</th>
                            <th width="55%">Laudo Tcnico</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${te.items.map(Q=>{const Kt=Q.solutionsList||[],Qr=Kt.reduce((bs,uc)=>bs+parseFloat(uc.cost.replace(".","").replace(",",".")||0),0),nr=_==="internal"?`<div class="internal-costs">
                                    <strong>CONTROLE FINANCEIRO:</strong><br/>
                                    Cobrado: <b>R$ ${Q.chargedAmount||"0,00"}</b> (${Q.paymentCondition} ${Q.installments?Q.installments:""})<br/>
                                    Custos Operacionais: Frete Terceiro R$ ${Q.costThirdPartyShipping||"0,00"} | Peas R$ ${Q.costParts||"0,00"} | Frete Cliente R$ ${Q.costClientShipping||"0,00"}
                                </div>`:"";return`<tr>
                                <td>
                                    <span class="os-tag">${Q.osNumber}</span>
                                    <small>${Q.status}</small>
                                </td>
                                <td>
                                    <strong>${Q.item}</strong><br>
                                    <div style="font-size:9px;color:#666;margin-bottom:2px;">${Q.manufacturer||""} ${Q.model||""}</div>
                                    <small>NS: ${Q.serial||"N/D"}</small>
                                </td>
                                <td>
                                    <div><strong>Defeito:</strong> ${Q.defect||"N/A"}</div>
                                    <div><strong>Soluo:</strong> ${Q.solutionType==="No passvel de conserto"?`NO PASSVEL (${Q.notRepairableDetail})`:Q.solutionType==="Preenchimento manual, com custo"?"Detalhamento abaixo:":Q.solution||"Em anlise..."}</div>
                                    ${Q.solutionType==="Preenchimento manual, com custo"&&Kt.length>0?`<table class="cost-list-table">
                                            <thead>
                                                <tr>
                                                    <th style="text-align:left">Item / Servio</th>
                                                    <th style="text-align:right">Valor</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                ${Kt.map(bs=>`<tr><td>${bs.text}</td><td style="text-align:right">R$ ${bs.cost}</td></tr>`).join("")}
                                                <tr class="total-row">
                                                    <td>TOTAL</td>
                                                    <td style="text-align:right">R$ ${Qr.toLocaleString("pt-BR",{minimumFractionDigits:2})}</td>
                                                </tr>
                                            </tbody>
                                        </table>`:""}
                                    ${nr}
                                </td>
                            </tr>`}).join("")}
                    </tbody>
                </table>
            </div>
            <div class="signature-area">
                <div class="signature-box">Tcnico Responsvel</div>
                <div class="signature-box">Cliente / Recebedor</div>
            </div>
        </div>`).join("")}<script>window.onload=function(){window.print();window.close()}<\/script></body></html>`;J.document.write(we),J.document.close()};return n?u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx(Ds,{className:"animate-spin mx-auto text-blue-600 mb-4",size:40}),u.jsx("p",{className:"text-slate-600 font-medium",children:"Verificando autenticao..."})]})}):t?nn()?u.jsxs("div",{className:"flex min-h-screen bg-slate-50 font-sans overflow-hidden",children:[u.jsxs("aside",{className:`${l?"w-64":"w-20"} bg-slate-900 text-white transition-all duration-300 flex flex-col fixed h-full z-30 shadow-2xl`,children:[u.jsx("div",{className:"p-6 flex items-center justify-between border-b border-slate-800",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white shadow-lg",children:u.jsx(mC,{size:20})}),l&&u.jsx("span",{className:"font-black tracking-tighter text-lg",children:"ALFA"})]})}),u.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[u.jsx(cr,{icon:u.jsx(gC,{size:20}),label:"Painel de OS",active:i==="os",onClick:()=>o("os"),isSidebarOpen:l}),u.jsx(cr,{icon:u.jsx(Oy,{size:20}),label:"Painel de Status",active:i==="status",onClick:()=>o("status"),isSidebarOpen:l}),u.jsx(cr,{icon:u.jsx(Cy,{size:20}),label:"Financeiro",active:i==="financial",onClick:()=>o("financial"),isSidebarOpen:l}),u.jsx(cr,{icon:u.jsx(Ry,{size:20}),label:"Contratos",active:i==="contracts",onClick:()=>o("contracts"),isSidebarOpen:l}),u.jsx(cr,{icon:u.jsx(Ny,{size:20}),label:"Inventrio",active:i==="inventory",onClick:()=>o("inventory"),isSidebarOpen:l}),u.jsx(cr,{icon:u.jsx(id,{size:20}),label:"Clientes",active:i==="clients",onClick:()=>o("clients"),isSidebarOpen:l}),r("canManageUsers")&&u.jsx(cr,{icon:u.jsx(oc,{size:20}),label:"Usurios",active:i==="users",onClick:()=>o("users"),isSidebarOpen:l}),u.jsx("div",{className:"pt-4 border-t border-slate-800 mt-4",children:u.jsx(cr,{icon:u.jsx(Al,{size:20}),label:"Sobre",active:i==="about",onClick:()=>o("about"),isSidebarOpen:l})})]}),u.jsx("div",{className:"border-t border-slate-800 p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{onClick:()=>c(!l),className:"text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-slate-800",title:l?"Recolher Sidebar":"Expandir Sidebar",children:u.jsx(pC,{className:`transition-transform duration-300 ${l?"rotate-180":""}`,size:20})}),u.jsx("button",{onClick:An,className:"text-red-400 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-slate-800",title:"Sair",children:u.jsx(vC,{size:20})})]})})]}),u.jsxs("main",{className:`flex-1 transition-all duration-300 ${l?"ml-64":"ml-20"} p-4 md:p-8 overflow-y-auto h-screen`,children:[i==="os"&&nn()&&u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Gesto de OS"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"Fluxo operacional hospitalar"})]}),u.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[le.length>0?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>Fi("client"),className:"flex-1 md:flex-none bg-indigo-600 text-white px-6 py-4 rounded-[1.5rem] font-black flex items-center justify-center gap-2 shadow-xl hover:bg-indigo-700 transition-colors",children:[u.jsx(Ly,{size:20})," Imprimir Cliente (",le.length,")"]}),u.jsxs("button",{onClick:()=>Fi("internal"),className:"flex-1 md:flex-none bg-slate-800 text-white px-6 py-4 rounded-[1.5rem] font-black flex items-center justify-center gap-2 shadow-xl hover:bg-slate-900 transition-colors",children:[u.jsx(My,{size:20})," Imprimir Interno"]})]}):u.jsxs("div",{className:"bg-indigo-50 text-indigo-400 px-6 py-4 rounded-[1.5rem] font-bold text-sm flex items-center gap-2 border border-indigo-100",children:[u.jsx(Ly,{size:20,className:"opacity-50"})," Selecione OS para imprimir"]}),r("canEditOS")&&u.jsxs("button",{onClick:()=>sn(),className:"flex-1 md:flex-none bg-blue-600 text-white px-8 py-4 rounded-[1.5rem] font-black flex items-center justify-center gap-3 shadow-2xl shadow-blue-200 hover:bg-blue-700 transition-colors ml-2",children:[u.jsx(si,{size:24})," Abrir Nova OS"]})]})]}),u.jsxs("div",{className:"relative group z-20",children:[u.jsx(Sh,{className:"absolute left-5 top-5 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:24}),u.jsx("input",{className:"w-full pl-14 pr-6 py-5 rounded-[1.5rem] border-none shadow-xl shadow-slate-200/50 focus:ring-4 focus:ring-blue-500/10 text-lg font-medium outline-none bg-white relative z-10",placeholder:"Pesquise por cliente, OS ou equipamento...",value:k,onChange:_=>V(_.target.value)}),k&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-top-2 z-50",children:[m.filter(_=>{var O,q,J;return((O=_.client)==null?void 0:O.toLowerCase().includes(k.toLowerCase()))||((q=_.osNumber)==null?void 0:q.includes(k))||((J=_.item)==null?void 0:J.toLowerCase().includes(k.toLowerCase()))}).slice(0,5).map(_=>u.jsxs("div",{onClick:()=>{sn(_),V("")},className:"p-4 border-b border-slate-50 hover:bg-blue-50 cursor-pointer flex justify-between items-center group/item transition-colors",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"font-bold text-slate-800 flex items-center gap-2",children:[_.client,u.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 rounded-full uppercase",children:_.status})]}),u.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[u.jsx("span",{className:"font-mono text-blue-600 font-bold",children:_.osNumber})," - ",_.item]})]}),u.jsxs("div",{className:"text-xs font-bold text-blue-600 opacity-0 group-hover/item:opacity-100 flex items-center gap-1 transition-all",children:["Abrir ",u.jsx(ll,{size:14})]})]},_.firestoreId)),m.filter(_=>{var O,q,J;return((O=_.client)==null?void 0:O.toLowerCase().includes(k.toLowerCase()))||((q=_.osNumber)==null?void 0:q.includes(k))||((J=_.item)==null?void 0:J.toLowerCase().includes(k.toLowerCase()))}).length===0&&u.jsx("div",{className:"p-6 text-center text-slate-400 text-sm font-medium",children:"Nenhum resultado encontrado."})]})]}),u.jsx("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden overflow-x-auto relative z-0",children:u.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[u.jsx("thead",{className:"bg-slate-50/50 border-b text-[10px] font-black uppercase text-slate-400 tracking-widest",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-6 text-center w-12",children:u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600",onChange:_=>he(_.target.checked?m.filter(O=>{var q,J;return((q=O.client)==null?void 0:q.toLowerCase().includes(k.toLowerCase()))||((J=O.osNumber)==null?void 0:J.includes(k))}).map(O=>O.firestoreId):[]),checked:le.length>0&&le.length===m.length})}),u.jsx("th",{className:"px-8 py-6",children:"Identificao"}),u.jsx("th",{className:"px-8 py-6",children:"Equipamento"}),u.jsx("th",{className:"px-8 py-6",children:"Tipo"}),u.jsx("th",{className:"px-8 py-6",children:"Status"}),u.jsx("th",{className:"px-8 py-6 text-right",children:"Aes"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-50",children:S?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"p-20 text-center",children:u.jsx(Ds,{className:"animate-spin mx-auto text-blue-600",size:32})})}):m.filter(_=>{var O,q;return((O=_.client)==null?void 0:O.toLowerCase().includes(k.toLowerCase()))||((q=_.osNumber)==null?void 0:q.includes(k))}).map(_=>u.jsxs("tr",{className:`hover:bg-blue-50/30 transition-colors group ${le.includes(_.firestoreId)?"bg-blue-50/50":""}`,children:[u.jsx("td",{className:"px-6 py-4 text-center",children:u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600",checked:le.includes(_.firestoreId),onChange:()=>he(O=>O.includes(_.firestoreId)?O.filter(q=>q!==_.firestoreId):[...O,_.firestoreId])})}),u.jsxs("td",{className:"px-8 py-6",children:[u.jsx("div",{className:"font-black text-blue-700 text-lg",children:_.osNumber}),u.jsx("div",{className:"font-bold text-slate-900 text-sm",children:_.client})]}),u.jsxs("td",{className:"px-8 py-6",children:[u.jsx("div",{className:"font-bold text-slate-900 text-sm",children:_.item}),u.jsxs("div",{className:"text-[10px] text-slate-400 font-mono",children:["NS: ",_.serial||"N/D"]})]}),u.jsx("td",{className:"px-8 py-6",children:u.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-tighter",children:_.billingType})}),u.jsx("td",{className:"px-8 py-6",children:u.jsx("div",{className:"px-4 py-2 rounded-xl text-[10px] font-black uppercase inline-block border bg-slate-100 text-slate-600",children:_.status})}),u.jsx("td",{className:"px-8 py-6 text-right",children:u.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>sn(_),className:"p-3 bg-white border shadow-sm hover:bg-blue-600 hover:text-white rounded-xl transition-all",children:u.jsx(wC,{size:18})}),r("canDeleteOS")&&u.jsx("button",{onClick:()=>ac(_),className:"p-3 bg-white border shadow-sm hover:bg-red-600 hover:text-white rounded-xl transition-all",children:u.jsx(ea,{size:18})})]})})]},_.firestoreId))})]})})]}),i==="status"&&nn()&&u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-7xl mx-auto h-full flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-end shrink-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Indicadores"}),u.jsx("p",{className:"text-slate-500 font-medium",children:rn.isFiltered?`Visualizando mtricas de ${rn.count} ordens selecionadas`:`Visualizando mtricas gerais de todas as ordens (${rn.count})`})]}),rn.isFiltered&&u.jsx("button",{onClick:()=>he([]),className:"text-sm font-bold text-blue-600 hover:underline",children:"Limpar filtro e ver geral"})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-6 min-h-0",children:[u.jsxs("div",{className:"lg:col-span-4 bg-white rounded-[2rem] shadow-xl border border-slate-100 flex flex-col overflow-hidden max-h-[calc(100vh-200px)]",children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:[u.jsxs("div",{className:"relative group mb-3 z-30",children:[u.jsx(Sh,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:18}),u.jsx("input",{className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 shadow-sm focus:ring-2 focus:ring-blue-500/20 text-sm font-bold outline-none bg-white relative z-20",placeholder:"Buscar OS para filtrar...",value:k,onChange:_=>V(_.target.value)}),k&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-top-2 z-50",children:[m.filter(_=>{var O,q,J;return((O=_.client)==null?void 0:O.toLowerCase().includes(k.toLowerCase()))||((q=_.osNumber)==null?void 0:q.includes(k))||((J=_.item)==null?void 0:J.toLowerCase().includes(k.toLowerCase()))}).slice(0,5).map(_=>u.jsxs("div",{onClick:()=>{sn(_),V("")},className:"p-3 border-b border-slate-50 hover:bg-blue-50 cursor-pointer flex justify-between items-center group/item transition-colors",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 text-xs flex items-center gap-2",children:_.client}),u.jsxs("div",{className:"text-[10px] text-slate-500 mt-0.5",children:[u.jsx("span",{className:"font-mono text-blue-600 font-bold",children:_.osNumber})," - ",_.item]})]}),u.jsxs("div",{className:"text-[10px] font-bold text-blue-600 opacity-0 group-hover/item:opacity-100 flex items-center gap-1 transition-all",children:["Abrir ",u.jsx(ll,{size:12})]})]},_.firestoreId)),m.filter(_=>{var O,q,J;return((O=_.client)==null?void 0:O.toLowerCase().includes(k.toLowerCase()))||((q=_.osNumber)==null?void 0:q.includes(k))||((J=_.item)==null?void 0:J.toLowerCase().includes(k.toLowerCase()))}).length===0&&u.jsx("div",{className:"p-4 text-center text-slate-400 text-[10px] font-medium",children:"Nenhum resultado."})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 px-1",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-0 cursor-pointer",onChange:_=>{const O=m.filter(q=>{var J,K;return((J=q.client)==null?void 0:J.toLowerCase().includes(k.toLowerCase()))||((K=q.osNumber)==null?void 0:K.includes(k))});he(_.target.checked?O.map(q=>q.firestoreId):[])},checked:le.length>0&&m.filter(_=>{var O,q;return((O=_.client)==null?void 0:O.toLowerCase().includes(k.toLowerCase()))||((q=_.osNumber)==null?void 0:q.includes(k))}).every(_=>le.includes(_.firestoreId))}),u.jsx("span",{children:"Selecionar Todos da Busca"})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 relative z-0",children:[m.filter(_=>{var O,q;return((O=_.client)==null?void 0:O.toLowerCase().includes(k.toLowerCase()))||((q=_.osNumber)==null?void 0:q.includes(k))}).map(_=>u.jsx("div",{onClick:()=>he(O=>O.includes(_.firestoreId)?O.filter(q=>q!==_.firestoreId):[...O,_.firestoreId]),className:`p-3 rounded-xl border cursor-pointer transition-all hover:shadow-md select-none ${le.includes(_.firestoreId)?"bg-blue-50 border-blue-200 ring-1 ring-blue-200":"bg-white border-slate-100 hover:bg-slate-50"}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`mt-1 w-4 h-4 rounded border flex items-center justify-center transition-colors ${le.includes(_.firestoreId)?"bg-blue-600 border-blue-600":"border-slate-300 bg-white"}`,children:le.includes(_.firestoreId)&&u.jsx(Th,{size:12,className:"text-white"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"font-black text-blue-700 text-xs",children:_.osNumber}),u.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded font-bold uppercase ${le.includes(_.firestoreId)?"bg-blue-200 text-blue-800":"bg-slate-100 text-slate-500"}`,children:_.status})]}),u.jsx("div",{className:"font-bold text-slate-800 text-sm leading-tight truncate",children:_.client}),u.jsx("div",{className:"text-[10px] text-slate-400 mt-0.5 truncate",children:_.item})]}),u.jsx("button",{onClick:O=>{O.stopPropagation(),sn(_)},className:"p-2 -mr-1 mt-0.5 text-slate-400 hover:text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Abrir Detalhes da OS",children:u.jsx(ll,{size:18})})]})},_.firestoreId)),m.length===0&&u.jsx("div",{className:"text-center py-10 text-slate-400 text-xs",children:"Nenhuma OS encontrada."})]})]}),u.jsx("div",{className:"lg:col-span-8 space-y-6 overflow-y-auto pr-1 pb-10",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-4 relative overflow-hidden",children:[u.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(Oy,{size:16})," Status Geral"]}),u.jsx(DC,{data:rn.statusChartData,colors:["#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#f59e0b"],onClick:Ss}),u.jsx("div",{className:"space-y-2 mt-4",children:rn.statusChartData.slice(0,4).map((_,O)=>u.jsxs("div",{className:"flex justify-between text-xs text-slate-600 font-medium cursor-pointer hover:bg-slate-50 p-1 rounded transition-colors",onClick:()=>Ss(_.label),children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:["#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#f59e0b"][O]}})," ",_.label]}),u.jsx("span",{children:_.value})]},O))}),u.jsx("div",{className:"absolute top-4 right-4 text-slate-300",children:u.jsx(Vy,{size:16})})]}),u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-4 relative overflow-hidden",children:[u.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(cC,{size:16})," Tipo de Faturamento"]}),u.jsx(Uy,{data:rn.billingChartData,maxVal:Math.max(...rn.billingChartData.map(_=>_.value),1),colorClass:"bg-emerald-500",onClick:Mi,showValues:h}),u.jsx("div",{className:"absolute top-4 right-4 text-slate-300",children:u.jsx(Vy,{size:16})})]})]})})]})]}),i==="financial"&&nn()&&u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto h-full",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Financeiro"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"Anlise de custos e receitas acumuladas"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(IC,{size:16})," Receita Bruta"]}),u.jsxs("div",{className:"text-3xl font-black text-slate-900",children:["R$ ",kt(Se.totalRevenue)]}),u.jsx("div",{className:"text-xs text-slate-400",children:"Total cobrado em OS"})]}),u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold uppercase text-xs tracking-widest",children:[u.jsx(lC,{size:16})," Custos Operacionais"]}),u.jsxs("div",{className:"text-3xl font-black text-slate-900",children:["R$ ",kt(Se.totalCosts)]}),u.jsx("div",{className:"text-xs text-slate-400",children:"Peas + Fretes Terceiros"})]}),u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(uC,{size:16})," Lucro Lquido"]}),u.jsxs("div",{className:"text-3xl font-black text-green-600",children:["R$ ",kt(Se.totalProfit)]}),u.jsx("div",{className:"text-xs text-slate-400",children:"Receita - Custos"})]}),u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-purple-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(TC,{size:16})," Margem de Lucro"]}),u.jsxs("div",{className:"text-3xl font-black text-purple-600",children:[Se.margin.toLocaleString("pt-BR",{maximumFractionDigits:1}),"%"]}),u.jsx("div",{className:"text-xs text-slate-400",children:"Rentabilidade mdia"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-bold uppercase text-xs tracking-widest mb-6",children:[u.jsx(id,{size:16})," Top Clientes (Receita)"]}),Se.topClients.length>0?u.jsx(Uy,{data:Se.topClients,maxVal:Se.topClients[0].value,colorClass:"bg-blue-600",showValues:h}):u.jsx("div",{className:"text-center py-10 text-slate-400",children:"Sem dados financeiros"})]}),u.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-[2rem] shadow-xl text-white flex flex-col justify-center",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Status Financeiro"}),u.jsx("h3",{className:"text-2xl font-black",children:"Resumo Geral"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[u.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Total de Ordens Analisadas"}),u.jsx("span",{className:"font-bold text-xl",children:m.length})]}),u.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[u.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Ticket Mdio (Receita/OS)"}),u.jsxs("span",{className:"font-bold text-xl",children:["R$ ",kt(m.length>0?Se.totalRevenue/m.length:0)]})]}),u.jsxs("div",{className:"flex justify-between items-center pb-2",children:[u.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Lucro Mdio por OS"}),u.jsxs("span",{className:"font-bold text-xl text-green-400",children:["R$ ",kt(m.length>0?Se.totalProfit/m.length:0)]})]})]})]})})]})]}),i==="contracts"&&nn()&&u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Contratos de Manuteno"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"Gesto de vigncias e escopo de atendimento"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"hidden md:flex bg-blue-50 text-blue-600 px-6 py-3 rounded-2xl font-bold text-sm border border-blue-100 items-center gap-2",children:[u.jsx(Al,{size:18}),"Contratos ativos e manuais"]}),u.jsxs("button",{onClick:Ea,className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black flex items-center gap-2 shadow-xl shadow-blue-200 hover:bg-blue-700 transition-colors",children:[u.jsx(si,{size:20})," Novo Contrato"]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Kr.length===0?u.jsx("div",{className:"col-span-3 text-center py-20 text-slate-400",children:"Nenhum contrato encontrado. Adicione um manualmente ou crie uma OS."}):Kr.map((_,O)=>u.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl overflow-hidden group hover:shadow-2xl transition-all",children:[u.jsxs("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-black text-lg text-slate-800 leading-tight mb-1",children:_.clientName}),u.jsx("div",{className:"text-xs text-slate-500 font-medium truncate max-w-[200px]",children:_.cnpj||"CNPJ no informado"})]}),u.jsx("div",{className:`p-2 rounded-lg ${_.isConfigured?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"}`,children:_.isConfigured?u.jsx(Th,{size:20}):u.jsx(Fr,{size:20})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia Incio"}),u.jsx("div",{className:"font-bold text-slate-700",children:_.startDate?new Date(_.startDate+"T00:00:00").toLocaleDateString():"---"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia Fim"}),u.jsx("div",{className:"font-bold text-slate-700",children:_.endDate?new Date(_.endDate+"T00:00:00").toLocaleDateString():"---"})]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Mensal"}),u.jsxs("span",{className:"font-black text-slate-800",children:["R$ ",kt(xt(_.monthlyValue))]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Anual"}),u.jsxs("span",{className:"font-black text-blue-600",children:["R$ ",kt(xt(_.annualValue))]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Escopo Contratado"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.coveredItems.videoSurgeryInstruments&&u.jsx("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-2 py-1 rounded border border-indigo-100 font-bold",children:"Instr. Videocirurgia"}),_.coveredItems.openInstruments&&u.jsx("span",{className:"text-[9px] bg-purple-50 text-purple-600 px-2 py-1 rounded border border-purple-100 font-bold",children:"Instr. Abertos"}),_.coveredItems.videoSurgeryEquipment&&u.jsx("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-100 font-bold",children:"Equip. Vdeo"}),_.coveredItems.endoscopes&&u.jsx("span",{className:"text-[9px] bg-emerald-50 text-emerald-600 px-2 py-1 rounded border border-emerald-100 font-bold",children:"Endoscpios"}),!Object.values(_.coveredItems).some(Boolean)&&u.jsx("span",{className:"text-[9px] text-slate-400 italic",children:"Nenhum item selecionado"})]})]})]}),u.jsxs("button",{onClick:()=>Ta(_),className:"w-full py-4 bg-slate-50 hover:bg-slate-100 border-t border-slate-100 text-slate-600 font-bold text-xs uppercase tracking-widest transition-colors flex items-center justify-center gap-2",children:[u.jsx(Ry,{size:16})," ",_.isConfigured?"Editar Contrato":"Configurar Contrato"]})]},O))})]}),i==="inventory"&&nn()&&u.jsxs("div",{className:"p-20 text-center",children:[u.jsx(Ny,{size:80,className:"mx-auto text-slate-200 mb-6"}),u.jsx("h3",{className:"text-2xl font-black",children:"Inventrio em breve"})]}),i==="clients"&&nn()&&u.jsxs("div",{className:"p-20 text-center",children:[u.jsx(id,{size:80,className:"mx-auto text-slate-200 mb-6"}),u.jsx("h3",{className:"text-2xl font-black",children:"Mdulo de Clientes em breve"})]}),i==="users"&&nn()&&u.jsx(PC,{}),i==="about"&&u.jsxs("div",{className:"p-20 text-center",children:[u.jsx(Al,{size:80,className:"mx-auto text-slate-200 mb-6"}),u.jsx("h3",{className:"text-2xl font-black",children:"Sobre o Sistema"})]})]}),L&&u.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-50 flex items-center justify-center p-2 sm:p-4 overflow-y-auto",children:u.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-5xl my-auto shadow-2xl border border-slate-200 animate-in zoom-in-95 duration-200",children:u.jsxs("form",{onSubmit:Sa,className:"p-6 md:p-10 space-y-10",children:[u.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:["OS ",F.osNumber]}),u.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Relatrio de Atendimento Tcnico"})]}),u.jsx("button",{type:"button",onClick:()=>D(!1),className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:u.jsx(ii,{})})]}),u.jsxs("div",{className:"space-y-10",children:[u.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(wu,{size:16})," Cliente"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("input",{placeholder:"Nome da Empresa",className:`w-full p-4 bg-white border ${Oe.client?"border-red-500":"border-slate-200"} rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold`,value:F.client,onChange:_=>{fe({...F,client:_.target.value}),Oe.client&&Wt(O=>({...O,client:!1}))},onBlur:()=>Le("client")}),Oe.client&&u.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Cliente  obrigatrio"})]}),u.jsx("input",{placeholder:"CNPJ",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:F.cnpj,onChange:_=>fe({...F,cnpj:_.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("input",{placeholder:"Responsvel",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:F.contactPerson,onChange:_=>fe({...F,contactPerson:_.target.value})}),u.jsx("input",{placeholder:"E-mail",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:F.email,onChange:_=>fe({...F,email:_.target.value})})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 flex justify-between",children:["Endereo",F.address&&u.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F.address)}`,target:"_blank",className:"text-blue-600 hover:underline flex items-center gap-1",children:[u.jsx(ll,{size:10})," Ver no Maps"]})]}),u.jsx("input",{placeholder:"Endereo Completo",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:F.address,onChange:_=>fe({...F,address:_.target.value})})]})]}),u.jsx("hr",{className:"border-slate-200/50"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(hC,{size:16})," Atendimento"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-indigo-500/10 transition-all font-bold",value:F.billingType,onChange:_=>fe({...F,billingType:_.target.value,maintenanceVisit:""}),children:_a.map(_=>u.jsx("option",{value:_,children:_},_))}),F.billingType==="Contrato de manuteno"&&u.jsxs("select",{className:"w-full p-4 bg-white border border-indigo-200 rounded-2xl outline-none font-bold animate-in slide-in-from-top-2",value:F.maintenanceVisit,onChange:_=>fe({...F,maintenanceVisit:_.target.value}),children:[u.jsx("option",{value:"",children:"Selecione a visita..."}),u.jsxs("option",{value:`1 Visita de ${mn}`,children:["1 Visita de ",mn]}),u.jsxs("option",{value:`2 Visita de ${mn}`,children:["2 Visita de ",mn]}),u.jsxs("option",{value:`3 Visita de ${mn}`,children:["3 Visita de ",mn]}),u.jsxs("option",{value:`4 Visita de ${mn}`,children:["4 Visita de ",mn]})]})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-orange-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(_C,{size:16})," Equipamento"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{children:[u.jsx("input",{placeholder:"Item / Nome",className:`w-full p-4 bg-slate-50 border ${Oe.item?"border-red-500":"border-slate-200"} rounded-2xl outline-none font-bold`,value:F.item,onChange:_=>{fe({...F,item:_.target.value}),Oe.item&&Wt(O=>({...O,item:!1}))},onBlur:()=>Le("item")}),Oe.item&&u.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Item/Equipamento  obrigatrio"})]}),u.jsx("input",{placeholder:"Marca",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold",value:F.manufacturer,onChange:_=>fe({...F,manufacturer:_.target.value})}),u.jsx("input",{placeholder:"Modelo",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold",value:F.model,onChange:_=>fe({...F,model:_.target.value})}),u.jsx("input",{placeholder:"Nmero de Srie",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold font-mono",value:F.serial,onChange:_=>fe({...F,serial:_.target.value})})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(bC,{size:16})," Laudo Tcnico"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsx("textarea",{rows:"8",placeholder:"Descrio detalhada do defeito...",className:`w-full p-4 bg-slate-50 border ${Oe.defect?"border-red-500":"border-slate-200"} rounded-2xl outline-none font-medium`,value:F.defect,onChange:_=>{fe({...F,defect:_.target.value}),Oe.defect&&Wt(O=>({...O,defect:!1}))},onBlur:()=>Le("defect")}),Oe.defect&&u.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Descrio do defeito  obrigatria"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("select",{className:"w-full p-4 bg-slate-900 text-white border-none rounded-2xl outline-none cursor-pointer font-bold",value:F.solutionType,onChange:_=>fe({...F,solutionType:_.target.value}),children:[u.jsx("option",{value:"Manual",children:"Preenchimento Manual"}),u.jsx("option",{value:"Preenchimento manual, com custo",children:"Manual com Custos Detalhados (+)"}),u.jsx("option",{value:"No passvel de conserto",children:"No Passvel de Conserto"})]}),F.solutionType==="Manual"&&u.jsxs("div",{children:[u.jsx("textarea",{rows:"4",placeholder:"Descrio da soluo aplicada...",className:`w-full p-4 bg-slate-50 border ${Oe.solution?"border-red-500":"border-slate-200"} rounded-2xl outline-none font-medium`,value:F.solution,onChange:_=>{fe({...F,solution:_.target.value}),Oe.solution&&Wt(O=>({...O,solution:!1}))},onBlur:()=>Le("solution")}),Oe.solution&&u.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Descrio da soluo  obrigatria"})]}),F.solutionType==="Preenchimento manual, com custo"&&u.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[u.jsxs("div",{className:"bg-green-50 p-4 rounded-2xl border border-green-100 space-y-3",children:[u.jsx("input",{placeholder:"Item, Pea ou Servio",className:"w-full p-2 bg-white border border-green-200 rounded-lg text-sm",value:Ie,onChange:_=>Vt(_.target.value)}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{placeholder:"Valor R$ 0,00",className:"flex-1 p-2 bg-white border border-green-200 rounded-lg text-sm",value:Ht,onChange:_=>Ot(_.target.value)}),u.jsx("button",{type:"button",onClick:Li,className:"bg-green-600 text-white p-2.5 rounded-lg shadow-lg shadow-green-200",children:u.jsx(si,{size:20})})]})]}),u.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:F.solutionsList.map(_=>u.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-right-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-bold text-slate-800",children:_.text}),u.jsxs("div",{className:"text-[10px] text-green-600 font-black",children:["R$ ",_.cost]})]}),u.jsx("button",{type:"button",onClick:()=>Ia(_.id),children:u.jsx(ii,{size:16,className:"text-red-300 hover:text-red-500"})})]},_.id))}),Oe.solutionsList&&F.solutionsList.length===0&&u.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Adicione pelo menos um item na lista de solues"})]}),F.solutionType==="No passvel de conserto"&&u.jsxs("div",{children:[u.jsxs("select",{className:`w-full p-4 ${Oe.notRepairableDetail?"bg-red-50 border-red-500":"bg-red-50 border-red-100"} text-red-900 border rounded-2xl outline-none font-bold`,value:F.notRepairableDetail,onChange:_=>{fe({...F,notRepairableDetail:_.target.value}),Oe.notRepairableDetail&&Wt(O=>({...O,notRepairableDetail:!1}))},onBlur:()=>Le("notRepairableDetail"),children:[u.jsx("option",{value:"",children:"Selecione Recomendao..."}),u.jsx("option",{value:"Conserto em bancada",children:"Conserto em bancada"}),u.jsx("option",{value:"Necessrio substituir por novo",children:"Substituir por equipamento novo"})]}),Oe.notRepairableDetail&&u.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Selecione uma recomendao"})]})]})]})]}),u.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-6 transition-all duration-300",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>E(!w),children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-bold uppercase text-xs tracking-widest",children:[u.jsx(Cy,{size:16})," Financeiro & Custos (Controle Interno)"]}),w?u.jsx(yw,{size:20,className:"text-slate-400"}):u.jsx(gw,{size:20,className:"text-slate-400"})]}),w&&u.jsxs("div",{className:"space-y-6 animate-in slide-in-from-top-4 fade-in duration-300",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Nome do Terceiro / Transportadora"}),u.jsx("input",{placeholder:"Ex: JadLog / Lab Especializado",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:F.costThirdPartyName,onChange:_=>fe({...F,costThirdPartyName:_.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Frete Terceiro (R$)"}),u.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:F.costThirdPartyShipping,onChange:_=>fe({...F,costThirdPartyShipping:_.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Peas/Servios (R$)"}),u.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:F.costParts,onChange:_=>fe({...F,costParts:_.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Frete Cliente (R$)"}),u.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:F.costClientShipping,onChange:_=>fe({...F,costClientShipping:_.target.value})})]})]}),u.jsx("hr",{className:"border-slate-200/50"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 items-start",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-blue-500 uppercase",children:"Valor Sugerido (+60%)"}),u.jsxs("div",{className:"w-full p-4 bg-blue-50/50 border border-blue-100 rounded-2xl font-black text-blue-600 cursor-not-allowed text-sm",children:["R$ ",kt(ji)]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase",children:"Soma Itens Laudo"}),u.jsxs("div",{className:"w-full p-4 bg-purple-50/50 border border-purple-100 rounded-2xl font-black text-purple-700 cursor-not-allowed text-sm",children:["R$ ",kt(Di)]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-green-600 uppercase",children:"Valor Cobrado (R$)"}),u.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-green-50 border border-green-100 rounded-2xl outline-none font-black text-green-700 text-sm",value:F.chargedAmount,onChange:_=>fe({...F,chargedAmount:_.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Condio Pagamento"}),u.jsxs("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold text-sm",value:F.paymentCondition,onChange:_=>fe({...F,paymentCondition:_.target.value,installments:""}),children:[u.jsx("option",{value:" vista",children:" vista"}),u.jsx("option",{value:"Boleto",children:"Boleto"}),u.jsx("option",{value:"Carto",children:"Carto"})]})]}),(F.paymentCondition==="Boleto"||F.paymentCondition==="Carto")&&u.jsxs("div",{className:"space-y-2 animate-in fade-in",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Parcelas"}),u.jsxs("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold text-sm",value:F.installments,onChange:_=>fe({...F,installments:_.target.value}),children:[u.jsx("option",{value:"",children:"Selecione..."}),u.jsx("option",{value:"1x",children:"1x"}),u.jsx("option",{value:"2x",children:"2x"}),u.jsx("option",{value:"3x",children:"3x"}),u.jsx("option",{value:"4x",children:"4x"})]})]})]}),u.jsxs("div",{className:`p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4 transition-colors ${tr>=0?"bg-green-100/50 border border-green-200":"bg-red-100/50 border border-red-200"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-3 rounded-full ${tr>=0?"bg-green-200 text-green-700":"bg-red-200 text-red-700"}`,children:u.jsx(dC,{size:24})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-black uppercase text-slate-500",children:"Resultado Operacional"}),u.jsx("div",{className:`text-2xl font-black ${tr>=0?"text-green-700":"text-red-700"}`,children:tr>=0?"LUCRO":"PREJUZO"})]})]}),u.jsxs("div",{className:"flex gap-8 text-right",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Custo Total"}),u.jsxs("div",{className:"font-bold text-slate-700",children:["R$ ",kt(xa)]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Resultado"}),u.jsxs("div",{className:`text-xl font-black ${tr>=0?"text-green-600":"text-red-600"}`,children:["R$ ",kt(tr)]})]})]})]})]})]}),u.jsxs("div",{className:"space-y-6 pt-6 border-t",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-900 font-bold uppercase text-xs tracking-widest",children:[u.jsx(SC,{size:16})," Logstica e Status Final"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Status Geral"}),u.jsx("select",{className:"w-full p-4 bg-slate-100 border-none rounded-2xl outline-none font-bold",value:F.status,onChange:_=>fe({...F,status:_.target.value}),children:Pi.map(_=>u.jsx("option",{value:_,children:_},_))})]}),F.status!=="Recebido"&&u.jsxs("div",{className:"space-y-1 animate-in fade-in",children:[u.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Enviado para Terceiro?"}),u.jsxs("select",{className:"w-full p-4 bg-slate-100 border-none rounded-2xl outline-none font-bold",value:F.sentToThirdParty,onChange:_=>fe({...F,sentToThirdParty:_.target.value}),children:[u.jsx("option",{value:"No",children:"No"}),u.jsx("option",{value:"Sim",children:"Sim"})]})]}),F.status==="Em rota de entrega"&&u.jsxs("div",{className:"space-y-1 animate-in zoom-in-95",children:[u.jsx("label",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Rastreamento"}),u.jsx("input",{placeholder:"Cdigo de Rastreio",className:"w-full p-4 bg-blue-50 border border-blue-100 rounded-2xl outline-none font-bold",value:F.trackingCode,onChange:_=>fe({...F,trackingCode:_.target.value})})]})]}),F.sentToThirdParty==="Sim"&&F.status!=="Recebido"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-6 bg-slate-100 rounded-3xl border border-slate-200 animate-in slide-in-from-top-4",children:[u.jsx("input",{placeholder:"Empresa Terceira",className:"w-full p-3 bg-white border rounded-xl text-sm",value:F.thirdPartyInfo,onChange:_=>fe({...F,thirdPartyInfo:_.target.value})}),u.jsx("input",{placeholder:"Rastreio Terceiro",className:"w-full p-3 bg-white border rounded-xl text-sm",value:F.thirdPartyTracking,onChange:_=>fe({...F,thirdPartyTracking:_.target.value})}),u.jsx("input",{type:"date",className:"w-full p-3 bg-white border rounded-xl text-sm",value:F.thirdPartyDate,onChange:_=>fe({...F,thirdPartyDate:_.target.value})})]})]})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 pt-10 border-t",children:[u.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-8 py-5 bg-slate-100 text-slate-600 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-slate-200 transition-colors",children:"Cancelar"}),u.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4",children:[u.jsxs("button",{type:"button",onClick:Gr,disabled:Z,className:"flex-1 bg-indigo-50 text-indigo-700 border-2 border-indigo-100 p-5 rounded-2xl font-black text-xs hover:bg-indigo-100 transition-all flex items-center justify-center gap-3",children:[Z?u.jsx(Ds,{className:"animate-spin",size:18}):u.jsx(vw,{size:18})," NOVA OS COM MESMO CLIENTE"]}),u.jsxs("button",{type:"submit",disabled:Z,className:"flex-1 bg-blue-600 text-white p-5 rounded-2xl font-black text-lg hover:bg-blue-700 shadow-xl shadow-blue-200 transition-all flex items-center justify-center gap-3",children:[Z?u.jsx(Ds,{className:"animate-spin",size:20}):u.jsx(Ih,{size:20})," SALVAR OS"]})]})]})]})})}),N&&u.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[60] flex items-center justify-center p-2 sm:p-4",children:u.jsx("div",{className:"bg-white rounded-[2rem] w-full max-w-3xl my-auto shadow-2xl border border-slate-200 animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:u.jsxs("form",{onSubmit:Oi,className:"p-8 space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center border-b pb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:I?"Novo Contrato":"Configurar Contrato"}),u.jsx("p",{className:"text-slate-500 text-sm font-medium",children:I?"Preencha os dados do cliente e contrato":ue.clientName})]}),u.jsx("button",{type:"button",onClick:()=>b(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:u.jsx(ii,{size:20})})]}),u.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest mb-2",children:[u.jsx(wu,{size:16})," Dados do Cliente"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Nome do Cliente *"}),u.jsx("input",{className:`w-full p-3 border rounded-xl font-bold ${I?"bg-white border-slate-200":"bg-slate-100 border-slate-200 cursor-not-allowed"}`,value:ue.clientName,onChange:_=>I&&ze({...ue,clientName:_.target.value}),placeholder:"Nome da Empresa / Hospital",readOnly:!I,required:!0})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"CNPJ"}),u.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ue.cnpj,onChange:_=>ze({...ue,cnpj:_.target.value}),placeholder:"00.000.000/0000-00"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Contato"}),u.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ue.contactPerson,onChange:_=>ze({...ue,contactPerson:_.target.value}),placeholder:"Nome do Responsvel"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"E-mail"}),u.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ue.email,onChange:_=>ze({...ue,email:_.target.value}),placeholder:"financeiro@hospital.com"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Endereo"}),u.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ue.address,onChange:_=>ze({...ue,address:_.target.value}),placeholder:"Rua, Nmero, Cidade - UF"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia (Incio - Fim)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"date",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-sm",value:ue.startDate,onChange:_=>ze({...ue,startDate:_.target.value}),required:!0}),u.jsx("input",{type:"date",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-sm",value:ue.endDate,onChange:_=>ze({...ue,endDate:_.target.value}),required:!0})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Mensal (R$)"}),u.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-black text-slate-800",value:ue.monthlyValue,onChange:_=>{const O=_.target.value,q=xt(O);ze({...ue,monthlyValue:O,annualValue:(q*12).toLocaleString("pt-BR",{minimumFractionDigits:2})})},placeholder:"0,00"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Anual (Estimado)"}),u.jsx("input",{className:"w-full p-3 bg-blue-50 border border-blue-100 rounded-xl font-black text-blue-600",value:ue.annualValue,onChange:_=>ze({...ue,annualValue:_.target.value}),placeholder:"0,00"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Observaes"}),u.jsx("textarea",{rows:"3",className:"w-full p-3 bg-white border border-slate-200 rounded-xl text-sm",value:ue.observations,onChange:_=>ze({...ue,observations:_.target.value}),placeholder:"Detalhes adicionais..."})]})]}),u.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest mb-2",children:[u.jsx(fC,{size:16})," Itens Cobertos"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[u.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ue.coveredItems.videoSurgeryInstruments,onChange:_=>ze({...ue,coveredItems:{...ue.coveredItems,videoSurgeryInstruments:_.target.checked}})}),u.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Instrumentais de Vdeo Cirurgia"})]}),u.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[u.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ue.coveredItems.openInstruments,onChange:_=>ze({...ue,coveredItems:{...ue.coveredItems,openInstruments:_.target.checked}})}),u.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Instrumentais Abertos"})]}),u.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[u.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ue.coveredItems.videoSurgeryEquipment,onChange:_=>ze({...ue,coveredItems:{...ue.coveredItems,videoSurgeryEquipment:_.target.checked}})}),u.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Equipamentos de Vdeo"})]}),u.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[u.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ue.coveredItems.endoscopes,onChange:_=>ze({...ue,coveredItems:{...ue.coveredItems,endoscopes:_.target.checked}})}),u.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Endoscpios"})]})]})]})]}),u.jsxs("div",{className:"pt-4 border-t flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100",children:"Cancelar"}),u.jsxs("button",{type:"submit",disabled:Z,className:"px-8 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg hover:bg-blue-700 flex items-center gap-2",children:[Z?u.jsx(Ds,{className:"animate-spin",size:20}):u.jsx(Ih,{size:20})," Salvar Contrato"]})]})]})})}),x&&u.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[60] flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl border border-slate-200 text-center space-y-6 animate-in zoom-in-95",children:[u.jsx("div",{className:"bg-red-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto text-red-500 mb-2",children:u.jsx(ea,{size:40})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Excluir OS?"}),u.jsxs("p",{className:"text-slate-500 mt-2",children:["Tem certeza que deseja remover permanentemente a OS ",u.jsx("span",{className:"font-bold text-slate-900",children:_t==null?void 0:_t.osNumber}),"?",u.jsx("br",{}),"Essa ao no pode ser desfeita."]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-4 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancelar"}),u.jsx("button",{onClick:lc,className:"flex-1 py-4 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 shadow-xl shadow-red-200 transition-colors",children:"Sim, Excluir"})]})]})}),Hr.show&&u.jsx(VC,{message:Hr.message,type:Hr.type,onClose:()=>Wr(_=>({..._,show:!1}))})]}):u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx(My,{className:"mx-auto text-red-500 mb-6",size:60}),u.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2",children:"Acesso Negado"}),u.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"Voc no tem permisso para acessar esta pgina. Entre em contato com o administrador do sistema."})]})}):u.jsx(RC,{})}function LC(){return u.jsx(mw,{children:u.jsx(OC,{})})}od.createRoot(document.getElementById("root")).render(u.jsx(Xy.StrictMode,{children:u.jsx(mw,{children:u.jsx(LC,{})})}));
