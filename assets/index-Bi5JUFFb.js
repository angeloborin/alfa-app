(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W0={exports:{}},Yu={},K0={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=Symbol.for("react.element"),Fw=Symbol.for("react.portal"),Uw=Symbol.for("react.fragment"),zw=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),Bw=Symbol.for("react.provider"),qw=Symbol.for("react.context"),Hw=Symbol.for("react.forward_ref"),Ww=Symbol.for("react.suspense"),Kw=Symbol.for("react.memo"),Gw=Symbol.for("react.lazy"),cm=Symbol.iterator;function Qw(t){return t===null||typeof t!="object"?null:(t=cm&&t[cm]||t["@@iterator"],typeof t=="function"?t:null)}var G0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q0=Object.assign,Y0={};function Qi(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||G0}Qi.prototype.isReactComponent={};Qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X0(){}X0.prototype=Qi.prototype;function Qh(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||G0}var Yh=Qh.prototype=new X0;Yh.constructor=Qh;Q0(Yh,Qi.prototype);Yh.isPureReactComponent=!0;var dm=Array.isArray,J0=Object.prototype.hasOwnProperty,Xh={current:null},Z0={key:!0,ref:!0,__self:!0,__source:!0};function ey(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)J0.call(e,r)&&!Z0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:ka,type:t,key:i,ref:o,props:s,_owner:Xh.current}}function Yw(t,e){return{$$typeof:ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ka}function Xw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hm=/\/+/g;function Bc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xw(""+t.key):e.toString(36)}function Dl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ka:case Fw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Bc(o,0):r,dm(s)?(n="",t!=null&&(n=t.replace(hm,"$&/")+"/"),Dl(s,e,n,"",function(h){return h})):s!=null&&(Jh(s)&&(s=Yw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",dm(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Bc(i,u);o+=Dl(i,e,n,c,s)}else if(c=Qw(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Bc(i,u++),o+=Dl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dl(t,e,n){if(t==null)return t;var r=[],s=0;return Dl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Jw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},Ll={transition:null},Zw={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Ll,ReactCurrentOwner:Xh};function ty(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:dl,forEach:function(t,e,n){dl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dl(t,function(){e++}),e},toArray:function(t){return dl(t,function(e){return e})||[]},only:function(t){if(!Jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Qi;de.Fragment=Uw;de.Profiler=$w;de.PureComponent=Qh;de.StrictMode=zw;de.Suspense=Ww;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zw;de.act=ty;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Q0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)J0.call(e,c)&&!Z0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:ka,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:qw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bw,_context:t},t.Consumer=t};de.createElement=ey;de.createFactory=function(t){var e=ey.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:Hw,render:t}};de.isValidElement=Jh;de.lazy=function(t){return{$$typeof:Gw,_payload:{_status:-1,_result:t},_init:Jw}};de.memo=function(t,e){return{$$typeof:Kw,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Ll.transition;Ll.transition={};try{t()}finally{Ll.transition=e}};de.unstable_act=ty;de.useCallback=function(t,e){return St.current.useCallback(t,e)};de.useContext=function(t){return St.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return St.current.useDeferredValue(t)};de.useEffect=function(t,e){return St.current.useEffect(t,e)};de.useId=function(){return St.current.useId()};de.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return St.current.useMemo(t,e)};de.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};de.useRef=function(t){return St.current.useRef(t)};de.useState=function(t){return St.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return St.current.useTransition()};de.version="18.3.1";K0.exports=de;var q=K0.exports;const ny=Mw(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1=q,t1=Symbol.for("react.element"),n1=Symbol.for("react.fragment"),r1=Object.prototype.hasOwnProperty,s1=e1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i1={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)r1.call(e,r)&&!i1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:t1,type:t,key:i,ref:o,props:s,_owner:s1.current}}Yu.Fragment=n1;Yu.jsx=ry;Yu.jsxs=ry;W0.exports=Yu;var l=W0.exports,Cd={},sy={exports:{}},Wt={},iy={exports:{}},oy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,re){var se=K.length;K.push(re);e:for(;0<se;){var Se=se-1>>>1,ye=K[Se];if(0<s(ye,re))K[Se]=re,K[se]=ye,se=Se;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var re=K[0],se=K.pop();if(se!==re){K[0]=se;e:for(var Se=0,ye=K.length,Pe=ye>>>1;Se<Pe;){var Ot=2*(Se+1)-1,Vt=K[Ot],Gt=Ot+1,cn=K[Gt];if(0>s(Vt,se))Gt<ye&&0>s(cn,Vt)?(K[Se]=cn,K[Gt]=se,Se=Gt):(K[Se]=Vt,K[Ot]=se,Se=Ot);else if(Gt<ye&&0>s(cn,se))K[Se]=cn,K[Gt]=se,Se=Gt;else break e}}return re}function s(K,re){var se=K.sortIndex-re.sortIndex;return se!==0?se:K.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,g=null,_=3,A=!1,R=!1,L=!1,U=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(K){for(var re=n(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=K)r(h),re.sortIndex=re.expirationTime,e(c,re);else break;re=n(h)}}function M(K){if(L=!1,k(K),!R)if(n(c)!==null)R=!0,ln(F);else{var re=n(h);re!==null&&un(M,re.startTime-K)}}function F(K,re){R=!1,L&&(L=!1,I(v),v=-1),A=!0;var se=_;try{for(k(re),g=n(c);g!==null&&(!(g.expirationTime>re)||K&&!C());){var Se=g.callback;if(typeof Se=="function"){g.callback=null,_=g.priorityLevel;var ye=Se(g.expirationTime<=re);re=t.unstable_now(),typeof ye=="function"?g.callback=ye:g===n(c)&&r(c),k(re)}else r(c);g=n(c)}if(g!==null)var Pe=!0;else{var Ot=n(h);Ot!==null&&un(M,Ot.startTime-re),Pe=!1}return Pe}finally{g=null,_=se,A=!1}}var V=!1,x=null,v=-1,w=5,E=-1;function C(){return!(t.unstable_now()-E<w)}function N(){if(x!==null){var K=t.unstable_now();E=K;var re=!0;try{re=x(!0,K)}finally{re?S():(V=!1,x=null)}}else V=!1}var S;if(typeof b=="function")S=function(){b(N)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Xe=Ie.port2;Ie.port1.onmessage=N,S=function(){Xe.postMessage(null)}}else S=function(){U(N,0)};function ln(K){x=K,V||(V=!0,S())}function un(K,re){v=U(function(){K(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){R||A||(R=!0,ln(F))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(K){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var se=_;_=re;try{return K()}finally{_=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=_;_=K;try{return re()}finally{_=se}},t.unstable_scheduleCallback=function(K,re,se){var Se=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Se+se:Se):se=Se,K){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=se+ye,K={id:m++,callback:re,priorityLevel:K,startTime:se,expirationTime:ye,sortIndex:-1},se>Se?(K.sortIndex=se,e(h,K),n(c)===null&&K===n(h)&&(L?(I(v),v=-1):L=!0,un(M,se-Se))):(K.sortIndex=ye,e(c,K),R||A||(R=!0,ln(F))),K},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(K){var re=_;return function(){var se=_;_=re;try{return K.apply(this,arguments)}finally{_=se}}}})(oy);iy.exports=oy;var o1=iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1=q,Ht=o1;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ay=new Set,na={};function Bs(t,e){Ri(t,e),Ri(t+"Capture",e)}function Ri(t,e){for(na[t]=e,t=0;t<e.length;t++)ay.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ad=Object.prototype.hasOwnProperty,l1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fm={},pm={};function u1(t){return Ad.call(pm,t)?!0:Ad.call(fm,t)?!1:l1.test(t)?pm[t]=!0:(fm[t]=!0,!1)}function c1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d1(t,e,n,r){if(e===null||typeof e>"u"||c1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function ef(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,ef);lt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,ef);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,ef);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function tf(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d1(e,n,s,r)&&(n=null),r||s===null?u1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=a1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hl=Symbol.for("react.element"),ui=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),Pd=Symbol.for("react.profiler"),ly=Symbol.for("react.provider"),uy=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),Rd=Symbol.for("react.suspense"),jd=Symbol.for("react.suspense_list"),sf=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),cy=Symbol.for("react.offscreen"),mm=Symbol.iterator;function Eo(t){return t===null||typeof t!="object"?null:(t=mm&&t[mm]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,qc;function Po(t){if(qc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qc=e&&e[1]||""}return`
`+qc+t}var Hc=!1;function Wc(t,e){if(!t||Hc)return"";Hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Hc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Po(t):""}function h1(t){switch(t.tag){case 5:return Po(t.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return t=Wc(t.type,!1),t;case 11:return t=Wc(t.type.render,!1),t;case 1:return t=Wc(t.type,!0),t;default:return""}}function Dd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case ui:return"Portal";case Pd:return"Profiler";case nf:return"StrictMode";case Rd:return"Suspense";case jd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uy:return(t.displayName||"Context")+".Consumer";case ly:return(t._context.displayName||"Context")+".Provider";case rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sf:return e=t.displayName||null,e!==null?e:Dd(t.type)||"Memo";case kr:e=t._payload,t=t._init;try{return Dd(t(e))}catch{}}return null}function f1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dd(e);case 8:return e===nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p1(t){var e=dy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fl(t){t._valueTracker||(t._valueTracker=p1(t))}function hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ld(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fy(t,e){e=e.checked,e!=null&&tf(t,"checked",e,!1)}function Od(t,e){fy(t,e);var n=Zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vd(t,e.type,Zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ym(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vd(t,e,n){(e!=="number"||nu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ro=Array.isArray;function Ei(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Md(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ro(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zr(n)}}function py(t,e){var n=Zr(e.value),r=Zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _m(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function my(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?my(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pl,gy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pl=pl||document.createElement("div"),pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m1=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(t){m1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$o[e]=$o[t]})});function yy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$o.hasOwnProperty(t)&&$o[t]?(""+e).trim():e+"px"}function vy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var g1=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(t,e){if(e){if(g1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $d=null;function of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bd=null,bi=null,Ti=null;function xm(t){if(t=Pa(t)){if(typeof Bd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=tc(e),Bd(t.stateNode,t.type,e))}}function _y(t){bi?Ti?Ti.push(t):Ti=[t]:bi=t}function xy(){if(bi){var t=bi,e=Ti;if(Ti=bi=null,xm(t),e)for(t=0;t<e.length;t++)xm(e[t])}}function wy(t,e){return t(e)}function Ey(){}var Kc=!1;function by(t,e,n){if(Kc)return t(e,n);Kc=!0;try{return wy(t,e,n)}finally{Kc=!1,(bi!==null||Ti!==null)&&(Ey(),xy())}}function sa(t,e){var n=t.stateNode;if(n===null)return null;var r=tc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var qd=!1;if(nr)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){qd=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{qd=!1}function y1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Bo=!1,ru=null,su=!1,Hd=null,v1={onError:function(t){Bo=!0,ru=t}};function _1(t,e,n,r,s,i,o,u,c){Bo=!1,ru=null,y1.apply(v1,arguments)}function x1(t,e,n,r,s,i,o,u,c){if(_1.apply(this,arguments),Bo){if(Bo){var h=ru;Bo=!1,ru=null}else throw Error(B(198));su||(su=!0,Hd=h)}}function qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ty(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wm(t){if(qs(t)!==t)throw Error(B(188))}function w1(t){var e=t.alternate;if(!e){if(e=qs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return wm(s),t;if(i===r)return wm(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Iy(t){return t=w1(t),t!==null?Sy(t):null}function Sy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sy(t);if(e!==null)return e;t=t.sibling}return null}var Ny=Ht.unstable_scheduleCallback,Em=Ht.unstable_cancelCallback,E1=Ht.unstable_shouldYield,b1=Ht.unstable_requestPaint,Ue=Ht.unstable_now,T1=Ht.unstable_getCurrentPriorityLevel,af=Ht.unstable_ImmediatePriority,ky=Ht.unstable_UserBlockingPriority,iu=Ht.unstable_NormalPriority,I1=Ht.unstable_LowPriority,Cy=Ht.unstable_IdlePriority,Xu=null,Pn=null;function S1(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Xu,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:C1,N1=Math.log,k1=Math.LN2;function C1(t){return t>>>=0,t===0?32:31-(N1(t)/k1|0)|0}var ml=64,gl=4194304;function jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=jo(u):(i&=o,i!==0&&(r=jo(i)))}else o=n&~s,o!==0?r=jo(o):i!==0&&(r=jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),s=1<<n,r|=t[n],e&=~s;return r}function A1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=A1(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Wd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ay(){var t=ml;return ml<<=1,!(ml&4194240)&&(ml=64),t}function Gc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ca(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function R1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function Py(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ry,uf,jy,Dy,Ly,Kd=!1,yl=[],zr=null,$r=null,Br=null,ia=new Map,oa=new Map,Ar=[],j1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bm(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(e.pointerId)}}function To(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Pa(e),e!==null&&uf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function D1(t,e,n,r,s){switch(e){case"focusin":return zr=To(zr,t,e,n,r,s),!0;case"dragenter":return $r=To($r,t,e,n,r,s),!0;case"mouseover":return Br=To(Br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ia.set(i,To(ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,oa.set(i,To(oa.get(i)||null,t,e,n,r,s)),!0}return!1}function Oy(t){var e=Is(t.target);if(e!==null){var n=qs(e);if(n!==null){if(e=n.tag,e===13){if(e=Ty(n),e!==null){t.blockedOn=e,Ly(t.priority,function(){jy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$d=r,n.target.dispatchEvent(r),$d=null}else return e=Pa(n),e!==null&&uf(e),t.blockedOn=n,!1;e.shift()}return!0}function Tm(t,e,n){Ol(t)&&n.delete(e)}function L1(){Kd=!1,zr!==null&&Ol(zr)&&(zr=null),$r!==null&&Ol($r)&&($r=null),Br!==null&&Ol(Br)&&(Br=null),ia.forEach(Tm),oa.forEach(Tm)}function Io(t,e){t.blockedOn===e&&(t.blockedOn=null,Kd||(Kd=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,L1)))}function aa(t){function e(s){return Io(s,t)}if(0<yl.length){Io(yl[0],t);for(var n=1;n<yl.length;n++){var r=yl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&Io(zr,t),$r!==null&&Io($r,t),Br!==null&&Io(Br,t),ia.forEach(e),oa.forEach(e),n=0;n<Ar.length;n++)r=Ar[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ar.length&&(n=Ar[0],n.blockedOn===null);)Oy(n),n.blockedOn===null&&Ar.shift()}var Ii=dr.ReactCurrentBatchConfig,au=!0;function O1(t,e,n,r){var s=we,i=Ii.transition;Ii.transition=null;try{we=1,cf(t,e,n,r)}finally{we=s,Ii.transition=i}}function V1(t,e,n,r){var s=we,i=Ii.transition;Ii.transition=null;try{we=4,cf(t,e,n,r)}finally{we=s,Ii.transition=i}}function cf(t,e,n,r){if(au){var s=Gd(t,e,n,r);if(s===null)sd(t,e,r,lu,n),bm(t,r);else if(D1(s,t,e,n,r))r.stopPropagation();else if(bm(t,r),e&4&&-1<j1.indexOf(t)){for(;s!==null;){var i=Pa(s);if(i!==null&&Ry(i),i=Gd(t,e,n,r),i===null&&sd(t,e,r,lu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sd(t,e,r,null,n)}}var lu=null;function Gd(t,e,n,r){if(lu=null,t=of(r),t=Is(t),t!==null)if(e=qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ty(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lu=t,null}function Vy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T1()){case af:return 1;case ky:return 4;case iu:case I1:return 16;case Cy:return 536870912;default:return 16}default:return 16}}var Mr=null,df=null,Vl=null;function My(){if(Vl)return Vl;var t,e=df,n=e.length,r,s="value"in Mr?Mr.value:Mr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Vl=s.slice(t,1<r?1-r:void 0)}function Ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vl(){return!0}function Im(){return!1}function Kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vl:Im,this.isPropagationStopped=Im,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),e}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=Kt(Yi),Aa=De({},Yi,{view:0,detail:0}),M1=Kt(Aa),Qc,Yc,So,Ju=De({},Aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==So&&(So&&t.type==="mousemove"?(Qc=t.screenX-So.screenX,Yc=t.screenY-So.screenY):Yc=Qc=0,So=t),Qc)},movementY:function(t){return"movementY"in t?t.movementY:Yc}}),Sm=Kt(Ju),F1=De({},Ju,{dataTransfer:0}),U1=Kt(F1),z1=De({},Aa,{relatedTarget:0}),Xc=Kt(z1),$1=De({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),B1=Kt($1),q1=De({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H1=Kt(q1),W1=De({},Yi,{data:0}),Nm=Kt(W1),K1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q1[t])?!!e[t]:!1}function ff(){return Y1}var X1=De({},Aa,{key:function(t){if(t.key){var e=K1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(t){return t.type==="keypress"?Ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J1=Kt(X1),Z1=De({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),km=Kt(Z1),eE=De({},Aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),tE=Kt(eE),nE=De({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),rE=Kt(nE),sE=De({},Ju,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iE=Kt(sE),oE=[9,13,27,32],pf=nr&&"CompositionEvent"in window,qo=null;nr&&"documentMode"in document&&(qo=document.documentMode);var aE=nr&&"TextEvent"in window&&!qo,Fy=nr&&(!pf||qo&&8<qo&&11>=qo),Cm=" ",Am=!1;function Uy(t,e){switch(t){case"keyup":return oE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var di=!1;function lE(t,e){switch(t){case"compositionend":return zy(e);case"keypress":return e.which!==32?null:(Am=!0,Cm);case"textInput":return t=e.data,t===Cm&&Am?null:t;default:return null}}function uE(t,e){if(di)return t==="compositionend"||!pf&&Uy(t,e)?(t=My(),Vl=df=Mr=null,di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fy&&e.locale!=="ko"?null:e.data;default:return null}}var cE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cE[t.type]:e==="textarea"}function $y(t,e,n,r){_y(r),e=uu(e,"onChange"),0<e.length&&(n=new hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ho=null,la=null;function dE(t){Zy(t,0)}function Zu(t){var e=pi(t);if(hy(e))return t}function hE(t,e){if(t==="change")return e}var By=!1;if(nr){var Jc;if(nr){var Zc="oninput"in document;if(!Zc){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),Zc=typeof Rm.oninput=="function"}Jc=Zc}else Jc=!1;By=Jc&&(!document.documentMode||9<document.documentMode)}function jm(){Ho&&(Ho.detachEvent("onpropertychange",qy),la=Ho=null)}function qy(t){if(t.propertyName==="value"&&Zu(la)){var e=[];$y(e,la,t,of(t)),by(dE,e)}}function fE(t,e,n){t==="focusin"?(jm(),Ho=e,la=n,Ho.attachEvent("onpropertychange",qy)):t==="focusout"&&jm()}function pE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(la)}function mE(t,e){if(t==="click")return Zu(e)}function gE(t,e){if(t==="input"||t==="change")return Zu(e)}function yE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:yE;function ua(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ad.call(e,s)||!xn(t[s],e[s]))return!1}return!0}function Dm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lm(t,e){var n=Dm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dm(n)}}function Hy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wy(){for(var t=window,e=nu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nu(t.document)}return e}function mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vE(t){var e=Wy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hy(n.ownerDocument.documentElement,n)){if(r!==null&&mf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Lm(n,i);var o=Lm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _E=nr&&"documentMode"in document&&11>=document.documentMode,hi=null,Qd=null,Wo=null,Yd=!1;function Om(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yd||hi==null||hi!==nu(r)||(r=hi,"selectionStart"in r&&mf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&ua(Wo,r)||(Wo=r,r=uu(Qd,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hi)))}function _l(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fi={animationend:_l("Animation","AnimationEnd"),animationiteration:_l("Animation","AnimationIteration"),animationstart:_l("Animation","AnimationStart"),transitionend:_l("Transition","TransitionEnd")},ed={},Ky={};nr&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete fi.animationend.animation,delete fi.animationiteration.animation,delete fi.animationstart.animation),"TransitionEvent"in window||delete fi.transitionend.transition);function ec(t){if(ed[t])return ed[t];if(!fi[t])return t;var e=fi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ky)return ed[t]=e[n];return t}var Gy=ec("animationend"),Qy=ec("animationiteration"),Yy=ec("animationstart"),Xy=ec("transitionend"),Jy=new Map,Vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(t,e){Jy.set(t,e),Bs(e,[t])}for(var td=0;td<Vm.length;td++){var nd=Vm[td],xE=nd.toLowerCase(),wE=nd[0].toUpperCase()+nd.slice(1);is(xE,"on"+wE)}is(Gy,"onAnimationEnd");is(Qy,"onAnimationIteration");is(Yy,"onAnimationStart");is("dblclick","onDoubleClick");is("focusin","onFocus");is("focusout","onBlur");is(Xy,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Mm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,x1(r,e,void 0,t),t.currentTarget=null}function Zy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Mm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Mm(s,u,h),i=c}}}if(su)throw t=Hd,su=!1,Hd=null,t}function Ne(t,e){var n=e[th];n===void 0&&(n=e[th]=new Set);var r=t+"__bubble";n.has(r)||(ev(e,t,2,!1),n.add(r))}function rd(t,e,n){var r=0;e&&(r|=4),ev(n,t,r,e)}var xl="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[xl]){t[xl]=!0,ay.forEach(function(n){n!=="selectionchange"&&(EE.has(n)||rd(n,!1,t),rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xl]||(e[xl]=!0,rd("selectionchange",!1,e))}}function ev(t,e,n,r){switch(Vy(e)){case 1:var s=O1;break;case 4:s=V1;break;default:s=cf}n=s.bind(null,e,n,t),s=void 0,!qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Is(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}by(function(){var h=i,m=of(n),g=[];e:{var _=Jy.get(t);if(_!==void 0){var A=hf,R=t;switch(t){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":A=J1;break;case"focusin":R="focus",A=Xc;break;case"focusout":R="blur",A=Xc;break;case"beforeblur":case"afterblur":A=Xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=U1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=tE;break;case Gy:case Qy:case Yy:A=B1;break;case Xy:A=rE;break;case"scroll":A=M1;break;case"wheel":A=iE;break;case"copy":case"cut":case"paste":A=H1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=km}var L=(e&4)!==0,U=!L&&t==="scroll",I=L?_!==null?_+"Capture":null:_;L=[];for(var b=h,k;b!==null;){k=b;var M=k.stateNode;if(k.tag===5&&M!==null&&(k=M,I!==null&&(M=sa(b,I),M!=null&&L.push(da(b,M,k)))),U)break;b=b.return}0<L.length&&(_=new A(_,R,null,n,m),g.push({event:_,listeners:L}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",_&&n!==$d&&(R=n.relatedTarget||n.fromElement)&&(Is(R)||R[rr]))break e;if((A||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,A?(R=n.relatedTarget||n.toElement,A=h,R=R?Is(R):null,R!==null&&(U=qs(R),R!==U||R.tag!==5&&R.tag!==6)&&(R=null)):(A=null,R=h),A!==R)){if(L=Sm,M="onMouseLeave",I="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(L=km,M="onPointerLeave",I="onPointerEnter",b="pointer"),U=A==null?_:pi(A),k=R==null?_:pi(R),_=new L(M,b+"leave",A,n,m),_.target=U,_.relatedTarget=k,M=null,Is(m)===h&&(L=new L(I,b+"enter",R,n,m),L.target=k,L.relatedTarget=U,M=L),U=M,A&&R)t:{for(L=A,I=R,b=0,k=L;k;k=si(k))b++;for(k=0,M=I;M;M=si(M))k++;for(;0<b-k;)L=si(L),b--;for(;0<k-b;)I=si(I),k--;for(;b--;){if(L===I||I!==null&&L===I.alternate)break t;L=si(L),I=si(I)}L=null}else L=null;A!==null&&Fm(g,_,A,L,!1),R!==null&&U!==null&&Fm(g,U,R,L,!0)}}e:{if(_=h?pi(h):window,A=_.nodeName&&_.nodeName.toLowerCase(),A==="select"||A==="input"&&_.type==="file")var F=hE;else if(Pm(_))if(By)F=gE;else{F=pE;var V=fE}else(A=_.nodeName)&&A.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(F=mE);if(F&&(F=F(t,h))){$y(g,F,n,m);break e}V&&V(t,_,h),t==="focusout"&&(V=_._wrapperState)&&V.controlled&&_.type==="number"&&Vd(_,"number",_.value)}switch(V=h?pi(h):window,t){case"focusin":(Pm(V)||V.contentEditable==="true")&&(hi=V,Qd=h,Wo=null);break;case"focusout":Wo=Qd=hi=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,Om(g,n,m);break;case"selectionchange":if(_E)break;case"keydown":case"keyup":Om(g,n,m)}var x;if(pf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else di?Uy(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Fy&&n.locale!=="ko"&&(di||v!=="onCompositionStart"?v==="onCompositionEnd"&&di&&(x=My()):(Mr=m,df="value"in Mr?Mr.value:Mr.textContent,di=!0)),V=uu(h,v),0<V.length&&(v=new Nm(v,t,null,n,m),g.push({event:v,listeners:V}),x?v.data=x:(x=zy(n),x!==null&&(v.data=x)))),(x=aE?lE(t,n):uE(t,n))&&(h=uu(h,"onBeforeInput"),0<h.length&&(m=new Nm("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:h}),m.data=x))}Zy(g,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sa(t,n),i!=null&&r.unshift(da(t,i,s)),i=sa(t,e),i!=null&&r.push(da(t,i,s))),t=t.return}return r}function si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=sa(n,i),c!=null&&o.unshift(da(n,c,u))):s||(c=sa(n,i),c!=null&&o.push(da(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bE=/\r\n?/g,TE=/\u0000|\uFFFD/g;function Um(t){return(typeof t=="string"?t:""+t).replace(bE,`
`).replace(TE,"")}function wl(t,e,n){if(e=Um(e),Um(t)!==e&&n)throw Error(B(425))}function cu(){}var Xd=null,Jd=null;function Zd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eh=typeof setTimeout=="function"?setTimeout:void 0,IE=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,SE=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(t){return zm.resolve(null).then(t).catch(NE)}:eh;function NE(t){setTimeout(function(){throw t})}function id(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);aa(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Xi,ha="__reactProps$"+Xi,rr="__reactContainer$"+Xi,th="__reactEvents$"+Xi,kE="__reactListeners$"+Xi,CE="__reactHandles$"+Xi;function Is(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$m(t);t!==null;){if(n=t[Cn])return n;t=$m(t)}return e}t=n,n=t.parentNode}return null}function Pa(t){return t=t[Cn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function tc(t){return t[ha]||null}var nh=[],mi=-1;function os(t){return{current:t}}function ke(t){0>mi||(t.current=nh[mi],nh[mi]=null,mi--)}function Te(t,e){mi++,nh[mi]=t.current,t.current=e}var es={},xt=os(es),Rt=os(!1),Rs=es;function ji(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function du(){ke(Rt),ke(xt)}function Bm(t,e,n){if(xt.current!==es)throw Error(B(168));Te(xt,e),Te(Rt,n)}function tv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,f1(t)||"Unknown",s));return De({},n,r)}function hu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Rs=xt.current,Te(xt,t),Te(Rt,Rt.current),!0}function qm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=tv(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,ke(Rt),ke(xt),Te(xt,t)):ke(Rt),Te(Rt,n)}var Kn=null,nc=!1,od=!1;function nv(t){Kn===null?Kn=[t]:Kn.push(t)}function AE(t){nc=!0,nv(t)}function as(){if(!od&&Kn!==null){od=!0;var t=0,e=we;try{var n=Kn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,nc=!1}catch(s){throw Kn!==null&&(Kn=Kn.slice(t+1)),Ny(af,as),s}finally{we=e,od=!1}}return null}var gi=[],yi=0,fu=null,pu=0,en=[],tn=0,js=null,Gn=1,Qn="";function Es(t,e){gi[yi++]=pu,gi[yi++]=fu,fu=t,pu=e}function rv(t,e,n){en[tn++]=Gn,en[tn++]=Qn,en[tn++]=js,js=t;var r=Gn;t=Qn;var s=32-vn(r)-1;r&=~(1<<s),n+=1;var i=32-vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-vn(e)+s|n<<s|r,Qn=i+t}else Gn=1<<i|n<<s|r,Qn=t}function gf(t){t.return!==null&&(Es(t,1),rv(t,1,0))}function yf(t){for(;t===fu;)fu=gi[--yi],gi[yi]=null,pu=gi[--yi],gi[yi]=null;for(;t===js;)js=en[--tn],en[tn]=null,Qn=en[--tn],en[tn]=null,Gn=en[--tn],en[tn]=null}var qt=null,$t=null,Ce=!1,yn=null;function sv(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,$t=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=js!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,$t=null,!0):!1;default:return!1}}function rh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sh(t){if(Ce){var e=$t;if(e){var n=e;if(!Hm(t,e)){if(rh(t))throw Error(B(418));e=qr(n.nextSibling);var r=qt;e&&Hm(t,e)?sv(r,n):(t.flags=t.flags&-4097|2,Ce=!1,qt=t)}}else{if(rh(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ce=!1,qt=t}}}function Wm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function El(t){if(t!==qt)return!1;if(!Ce)return Wm(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zd(t.type,t.memoizedProps)),e&&(e=$t)){if(rh(t))throw iv(),Error(B(418));for(;e;)sv(t,e),e=qr(e.nextSibling)}if(Wm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=qt?qr(t.stateNode.nextSibling):null;return!0}function iv(){for(var t=$t;t;)t=qr(t.nextSibling)}function Di(){$t=qt=null,Ce=!1}function vf(t){yn===null?yn=[t]:yn.push(t)}var PE=dr.ReactCurrentBatchConfig;function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function bl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Km(t){var e=t._init;return e(t._payload)}function ov(t){function e(I,b){if(t){var k=I.deletions;k===null?(I.deletions=[b],I.flags|=16):k.push(b)}}function n(I,b){if(!t)return null;for(;b!==null;)e(I,b),b=b.sibling;return null}function r(I,b){for(I=new Map;b!==null;)b.key!==null?I.set(b.key,b):I.set(b.index,b),b=b.sibling;return I}function s(I,b){return I=Gr(I,b),I.index=0,I.sibling=null,I}function i(I,b,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<b?(I.flags|=2,b):k):(I.flags|=2,b)):(I.flags|=1048576,b)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,b,k,M){return b===null||b.tag!==6?(b=fd(k,I.mode,M),b.return=I,b):(b=s(b,k),b.return=I,b)}function c(I,b,k,M){var F=k.type;return F===ci?m(I,b,k.props.children,M,k.key):b!==null&&(b.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===kr&&Km(F)===b.type)?(M=s(b,k.props),M.ref=No(I,b,k),M.return=I,M):(M=Hl(k.type,k.key,k.props,null,I.mode,M),M.ref=No(I,b,k),M.return=I,M)}function h(I,b,k,M){return b===null||b.tag!==4||b.stateNode.containerInfo!==k.containerInfo||b.stateNode.implementation!==k.implementation?(b=pd(k,I.mode,M),b.return=I,b):(b=s(b,k.children||[]),b.return=I,b)}function m(I,b,k,M,F){return b===null||b.tag!==7?(b=As(k,I.mode,M,F),b.return=I,b):(b=s(b,k),b.return=I,b)}function g(I,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return b=fd(""+b,I.mode,k),b.return=I,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hl:return k=Hl(b.type,b.key,b.props,null,I.mode,k),k.ref=No(I,null,b),k.return=I,k;case ui:return b=pd(b,I.mode,k),b.return=I,b;case kr:var M=b._init;return g(I,M(b._payload),k)}if(Ro(b)||Eo(b))return b=As(b,I.mode,k,null),b.return=I,b;bl(I,b)}return null}function _(I,b,k,M){var F=b!==null?b.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return F!==null?null:u(I,b,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case hl:return k.key===F?c(I,b,k,M):null;case ui:return k.key===F?h(I,b,k,M):null;case kr:return F=k._init,_(I,b,F(k._payload),M)}if(Ro(k)||Eo(k))return F!==null?null:m(I,b,k,M,null);bl(I,k)}return null}function A(I,b,k,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(k)||null,u(b,I,""+M,F);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case hl:return I=I.get(M.key===null?k:M.key)||null,c(b,I,M,F);case ui:return I=I.get(M.key===null?k:M.key)||null,h(b,I,M,F);case kr:var V=M._init;return A(I,b,k,V(M._payload),F)}if(Ro(M)||Eo(M))return I=I.get(k)||null,m(b,I,M,F,null);bl(b,M)}return null}function R(I,b,k,M){for(var F=null,V=null,x=b,v=b=0,w=null;x!==null&&v<k.length;v++){x.index>v?(w=x,x=null):w=x.sibling;var E=_(I,x,k[v],M);if(E===null){x===null&&(x=w);break}t&&x&&E.alternate===null&&e(I,x),b=i(E,b,v),V===null?F=E:V.sibling=E,V=E,x=w}if(v===k.length)return n(I,x),Ce&&Es(I,v),F;if(x===null){for(;v<k.length;v++)x=g(I,k[v],M),x!==null&&(b=i(x,b,v),V===null?F=x:V.sibling=x,V=x);return Ce&&Es(I,v),F}for(x=r(I,x);v<k.length;v++)w=A(x,I,v,k[v],M),w!==null&&(t&&w.alternate!==null&&x.delete(w.key===null?v:w.key),b=i(w,b,v),V===null?F=w:V.sibling=w,V=w);return t&&x.forEach(function(C){return e(I,C)}),Ce&&Es(I,v),F}function L(I,b,k,M){var F=Eo(k);if(typeof F!="function")throw Error(B(150));if(k=F.call(k),k==null)throw Error(B(151));for(var V=F=null,x=b,v=b=0,w=null,E=k.next();x!==null&&!E.done;v++,E=k.next()){x.index>v?(w=x,x=null):w=x.sibling;var C=_(I,x,E.value,M);if(C===null){x===null&&(x=w);break}t&&x&&C.alternate===null&&e(I,x),b=i(C,b,v),V===null?F=C:V.sibling=C,V=C,x=w}if(E.done)return n(I,x),Ce&&Es(I,v),F;if(x===null){for(;!E.done;v++,E=k.next())E=g(I,E.value,M),E!==null&&(b=i(E,b,v),V===null?F=E:V.sibling=E,V=E);return Ce&&Es(I,v),F}for(x=r(I,x);!E.done;v++,E=k.next())E=A(x,I,v,E.value,M),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?v:E.key),b=i(E,b,v),V===null?F=E:V.sibling=E,V=E);return t&&x.forEach(function(N){return e(I,N)}),Ce&&Es(I,v),F}function U(I,b,k,M){if(typeof k=="object"&&k!==null&&k.type===ci&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case hl:e:{for(var F=k.key,V=b;V!==null;){if(V.key===F){if(F=k.type,F===ci){if(V.tag===7){n(I,V.sibling),b=s(V,k.props.children),b.return=I,I=b;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===kr&&Km(F)===V.type){n(I,V.sibling),b=s(V,k.props),b.ref=No(I,V,k),b.return=I,I=b;break e}n(I,V);break}else e(I,V);V=V.sibling}k.type===ci?(b=As(k.props.children,I.mode,M,k.key),b.return=I,I=b):(M=Hl(k.type,k.key,k.props,null,I.mode,M),M.ref=No(I,b,k),M.return=I,I=M)}return o(I);case ui:e:{for(V=k.key;b!==null;){if(b.key===V)if(b.tag===4&&b.stateNode.containerInfo===k.containerInfo&&b.stateNode.implementation===k.implementation){n(I,b.sibling),b=s(b,k.children||[]),b.return=I,I=b;break e}else{n(I,b);break}else e(I,b);b=b.sibling}b=pd(k,I.mode,M),b.return=I,I=b}return o(I);case kr:return V=k._init,U(I,b,V(k._payload),M)}if(Ro(k))return R(I,b,k,M);if(Eo(k))return L(I,b,k,M);bl(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,b!==null&&b.tag===6?(n(I,b.sibling),b=s(b,k),b.return=I,I=b):(n(I,b),b=fd(k,I.mode,M),b.return=I,I=b),o(I)):n(I,b)}return U}var Li=ov(!0),av=ov(!1),mu=os(null),gu=null,vi=null,_f=null;function xf(){_f=vi=gu=null}function wf(t){var e=mu.current;ke(mu),t._currentValue=e}function ih(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Si(t,e){gu=t,_f=vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(_f!==t)if(t={context:t,memoizedValue:e,next:null},vi===null){if(gu===null)throw Error(B(308));vi=t,gu.dependencies={lanes:0,firstContext:t}}else vi=vi.next=t;return e}var Ss=null;function Ef(t){Ss===null?Ss=[t]:Ss.push(t)}function lv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ef(e)):(n.next=s.next,s.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,sr(t,n)}return s=r.interleaved,s===null?(e.next=e,Ef(r)):(e.next=s.next,s.next=e),r.interleaved=e,sr(t,n)}function Fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}function Gm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yu(t,e,n,r){var s=t.updateQueue;Cr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,m=h=c=null,u=i;do{var _=u.lane,A=u.eventTime;if((r&_)===_){m!==null&&(m=m.next={eventTime:A,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,L=u;switch(_=e,A=n,L.tag){case 1:if(R=L.payload,typeof R=="function"){g=R.call(A,g,_);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=L.payload,_=typeof R=="function"?R.call(A,g,_):R,_==null)break e;g=De({},g,_);break e;case 2:Cr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[u]:_.push(u))}else A={eventTime:A,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=A,c=g):m=m.next=A,o|=_;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;_=u,u=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(m===null&&(c=g),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ls|=o,t.lanes=o,t.memoizedState=g}}function Qm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Ra={},Rn=os(Ra),fa=os(Ra),pa=os(Ra);function Ns(t){if(t===Ra)throw Error(B(174));return t}function Tf(t,e){switch(Te(pa,e),Te(fa,t),Te(Rn,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fd(e,t)}ke(Rn),Te(Rn,e)}function Oi(){ke(Rn),ke(fa),ke(pa)}function cv(t){Ns(pa.current);var e=Ns(Rn.current),n=Fd(e,t.type);e!==n&&(Te(fa,t),Te(Rn,n))}function If(t){fa.current===t&&(ke(Rn),ke(fa))}var Re=os(0);function vu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ad=[];function Sf(){for(var t=0;t<ad.length;t++)ad[t]._workInProgressVersionPrimary=null;ad.length=0}var Ul=dr.ReactCurrentDispatcher,ld=dr.ReactCurrentBatchConfig,Ds=0,je=null,Ke=null,Ze=null,_u=!1,Ko=!1,ma=0,RE=0;function ft(){throw Error(B(321))}function Nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function kf(t,e,n,r,s,i){if(Ds=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ul.current=t===null||t.memoizedState===null?OE:VE,t=n(r,s),Ko){i=0;do{if(Ko=!1,ma=0,25<=i)throw Error(B(301));i+=1,Ze=Ke=null,e.updateQueue=null,Ul.current=ME,t=n(r,s)}while(Ko)}if(Ul.current=xu,e=Ke!==null&&Ke.next!==null,Ds=0,Ze=Ke=je=null,_u=!1,e)throw Error(B(300));return t}function Cf(){var t=ma!==0;return ma=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?je.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function an(){if(Ke===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?je.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error(B(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?je.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function ga(t,e){return typeof e=="function"?e(t):e}function ud(t){var e=an(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var m=h.lane;if((Ds&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=g,o=r):c=c.next=g,je.lanes|=m,Ls|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,xn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,Ls|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cd(t){var e=an(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function dv(){}function hv(t,e){var n=je,r=an(),s=e(),i=!xn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,Af(mv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,ya(9,pv.bind(null,n,r,s,e),void 0,null),et===null)throw Error(B(349));Ds&30||fv(n,e,s)}return s}function fv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pv(t,e,n,r){e.value=n,e.getSnapshot=r,gv(e)&&yv(t)}function mv(t,e,n){return n(function(){gv(e)&&yv(t)})}function gv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function yv(t){var e=sr(t,1);e!==null&&_n(e,t,1,-1)}function Ym(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},e.queue=t,t=t.dispatch=LE.bind(null,je,t),[e.memoizedState,t]}function ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vv(){return an().memoizedState}function zl(t,e,n,r){var s=kn();je.flags|=t,s.memoizedState=ya(1|e,n,void 0,r===void 0?null:r)}function rc(t,e,n,r){var s=an();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Nf(r,o.deps)){s.memoizedState=ya(e,n,i,r);return}}je.flags|=t,s.memoizedState=ya(1|e,n,i,r)}function Xm(t,e){return zl(8390656,8,t,e)}function Af(t,e){return rc(2048,8,t,e)}function _v(t,e){return rc(4,2,t,e)}function xv(t,e){return rc(4,4,t,e)}function wv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ev(t,e,n){return n=n!=null?n.concat([t]):null,rc(4,4,wv.bind(null,e,t),n)}function Pf(){}function bv(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tv(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Iv(t,e,n){return Ds&21?(xn(n,e)||(n=Ay(),je.lanes|=n,Ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function jE(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=ld.transition;ld.transition={};try{t(!1),e()}finally{we=n,ld.transition=r}}function Sv(){return an().memoizedState}function DE(t,e,n){var r=Kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Nv(t))kv(e,n);else if(n=lv(t,e,n,r),n!==null){var s=Tt();_n(n,t,r,s),Cv(n,e,r)}}function LE(t,e,n){var r=Kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nv(t))kv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,xn(u,o)){var c=e.interleaved;c===null?(s.next=s,Ef(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=lv(t,e,s,r),n!==null&&(s=Tt(),_n(n,t,r,s),Cv(n,e,r))}}function Nv(t){var e=t.alternate;return t===je||e!==null&&e===je}function kv(t,e){Ko=_u=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}var xu={readContext:on,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},OE={readContext:on,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:Xm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zl(4194308,4,wv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return zl(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DE.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:Ym,useDebugValue:Pf,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=Ym(!1),e=t[0];return t=jE.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=kn();if(Ce){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),et===null)throw Error(B(349));Ds&30||fv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Xm(mv.bind(null,r,i,t),[t]),r.flags|=2048,ya(9,pv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=kn(),e=et.identifierPrefix;if(Ce){var n=Qn,r=Gn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VE={readContext:on,useCallback:bv,useContext:on,useEffect:Af,useImperativeHandle:Ev,useInsertionEffect:_v,useLayoutEffect:xv,useMemo:Tv,useReducer:ud,useRef:vv,useState:function(){return ud(ga)},useDebugValue:Pf,useDeferredValue:function(t){var e=an();return Iv(e,Ke.memoizedState,t)},useTransition:function(){var t=ud(ga)[0],e=an().memoizedState;return[t,e]},useMutableSource:dv,useSyncExternalStore:hv,useId:Sv,unstable_isNewReconciler:!1},ME={readContext:on,useCallback:bv,useContext:on,useEffect:Af,useImperativeHandle:Ev,useInsertionEffect:_v,useLayoutEffect:xv,useMemo:Tv,useReducer:cd,useRef:vv,useState:function(){return cd(ga)},useDebugValue:Pf,useDeferredValue:function(t){var e=an();return Ke===null?e.memoizedState=t:Iv(e,Ke.memoizedState,t)},useTransition:function(){var t=cd(ga)[0],e=an().memoizedState;return[t,e]},useMutableSource:dv,useSyncExternalStore:hv,useId:Sv,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sc={isMounted:function(t){return(t=t._reactInternals)?qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Kr(t),i=Zn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(_n(e,t,s,r),Fl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Kr(t),i=Zn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(_n(e,t,s,r),Fl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Kr(t),s=Zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hr(t,s,r),e!==null&&(_n(e,t,r,n),Fl(e,t,r))}};function Jm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ua(n,r)||!ua(s,i):!0}function Av(t,e,n){var r=!1,s=es,i=e.contextType;return typeof i=="object"&&i!==null?i=on(i):(s=jt(e)?Rs:xt.current,r=e.contextTypes,i=(r=r!=null)?ji(t,s):es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Zm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sc.enqueueReplaceState(e,e.state,null)}function ah(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=on(i):(i=jt(e)?Rs:xt.current,s.context=ji(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(oh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sc.enqueueReplaceState(s,s.state,null),yu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vi(t,e){try{var n="",r=e;do n+=h1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FE=typeof WeakMap=="function"?WeakMap:Map;function Pv(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eu||(Eu=!0,vh=r),lh(t,e)},n}function Rv(t,e,n){n=Zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lh(t,e),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function eg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZE.bind(null,t,e,n),e.then(t,t))}function tg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ng(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var UE=dr.ReactCurrentOwner,Pt=!1;function bt(t,e,n,r){e.child=t===null?av(e,null,n,r):Li(e,t.child,n,r)}function rg(t,e,n,r,s){n=n.render;var i=e.ref;return Si(e,s),r=kf(t,e,n,r,i,s),n=Cf(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&n&&gf(e),e.flags|=1,bt(t,e,r,s),e.child)}function sg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ff(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,jv(t,e,i,r,s)):(t=Hl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(o,r)&&t.ref===e.ref)return ir(t,e,s)}return e.flags|=1,t=Gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function jv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ua(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,ir(t,e,s)}return uh(t,e,n,r,s)}function Dv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(xi,zt),zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(xi,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(xi,zt),zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(xi,zt),zt|=r;return bt(t,e,s,n),e.child}function Lv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uh(t,e,n,r,s){var i=jt(n)?Rs:xt.current;return i=ji(e,i),Si(e,s),n=kf(t,e,n,r,i,s),r=Cf(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&r&&gf(e),e.flags|=1,bt(t,e,n,s),e.child)}function ig(t,e,n,r,s){if(jt(n)){var i=!0;hu(e)}else i=!1;if(Si(e,s),e.stateNode===null)$l(t,e),Av(e,n,r),ah(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=on(h):(h=jt(n)?Rs:xt.current,h=ji(e,h));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Zm(e,o,r,h),Cr=!1;var _=e.memoizedState;o.state=_,yu(e,r,o,s),c=e.memoizedState,u!==r||_!==c||Rt.current||Cr?(typeof m=="function"&&(oh(e,n,m,r),c=e.memoizedState),(u=Cr||Jm(e,n,u,r,_,c,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uv(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:mn(e.type,u),o.props=h,g=e.pendingProps,_=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=on(c):(c=jt(n)?Rs:xt.current,c=ji(e,c));var A=n.getDerivedStateFromProps;(m=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==g||_!==c)&&Zm(e,o,r,c),Cr=!1,_=e.memoizedState,o.state=_,yu(e,r,o,s);var R=e.memoizedState;u!==g||_!==R||Rt.current||Cr?(typeof A=="function"&&(oh(e,n,A,r),R=e.memoizedState),(h=Cr||Jm(e,n,h,r,_,R,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return ch(t,e,n,r,i,s)}function ch(t,e,n,r,s,i){Lv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qm(e,n,!1),ir(t,e,i);r=e.stateNode,UE.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Li(e,t.child,null,i),e.child=Li(e,null,u,i)):bt(t,e,u,i),e.memoizedState=r.state,s&&qm(e,n,!0),e.child}function Ov(t){var e=t.stateNode;e.pendingContext?Bm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bm(t,e.context,!1),Tf(t,e.containerInfo)}function og(t,e,n,r,s){return Di(),vf(s),e.flags|=256,bt(t,e,n,r),e.child}var dh={dehydrated:null,treeContext:null,retryLane:0};function hh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vv(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Re,s&1),t===null)return sh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ac(o,r,0,null),t=As(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hh(n),e.memoizedState=dh,t):Rf(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return zE(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Gr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Gr(u,i):(i=As(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dh,r}return i=t.child,t=i.sibling,r=Gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rf(t,e){return e=ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tl(t,e,n,r){return r!==null&&vf(r),Li(e,t.child,null,n),t=Rf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dd(Error(B(422))),Tl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ac({mode:"visible",children:r.children},s,0,null),i=As(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Li(e,t.child,null,o),e.child.memoizedState=hh(o),e.memoizedState=dh,i);if(!(e.mode&1))return Tl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(B(419)),r=dd(i,r,void 0),Tl(t,e,o,r)}if(u=(o&t.childLanes)!==0,Pt||u){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,sr(t,s),_n(r,t,s,-1))}return Mf(),r=dd(Error(B(421))),Tl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=qr(s.nextSibling),qt=e,Ce=!0,yn=null,t!==null&&(en[tn++]=Gn,en[tn++]=Qn,en[tn++]=js,Gn=t.id,Qn=t.overflow,js=e),e=Rf(e,r.children),e.flags|=4096,e)}function ag(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ih(t.return,e,n)}function hd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Mv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ag(t,n,e);else if(t.tag===19)ag(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hd(e,!0,n,null,i);break;case"together":hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $E(t,e,n){switch(e.tag){case 3:Ov(e),Di();break;case 5:cv(e);break;case 1:jt(e.type)&&hu(e);break;case 4:Tf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(mu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?Vv(t,e,n):(Te(Re,Re.current&1),t=ir(t,e,n),t!==null?t.sibling:null);Te(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,Dv(t,e,n)}return ir(t,e,n)}var Fv,fh,Uv,zv;Fv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fh=function(){};Uv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ns(Rn.current);var i=null;switch(n){case"input":s=Ld(t,s),r=Ld(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Md(t,s),r=Md(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cu)}Ud(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(na.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(na.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ne("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};zv=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BE(t,e,n){var r=e.pendingProps;switch(yf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return jt(e.type)&&du(),pt(e),null;case 3:return r=e.stateNode,Oi(),ke(Rt),ke(xt),Sf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(El(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(wh(yn),yn=null))),fh(t,e),pt(e),null;case 5:If(e);var s=Ns(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)Uv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return pt(e),null}if(t=Ns(Rn.current),El(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[ha]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Do.length;s++)Ne(Do[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":gm(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":vm(r,i),Ne("invalid",r)}Ud(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&wl(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&wl(r.textContent,u,t),s=["children",""+u]):na.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":fl(r),ym(r,i,!0);break;case"textarea":fl(r),_m(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=cu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=my(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[ha]=r,Fv(t,e,!1,!1),e.stateNode=t;e:{switch(o=zd(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Do.length;s++)Ne(Do[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":gm(t,r),s=Ld(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":vm(t,r),s=Md(t,r),Ne("invalid",t);break;default:s=r}Ud(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?vy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gy(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ra(t,c):typeof c=="number"&&ra(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(na.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ne("scroll",t):c!=null&&tf(t,i,c,o))}switch(n){case"input":fl(t),ym(t,r,!1);break;case"textarea":fl(t),_m(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ei(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)zv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Ns(pa.current),Ns(Rn.current),El(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:wl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return pt(e),null;case 13:if(ke(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&$t!==null&&e.mode&1&&!(e.flags&128))iv(),Di(),e.flags|=98560,i=!1;else if(i=El(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Cn]=e}else Di(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else yn!==null&&(wh(yn),yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Qe===0&&(Qe=3):Mf())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Oi(),fh(t,e),t===null&&ca(e.stateNode.containerInfo),pt(e),null;case 10:return wf(e.type._context),pt(e),null;case 17:return jt(e.type)&&du(),pt(e),null;case 19:if(ke(Re),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ko(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vu(t),o!==null){for(e.flags|=128,ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>Mi&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=vu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return pt(e),null}else 2*Ue()-i.renderingStartTime>Mi&&n!==1073741824&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Re.current,Te(Re,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return Vf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function qE(t,e){switch(yf(e),e.tag){case 1:return jt(e.type)&&du(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),ke(Rt),ke(xt),Sf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return If(e),null;case 13:if(ke(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Di()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Re),null;case 4:return Oi(),null;case 10:return wf(e.type._context),null;case 22:case 23:return Vf(),null;case 24:return null;default:return null}}var Il=!1,vt=!1,HE=typeof WeakSet=="function"?WeakSet:Set,Q=null;function _i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function ph(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var lg=!1;function WE(t,e){if(Xd=au,t=Wy(),mf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,g=t,_=null;t:for(;;){for(var A;g!==n||s!==0&&g.nodeType!==3||(u=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(A=g.firstChild)!==null;)_=g,g=A;for(;;){if(g===t)break t;if(_===n&&++h===s&&(u=o),_===i&&++m===r&&(c=o),(A=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=A}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jd={focusedElem:t,selectionRange:n},au=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var L=R.memoizedProps,U=R.memoizedState,I=e.stateNode,b=I.getSnapshotBeforeUpdate(e.elementType===e.type?L:mn(e.type,L),U);I.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(M){Ve(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return R=lg,lg=!1,R}function Go(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ph(e,n,i)}s=s.next}while(s!==r)}}function ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $v(t){var e=t.alternate;e!==null&&(t.alternate=null,$v(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[ha],delete e[th],delete e[kE],delete e[CE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bv(t){return t.tag===5||t.tag===3||t.tag===4}function ug(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cu));else if(r!==4&&(t=t.child,t!==null))for(gh(t,e,n),t=t.sibling;t!==null;)gh(t,e,n),t=t.sibling}function yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yh(t,e,n),t=t.sibling;t!==null;)yh(t,e,n),t=t.sibling}var rt=null,gn=!1;function br(t,e,n){for(n=n.child;n!==null;)qv(t,e,n),n=n.sibling}function qv(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Xu,n)}catch{}switch(n.tag){case 5:vt||_i(n,e);case 6:var r=rt,s=gn;rt=null,br(t,e,n),rt=r,gn=s,rt!==null&&(gn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(gn?(t=rt,n=n.stateNode,t.nodeType===8?id(t.parentNode,n):t.nodeType===1&&id(t,n),aa(t)):id(rt,n.stateNode));break;case 4:r=rt,s=gn,rt=n.stateNode.containerInfo,gn=!0,br(t,e,n),rt=r,gn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ph(n,e,o),s=s.next}while(s!==r)}br(t,e,n);break;case 1:if(!vt&&(_i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ve(n,e,u)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,br(t,e,n),vt=r):br(t,e,n);break;default:br(t,e,n)}}function cg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HE),e.forEach(function(r){var s=tb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:rt=u.stateNode,gn=!1;break e;case 3:rt=u.stateNode.containerInfo,gn=!0;break e;case 4:rt=u.stateNode.containerInfo,gn=!0;break e}u=u.return}if(rt===null)throw Error(B(160));qv(i,o,s),rt=null,gn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Ve(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hv(e,t),e=e.sibling}function Hv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),Nn(t),r&4){try{Go(3,t,t.return),ic(3,t)}catch(L){Ve(t,t.return,L)}try{Go(5,t,t.return)}catch(L){Ve(t,t.return,L)}}break;case 1:pn(e,t),Nn(t),r&512&&n!==null&&_i(n,n.return);break;case 5:if(pn(e,t),Nn(t),r&512&&n!==null&&_i(n,n.return),t.flags&32){var s=t.stateNode;try{ra(s,"")}catch(L){Ve(t,t.return,L)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&fy(s,i),zd(u,o);var h=zd(u,i);for(o=0;o<c.length;o+=2){var m=c[o],g=c[o+1];m==="style"?vy(s,g):m==="dangerouslySetInnerHTML"?gy(s,g):m==="children"?ra(s,g):tf(s,m,g,h)}switch(u){case"input":Od(s,i);break;case"textarea":py(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?Ei(s,!!i.multiple,A,!1):_!==!!i.multiple&&(i.defaultValue!=null?Ei(s,!!i.multiple,i.defaultValue,!0):Ei(s,!!i.multiple,i.multiple?[]:"",!1))}s[ha]=i}catch(L){Ve(t,t.return,L)}}break;case 6:if(pn(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(L){Ve(t,t.return,L)}}break;case 3:if(pn(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(L){Ve(t,t.return,L)}break;case 4:pn(e,t),Nn(t);break;case 13:pn(e,t),Nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Lf=Ue())),r&4&&cg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(h=vt)||m,pn(e,t),vt=h):pn(e,t),Nn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Q=t,m=t.child;m!==null;){for(g=Q=m;Q!==null;){switch(_=Q,A=_.child,_.tag){case 0:case 11:case 14:case 15:Go(4,_,_.return);break;case 1:_i(_,_.return);var R=_.stateNode;if(typeof R.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(L){Ve(r,n,L)}}break;case 5:_i(_,_.return);break;case 22:if(_.memoizedState!==null){hg(g);continue}}A!==null?(A.return=_,Q=A):hg(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=yy("display",o))}catch(L){Ve(t,t.return,L)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(L){Ve(t,t.return,L)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:pn(e,t),Nn(t),r&4&&cg(t);break;case 21:break;default:pn(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ra(s,""),r.flags&=-33);var i=ug(t);yh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=ug(t);gh(t,u,o);break;default:throw Error(B(161))}}catch(c){Ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KE(t,e,n){Q=t,Wv(t)}function Wv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Il;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||vt;u=Il;var h=vt;if(Il=o,(vt=c)&&!h)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?fg(s):c!==null?(c.return=o,Q=c):fg(s);for(;i!==null;)Q=i,Wv(i),i=i.sibling;Q=s,Il=u,vt=h}dg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):dg(t)}}function dg(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&aa(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}vt||e.flags&512&&mh(e)}catch(_){Ve(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function hg(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function fg(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ic(4,e)}catch(c){Ve(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ve(e,s,c)}}var i=e.return;try{mh(e)}catch(c){Ve(e,i,c)}break;case 5:var o=e.return;try{mh(e)}catch(c){Ve(e,o,c)}}}catch(c){Ve(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var GE=Math.ceil,wu=dr.ReactCurrentDispatcher,jf=dr.ReactCurrentOwner,rn=dr.ReactCurrentBatchConfig,ge=0,et=null,Be=null,ot=0,zt=0,xi=os(0),Qe=0,va=null,Ls=0,oc=0,Df=0,Qo=null,Ct=null,Lf=0,Mi=1/0,Wn=null,Eu=!1,vh=null,Wr=null,Sl=!1,Fr=null,bu=0,Yo=0,_h=null,Bl=-1,ql=0;function Tt(){return ge&6?Ue():Bl!==-1?Bl:Bl=Ue()}function Kr(t){return t.mode&1?ge&2&&ot!==0?ot&-ot:PE.transition!==null?(ql===0&&(ql=Ay()),ql):(t=we,t!==0||(t=window.event,t=t===void 0?16:Vy(t.type)),t):1}function _n(t,e,n,r){if(50<Yo)throw Yo=0,_h=null,Error(B(185));Ca(t,n,r),(!(ge&2)||t!==et)&&(t===et&&(!(ge&2)&&(oc|=n),Qe===4&&Pr(t,ot)),Dt(t,r),n===1&&ge===0&&!(e.mode&1)&&(Mi=Ue()+500,nc&&as()))}function Dt(t,e){var n=t.callbackNode;P1(t,e);var r=ou(t,t===et?ot:0);if(r===0)n!==null&&Em(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Em(n),e===1)t.tag===0?AE(pg.bind(null,t)):nv(pg.bind(null,t)),SE(function(){!(ge&6)&&as()}),n=null;else{switch(Py(r)){case 1:n=af;break;case 4:n=ky;break;case 16:n=iu;break;case 536870912:n=Cy;break;default:n=iu}n=e_(n,Kv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Kv(t,e){if(Bl=-1,ql=0,ge&6)throw Error(B(327));var n=t.callbackNode;if(Ni()&&t.callbackNode!==n)return null;var r=ou(t,t===et?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tu(t,r);else{e=r;var s=ge;ge|=2;var i=Qv();(et!==t||ot!==e)&&(Wn=null,Mi=Ue()+500,Cs(t,e));do try{XE();break}catch(u){Gv(t,u)}while(!0);xf(),wu.current=i,ge=s,Be!==null?e=0:(et=null,ot=0,e=Qe)}if(e!==0){if(e===2&&(s=Wd(t),s!==0&&(r=s,e=xh(t,s))),e===1)throw n=va,Cs(t,0),Pr(t,r),Dt(t,Ue()),n;if(e===6)Pr(t,r);else{if(s=t.current.alternate,!(r&30)&&!QE(s)&&(e=Tu(t,r),e===2&&(i=Wd(t),i!==0&&(r=i,e=xh(t,i))),e===1))throw n=va,Cs(t,0),Pr(t,r),Dt(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:bs(t,Ct,Wn);break;case 3:if(Pr(t,r),(r&130023424)===r&&(e=Lf+500-Ue(),10<e)){if(ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=eh(bs.bind(null,t,Ct,Wn),e);break}bs(t,Ct,Wn);break;case 4:if(Pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GE(r/1960))-r,10<r){t.timeoutHandle=eh(bs.bind(null,t,Ct,Wn),r);break}bs(t,Ct,Wn);break;case 5:bs(t,Ct,Wn);break;default:throw Error(B(329))}}}return Dt(t,Ue()),t.callbackNode===n?Kv.bind(null,t):null}function xh(t,e){var n=Qo;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=Tu(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&wh(e)),t}function wh(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function QE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pr(t,e){for(e&=~Df,e&=~oc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function pg(t){if(ge&6)throw Error(B(327));Ni();var e=ou(t,0);if(!(e&1))return Dt(t,Ue()),null;var n=Tu(t,e);if(t.tag!==0&&n===2){var r=Wd(t);r!==0&&(e=r,n=xh(t,r))}if(n===1)throw n=va,Cs(t,0),Pr(t,e),Dt(t,Ue()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bs(t,Ct,Wn),Dt(t,Ue()),null}function Of(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Mi=Ue()+500,nc&&as())}}function Os(t){Fr!==null&&Fr.tag===0&&!(ge&6)&&Ni();var e=ge;ge|=1;var n=rn.transition,r=we;try{if(rn.transition=null,we=1,t)return t()}finally{we=r,rn.transition=n,ge=e,!(ge&6)&&as()}}function Vf(){zt=xi.current,ke(xi)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IE(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(yf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&du();break;case 3:Oi(),ke(Rt),ke(xt),Sf();break;case 5:If(r);break;case 4:Oi();break;case 13:ke(Re);break;case 19:ke(Re);break;case 10:wf(r.type._context);break;case 22:case 23:Vf()}n=n.return}if(et=t,Be=t=Gr(t.current,null),ot=zt=e,Qe=0,va=null,Df=oc=Ls=0,Ct=Qo=null,Ss!==null){for(e=0;e<Ss.length;e++)if(n=Ss[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ss=null}return t}function Gv(t,e){do{var n=Be;try{if(xf(),Ul.current=xu,_u){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_u=!1}if(Ds=0,Ze=Ke=je=null,Ko=!1,ma=0,jf.current=null,n===null||n.return===null){Qe=1,va=e,Be=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ot,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var A=tg(o);if(A!==null){A.flags&=-257,ng(A,o,u,i,e),A.mode&1&&eg(i,h,e),e=A,c=h;var R=e.updateQueue;if(R===null){var L=new Set;L.add(c),e.updateQueue=L}else R.add(c);break e}else{if(!(e&1)){eg(i,h,e),Mf();break e}c=Error(B(426))}}else if(Ce&&u.mode&1){var U=tg(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),ng(U,o,u,i,e),vf(Vi(c,u));break e}}i=c=Vi(c,u),Qe!==4&&(Qe=2),Qo===null?Qo=[i]:Qo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Pv(i,c,e);Gm(i,I);break e;case 1:u=c;var b=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Wr===null||!Wr.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=Rv(i,u,e);Gm(i,M);break e}}i=i.return}while(i!==null)}Xv(n)}catch(F){e=F,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Qv(){var t=wu.current;return wu.current=xu,t===null?xu:t}function Mf(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!(Ls&268435455)&&!(oc&268435455)||Pr(et,ot)}function Tu(t,e){var n=ge;ge|=2;var r=Qv();(et!==t||ot!==e)&&(Wn=null,Cs(t,e));do try{YE();break}catch(s){Gv(t,s)}while(!0);if(xf(),ge=n,wu.current=r,Be!==null)throw Error(B(261));return et=null,ot=0,Qe}function YE(){for(;Be!==null;)Yv(Be)}function XE(){for(;Be!==null&&!E1();)Yv(Be)}function Yv(t){var e=Zv(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?Xv(t):Be=e,jf.current=null}function Xv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qE(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,Be=null;return}}else if(n=BE(n,e,zt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Qe===0&&(Qe=5)}function bs(t,e,n){var r=we,s=rn.transition;try{rn.transition=null,we=1,JE(t,e,n,r)}finally{rn.transition=s,we=r}return null}function JE(t,e,n,r){do Ni();while(Fr!==null);if(ge&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(R1(t,i),t===et&&(Be=et=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sl||(Sl=!0,e_(iu,function(){return Ni(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rn.transition,rn.transition=null;var o=we;we=1;var u=ge;ge|=4,jf.current=null,WE(t,n),Hv(n,t),vE(Jd),au=!!Xd,Jd=Xd=null,t.current=n,KE(n),b1(),ge=u,we=o,rn.transition=i}else t.current=n;if(Sl&&(Sl=!1,Fr=t,bu=s),i=t.pendingLanes,i===0&&(Wr=null),S1(n.stateNode),Dt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Eu)throw Eu=!1,t=vh,vh=null,t;return bu&1&&t.tag!==0&&Ni(),i=t.pendingLanes,i&1?t===_h?Yo++:(Yo=0,_h=t):Yo=0,as(),null}function Ni(){if(Fr!==null){var t=Py(bu),e=rn.transition,n=we;try{if(rn.transition=null,we=16>t?16:t,Fr===null)var r=!1;else{if(t=Fr,Fr=null,bu=0,ge&6)throw Error(B(331));var s=ge;for(ge|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Q=h;Q!==null;){var m=Q;switch(m.tag){case 0:case 11:case 15:Go(8,m,i)}var g=m.child;if(g!==null)g.return=m,Q=g;else for(;Q!==null;){m=Q;var _=m.sibling,A=m.return;if($v(m),m===h){Q=null;break}if(_!==null){_.return=A,Q=_;break}Q=A}}}var R=i.alternate;if(R!==null){var L=R.child;if(L!==null){R.child=null;do{var U=L.sibling;L.sibling=null,L=U}while(L!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Go(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,Q=I;break e}Q=i.return}}var b=t.current;for(Q=b;Q!==null;){o=Q;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Q=k;else e:for(o=b;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ic(9,u)}}catch(F){Ve(u,u.return,F)}if(u===o){Q=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,Q=M;break e}Q=u.return}}if(ge=s,as(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Xu,t)}catch{}r=!0}return r}finally{we=n,rn.transition=e}}return!1}function mg(t,e,n){e=Vi(n,e),e=Pv(t,e,1),t=Hr(t,e,1),e=Tt(),t!==null&&(Ca(t,1,e),Dt(t,e))}function Ve(t,e,n){if(t.tag===3)mg(t,t,n);else for(;e!==null;){if(e.tag===3){mg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){t=Vi(n,t),t=Rv(e,t,1),e=Hr(e,t,1),t=Tt(),e!==null&&(Ca(e,1,t),Dt(e,t));break}}e=e.return}}function ZE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(ot&n)===n&&(Qe===4||Qe===3&&(ot&130023424)===ot&&500>Ue()-Lf?Cs(t,0):Df|=n),Dt(t,e)}function Jv(t,e){e===0&&(t.mode&1?(e=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):e=1);var n=Tt();t=sr(t,e),t!==null&&(Ca(t,e,n),Dt(t,n))}function eb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jv(t,n)}function tb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Jv(t,n)}var Zv;Zv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,$E(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,Ce&&e.flags&1048576&&rv(e,pu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$l(t,e),t=e.pendingProps;var s=ji(e,xt.current);Si(e,n),s=kf(null,e,r,t,s,n);var i=Cf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,hu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bf(e),s.updater=sc,e.stateNode=s,s._reactInternals=e,ah(e,r,t,n),e=ch(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&gf(e),bt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($l(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rb(r),t=mn(r,t),s){case 0:e=uh(null,e,r,t,n);break e;case 1:e=ig(null,e,r,t,n);break e;case 11:e=rg(null,e,r,t,n);break e;case 14:e=sg(null,e,r,mn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),uh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),ig(t,e,r,s,n);case 3:e:{if(Ov(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uv(t,e),yu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vi(Error(B(423)),e),e=og(t,e,r,n,s);break e}else if(r!==s){s=Vi(Error(B(424)),e),e=og(t,e,r,n,s);break e}else for($t=qr(e.stateNode.containerInfo.firstChild),qt=e,Ce=!0,yn=null,n=av(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Di(),r===s){e=ir(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return cv(e),t===null&&sh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zd(r,s)?o=null:i!==null&&Zd(r,i)&&(e.flags|=32),Lv(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&sh(e),null;case 13:return Vv(t,e,n);case 4:return Tf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Li(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),rg(t,e,r,s,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(mu,r._currentValue),r._currentValue=o,i!==null)if(xn(i.value,o)){if(i.children===s.children&&!Rt.current){e=ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ih(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),ih(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Si(e,n),s=on(s),r=r(s),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,s=mn(r,e.pendingProps),s=mn(r.type,s),sg(t,e,r,s,n);case 15:return jv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),$l(t,e),e.tag=1,jt(r)?(t=!0,hu(e)):t=!1,Si(e,n),Av(e,r,s),ah(e,r,s,n),ch(null,e,r,!0,t,n);case 19:return Mv(t,e,n);case 22:return Dv(t,e,n)}throw Error(B(156,e.tag))};function e_(t,e){return Ny(t,e)}function nb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new nb(t,e,n,r)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rb(t){if(typeof t=="function")return Ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rf)return 11;if(t===sf)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ci:return As(n.children,s,i,e);case nf:o=8,s|=8;break;case Pd:return t=nn(12,n,e,s|2),t.elementType=Pd,t.lanes=i,t;case Rd:return t=nn(13,n,e,s),t.elementType=Rd,t.lanes=i,t;case jd:return t=nn(19,n,e,s),t.elementType=jd,t.lanes=i,t;case cy:return ac(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ly:o=10;break e;case uy:o=9;break e;case rf:o=11;break e;case sf:o=14;break e;case kr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function As(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function ac(t,e,n,r){return t=nn(22,t,r,e),t.elementType=cy,t.lanes=n,t.stateNode={isHidden:!1},t}function fd(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function pd(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gc(0),this.expirationTimes=Gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uf(t,e,n,r,s,i,o,u,c){return t=new sb(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bf(i),t}function ib(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function t_(t){if(!t)return es;t=t._reactInternals;e:{if(qs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(jt(n))return tv(t,n,e)}return e}function n_(t,e,n,r,s,i,o,u,c){return t=Uf(n,r,!0,t,s,i,o,u,c),t.context=t_(null),n=t.current,r=Tt(),s=Kr(n),i=Zn(r,s),i.callback=e??null,Hr(n,i,s),t.current.lanes=s,Ca(t,s,r),Dt(t,r),t}function lc(t,e,n,r){var s=e.current,i=Tt(),o=Kr(s);return n=t_(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(s,e,o),t!==null&&(_n(t,s,o,i),Fl(t,s,o)),o}function Iu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zf(t,e){gg(t,e),(t=t.alternate)&&gg(t,e)}function ob(){return null}var r_=typeof reportError=="function"?reportError:function(t){console.error(t)};function $f(t){this._internalRoot=t}uc.prototype.render=$f.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));lc(t,e,null,null)};uc.prototype.unmount=$f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Os(function(){lc(null,t,null,null)}),e[rr]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ar.length&&e!==0&&e<Ar[n].priority;n++);Ar.splice(n,0,t),n===0&&Oy(t)}};function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yg(){}function ab(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Iu(o);i.call(h)}}var o=n_(e,r,t,0,null,!1,!1,"",yg);return t._reactRootContainer=o,t[rr]=o.current,ca(t.nodeType===8?t.parentNode:t),Os(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=Iu(c);u.call(h)}}var c=Uf(t,0,!1,null,null,!1,!1,"",yg);return t._reactRootContainer=c,t[rr]=c.current,ca(t.nodeType===8?t.parentNode:t),Os(function(){lc(e,c,n,r)}),c}function dc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Iu(o);u.call(c)}}lc(e,o,t,s)}else o=ab(n,e,t,s,r);return Iu(o)}Ry=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jo(e.pendingLanes);n!==0&&(lf(e,n|1),Dt(e,Ue()),!(ge&6)&&(Mi=Ue()+500,as()))}break;case 13:Os(function(){var r=sr(t,1);if(r!==null){var s=Tt();_n(r,t,1,s)}}),zf(t,1)}};uf=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=Tt();_n(e,t,134217728,n)}zf(t,134217728)}};jy=function(t){if(t.tag===13){var e=Kr(t),n=sr(t,e);if(n!==null){var r=Tt();_n(n,t,e,r)}zf(t,e)}};Dy=function(){return we};Ly=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Bd=function(t,e,n){switch(e){case"input":if(Od(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tc(r);if(!s)throw Error(B(90));hy(r),Od(r,s)}}}break;case"textarea":py(t,n);break;case"select":e=n.value,e!=null&&Ei(t,!!n.multiple,e,!1)}};wy=Of;Ey=Os;var lb={usingClientEntryPoint:!1,Events:[Pa,pi,tc,_y,xy,Of]},Co={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ub={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Iy(t),t===null?null:t.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||ob,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{Xu=Nl.inject(ub),Pn=Nl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lb;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bf(e))throw Error(B(200));return ib(t,e,null,n)};Wt.createRoot=function(t,e){if(!Bf(t))throw Error(B(299));var n=!1,r="",s=r_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uf(t,1,!1,null,null,n,!1,r,s),t[rr]=e.current,ca(t.nodeType===8?t.parentNode:t),new $f(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Iy(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Os(t)};Wt.hydrate=function(t,e,n){if(!cc(e))throw Error(B(200));return dc(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Bf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=r_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=n_(e,null,t,1,n??null,s,!1,i,o),t[rr]=e.current,ca(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uc(e)};Wt.render=function(t,e,n){if(!cc(e))throw Error(B(200));return dc(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!cc(t))throw Error(B(40));return t._reactRootContainer?(Os(function(){dc(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Wt.unstable_batchedUpdates=Of;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return dc(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function s_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s_)}catch(t){console.error(t)}}s_(),sy.exports=Wt;var cb=sy.exports,vg=cb;Cd.createRoot=vg.createRoot,Cd.hydrateRoot=vg.hydrateRoot;var _g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},db=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},o_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,g=(i&3)<<4|u>>4;let _=(u&15)<<2|h>>6,A=h&63;c||(A=64,o||(_=64)),r.push(n[m],n[g],n[_],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):db(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||g==null)throw new hb;const _=i<<2|u>>4;if(r.push(_),h!==64){const A=u<<4&240|h>>2;if(r.push(A),g!==64){const R=h<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fb=function(t){const e=i_(t);return o_.encodeByteArray(e,!0)},Su=function(t){return fb(t).replace(/\./g,"")},a_=function(t){try{return o_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=()=>pb().__FIREBASE_DEFAULTS__,gb=()=>{if(typeof process>"u"||typeof _g>"u")return;const t=_g.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&a_(t[1]);return e&&JSON.parse(e)},hc=()=>{try{return mb()||gb()||yb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l_=t=>{var e,n;return(n=(e=hc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vb=t=>{const e=l_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},u_=()=>{var t;return(t=hc())===null||t===void 0?void 0:t.config},c_=t=>{var e;return(e=hc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Su(JSON.stringify(n)),Su(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function Eb(){var t;const e=(t=hc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ib(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sb(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nb(){return!Eb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kb(){try{return typeof indexedDB=="object"}catch{return!1}}function Cb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ab,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ja.prototype.create)}}class ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Pb(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new hr(s,u,r)}}function Pb(t,e){return t.replace(Rb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Rb=/\{\$([^}]+)}/g;function jb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xg(i)&&xg(o)){if(!Nu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Db(t,e){const n=new Lb(t,e);return n.subscribe.bind(n)}class Lb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ob(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=md),s.error===void 0&&(s.error=md),s.complete===void 0&&(s.complete=md);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ob(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _b;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fb(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mb(t){return t===Ts?void 0:t}function Fb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const zb={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},$b=pe.INFO,Bb={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},qb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Bb[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=$b,this._logHandler=qb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const Hb=(t,e)=>e.some(n=>t instanceof n);let wg,Eg;function Wb(){return wg||(wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kb(){return Eg||(Eg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d_=new WeakMap,Eh=new WeakMap,h_=new WeakMap,gd=new WeakMap,Hf=new WeakMap;function Gb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Qr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&d_.set(n,t)}).catch(()=>{}),Hf.set(e,t),e}function Qb(t){if(Eh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Eh.set(t,e)}let bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Eh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yb(t){bh=t(bh)}function Xb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yd(this),e,...n);return h_.set(r,e.sort?e.sort():[e]),Qr(r)}:Kb().includes(t)?function(...e){return t.apply(yd(this),e),Qr(d_.get(this))}:function(...e){return Qr(t.apply(yd(this),e))}}function Jb(t){return typeof t=="function"?Xb(t):(t instanceof IDBTransaction&&Qb(t),Hb(t,Wb())?new Proxy(t,bh):t)}function Qr(t){if(t instanceof IDBRequest)return Gb(t);if(gd.has(t))return gd.get(t);const e=Jb(t);return e!==t&&(gd.set(t,e),Hf.set(e,t)),e}const yd=t=>Hf.get(t);function Zb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Qr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Qr(o.result),c.oldVersion,c.newVersion,Qr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const eT=["get","getKey","getAll","getAllKeys","count"],tT=["put","add","delete","clear"],vd=new Map;function bg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vd.get(e))return vd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eT.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return vd.set(e,i),i}Yb(t=>({...t,get:(e,n,r)=>bg(e,n)||t.get(e,n,r),has:(e,n)=>!!bg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Th="@firebase/app",Tg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new qf("@firebase/app"),sT="@firebase/app-compat",iT="@firebase/analytics-compat",oT="@firebase/analytics",aT="@firebase/app-check-compat",lT="@firebase/app-check",uT="@firebase/auth",cT="@firebase/auth-compat",dT="@firebase/database",hT="@firebase/data-connect",fT="@firebase/database-compat",pT="@firebase/functions",mT="@firebase/functions-compat",gT="@firebase/installations",yT="@firebase/installations-compat",vT="@firebase/messaging",_T="@firebase/messaging-compat",xT="@firebase/performance",wT="@firebase/performance-compat",ET="@firebase/remote-config",bT="@firebase/remote-config-compat",TT="@firebase/storage",IT="@firebase/storage-compat",ST="@firebase/firestore",NT="@firebase/vertexai-preview",kT="@firebase/firestore-compat",CT="firebase",AT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="[DEFAULT]",PT={[Th]:"fire-core",[sT]:"fire-core-compat",[oT]:"fire-analytics",[iT]:"fire-analytics-compat",[lT]:"fire-app-check",[aT]:"fire-app-check-compat",[uT]:"fire-auth",[cT]:"fire-auth-compat",[dT]:"fire-rtdb",[hT]:"fire-data-connect",[fT]:"fire-rtdb-compat",[pT]:"fire-fn",[mT]:"fire-fn-compat",[gT]:"fire-iid",[yT]:"fire-iid-compat",[vT]:"fire-fcm",[_T]:"fire-fcm-compat",[xT]:"fire-perf",[wT]:"fire-perf-compat",[ET]:"fire-rc",[bT]:"fire-rc-compat",[TT]:"fire-gcs",[IT]:"fire-gcs-compat",[ST]:"fire-fst",[kT]:"fire-fst-compat",[NT]:"fire-vertex","fire-js":"fire-js",[CT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,RT=new Map,Sh=new Map;function Ig(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fi(t){const e=t.name;if(Sh.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;Sh.set(e,t);for(const n of ku.values())Ig(n,t);for(const n of RT.values())Ig(n,t);return!0}function Wf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function An(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new ja("app","Firebase",jT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=AT;function f_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ih,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Yr.create("bad-app-name",{appName:String(s)});if(n||(n=u_()),!n)throw Yr.create("no-options");const i=ku.get(s);if(i){if(Nu(n,i.options)&&Nu(r,i.config))return i;throw Yr.create("duplicate-app",{appName:s})}const o=new Ub(s);for(const c of Sh.values())o.addComponent(c);const u=new DT(n,r,o);return ku.set(s,u),u}function p_(t=Ih){const e=ku.get(t);if(!e&&t===Ih&&u_())return f_();if(!e)throw Yr.create("no-app",{appName:t});return e}function Xr(t,e,n){var r;let s=(r=PT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(u.join(" "));return}Fi(new Vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebase-heartbeat-database",OT=1,_a="firebase-heartbeat-store";let _d=null;function m_(){return _d||(_d=Zb(LT,OT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),_d}async function VT(t){try{const n=(await m_()).transaction(_a),r=await n.objectStore(_a).get(g_(t));return await n.done,r}catch(e){if(e instanceof hr)or.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function Sg(t,e){try{const r=(await m_()).transaction(_a,"readwrite");await r.objectStore(_a).put(e,g_(t)),await r.done}catch(n){if(n instanceof hr)or.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function g_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=1024,FT=30*24*60*60*1e3;class UT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $T(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ng();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=FT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ng(),{heartbeatsToSend:r,unsentEntries:s}=zT(this._heartbeatsCache.heartbeats),i=Su(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return or.warn(n),""}}}function Ng(){return new Date().toISOString().substring(0,10)}function zT(t,e=MT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),kg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),kg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $T{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kb()?Cb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kg(t){return Su(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){Fi(new Vs("platform-logger",e=>new nT(e),"PRIVATE")),Fi(new Vs("heartbeat",e=>new UT(e),"PRIVATE")),Xr(Th,Tg,t),Xr(Th,Tg,"esm2017"),Xr("fire-js","")}BT("");function Kf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function y_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qT=y_,v_=new ja("auth","Firebase",y_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new qf("@firebase/auth");function HT(t,...e){Cu.logLevel<=pe.WARN&&Cu.warn(`Auth (${Ji}): ${t}`,...e)}function Wl(t,...e){Cu.logLevel<=pe.ERROR&&Cu.error(`Auth (${Ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw Gf(t,...e)}function jn(t,...e){return Gf(t,...e)}function __(t,e,n){const r=Object.assign(Object.assign({},qT()),{[e]:n});return new ja("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return __(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return v_.create(t,...e)}function ne(t,e,...n){if(!t)throw Gf(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wl(e),new Error(e)}function ar(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WT(){return Cg()==="http:"||Cg()==="https:"}function Cg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WT()||Tb()||"connection"in navigator)?navigator.onLine:!0}function GT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=wb()||Ib()}get(){return KT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new La(3e4,6e4);function fr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fn(t,e,n,r,s={}){return w_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Da(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return bb()||(h.referrerPolicy="no-referrer"),x_.fetch()(E_(t,t.config.apiHost,n,u),h)})}async function w_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},QT),e);try{const s=new JT(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw kl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw kl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw kl(t,"user-disabled",o);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw __(t,m,h);wn(t,m)}}catch(s){if(s instanceof hr)throw s;wn(t,"network-request-failed",{message:String(s)})}}async function Oa(t,e,n,r,s={}){const i=await Fn(t,e,n,r,s);return"mfaPendingCredential"in i&&wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function E_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Qf(t.config,s):`${t.config.apiScheme}://${s}`}function XT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jn(this.auth,"network-request-failed")),YT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jn(t,e,r);return s.customData._tokenResponse=n,s}function Ag(t){return t!==void 0&&t.enterprise!==void 0}class ZT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function eI(t,e){return Fn(t,"GET","/v2/recaptchaConfig",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(t,e){return Fn(t,"POST","/v1/accounts:delete",e)}async function b_(t,e){return Fn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nI(t,e=!1){const n=qe(t),r=await n.getIdToken(e),s=Yf(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xo(xd(s.auth_time)),issuedAtTime:Xo(xd(s.iat)),expirationTime:Xo(xd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xd(t){return Number(t)*1e3}function Yf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wl("JWT malformed, contained fewer than 3 sections"),null;try{const s=a_(n);return s?JSON.parse(s):(Wl("Failed to decode base64 JWT payload"),null)}catch(s){return Wl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Pg(t){const e=Yf(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&rI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ui(t,b_(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?T_(i.providerUserInfo):[],u=oI(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),m=c?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new kh(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function iI(t){const e=qe(t);await Au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function T_(t){return t.map(e=>{var{providerId:n}=e,r=Kf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e){const n=await w_(t,{},async()=>{const r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=E_(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",x_.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lI(t,e){return Fn(t,"POST","/v2/accounts:revokeToken",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Pg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await aI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ki;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ki,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new kh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ui(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nI(this,e)}reload(){return iI(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Au(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Ui(this,tI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,h,m;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,A=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,L=(u=n.tenantId)!==null&&u!==void 0?u:void 0,U=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,b=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:k,emailVerified:M,isAnonymous:F,providerData:V,stsTokenManager:x}=n;ne(k&&x,e,"internal-error");const v=ki.fromJSON(this.name,x);ne(typeof k=="string",e,"internal-error"),Tr(g,e.name),Tr(_,e.name),ne(typeof M=="boolean",e,"internal-error"),ne(typeof F=="boolean",e,"internal-error"),Tr(A,e.name),Tr(R,e.name),Tr(L,e.name),Tr(U,e.name),Tr(I,e.name),Tr(b,e.name);const w=new Xn({uid:k,auth:e,email:_,emailVerified:M,displayName:g,isAnonymous:F,photoURL:R,phoneNumber:A,tenantId:L,stsTokenManager:v,createdAt:I,lastLoginAt:b});return V&&Array.isArray(V)&&(w.providerData=V.map(E=>Object.assign({},E))),U&&(w._redirectEventId=U),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new ki;s.updateFromServerResponse(n);const i=new Xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Au(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?T_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new ki;u.updateFromIdToken(r);const c=new Xn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new kh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=new Map;function Jn(t){ar(t instanceof Function,"Expected a class definition");let e=Rg.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}I_.type="NONE";const jg=I_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ci{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Kl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Kl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ci(Jn(jg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Jn(jg);const o=Kl(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const m=await h._get(o);if(m){const g=Xn._fromJSON(e,m);h!==i&&(u=g),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ci(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(S_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P_(e))return"Blackberry";if(R_(e))return"Webos";if(N_(e))return"Safari";if((e.includes("chrome/")||k_(e))&&!e.includes("edge/"))return"Chrome";if(A_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function S_(t=wt()){return/firefox\//i.test(t)}function N_(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k_(t=wt()){return/crios\//i.test(t)}function C_(t=wt()){return/iemobile/i.test(t)}function A_(t=wt()){return/android/i.test(t)}function P_(t=wt()){return/blackberry/i.test(t)}function R_(t=wt()){return/webos/i.test(t)}function Xf(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uI(t=wt()){var e;return Xf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cI(){return Sb()&&document.documentMode===10}function j_(t=wt()){return Xf(t)||A_(t)||R_(t)||P_(t)||/windows phone/i.test(t)||C_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t,e=[]){let n;switch(t){case"Browser":n=Dg(wt());break;case"Worker":n=`${Dg(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ji}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(t,e={}){return Fn(t,"GET","/v2/passwordPolicy",fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=6;class pI{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lg(this),this.idTokenSubscription=new Lg(this),this.beforeStateQueue=new dI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await b_(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(An(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Au(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(er(this));const n=e?qe(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hI(this),n=new pI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=D_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ls(t){return qe(t)}class Lg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Db(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gI(t){fc=t}function L_(t){return fc.loadJS(t)}function yI(){return fc.recaptchaEnterpriseScript}function vI(){return fc.gapiScript}function _I(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const xI="recaptcha-enterprise",wI="NO_RECAPTCHA";class EI{constructor(e){this.type=xI,this.auth=ls(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{eI(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new ZT(c);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(c=>{u(c)})})}function s(i,o,u){const c=window.grecaptcha;Ag(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(wI)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(u=>{if(!n&&Ag(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=yI();c.length!==0&&(c+=u),L_(c).then(()=>{s(u,i,o)}).catch(h=>{o(h)})}}).catch(u=>{o(u)})})}}async function Og(t,e,n,r=!1){const s=new EI(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Pu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Og(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Og(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e){const n=Wf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Nu(i,e??{}))return s;wn(s,"already-initialized")}return n.initialize({options:e})}function TI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function II(t,e,n){const r=ls(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=O_(e),{host:o,port:u}=SI(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),NI()}function O_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SI(t){const e=O_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Vg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Vg(o)}}}function Vg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function kI(t,e){return Fn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(t,e){return Oa(t,"POST","/v1/accounts:signInWithPassword",fr(t,e))}async function AI(t,e){return Fn(t,"POST","/v1/accounts:sendOobCode",fr(t,e))}async function PI(t,e){return AI(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(t,e){return Oa(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}async function jI(t,e){return Oa(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Jf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new xa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pu(e,n,"signInWithPassword",CI);case"emailLink":return RI(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pu(e,r,"signUpPassword",kI);case"emailLink":return jI(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t,e){return Oa(t,"POST","/v1/accounts:signInWithIdp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="http://localhost";class Ms extends Jf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Kf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ai(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ai(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ai(e,n)}buildRequest(){const e={requestUri:DI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Da(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OI(t){const e=Lo(Oo(t)).link,n=e?Lo(Oo(e)).deep_link_id:null,r=Lo(Oo(t)).deep_link_id;return(r?Lo(Oo(r)).link:null)||r||n||e||t}class Zf{constructor(e){var n,r,s,i,o,u;const c=Lo(Oo(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(r=c.oobCode)!==null&&r!==void 0?r:null,g=LI((s=c.mode)!==null&&s!==void 0?s:null);ne(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=OI(e);try{return new Zf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.providerId=Hs.PROVIDER_ID}static credential(e,n){return xa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zf.parseLink(n);return ne(r,"argument-error"),xa._fromEmailAndCode(e,r.code,r.tenantId)}}Hs.PROVIDER_ID="password";Hs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends V_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Va{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Va{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jr.credential(n,r)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Va{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Va{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t,e){return Oa(t,"POST","/v1/accounts:signUp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xn._fromIdTokenResponse(e,r,s),o=Mg(r);return new Fs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Mg(r);return new Fs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Mg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends hr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ru.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ru(e,n,r,s)}}function M_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ru._fromErrorAndOperation(t,i,e,r):i})}async function MI(t,e,n=!1){const r=await Ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F_(t,e,n=!1){const{auth:r}=t;if(An(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await Ui(t,M_(r,s,e,t),n);ne(i.idToken,r,"internal-error");const o=Yf(i.idToken);ne(o,r,"internal-error");const{sub:u}=o;return ne(t.uid===u,r,"user-mismatch"),Fs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&wn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U_(t,e,n=!1){if(An(t.app))return Promise.reject(er(t));const r="signIn",s=await M_(t,r,e),i=await Fs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function FI(t,e){return U_(ls(t),e)}async function UI(t,e){return F_(qe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_(t){const e=ls(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zI(t,e,n){const r=ls(t);await Pu(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",PI)}async function $I(t,e,n){if(An(t.app))return Promise.reject(er(t));const r=ls(t),o=await Pu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VI).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&z_(t),c}),u=await Fs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function Fg(t,e,n){return An(t.app)?Promise.reject(er(t)):FI(qe(t),Hs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&z_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(t,e){return Fn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ui(r,BI(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function HI(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function WI(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function KI(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function Ug(t){return qe(t).signOut()}const ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=1e3,QI=10;class B_ extends $_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=j_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);cI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QI):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}B_.type="LOCAL";const YI=B_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends $_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}q_.type="SESSION";const H_=q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new pc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async h=>h(n.origin,i)),c=await XI(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const h=ep("",20);s.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(_.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return window}function ZI(t){Dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function eS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nS(){return W_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="firebaseLocalStorageDb",rS=1,Du="firebaseLocalStorage",G_="fbase_key";class Ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mc(t,e){return t.transaction([Du],e?"readwrite":"readonly").objectStore(Du)}function sS(){const t=indexedDB.deleteDatabase(K_);return new Ma(t).toPromise()}function Ch(){const t=indexedDB.open(K_,rS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Du,{keyPath:G_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Du)?e(r):(r.close(),await sS(),e(await Ch()))})})}async function zg(t,e,n){const r=mc(t,!0).put({[G_]:e,value:n});return new Ma(r).toPromise()}async function iS(t,e){const n=mc(t,!1).get(e),r=await new Ma(n).toPromise();return r===void 0?null:r.value}function $g(t,e){const n=mc(t,!0).delete(e);return new Ma(n).toPromise()}const oS=800,aS=3;class Q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ch(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pc._getInstance(nS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eS(),!this.activeServiceWorker)return;this.sender=new JI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ch();return await zg(e,ju,"1"),await $g(e,ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$g(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=mc(s,!1).getAll();return new Ma(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q_.type="LOCAL";const lS=Q_;new La(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e){return e?Jn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends Jf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ai(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ai(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ai(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cS(t){return U_(t.auth,new tp(t),t.bypassAuthState)}function dS(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),F_(n,new tp(t),t.bypassAuthState)}async function hS(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),MI(n,new tp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cS;case"linkViaPopup":case"linkViaRedirect":return hS;case"reauthViaPopup":case"reauthViaRedirect":return dS;default:wn(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=new La(2e3,1e4);class wi extends Y_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,wi.currentPopupAction&&wi.currentPopupAction.cancel(),wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fS.get())};e()}}wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="pendingRedirect",Gl=new Map;class mS extends Y_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gl.get(this.auth._key());if(!e){try{const r=await gS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gl.set(this.auth._key(),e)}return this.bypassAuthState||Gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gS(t,e){const n=_S(e),r=vS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function yS(t,e){Gl.set(t._key(),e)}function vS(t){return Jn(t._redirectPersistence)}function _S(t){return Kl(pS,t.config.apiKey,t.name)}async function xS(t,e,n=!1){if(An(t.app))return Promise.reject(er(t));const r=ls(t),s=uS(r,e),o=await new mS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=10*60*1e3;class ES{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!X_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bg(e))}saveEventToCache(e){this.cachedEventUids.add(Bg(e)),this.lastProcessedEventTime=Date.now()}}function Bg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function X_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return X_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(t,e={}){return Fn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SS=/^https?/;async function NS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TS(t);for(const n of e)try{if(kS(n))return}catch{}wn(t,"unauthorized-domain")}function kS(t){const e=Nh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SS.test(n))return!1;if(IS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new La(3e4,6e4);function qg(){const t=Dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AS(t){return new Promise((e,n)=>{var r,s,i;function o(){qg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qg(),n(jn(t,"network-request-failed"))},timeout:CS.get()})}if(!((s=(r=Dn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Dn().gapi)===null||i===void 0)&&i.load)o();else{const u=_I("iframefcb");return Dn()[u]=()=>{gapi.load?o():n(jn(t,"network-request-failed"))},L_(`${vI()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Ql=null,e})}let Ql=null;function PS(t){return Ql=Ql||AS(t),Ql}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new La(5e3,15e3),jS="__/auth/iframe",DS="emulator/auth/iframe",LS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VS(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qf(e,DS):`https://${t.config.authDomain}/${jS}`,r={apiKey:e.apiKey,appName:t.name,v:Ji},s=OS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Da(r).slice(1)}`}async function MS(t){const e=await PS(t),n=Dn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:VS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jn(t,"network-request-failed"),u=Dn().setTimeout(()=>{i(o)},RS.get());function c(){Dn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},US=500,zS=600,$S="_blank",BS="http://localhost";class Hg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qS(t,e,n,r=US,s=zS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},FS),{width:r.toString(),height:s.toString(),top:i,left:o}),h=wt().toLowerCase();n&&(u=k_(h)?$S:n),S_(h)&&(e=e||BS,c.scrollbars="yes");const m=Object.entries(c).reduce((_,[A,R])=>`${_}${A}=${R},`,"");if(uI(h)&&u!=="_self")return HS(e||"",u),new Hg(null);const g=window.open(e||"",u,m);ne(g,t,"popup-blocked");try{g.focus()}catch{}return new Hg(g)}function HS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="__/auth/handler",KS="emulator/auth/handler",GS=encodeURIComponent("fac");async function Wg(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ji,eventId:s};if(e instanceof V_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof Va){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),h=c?`#${GS}=${encodeURIComponent(c)}`:"";return`${QS(t)}?${Da(u).slice(1)}${h}`}function QS({config:t}){return t.emulator?Qf(t,KS):`https://${t.authDomain}/${WS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class YS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H_,this._completeRedirectFn=xS,this._overrideRedirectResult=yS}async _openPopup(e,n,r,s){var i;ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Wg(e,n,r,Nh(),s);return qS(e,o,ep())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Wg(e,n,r,Nh(),s);return ZI(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MS(e),r=new ES(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wd,{type:wd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[wd];o!==void 0&&n(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return j_()||N_()||Xf()}}const XS=YS;var Kg="@firebase/auth",Gg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e2(t){Fi(new Vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D_(t)},h=new mI(r,s,i,c);return TI(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fi(new Vs("auth-internal",e=>{const n=ls(e.getProvider("auth").getImmediate());return(r=>new JS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(Kg,Gg,ZS(t)),Xr(Kg,Gg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=5*60,n2=c_("authIdTokenMaxAge")||t2;let Qg=null;const r2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>n2)return;const s=n==null?void 0:n.token;Qg!==s&&(Qg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function s2(t=p_()){const e=Wf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bI(t,{popupRedirectResolver:XS,persistence:[lS,YI,H_]}),r=c_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=r2(i.toString());WI(n,o,()=>o(n.currentUser)),HI(n,u=>o(u))}}const s=l_("auth");return s&&II(n,`http://${s}`),n}function i2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",i2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e2("Browser");var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,J_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function w(){}w.prototype=v.prototype,x.D=v.prototype,x.prototype=new w,x.prototype.constructor=x,x.C=function(E,C,N){for(var S=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)S[Ie-2]=arguments[Ie];return v.prototype[C].apply(E,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=x.g[0],w=x.g[1],C=x.g[2];var N=x.g[3],S=v+(N^w&(C^N))+E[0]+3614090360&4294967295;v=w+(S<<7&4294967295|S>>>25),S=N+(C^v&(w^C))+E[1]+3905402710&4294967295,N=v+(S<<12&4294967295|S>>>20),S=C+(w^N&(v^w))+E[2]+606105819&4294967295,C=N+(S<<17&4294967295|S>>>15),S=w+(v^C&(N^v))+E[3]+3250441966&4294967295,w=C+(S<<22&4294967295|S>>>10),S=v+(N^w&(C^N))+E[4]+4118548399&4294967295,v=w+(S<<7&4294967295|S>>>25),S=N+(C^v&(w^C))+E[5]+1200080426&4294967295,N=v+(S<<12&4294967295|S>>>20),S=C+(w^N&(v^w))+E[6]+2821735955&4294967295,C=N+(S<<17&4294967295|S>>>15),S=w+(v^C&(N^v))+E[7]+4249261313&4294967295,w=C+(S<<22&4294967295|S>>>10),S=v+(N^w&(C^N))+E[8]+1770035416&4294967295,v=w+(S<<7&4294967295|S>>>25),S=N+(C^v&(w^C))+E[9]+2336552879&4294967295,N=v+(S<<12&4294967295|S>>>20),S=C+(w^N&(v^w))+E[10]+4294925233&4294967295,C=N+(S<<17&4294967295|S>>>15),S=w+(v^C&(N^v))+E[11]+2304563134&4294967295,w=C+(S<<22&4294967295|S>>>10),S=v+(N^w&(C^N))+E[12]+1804603682&4294967295,v=w+(S<<7&4294967295|S>>>25),S=N+(C^v&(w^C))+E[13]+4254626195&4294967295,N=v+(S<<12&4294967295|S>>>20),S=C+(w^N&(v^w))+E[14]+2792965006&4294967295,C=N+(S<<17&4294967295|S>>>15),S=w+(v^C&(N^v))+E[15]+1236535329&4294967295,w=C+(S<<22&4294967295|S>>>10),S=v+(C^N&(w^C))+E[1]+4129170786&4294967295,v=w+(S<<5&4294967295|S>>>27),S=N+(w^C&(v^w))+E[6]+3225465664&4294967295,N=v+(S<<9&4294967295|S>>>23),S=C+(v^w&(N^v))+E[11]+643717713&4294967295,C=N+(S<<14&4294967295|S>>>18),S=w+(N^v&(C^N))+E[0]+3921069994&4294967295,w=C+(S<<20&4294967295|S>>>12),S=v+(C^N&(w^C))+E[5]+3593408605&4294967295,v=w+(S<<5&4294967295|S>>>27),S=N+(w^C&(v^w))+E[10]+38016083&4294967295,N=v+(S<<9&4294967295|S>>>23),S=C+(v^w&(N^v))+E[15]+3634488961&4294967295,C=N+(S<<14&4294967295|S>>>18),S=w+(N^v&(C^N))+E[4]+3889429448&4294967295,w=C+(S<<20&4294967295|S>>>12),S=v+(C^N&(w^C))+E[9]+568446438&4294967295,v=w+(S<<5&4294967295|S>>>27),S=N+(w^C&(v^w))+E[14]+3275163606&4294967295,N=v+(S<<9&4294967295|S>>>23),S=C+(v^w&(N^v))+E[3]+4107603335&4294967295,C=N+(S<<14&4294967295|S>>>18),S=w+(N^v&(C^N))+E[8]+1163531501&4294967295,w=C+(S<<20&4294967295|S>>>12),S=v+(C^N&(w^C))+E[13]+2850285829&4294967295,v=w+(S<<5&4294967295|S>>>27),S=N+(w^C&(v^w))+E[2]+4243563512&4294967295,N=v+(S<<9&4294967295|S>>>23),S=C+(v^w&(N^v))+E[7]+1735328473&4294967295,C=N+(S<<14&4294967295|S>>>18),S=w+(N^v&(C^N))+E[12]+2368359562&4294967295,w=C+(S<<20&4294967295|S>>>12),S=v+(w^C^N)+E[5]+4294588738&4294967295,v=w+(S<<4&4294967295|S>>>28),S=N+(v^w^C)+E[8]+2272392833&4294967295,N=v+(S<<11&4294967295|S>>>21),S=C+(N^v^w)+E[11]+1839030562&4294967295,C=N+(S<<16&4294967295|S>>>16),S=w+(C^N^v)+E[14]+4259657740&4294967295,w=C+(S<<23&4294967295|S>>>9),S=v+(w^C^N)+E[1]+2763975236&4294967295,v=w+(S<<4&4294967295|S>>>28),S=N+(v^w^C)+E[4]+1272893353&4294967295,N=v+(S<<11&4294967295|S>>>21),S=C+(N^v^w)+E[7]+4139469664&4294967295,C=N+(S<<16&4294967295|S>>>16),S=w+(C^N^v)+E[10]+3200236656&4294967295,w=C+(S<<23&4294967295|S>>>9),S=v+(w^C^N)+E[13]+681279174&4294967295,v=w+(S<<4&4294967295|S>>>28),S=N+(v^w^C)+E[0]+3936430074&4294967295,N=v+(S<<11&4294967295|S>>>21),S=C+(N^v^w)+E[3]+3572445317&4294967295,C=N+(S<<16&4294967295|S>>>16),S=w+(C^N^v)+E[6]+76029189&4294967295,w=C+(S<<23&4294967295|S>>>9),S=v+(w^C^N)+E[9]+3654602809&4294967295,v=w+(S<<4&4294967295|S>>>28),S=N+(v^w^C)+E[12]+3873151461&4294967295,N=v+(S<<11&4294967295|S>>>21),S=C+(N^v^w)+E[15]+530742520&4294967295,C=N+(S<<16&4294967295|S>>>16),S=w+(C^N^v)+E[2]+3299628645&4294967295,w=C+(S<<23&4294967295|S>>>9),S=v+(C^(w|~N))+E[0]+4096336452&4294967295,v=w+(S<<6&4294967295|S>>>26),S=N+(w^(v|~C))+E[7]+1126891415&4294967295,N=v+(S<<10&4294967295|S>>>22),S=C+(v^(N|~w))+E[14]+2878612391&4294967295,C=N+(S<<15&4294967295|S>>>17),S=w+(N^(C|~v))+E[5]+4237533241&4294967295,w=C+(S<<21&4294967295|S>>>11),S=v+(C^(w|~N))+E[12]+1700485571&4294967295,v=w+(S<<6&4294967295|S>>>26),S=N+(w^(v|~C))+E[3]+2399980690&4294967295,N=v+(S<<10&4294967295|S>>>22),S=C+(v^(N|~w))+E[10]+4293915773&4294967295,C=N+(S<<15&4294967295|S>>>17),S=w+(N^(C|~v))+E[1]+2240044497&4294967295,w=C+(S<<21&4294967295|S>>>11),S=v+(C^(w|~N))+E[8]+1873313359&4294967295,v=w+(S<<6&4294967295|S>>>26),S=N+(w^(v|~C))+E[15]+4264355552&4294967295,N=v+(S<<10&4294967295|S>>>22),S=C+(v^(N|~w))+E[6]+2734768916&4294967295,C=N+(S<<15&4294967295|S>>>17),S=w+(N^(C|~v))+E[13]+1309151649&4294967295,w=C+(S<<21&4294967295|S>>>11),S=v+(C^(w|~N))+E[4]+4149444226&4294967295,v=w+(S<<6&4294967295|S>>>26),S=N+(w^(v|~C))+E[11]+3174756917&4294967295,N=v+(S<<10&4294967295|S>>>22),S=C+(v^(N|~w))+E[2]+718787259&4294967295,C=N+(S<<15&4294967295|S>>>17),S=w+(N^(C|~v))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,x.g[2]=x.g[2]+C&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var w=v-this.blockSize,E=this.B,C=this.h,N=0;N<v;){if(C==0)for(;N<=w;)s(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<v;)if(E[C++]=x.charCodeAt(N++),C==this.blockSize){s(this,E),C=0;break}}else for(;N<v;)if(E[C++]=x[N++],C==this.blockSize){s(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var w=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=w&255,w/=256;for(this.u(x),x=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)x[w++]=this.g[v]>>>E&255;return x};function i(x,v){var w=u;return Object.prototype.hasOwnProperty.call(w,x)?w[x]:w[x]=v(x)}function o(x,v){this.h=v;for(var w=[],E=!0,C=x.length-1;0<=C;C--){var N=x[C]|0;E&&N==v||(w[C]=N,E=!1)}this.g=w}var u={};function c(x){return-128<=x&&128>x?i(x,function(v){return new o([v|0],0>v?-1:0)}):new o([x|0],0>x?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return g;if(0>x)return U(h(-x));for(var v=[],w=1,E=0;x>=w;E++)v[E]=x/w|0,w*=4294967296;return new o(v,0)}function m(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return U(m(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(v,8)),E=g,C=0;C<x.length;C+=8){var N=Math.min(8,x.length-C),S=parseInt(x.substring(C,C+N),v);8>N?(N=h(Math.pow(v,N)),E=E.j(N).add(h(S))):(E=E.j(w),E=E.add(h(S)))}return E}var g=c(0),_=c(1),A=c(16777216);t=o.prototype,t.m=function(){if(L(this))return-U(this).m();for(var x=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);x+=(0<=E?E:4294967296+E)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R(this))return"0";if(L(this))return"-"+U(this).toString(x);for(var v=h(Math.pow(x,6)),w=this,E="";;){var C=M(w,v).g;w=I(w,C.j(v));var N=((0<w.g.length?w.g[0]:w.h)>>>0).toString(x);if(w=C,R(w))return N+E;for(;6>N.length;)N="0"+N;E=N+E}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function R(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function L(x){return x.h==-1}t.l=function(x){return x=I(this,x),L(x)?-1:R(x)?0:1};function U(x){for(var v=x.g.length,w=[],E=0;E<v;E++)w[E]=~x.g[E];return new o(w,~x.h).add(_)}t.abs=function(){return L(this)?U(this):this},t.add=function(x){for(var v=Math.max(this.g.length,x.g.length),w=[],E=0,C=0;C<=v;C++){var N=E+(this.i(C)&65535)+(x.i(C)&65535),S=(N>>>16)+(this.i(C)>>>16)+(x.i(C)>>>16);E=S>>>16,N&=65535,S&=65535,w[C]=S<<16|N}return new o(w,w[w.length-1]&-2147483648?-1:0)};function I(x,v){return x.add(U(v))}t.j=function(x){if(R(this)||R(x))return g;if(L(this))return L(x)?U(this).j(U(x)):U(U(this).j(x));if(L(x))return U(this.j(U(x)));if(0>this.l(A)&&0>x.l(A))return h(this.m()*x.m());for(var v=this.g.length+x.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<x.g.length;C++){var N=this.i(E)>>>16,S=this.i(E)&65535,Ie=x.i(C)>>>16,Xe=x.i(C)&65535;w[2*E+2*C]+=S*Xe,b(w,2*E+2*C),w[2*E+2*C+1]+=N*Xe,b(w,2*E+2*C+1),w[2*E+2*C+1]+=S*Ie,b(w,2*E+2*C+1),w[2*E+2*C+2]+=N*Ie,b(w,2*E+2*C+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new o(w,0)};function b(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function k(x,v){this.g=x,this.h=v}function M(x,v){if(R(v))throw Error("division by zero");if(R(x))return new k(g,g);if(L(x))return v=M(U(x),v),new k(U(v.g),U(v.h));if(L(v))return v=M(x,U(v)),new k(U(v.g),v.h);if(30<x.g.length){if(L(x)||L(v))throw Error("slowDivide_ only works with positive integers.");for(var w=_,E=v;0>=E.l(x);)w=F(w),E=F(E);var C=V(w,1),N=V(E,1);for(E=V(E,2),w=V(w,2);!R(E);){var S=N.add(E);0>=S.l(x)&&(C=C.add(w),N=S),E=V(E,1),w=V(w,1)}return v=I(x,C.j(v)),new k(C,v)}for(C=g;0<=x.l(v);){for(w=Math.max(1,Math.floor(x.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),N=h(w),S=N.j(v);L(S)||0<S.l(x);)w-=E,N=h(w),S=N.j(v);R(N)&&(N=_),C=C.add(N),x=I(x,S)}return new k(C,x)}t.A=function(x){return M(this,x).h},t.and=function(x){for(var v=Math.max(this.g.length,x.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&x.i(E);return new o(w,this.h&x.h)},t.or=function(x){for(var v=Math.max(this.g.length,x.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|x.i(E);return new o(w,this.h|x.h)},t.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^x.i(E);return new o(w,this.h^x.h)};function F(x){for(var v=x.g.length+1,w=[],E=0;E<v;E++)w[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(w,x.h)}function V(x,v){var w=v>>5;v%=32;for(var E=x.g.length-w,C=[],N=0;N<E;N++)C[N]=0<v?x.i(N+w)>>>v|x.i(N+w+1)<<32-v:x.i(N+w);return new o(C,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,J_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,Ps=o}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Z_,Vo,ex,Yl,Ah,tx,nx,rx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cl=="object"&&Cl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var P=a[y];if(!(P in f))break e;f=f[P]}a=a[a.length-1],y=f[a],d=d(y),d!=y&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,y=!1,P={next:function(){if(!y&&f<a.length){var O=f++;return{value:d(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function m(a,d,f){return a.call.apply(a.bind,arguments)}function g(a,d,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),a.apply(d,P)}}return function(){return a.apply(d,arguments)}}function _(a,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,_.apply(null,arguments)}function A(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function R(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,P,O){for(var H=Array(arguments.length-2),be=2;be<arguments.length;be++)H[be-2]=arguments[be];return d.prototype[P].apply(y,H)}}function L(a){const d=a.length;if(0<d){const f=Array(d);for(let y=0;y<d;y++)f[y]=a[y];return f}return[]}function U(a,d){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(c(y)){const P=a.length||0,O=y.length||0;a.length=P+O;for(let H=0;H<O;H++)a[P+H]=y[H]}else a.push(y)}}class I{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function b(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function M(a){return M[" "](a),a}M[" "]=function(){};var F=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function V(a,d,f){for(const y in a)d.call(f,a[y],y,a)}function x(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(f in y)a[f]=y[f];for(let O=0;O<w.length;O++)f=w[O],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function C(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function N(a){u.setTimeout(()=>{throw a},0)}function S(){var a=re;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ie{constructor(){this.h=this.g=null}add(d,f){const y=Xe.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var Xe=new I(()=>new ln,a=>a.reset());class ln{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let un,K=!1,re=new Ie,se=()=>{const a=u.Promise.resolve(void 0);un=()=>{a.then(Se)}};var Se=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(f){N(f)}var d=Xe;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}K=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Ot=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function Vt(a,d){if(Pe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(F){e:{try{M(d.nodeName);var P=!0;break e}catch{}P=!1}P||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Gt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Vt.aa.h.call(this)}}R(Vt,Pe);var Gt={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),cs=0;function ds(a,d,f,y,P){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=P,this.key=++cs,this.da=this.fa=!1}function hs(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function En(a){this.src=a,this.g={},this.h=0}En.prototype.add=function(a,d,f,y,P){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var H=Un(a,d,y,P);return-1<H?(d=a[H],f||(d.fa=!1)):(d=new ds(d,this.src,O,!!y,P),d.fa=f,a.push(d)),d};function fs(a,d){var f=d.type;if(f in a.g){var y=a.g[f],P=Array.prototype.indexOf.call(y,d,void 0),O;(O=0<=P)&&Array.prototype.splice.call(y,P,1),O&&(hs(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Un(a,d,f,y){for(var P=0;P<a.length;++P){var O=a[P];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==y)return P}return-1}var Gs="closure_lm_"+(1e6*Math.random()|0),bn={};function zn(a,d,f,y,P){if(Array.isArray(d)){for(var O=0;O<d.length;O++)zn(a,d[O],f,y,P);return null}return f=ms(f),a&&a[cn]?a.K(d,f,h(y)?!!y.capture:!1,P):He(a,d,f,!1,y,P)}function He(a,d,f,y,P,O){if(!d)throw Error("Invalid event type");var H=h(P)?!!P.capture:!!P,be=mr(a);if(be||(a[Gs]=be=new En(a)),f=be.add(d,f,y,H,O),f.proxy)return f;if(y=$n(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)Ot||(P=H),P===void 0&&(P=!1),a.addEventListener(d.toString(),y,P);else if(a.attachEvent)a.attachEvent(ro(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $n(){function a(f){return d.call(a.src,a.listener,f)}const d=so;return a}function ps(a,d,f,y,P){if(Array.isArray(d))for(var O=0;O<d.length;O++)ps(a,d[O],f,y,P);else y=h(y)?!!y.capture:!!y,f=ms(f),a&&a[cn]?(a=a.i,d=String(d).toString(),d in a.g&&(O=a.g[d],f=Un(O,f,y,P),-1<f&&(hs(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[d],a.h--)))):a&&(a=mr(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Un(d,f,y,P)),(f=-1<a?d[a]:null)&&pr(f))}function pr(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[cn])fs(d.i,a);else{var f=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(f,y,a.capture):d.detachEvent?d.detachEvent(ro(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=mr(d))?(fs(f,a),f.h==0&&(f.src=null,d[Gs]=null)):hs(a)}}}function ro(a){return a in bn?bn[a]:bn[a]="on"+a}function so(a,d){if(a.da)a=!0;else{d=new Vt(d,this);var f=a.listener,y=a.ha||a.src;a.fa&&pr(a),a=f.call(y,d)}return a}function mr(a){return a=a[Gs],a instanceof En?a:null}var gr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ms(a){return typeof a=="function"?a:(a[gr]||(a[gr]=function(d){return a.handleEvent(d)}),a[gr])}function Me(){ye.call(this),this.i=new En(this),this.M=this,this.F=null}R(Me,ye),Me.prototype[cn]=!0,Me.prototype.removeEventListener=function(a,d,f,y){ps(this,a,d,f,y)};function j(a,d){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new Pe(d,a);else if(d instanceof Pe)d.target=d.target||a;else{var P=d;d=new Pe(y,a),E(d,P)}if(P=!0,f)for(var O=f.length-1;0<=O;O--){var H=d.g=f[O];P=ie(H,y,!0,d)&&P}if(H=d.g=a,P=ie(H,y,!0,d)&&P,P=ie(H,y,!1,d)&&P,f)for(O=0;O<f.length;O++)H=d.g=f[O],P=ie(H,y,!1,d)&&P}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],y=0;y<f.length;y++)hs(f[y]);delete a.g[d],a.h--}}this.F=null},Me.prototype.K=function(a,d,f,y){return this.i.add(String(a),d,!1,f,y)},Me.prototype.L=function(a,d,f,y){return this.i.add(String(a),d,!0,f,y)};function ie(a,d,f,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var P=!0,O=0;O<d.length;++O){var H=d[O];if(H&&!H.da&&H.capture==f){var be=H.listener,nt=H.ha||H.src;H.fa&&fs(a.i,H),P=be.call(nt,y)!==!1&&P}}return P&&!y.defaultPrevented}function ce(a,d,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function We(a){a.g=ce(()=>{a.g=null,a.i&&(a.i=!1,We(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Mt extends ye{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(a){ye.call(this),this.h=a,this.g={}}R(Qt,ye);var Qs=[];function Ys(a){V(a.g,function(d,f){this.g.hasOwnProperty(f)&&pr(d)},a),a.g={}}Qt.prototype.N=function(){Qt.aa.N.call(this),Ys(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yr=u.JSON.stringify,Dc=u.JSON.parse,Lc=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Yt(){}Yt.prototype.h=null;function tt(a){return a.h||(a.h=a.i())}function kt(){}var gs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function io(){Pe.call(this,"d")}R(io,Pe);function Tn(){Pe.call(this,"c")}R(Tn,Pe);var Bn={},Wa=null;function ys(){return Wa=Wa||new Me}Bn.La="serverreachability";function Ka(a){Pe.call(this,Bn.La,a)}R(Ka,Pe);function vs(a){const d=ys();j(d,new Ka(d))}Bn.STAT_EVENT="statevent";function oo(a,d){Pe.call(this,Bn.STAT_EVENT,a),this.stat=d}R(oo,Pe);function ze(a){const d=ys();j(d,new oo(d,a))}Bn.Ma="timingevent";function ao(a,d){Pe.call(this,Bn.Ma,a),this.size=d}R(ao,Pe);function vr(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function Ga(a,d,f,y,P,O){a.info(function(){if(a.g)if(O)for(var H="",be=O.split("&"),nt=0;nt<be.length;nt++){var ve=be[nt].split("=");if(1<ve.length){var dt=ve[0];ve=ve[1];var ht=dt.split("_");H=2<=ht.length&&ht[1]=="type"?H+(dt+"="+ve+"&"):H+(dt+"=redacted&")}}else H=null;else H=O;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+d+`
`+f+`
`+H})}function lo(a,d,f,y,P,O,H){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+d+`
`+f+`
`+O+" "+H})}function ct(a,d,f,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+In(a,f)+(y?" "+y:"")})}function Qa(a,d){a.info(function(){return"TIMEOUT: "+d})}_r.prototype.info=function(){};function In(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(var H=1;H<P.length;H++)P[H]=""}}}}return yr(f)}catch{return d}}var Ft={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function Xs(){}R(Xs,Yt),Xs.prototype.g=function(){return new XMLHttpRequest},Xs.prototype.i=function(){return{}},qn=new Xs;function dn(a,d,f,y){this.j=a,this.i=d,this.l=f,this.R=y||1,this.U=new Qt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ya}function Ya(){this.i=null,this.g="",this.h=!1}var co={},ho={};function fo(a,d,f){a.L=1,a.v=hn(X(d)),a.m=f,a.P=!0,Xa(a,null)}function Xa(a,d){a.F=Date.now(),Zs(a),a.A=X(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),$p(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Ya,a.g=om(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Mt(_(a.Y,a,a.g),a.O)),d=a.U,f=a.g,y=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(Qs[0]=P.toString()),P=Qs);for(var O=0;O<P.length;O++){var H=zn(f,P[O],y||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),vs(),Ga(a.i,a.u,a.A,a.l,a.R,a.m)}dn.prototype.ca=function(a){a=a.target;const d=this.M;d&&Hn(a)==3?d.j():this.Y(a)},dn.prototype.Y=function(a){try{if(a==this.g)e:{const ht=Hn(this.g);var d=this.g.Ba();const ri=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||Qp(this.g)))){this.J||ht!=4||d==7||(d==8||0>=ri?vs(3):vs(2)),xr(this);var f=this.g.Z();this.X=f;t:if(Js(this)){var y=Qp(this.g);a="";var P=y.length,O=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),_s(this);var H="";break t}this.h.i=new u.TextDecoder}for(d=0;d<P;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(O&&d==P-1)});y.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=f==200,lo(this.i,this.u,this.A,this.l,this.R,ht,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,nt=this.g;if((be=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(be)){var ve=be;break t}}ve=null}if(f=ve)ct(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,po(this,f);else{this.o=!1,this.s=3,ze(12),Sn(this),_s(this);break e}}if(this.P){f=!0;let fn;for(;!this.J&&this.C<H.length;)if(fn=Oc(this,H),fn==ho){ht==4&&(this.s=4,ze(14),f=!1),ct(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==co){this.s=4,ze(15),ct(this.i,this.l,H,"[Invalid Chunk]"),f=!1;break}else ct(this.i,this.l,fn,null),po(this,fn);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||H.length!=0||this.h.h||(this.s=1,ze(16),f=!1),this.o=this.o&&f,!f)ct(this.i,this.l,H,"[Invalid Chunked Response]"),Sn(this),_s(this);else if(0<H.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),zc(dt),dt.M=!0,ze(11))}}else ct(this.i,this.l,H,null),po(this,H);ht==4&&Sn(this),this.o&&!this.J&&(ht==4?nm(this.j,this):(this.o=!1,Zs(this)))}else Ow(this.g),f==400&&0<H.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),Sn(this),_s(this)}}}catch{}finally{}};function Js(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Oc(a,d){var f=a.C,y=d.indexOf(`
`,f);return y==-1?ho:(f=Number(d.substring(f,y)),isNaN(f)?co:(y+=1,y+f>d.length?ho:(d=d.slice(y,y+f),a.C=y+f,d)))}dn.prototype.cancel=function(){this.J=!0,Sn(this)};function Zs(a){a.S=Date.now()+a.I,Ja(a,a.I)}function Ja(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vr(_(a.ba,a),d)}function xr(a){a.B&&(u.clearTimeout(a.B),a.B=null)}dn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Qa(this.i,this.A),this.L!=2&&(vs(),ze(17)),Sn(this),this.s=2,_s(this)):Ja(this,this.S-a)};function _s(a){a.j.G==0||a.J||nm(a.j,a)}function Sn(a){xr(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ys(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function po(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||ei(f.h,a))){if(!a.K&&ei(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ll(f),ol(f);else break e;Uc(f),ze(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=vr(_(f.Za,f),6e3));if(1>=tl(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ws(f,11)}else if((a.K||f.g==a)&&ll(f),!b(d))for(P=f.Da.g.parse(d),d=0;d<P.length;d++){let ve=P[d];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];const dt=ve[3];dt!=null&&(f.la=dt,f.j.info("VER="+f.la));const ht=ve[4];ht!=null&&(f.Aa=ht,f.j.info("SVER="+f.Aa));const ri=ve[5];ri!=null&&typeof ri=="number"&&0<ri&&(y=1.5*ri,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const fn=a.g;if(fn){const cl=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var O=y.h;O.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(mo(O,O.h),O.h=null))}if(y.D){const $c=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(y.ya=$c,xe(y.I,y.D,$c))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var H=a;if(y.qa=im(y,y.J?y.ia:null,y.W),H.K){nl(y.h,H);var be=H,nt=y.L;nt&&(be.I=nt),be.B&&(xr(be),Zs(be)),y.g=H}else em(y);0<f.i.length&&al(f)}else ve[0]!="stop"&&ve[0]!="close"||ws(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?ws(f,7):Fc(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}vs(4)}catch{}}var Vc=class{constructor(a,d){this.g=a,this.map=d}};function Za(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function el(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function tl(a){return a.h?1:a.g?a.g.size:0}function ei(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function mo(a,d){a.g?a.g.add(d):a.h=d}function nl(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Za.prototype.cancel=function(){if(this.i=go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function go(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return L(a.i)}function p(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,y=0;y<f;y++)d.push(a[y]);return d}d=[],f=0;for(y in a)d[f++]=a[y];return d}function T(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const y in a)d[f++]=y;return d}}}function D(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=T(a),y=p(a),P=y.length,O=0;O<P;O++)d.call(void 0,y[O],f&&f[O],a)}var G=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),P=null;if(0<=y){var O=a[f].substring(0,y);P=a[f].substring(y+1)}else O=a[f];d(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function ue(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ue){this.h=a.h,W(this,a.j),this.o=a.o,this.g=a.g,he(this,a.s),this.l=a.l;var d=a.i,f=new yo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Xt(this,f),this.m=a.m}else a&&(d=String(a).match(G))?(this.h=!1,W(this,d[1]||"",!0),this.o=Jt(d[2]||""),this.g=Jt(d[3]||"",!0),he(this,d[4]),this.l=Jt(d[5]||"",!0),Xt(this,d[6]||"",!0),this.m=Jt(d[7]||"")):(this.h=!1,this.i=new yo(null,this.h))}ue.prototype.toString=function(){var a=[],d=this.j;d&&a.push(xs(d,Fp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(xs(d,Fp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(xs(f,f.charAt(0)=="/"?Sw:Iw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",xs(f,kw)),a.join("")};function X(a){return new ue(a)}function W(a,d,f){a.j=f?Jt(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function he(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Xt(a,d,f){d instanceof yo?(a.i=d,Cw(a.i,a.h)):(f||(d=xs(d,Nw)),a.i=new yo(d,a.h))}function xe(a,d,f){a.i.set(d,f)}function hn(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Jt(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function xs(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Tw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Tw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Fp=/[#\/\?@]/g,Iw=/[#\?:]/g,Sw=/[#\?]/g,Nw=/[#\?@]/g,kw=/#/g;function yo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function wr(a){a.g||(a.g=new Map,a.h=0,a.i&&Y(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=yo.prototype,t.add=function(a,d){wr(this),this.i=null,a=ti(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Up(a,d){wr(a),d=ti(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function zp(a,d){return wr(a),d=ti(a,d),a.g.has(d)}t.forEach=function(a,d){wr(this),this.g.forEach(function(f,y){f.forEach(function(P){a.call(d,P,y,this)},this)},this)},t.na=function(){wr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){const P=a[y];for(let O=0;O<P.length;O++)f.push(d[y])}return f},t.V=function(a){wr(this);let d=[];if(typeof a=="string")zp(this,a)&&(d=d.concat(this.g.get(ti(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return wr(this),this.i=null,a=ti(this,a),zp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function $p(a,d,f){Up(a,d),0<f.length&&(a.i=null,a.g.set(ti(a,d),L(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];const O=encodeURIComponent(String(y)),H=this.V(y);for(y=0;y<H.length;y++){var P=O;H[y]!==""&&(P+="="+encodeURIComponent(String(H[y]))),a.push(P)}}return this.i=a.join("&")};function ti(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Cw(a,d){d&&!a.j&&(wr(a),a.i=null,a.g.forEach(function(f,y){var P=y.toLowerCase();y!=P&&(Up(this,y),$p(this,P,f))},a)),a.j=d}function Aw(a,d){const f=new _r;if(u.Image){const y=new Image;y.onload=A(Er,f,"TestLoadImage: loaded",!0,d,y),y.onerror=A(Er,f,"TestLoadImage: error",!1,d,y),y.onabort=A(Er,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=A(Er,f,"TestLoadImage: timeout",!1,d,y),u.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function Pw(a,d){const f=new _r,y=new AbortController,P=setTimeout(()=>{y.abort(),Er(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(P),O.ok?Er(f,"TestPingServer: ok",!0,d):Er(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),Er(f,"TestPingServer: error",!1,d)})}function Er(a,d,f,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(f)}catch{}}function Rw(){this.g=new Lc}function jw(a,d,f){const y=f||"";try{D(a,function(P,O){let H=P;h(P)&&(H=yr(P)),d.push(y+O+"="+encodeURIComponent(H))})}catch(P){throw d.push(y+"type="+encodeURIComponent("_badmap")),P}}function rl(a){this.l=a.Ub||null,this.j=a.eb||!1}R(rl,Yt),rl.prototype.g=function(){return new sl(this.l,this.j)},rl.prototype.i=function(a){return function(){return a}}({});function sl(a,d){Me.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(sl,Me),t=sl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,_o(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,_o(this)),this.g&&(this.readyState=3,_o(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?vo(this):_o(this),this.readyState==3&&Bp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,vo(this))},t.Qa=function(a){this.g&&(this.response=a,vo(this))},t.ga=function(){this.g&&vo(this)};function vo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,_o(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function _o(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function qp(a){let d="";return V(a,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function Mc(a,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=qp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):xe(a,d,f))}function Oe(a){Me.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Oe,Me);var Dw=/^https?$/i,Lw=["POST","PUT"];t=Oe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?tt(this.o):tt(qn),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){Hp(this,O);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)f.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())f.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),P=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Lw,d,void 0))||y||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,H]of f)this.g.setRequestHeader(O,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gp(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Hp(this,O)}};function Hp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Wp(a),il(a)}function Wp(a){a.A||(a.A=!0,j(a,"complete"),j(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,j(this,"complete"),j(this,"abort"),il(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),il(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kp(this):this.bb())},t.bb=function(){Kp(this)};function Kp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Hn(a)!=4||a.Z()!=2)){if(a.u&&Hn(a)==4)ce(a.Ea,0,a);else if(j(a,"readystatechange"),Hn(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=H===0){var P=String(a.D).match(G)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),y=!Dw.test(P?P.toLowerCase():"")}f=y}if(f)j(a,"complete"),j(a,"success");else{a.m=6;try{var O=2<Hn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Wp(a)}}finally{il(a)}}}}function il(a,d){if(a.g){Gp(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||j(a,"ready");try{f.onreadystatechange=y}catch{}}}function Gp(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Hn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Dc(d)}};function Qp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ow(a){const d={};a=(a.g&&2<=Hn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(b(a[y]))continue;var f=C(a[y]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=d[P]||[];d[P]=O,O.push(f)}x(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Yp(a){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xo("baseRetryDelayMs",5e3,a),this.cb=xo("retryDelaySeedMs",1e4,a),this.Wa=xo("forwardChannelMaxRetries",2,a),this.wa=xo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Za(a&&a.concurrentRequestLimit),this.Da=new Rw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,y){ze(0),this.W=a,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=im(this,null,this.W),al(this)};function Fc(a){if(Xp(a),a.G==3){var d=a.U++,f=X(a.I);if(xe(f,"SID",a.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),wo(a,f),d=new dn(a,a.j,d),d.L=2,d.v=hn(X(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=om(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zs(d)}sm(a)}function ol(a){a.g&&(zc(a),a.g.cancel(),a.g=null)}function Xp(a){ol(a),a.u&&(u.clearTimeout(a.u),a.u=null),ll(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function al(a){if(!el(a.h)&&!a.s){a.s=!0;var d=a.Ga;un||se(),K||(un(),K=!0),re.add(d,a),a.B=0}}function Vw(a,d){return tl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vr(_(a.Ga,a,d),rm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new dn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),E(O,this.S)):O=this.S),this.m!==null||this.O||(P.H=O,O=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Zp(this,P,d),f=X(this.I),xe(f,"RID",a),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),wo(this,f),O&&(this.O?d="headers="+encodeURIComponent(String(qp(O)))+"&"+d:this.m&&Mc(f,this.m,O)),mo(this.h,P),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),P.T=!0,fo(P,f,null)):fo(P,f,d),this.G=2}}else this.G==3&&(a?Jp(this,a):this.i.length==0||el(this.h)||Jp(this))};function Jp(a,d){var f;d?f=d.l:f=a.U++;const y=X(a.I);xe(y,"SID",a.K),xe(y,"RID",f),xe(y,"AID",a.T),wo(a,y),a.m&&a.o&&Mc(y,a.m,a.o),f=new dn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Zp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),mo(a.h,f),fo(f,y,d)}function wo(a,d){a.H&&V(a.H,function(f,y){xe(d,y,f)}),a.l&&D({},function(f,y){xe(d,y,f)})}function Zp(a,d,f){f=Math.min(a.i.length,f);var y=a.l?_(a.l.Na,a.l,a):null;e:{var P=a.i;let O=-1;for(;;){const H=["count="+f];O==-1?0<f?(O=P[0].g,H.push("ofs="+O)):O=0:H.push("ofs="+O);let be=!0;for(let nt=0;nt<f;nt++){let ve=P[nt].g;const dt=P[nt].map;if(ve-=O,0>ve)O=Math.max(0,P[nt].g-100),be=!1;else try{jw(dt,H,"req"+ve+"_")}catch{y&&y(dt)}}if(be){y=H.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,y}function em(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;un||se(),K||(un(),K=!0),re.add(d,a),a.v=0}}function Uc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vr(_(a.Fa,a),rm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,tm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vr(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),ol(this),tm(this))};function zc(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function tm(a){a.g=new dn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=X(a.qa);xe(d,"RID","rpc"),xe(d,"SID",a.K),xe(d,"AID",a.T),xe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(d,"TO",a.ja),xe(d,"TYPE","xmlhttp"),wo(a,d),a.m&&a.o&&Mc(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=hn(X(d)),f.m=null,f.P=!0,Xa(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ol(this),Uc(this),ze(19))};function ll(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function nm(a,d){var f=null;if(a.g==d){ll(a),zc(a),a.g=null;var y=2}else if(ei(a.h,d))f=d.D,nl(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var P=a.B;y=ys(),j(y,new ao(y,f)),al(a)}else em(a);else if(P=d.s,P==3||P==0&&0<d.X||!(y==1&&Vw(a,d)||y==2&&Uc(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),P){case 1:ws(a,5);break;case 4:ws(a,10);break;case 3:ws(a,6);break;default:ws(a,2)}}}function rm(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function ws(a,d){if(a.j.info("Error code "+d),d==2){var f=_(a.fb,a),y=a.Xa;const P=!y;y=new ue(y||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||W(y,"https"),hn(y),P?Aw(y.toString(),f):Pw(y.toString(),f)}else ze(2);a.G=0,a.l&&a.l.sa(d),sm(a),Xp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function sm(a){if(a.G=0,a.ka=[],a.l){const d=go(a.h);(d.length!=0||a.i.length!=0)&&(U(a.ka,d),U(a.ka,a.i),a.h.i.length=0,L(a.i),a.i.length=0),a.l.ra()}}function im(a,d,f){var y=f instanceof ue?X(f):new ue(f);if(y.g!="")d&&(y.g=d+"."+y.g),he(y,y.s);else{var P=u.location;y=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;var O=new ue(null);y&&W(O,y),d&&(O.g=d),P&&he(O,P),f&&(O.l=f),y=O}return f=a.D,d=a.ya,f&&d&&xe(y,f,d),xe(y,"VER",a.la),wo(a,y),y}function om(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Oe(new rl({eb:f})):new Oe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function am(){}t=am.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ul(){}ul.prototype.g=function(a,d){return new Ut(a,d)};function Ut(a,d){Me.call(this),this.g=new Yp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!b(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ni(this)}R(Ut,Me),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Fc(this.g)},Ut.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=yr(a),a=f);d.i.push(new Vc(d.Ya++,a)),d.G==3&&al(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,Ut.aa.N.call(this)};function lm(a){io.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(lm,io);function um(){Tn.call(this),this.status=1}R(um,Tn);function ni(a){this.g=a}R(ni,am),ni.prototype.ua=function(){j(this.g,"a")},ni.prototype.ta=function(a){j(this.g,new lm(a))},ni.prototype.sa=function(a){j(this.g,new um)},ni.prototype.ra=function(){j(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,rx=function(){return new ul},nx=function(){return ys()},tx=Bn,Ah={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ft.NO_ERROR=0,Ft.TIMEOUT=8,Ft.HTTP_ERROR=6,Yl=Ft,uo.COMPLETE="complete",ex=uo,kt.EventType=gs,gs.OPEN="a",gs.CLOSE="b",gs.ERROR="c",gs.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Vo=kt,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,Z_=Oe}).apply(typeof Cl<"u"?Cl:typeof self<"u"?self:typeof window<"u"?window:{});const Xg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new qf("@firebase/firestore");function Ao(){return Us.logLevel}function J(t,...e){if(Us.logLevel<=pe.DEBUG){const n=e.map(np);Us.debug(`Firestore (${Zi}): ${t}`,...n)}}function lr(t,...e){if(Us.logLevel<=pe.ERROR){const n=e.map(np);Us.error(`Firestore (${Zi}): ${t}`,...n)}}function zi(t,...e){if(Us.logLevel<=pe.WARN){const n=e.map(np);Us.warn(`Firestore (${Zi}): ${t}`,...n)}}function np(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: `+t;throw lr(e),new Error(e)}function Ee(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class a2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l2{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new sx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new gt(e)}}class u2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class c2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new u2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new d2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=f2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function $i(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ye(0,0))}static max(){return new ae(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends wa{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const p2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends wa{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return p2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new it(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ae.fromString(e))}static fromName(e){return new ee(Ae.fromString(e).popFirst(5))}static empty(){return new ee(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ae(e.slice()))}}function m2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new ts(s,ee.empty(),e)}function g2(t){return new ts(t.readTime,t.key,-1)}class ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ts(ae.min(),ee.empty(),-1)}static max(){return new ts(ae.max(),ee.empty(),-1)}}function y2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==v2)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function x2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ua(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rp.oe=-1;function gc(t){return t==null}function Lu(t){return t===0&&1/t==-1/0}function w2(t){return typeof t=="number"&&Number.isInteger(t)&&!Lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ox(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zg(this.data.getIterator())}getIteratorFrom(e){return new Zg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class Zg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new at(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $i(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ax("Invalid base64 string: "+i):i}}(e);return new ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const E2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=E2.exec(t);if(Ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zs(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ip(t){const e=t.mapValue.fields.__previous_value__;return sp(e)?ip(e):e}function Ea(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,r,s,i,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class ba{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl={mapValue:{}};function $s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sp(t)?4:I2(t)?9007199254740991:T2(t)?10:11:oe()}function Vn(t,e){if(t===e)return!0;const n=$s(t);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ea(t).isEqual(Ea(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ns(s.timestampValue),u=ns(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return zs(s.bytesValue).isEqual(zs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),u=Fe(i.doubleValue);return o===u?Lu(o)===Lu(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return $i(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Jg(o)!==Jg(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Vn(o[c],u[c])))return!1;return!0}(t,e);default:return oe()}}function Ta(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function Bi(t,e){if(t===e)return 0;const n=$s(t),r=$s(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return e0(t.timestampValue,e.timestampValue);case 4:return e0(Ea(t),Ea(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,o){const u=zs(i),c=zs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=_e(u[h],c[h]);if(m!==0)return m}return _e(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=_e(Fe(i.latitude),Fe(o.latitude));return u!==0?u:_e(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return t0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,h,m;const g=i.fields||{},_=o.fields||{},A=(u=g.value)===null||u===void 0?void 0:u.arrayValue,R=(c=_.value)===null||c===void 0?void 0:c.arrayValue,L=_e(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0);return L!==0?L:t0(A,R)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Pl.mapValue&&o===Pl.mapValue)return 0;if(i===Pl.mapValue)return 1;if(o===Pl.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const _=_e(c[g],m[g]);if(_!==0)return _;const A=Bi(u[c[g]],h[m[g]]);if(A!==0)return A}return _e(c.length,m.length)}(t.mapValue,e.mapValue);default:throw oe()}}function e0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=ns(t),r=ns(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function t0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bi(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function qi(t){return Ph(t)}function Ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ph(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ph(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function Rh(t){return!!t&&"integerValue"in t}function op(t){return!!t&&"arrayValue"in t}function n0(t){return!!t&&"nullValue"in t}function r0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xl(t){return!!t&&"mapValue"in t}function T2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function I2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(n)}setAll(e){let n=it.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=Jo(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ws(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Jo(this.value))}}function lx(t){const e=[];return Ws(t.fields,(n,r)=>{const s=new it([n]);if(Xl(r)){const i=lx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new _t(e,0,ae.min(),ae.min(),ae.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new _t(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new _t(e,2,n,ae.min(),ae.min(),At.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,ae.min(),ae.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this.position=e,this.inclusive=n}}function s0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Bi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function i0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n="asc"){this.field=e,this.dir=n}}function S2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{}class Ge extends ux{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new k2(e,n,r):n==="array-contains"?new P2(e,r):n==="in"?new R2(e,r):n==="not-in"?new j2(e,r):n==="array-contains-any"?new D2(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C2(e,r):new A2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bi(n,this.value)):n!==null&&$s(this.value)===$s(n)&&this.matchesComparison(Bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mn extends ux{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Mn(e,n)}matches(e){return cx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cx(t){return t.op==="and"}function dx(t){return N2(t)&&cx(t)}function N2(t){for(const e of t.filters)if(e instanceof Mn)return!1;return!0}function jh(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+qi(t.value);if(dx(t))return t.filters.map(e=>jh(e)).join(",");{const e=t.filters.map(n=>jh(n)).join(",");return`${t.op}(${e})`}}function hx(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&Vn(r.value,s.value)}(t,e):t instanceof Mn?function(r,s){return s instanceof Mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&hx(o,s.filters[u]),!0):!1}(t,e):void oe()}function fx(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${qi(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(fx).join(" ,")+"}"}(t):"Filter"}class k2 extends Ge{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class C2 extends Ge{constructor(e,n){super(e,"in",n),this.keys=px("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A2 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=px("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function px(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class P2 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return op(n)&&Ta(n.arrayValue,this.value)}}class R2 extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ta(this.value.arrayValue,n)}}class j2 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ta(this.value.arrayValue,n)}}class D2 extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!op(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ta(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function o0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new L2(t,e,n,r,s,i,o)}function ap(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qi(r)).join(",")),e.ue=n}return e.ue}function lp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!i0(t.startAt,e.startAt)&&i0(t.endAt,e.endAt)}function Dh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function O2(t,e,n,r,s,i,o,u){return new yc(t,e,n,r,s,i,o,u)}function vc(t){return new yc(t)}function a0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V2(t){return t.collectionGroup!==null}function Zo(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new at(it.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Vu(i,r))}),n.has(it.keyField().canonicalString())||e.ce.push(new Vu(it.keyField(),r))}return e.ce}function Ln(t){const e=le(t);return e.le||(e.le=M2(e,Zo(t))),e.le}function M2(t,e){if(t.limitType==="F")return o0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vu(s.field,i)});const n=t.endAt?new Ou(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ou(t.startAt.position,t.startAt.inclusive):null;return o0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lh(t,e,n){return new yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _c(t,e){return lp(Ln(t),Ln(e))&&t.limitType===e.limitType}function mx(t){return`${ap(Ln(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>fx(s)).join(", ")}]`),gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>qi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>qi(s)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function xc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Zo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=s0(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,Zo(r),s)||r.endAt&&!function(o,u,c){const h=s0(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,Zo(r),s))}(t,e)}function F2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gx(t){return(e,n)=>{let r=!1;for(const s of Zo(t)){const i=U2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function U2(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Bi(c,h):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ox(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Le(ee.comparator);function ur(){return z2}const yx=new Le(ee.comparator);function Mo(...t){let e=yx;for(const n of t)e=e.insert(n.key,n);return e}function vx(t){let e=yx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return ea()}function _x(){return ea()}function ea(){return new eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const $2=new Le(ee.comparator),B2=new at(ee.comparator);function fe(...t){let e=B2;for(const n of t)e=e.add(n);return e}const q2=new at(_e);function H2(){return q2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(e)?"-0":e}}function xx(t){return{integerValue:""+t}}function W2(t,e){return w2(e)?xx(e):up(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this._=void 0}}function K2(t,e,n){return t instanceof Mu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&sp(i)&&(i=ip(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ia?Ex(t,e):t instanceof Sa?bx(t,e):function(s,i){const o=wx(s,i),u=l0(o)+l0(s.Pe);return Rh(o)&&Rh(s.Pe)?xx(u):up(s.serializer,u)}(t,e)}function G2(t,e,n){return t instanceof Ia?Ex(t,e):t instanceof Sa?bx(t,e):n}function wx(t,e){return t instanceof Fu?function(r){return Rh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Mu extends wc{}class Ia extends wc{constructor(e){super(),this.elements=e}}function Ex(t,e){const n=Tx(e);for(const r of t.elements)n.some(s=>Vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Sa extends wc{constructor(e){super(),this.elements=e}}function bx(t,e){let n=Tx(e);for(const r of t.elements)n=n.filter(s=>!Vn(s,r));return{arrayValue:{values:n}}}class Fu extends wc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function l0(t){return Fe(t.integerValue||t.doubleValue)}function Tx(t){return op(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Q2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ia&&s instanceof Ia||r instanceof Sa&&s instanceof Sa?$i(r.elements,s.elements,Vn):r instanceof Fu&&s instanceof Fu?Vn(r.Pe,s.Pe):r instanceof Mu&&s instanceof Mu}(t.transform,e.transform)}class Y2{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ec{}function Ix(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cp(t.key,sn.none()):new za(t.key,t.data,sn.none());{const n=t.data,r=At.empty();let s=new at(it.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new us(t.key,r,new Bt(s.toArray()),sn.none())}}function X2(t,e,n){t instanceof za?function(s,i,o){const u=s.value.clone(),c=c0(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof us?function(s,i,o){if(!Jl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=c0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Sx(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ta(t,e,n,r){return t instanceof za?function(i,o,u,c){if(!Jl(i.precondition,o))return u;const h=i.value.clone(),m=d0(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(i,o,u,c){if(!Jl(i.precondition,o))return u;const h=d0(i.fieldTransforms,c,o),m=o.data;return m.setAll(Sx(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,u){return Jl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function J2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=wx(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function u0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$i(r,s,(i,o)=>Q2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class za extends Ec{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends Ec{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function c0(t,e,n){const r=new Map;Ee(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,G2(o,u,n[s]))}return r}function d0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,K2(i,o,e))}return r}class cp extends Ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z2 extends Ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&X2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_x();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Ix(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&$i(this.mutations,e.mutations,(n,r)=>u0(n,r))&&$i(this.baseMutations,e.baseMutations,(n,r)=>u0(n,r))}}class dp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length);let s=function(){return $2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,me;function rN(t){switch(t){default:return oe();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function Nx(t){if(t===void 0)return lr("GRPC error has no .code"),z.UNKNOWN;switch(t){case $e.OK:return z.OK;case $e.CANCELLED:return z.CANCELLED;case $e.UNKNOWN:return z.UNKNOWN;case $e.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case $e.INTERNAL:return z.INTERNAL;case $e.UNAVAILABLE:return z.UNAVAILABLE;case $e.UNAUTHENTICATED:return z.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case $e.NOT_FOUND:return z.NOT_FOUND;case $e.ALREADY_EXISTS:return z.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return z.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case $e.ABORTED:return z.ABORTED;case $e.OUT_OF_RANGE:return z.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return z.UNIMPLEMENTED;case $e.DATA_LOSS:return z.DATA_LOSS;default:return oe()}}(me=$e||($e={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new Ps([4294967295,4294967295],0);function h0(t){const e=sN().encode(t),n=new J_;return n.update(e),new Uint8Array(n.digest())}function f0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ps([n,r],0),new Ps([s,i],0)]}class hp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fo(`Invalid padding: ${n}`);if(r<0)throw new Fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ps.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ps.fromNumber(r)));return s.compare(iN)===1&&(s=new Ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=h0(e),[r,s]=f0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hp(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=h0(e),[r,s]=f0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bc(ae.min(),s,new Le(_e),ur(),fe())}}class $a{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $a(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class kx{constructor(e,n){this.targetId=e,this.me=n}}class Cx{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class p0{constructor(){this.fe=0,this.ge=g0(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new $a(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=g0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oN{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=m0(),this.Qe=new Le(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Dh(i))if(r===0){const o=new ee(i.path);this.Ue(n,o,_t.newNoDocument(o,ae.min()))}else Ee(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=zs(r).toUint8Array()}catch(c){if(c instanceof ax)return zi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new hp(o,s,i)}catch(c){return zi(c instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&Dh(u.target)){const c=new ee(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,_t.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=fe();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new bc(e,n,this.Qe,this.ke,r);return this.ke=ur(),this.qe=m0(),this.Qe=new Le(_e),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new p0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new at(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new p0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function m0(){return new Le(ee.comparator)}function g0(){return new Le(ee.comparator)}const aN={asc:"ASCENDING",desc:"DESCENDING"},lN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uN={and:"AND",or:"OR"};class cN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oh(t,e){return t.useProto3Json||gc(e)?e:{value:e}}function Uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ax(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dN(t,e){return Uu(t,e.toTimestamp())}function On(t){return Ee(!!t),ae.fromTimestamp(function(n){const r=ns(n);return new Ye(r.seconds,r.nanos)}(t))}function fp(t,e){return Vh(t,e).canonicalString()}function Vh(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Px(t){const e=Ae.fromString(t);return Ee(Ox(e)),e}function Mh(t,e){return fp(t.databaseId,e.path)}function Ed(t,e){const n=Px(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(jx(n))}function Rx(t,e){return fp(t.databaseId,e)}function hN(t){const e=Px(t);return e.length===4?Ae.emptyPath():jx(e)}function Fh(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jx(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function y0(t,e,n){return{name:Mh(t,e),fields:n.value.mapValue.fields}}function fN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Ee(m===void 0||typeof m=="string"),ut.fromBase64String(m||"")):(Ee(m===void 0||m instanceof Buffer||m instanceof Uint8Array),ut.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?z.UNKNOWN:Nx(h.code);return new Z(m,h.message||"")}(o);n=new Cx(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ed(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):ae.min(),u=new At({mapValue:{fields:r.document.fields}}),c=_t.newFoundDocument(s,i,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Zl(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ed(t,r.document),i=r.readTime?On(r.readTime):ae.min(),o=_t.newNoDocument(s,i),u=r.removedTargetIds||[];n=new Zl([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ed(t,r.document),i=r.removedTargetIds||[];n=new Zl([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new nN(s,i),u=r.targetId;n=new kx(u,o)}}return n}function pN(t,e){let n;if(e instanceof za)n={update:y0(t,e.key,e.value)};else if(e instanceof cp)n={delete:Mh(t,e.key)};else if(e instanceof us)n={update:y0(t,e.key,e.data),updateMask:bN(e.fieldMask)};else{if(!(e instanceof Z2))return oe();n={verify:Mh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Mu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ia)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Sa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fu)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function mN(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(ae.min())&&(o=On(i)),new Y2(o,s.transformResults||[])}(n,e))):[]}function gN(t,e){return{documents:[Rx(t,e.path)]}}function yN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rx(t,s);const i=function(h){if(h.length!==0)return Lx(Mn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(_){return{field:oi(_.field),direction:xN(_.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Oh(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function vN(t){let e=hN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(g){const _=Dx(g);return _ instanceof Mn&&dx(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(_=>function(R){return new Vu(ai(R.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,gc(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,A=g.values||[];return new Ou(A,_)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const _=!g.before,A=g.values||[];return new Ou(A,_)}(n.endAt)),O2(e,s,o,i,u,"F",c,h)}function _N(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ai(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ai(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ai(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ai(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(ai(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(r=>Dx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function xN(t){return aN[t]}function wN(t){return lN[t]}function EN(t){return uN[t]}function oi(t){return{fieldPath:t.canonicalString()}}function ai(t){return it.fromServerFormat(t.fieldPath)}function Lx(t){return t instanceof Ge?function(n){if(n.op==="=="){if(r0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NAN"}};if(n0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(r0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NAN"}};if(n0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oi(n.field),op:wN(n.op),value:n.value}}}(t):t instanceof Mn?function(n){const r=n.getFilters().map(s=>Lx(s));return r.length===1?r[0]:{compositeFilter:{op:EN(n.op),filters:r}}}(t):oe()}function bN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ox(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,s,i=ae.min(),o=ae.min(),u=ut.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.ct=e}}function IN(t){const e=vN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.un=new NN}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(ts.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class NN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new at(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new at(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Hi(0)}static kn(){return new Hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.changes=new eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ta(r.mutation,s,Bt.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=ks();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Mo();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=ur();const o=ea(),u=function(){return ea()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof us)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),ta(m.mutation,h,m.mutation.getFieldMask(),Ye.now())):o.set(h.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var g;return u.set(h,new CN(m,(g=o.get(h))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const r=ea();let s=new Le((o,u)=>o-u),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||Bt.empty();m=u.applyToLocalView(h,m),r.set(c,m);const g=(s.get(u.batchId)||fe()).add(c);s=s.insert(u.batchId,g)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,g=_x();m.forEach(_=>{if(!i.has(_)){const A=Ix(n.get(_),r.get(_));A!==null&&g.set(_,A),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(ks());let u=-1,c=i;return o.next(h=>$.forEach(h,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{c=c.insert(m,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,fe())).next(m=>({batchId:u,changes:vx(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=Mo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Mo();return this.indexManager.getCollectionParents(e,i).next(u=>$.forEach(u,c=>{const h=function(g,_){return new yc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,_t.newInvalidDocument(m)))});let u=Mo();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&ta(m.mutation,h,Bt.empty(),Ye.now()),xc(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:IN(s.bundledQuery),readTime:On(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.overlays=new Le(ee.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ks();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=ks(),i=n.length+1,o=new ee(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=ks(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=ks(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=s)););return $.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tN(n,r));let i=this.Ir.get(n);i===void 0&&(i=fe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this.Tr=new at(Je.Er),this.dr=new at(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Ae([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Ae([])),r=new Je(n,e),s=new Je(n,e+1);let i=fe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new at(Je.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eN(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new Je(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(_e);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new Je(new ee(i),0);let u=new at(_e);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.wr)),!0)},o),$.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.Mr=e,this.docs=function(){return new Le(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_t.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ur();const o=n.path,u=new ee(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||y2(g2(m),r)<=0||(s.has(m.key)||xc(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ON(this)}getSize(e){return $.resolve(this.size)}}class ON extends kN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.persistence=e,this.Nr=new eo(n=>ap(n),lp),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pp,this.targetCount=0,this.kr=Hi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Hi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rp(0),this.Kr=!1,this.Kr=!0,this.$r=new jN,this.referenceDelegate=e(this),this.Ur=new VN(this),this.indexManager=new SN,this.remoteDocumentCache=function(s){return new LN(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new TN(n),this.Gr=new PN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new FN(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class FN extends _2{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Jr=new pp,this.Yr=null}static Zr(e){return new mp(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=ee.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Nb()?8:x2(wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new UN;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ao()<=pe.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Ao()<=pe.DEBUG&&J("QueryEngine","Query:",ii(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ao()<=pe.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):$.resolve())}Yi(e,n){if(a0(n))return $.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Lh(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,Lh(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return a0(n)||s.isEqual(ae.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?$.resolve(null):(Ao()<=pe.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ii(n)),this.rs(e,o,n,m2(s,-1)).next(u=>u))})}ts(e,n){let r=new at(gx(e));return n.forEach((s,i)=>{xc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ao()<=pe.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",ii(n)),this.Ji.getDocumentsMatchingQuery(e,n,ts.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Le(_e),this._s=new eo(i=>ap(i),lp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function BN(t,e,n,r){return new $N(t,e,n,r)}async function Vx(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=fe();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function qN(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const g=h.batch,_=g.keys();let A=$.resolve();return _.forEach(R=>{A=A.next(()=>m.getEntry(c,R)).next(L=>{const U=h.docVersions.get(R);Ee(U!==null),L.version.compareTo(U)<0&&(g.applyToRemoteDocument(L,h),L.isValidDocument()&&(L.setReadTime(h.commitVersion),m.addEntry(L)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=fe();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Mx(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HN(t,e){const n=le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((m,g)=>{const _=s.get(g);if(!_)return;u.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,g)));let A=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(ut.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):m.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(m.resumeToken,r)),s=s.insert(g,A),function(L,U,I){return L.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,A,m)&&u.push(n.Ur.updateTargetData(i,A))});let c=ur(),h=fe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(WN(i,o,e.documentUpdates).next(m=>{c=m.Ps,h=m.Is})),!r.isEqual(ae.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return $.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function WN(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ur();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):J("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function KN(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GN(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Uh(t,e,n){const r=le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ua(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function v0(t,e,n){const r=le(t);let s=ae.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const g=le(c),_=g._s.get(m);return _!==void 0?$.resolve(g.os.get(_)):g.Ur.getTargetData(h,m)}(r,o,Ln(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:fe())).next(u=>(QN(r,F2(e),u),{documents:u,Ts:i})))}function QN(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class _0{constructor(){this.activeTargetIds=H2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YN{constructor(){this.so=new _0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=null;function bd(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class ek extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=bd(),c=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(m=>(J("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw zi("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",s),m})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=JN[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=bd();return new Promise((o,u)=>{const c=new Z_;c.setWithCredentials(!0),c.listenOnce(ex.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Yl.NO_ERROR:const m=c.getResponseJson();J(mt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case Yl.TIMEOUT:J(mt,`RPC '${e}' ${i} timed out`),u(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case Yl.HTTP_ERROR:const g=c.getStatus();if(J(mt,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const R=function(U){const I=U.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(I)>=0?I:z.UNKNOWN}(A.status);u(new Z(R,A.message))}else u(new Z(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Z(z.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{J(mt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);J(mt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=bd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rx(),u=nx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");J(mt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const g=o.createWebChannel(m,c);let _=!1,A=!1;const R=new ZN({Io:U=>{A?J(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(_||(J(mt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),_=!0),J(mt,`RPC '${e}' stream ${s} sending:`,U),g.send(U))},To:()=>g.close()}),L=(U,I,b)=>{U.listen(I,k=>{try{b(k)}catch(M){setTimeout(()=>{throw M},0)}})};return L(g,Vo.EventType.OPEN,()=>{A||(J(mt,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),L(g,Vo.EventType.CLOSE,()=>{A||(A=!0,J(mt,`RPC '${e}' stream ${s} transport closed`),R.So())}),L(g,Vo.EventType.ERROR,U=>{A||(A=!0,zi(mt,`RPC '${e}' stream ${s} transport errored:`,U),R.So(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),L(g,Vo.EventType.MESSAGE,U=>{var I;if(!A){const b=U.data[0];Ee(!!b);const k=b,M=k.error||((I=k[0])===null||I===void 0?void 0:I.error);if(M){J(mt,`RPC '${e}' stream ${s} received error:`,M);const F=M.status;let V=function(w){const E=$e[w];if(E!==void 0)return Nx(E)}(F),x=M.message;V===void 0&&(V=z.INTERNAL,x="Unknown error status: "+F+" with message "+M.message),A=!0,R.So(new Z(V,x)),g.close()}else J(mt,`RPC '${e}' stream ${s} received:`,b),R.bo(b)}}),L(u,tx.STAT_EVENT,U=>{U.stat===Ah.PROXY?J(mt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Ah.NOPROXY&&J(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){return new cN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Z(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tk extends Ux{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fN(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?On(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fh(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Dh(c)?{documents:gN(i,c)}:{query:yN(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Ax(i,o.resumeToken);const h=Oh(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(ae.min())>0){u.readTime=Uu(i,o.snapshotVersion.toTimestamp());const h=Oh(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=_N(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fh(this.serializer),n.removeTarget=e,this.a_(n)}}class nk extends Ux{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mN(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pN(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Vh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(z.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Vh(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ks(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=le(c);h.L_.add(4),await Ba(h),h.q_.set("Unknown"),h.L_.delete(4),await Ic(h)}(this))})}),this.q_=new sk(r,s)}}async function Ic(t){if(Ks(t))for(const e of t.B_)await e(!0)}async function Ba(t){for(const e of t.B_)await e(!1)}function zx(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xp(n)?_p(n):to(n).r_()&&vp(n,e))}function yp(t,e){const n=le(t),r=to(n);n.N_.delete(e),r.r_()&&$x(n,e),n.N_.size===0&&(r.r_()?r.o_():Ks(n)&&n.q_.set("Unknown"))}function vp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}to(t).A_(e)}function $x(t,e){t.Q_.xe(e),to(t).R_(e)}function _p(t){t.Q_=new oN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),to(t).start(),t.q_.v_()}function xp(t){return Ks(t)&&!to(t).n_()&&t.N_.size>0}function Ks(t){return le(t).L_.size===0}function Bx(t){t.Q_=void 0}async function ok(t){t.q_.set("Online")}async function ak(t){t.N_.forEach((e,n)=>{vp(t,e)})}async function lk(t,e){Bx(t),xp(t)?(t.q_.M_(e),_p(t)):t.q_.set("Unknown")}async function uk(t,e,n){if(t.q_.set("Online"),e instanceof Cx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zu(t,r)}else if(e instanceof Zl?t.Q_.Ke(e):e instanceof kx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await Mx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.N_.get(h);m&&i.N_.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=i.N_.get(c);if(!m)return;i.N_.set(c,m.withResumeToken(ut.EMPTY_BYTE_STRING,m.snapshotVersion)),$x(i,c);const g=new Ur(m.target,c,h,m.sequenceNumber);vp(i,g)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await zu(t,r)}}async function zu(t,e,n){if(!Ua(e))throw e;t.L_.add(1),await Ba(t),t.q_.set("Offline"),n||(n=()=>Mx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ic(t)})}function qx(t,e){return e().catch(n=>zu(t,n,e))}async function Sc(t){const e=le(t),n=rs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ck(e);)try{const s=await KN(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,dk(e,s)}catch(s){await zu(e,s)}Hx(e)&&Wx(e)}function ck(t){return Ks(t)&&t.O_.length<10}function dk(t,e){t.O_.push(e);const n=rs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Hx(t){return Ks(t)&&!rs(t).n_()&&t.O_.length>0}function Wx(t){rs(t).start()}async function hk(t){rs(t).p_()}async function fk(t){const e=rs(t);for(const n of t.O_)e.m_(n.mutations)}async function pk(t,e,n){const r=t.O_.shift(),s=dp.from(r,e,n);await qx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sc(t)}async function mk(t,e){e&&rs(t).V_&&await async function(r,s){if(function(o){return rN(o)&&o!==z.ABORTED}(s.code)){const i=r.O_.shift();rs(r).s_(),await qx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sc(r)}}(t,e),Hx(t)&&Wx(t)}async function w0(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Ks(n);n.L_.add(3),await Ba(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ic(n)}async function gk(t,e){const n=le(t);e?(n.L_.delete(2),await Ic(n)):e||(n.L_.add(2),await Ba(n),n.q_.set("Unknown"))}function to(t){return t.K_||(t.K_=function(n,r,s){const i=le(n);return i.w_(),new tk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:ok.bind(null,t),Ro:ak.bind(null,t),mo:lk.bind(null,t),d_:uk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xp(t)?_p(t):t.q_.set("Unknown")):(await t.K_.stop(),Bx(t))})),t.K_}function rs(t){return t.U_||(t.U_=function(n,r,s){const i=le(n);return i.w_(),new nk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hk.bind(null,t),mo:mk.bind(null,t),f_:fk.bind(null,t),g_:pk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sc(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new wp(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(t,e){if(lr("AsyncQueue",`${e}: ${t}`),Ua(t))return new Z(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Mo(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Pi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.W_=new Le(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wi{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Wi(e,n,Pi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vk{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=b0(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function b0(){return new eo(t=>mx(t),_c)}async function bp(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new yk,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Ep(o,`Initialization of query '${ii(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ip(n)}async function Tp(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _k(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Ip(n)}function xk(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ip(t){t.Y_.forEach(e=>{e.next()})}var zh,T0;(T0=zh||(zh={})).ea="default",T0.Cache="cache";class Sp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.key=e}}class Gx{constructor(e){this.key=e}}class wk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=gx(e),this.Ra=new Pi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new E0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const _=s.get(m),A=xc(this.query,g)?g:null,R=!!_&&this.mutatedKeys.has(_.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let U=!1;_&&A?_.data.isEqual(A.data)?R!==L&&(r.track({type:3,doc:A}),U=!0):this.ga(_,A)||(r.track({type:2,doc:A}),U=!0,(c&&this.Aa(A,c)>0||h&&this.Aa(A,h)<0)&&(u=!0)):!_&&A?(r.track({type:0,doc:A}),U=!0):_&&!A&&(r.track({type:1,doc:_}),U=!0,(c||h)&&(u=!0)),U&&(A?(o=o.add(A),i=L?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,g)=>function(A,R){const L=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return L(A)-L(R)}(m.type,g.type)||this.Aa(m.doc,g.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new Wi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new E0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Gx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Kx(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Wi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Ek{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bk{constructor(e){this.key=e,this.va=!1}}class Tk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new eo(u=>mx(u),_c),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(ee.comparator),this.Na=new Map,this.La=new pp,this.Ba={},this.ka=new Map,this.qa=Hi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Ik(t,e,n=!0){const r=ew(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Qx(r,e,n,!0),s}async function Sk(t,e){const n=ew(t);await Qx(n,e,!0,!1)}async function Qx(t,e,n,r){const s=await GN(t.localStore,Ln(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await Nk(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&zx(t.remoteStore,s),u}async function Nk(t,e,n,r,s){t.Ka=(g,_,A)=>async function(L,U,I,b){let k=U.view.ma(I);k.ns&&(k=await v0(L.localStore,U.query,!1).then(({documents:x})=>U.view.ma(x,k)));const M=b&&b.targetChanges.get(U.targetId),F=b&&b.targetMismatches.get(U.targetId)!=null,V=U.view.applyChanges(k,L.isPrimaryClient,M,F);return S0(L,U.targetId,V.wa),V.snapshot}(t,g,_,A);const i=await v0(t.localStore,e,!0),o=new wk(e,i.Ts),u=o.ma(i.documents),c=$a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);S0(t,n,h.wa);const m=new Ek(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function kk(t,e,n){const r=le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!_c(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Uh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yp(r.remoteStore,s.targetId),$h(r,s.targetId)}).catch(Fa)):($h(r,s.targetId),await Uh(r.localStore,s.targetId,!0))}async function Ck(t,e){const n=le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yp(n.remoteStore,r.targetId))}async function Ak(t,e,n){const r=Vk(t);try{const s=await function(o,u){const c=le(o),h=Ye.now(),m=u.reduce((A,R)=>A.add(R.key),fe());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=ur(),L=fe();return c.cs.getEntries(A,m).next(U=>{R=U,R.forEach((I,b)=>{b.isValidDocument()||(L=L.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,R)).next(U=>{g=U;const I=[];for(const b of u){const k=J2(b,g.get(b.key).overlayedDocument);k!=null&&I.push(new us(b.key,k,lx(k.value.mapValue),sn.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,I,u)}).next(U=>{_=U;const I=U.applyToLocalDocumentSet(g,L);return c.documentOverlayCache.saveOverlays(A,U.batchId,I)})}).then(()=>({batchId:_.batchId,changes:vx(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Le(_e)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await qa(r,s.changes),await Sc(r.remoteStore)}catch(s){const i=Ep(s,"Failed to persist write");n.reject(i)}}async function Yx(t,e){const n=le(t);try{const r=await HN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ee(o.va):s.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),await qa(n,r,e)}catch(r){await Fa(r)}}function I0(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=le(o);c.onlineState=u;let h=!1;c.queries.forEach((m,g)=>{for(const _ of g.j_)_.Z_(u)&&(h=!0)}),h&&Ip(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Pk(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Le(ee.comparator);o=o.insert(i,_t.newNoDocument(i,ae.min()));const u=fe().add(i),c=new bc(ae.min(),new Map,new Le(_e),o,u);await Yx(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Np(r)}else await Uh(r.localStore,e,!1).then(()=>$h(r,e,n)).catch(Fa)}async function Rk(t,e){const n=le(t),r=e.batch.batchId;try{const s=await qN(n.localStore,e);Jx(n,r,null),Xx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qa(n,s)}catch(s){await Fa(s)}}async function jk(t,e,n){const r=le(t);try{const s=await function(o,u){const c=le(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(g=>(Ee(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);Jx(r,e,n),Xx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qa(r,s)}catch(s){await Fa(s)}}function Xx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Jx(t,e,n){const r=le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $h(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Zx(t,r)})}function Zx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Np(t))}function S0(t,e,n){for(const r of n)r instanceof Kx?(t.La.addReference(r.key,e),Dk(t,r)):r instanceof Gx?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Zx(t,r.key)):oe()}function Dk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),Np(t))}function Np(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new bk(n)),t.Oa=t.Oa.insert(n,r),zx(t.remoteStore,new Ur(Ln(vc(n.path)),r,"TargetPurposeLimboResolution",rp.oe))}}async function qa(t,e,n){const r=le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){s.push(h);const g=gp.Wi(c.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const m=le(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>$.forEach(h,_=>$.forEach(_.$i,A=>m.persistence.referenceDelegate.addReference(g,_.targetId,A)).next(()=>$.forEach(_.Ui,A=>m.persistence.referenceDelegate.removeReference(g,_.targetId,A)))))}catch(g){if(!Ua(g))throw g;J("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const A=m.os.get(_),R=A.snapshotVersion,L=A.withLastLimboFreeSnapshotVersion(R);m.os=m.os.insert(_,L)}}}(r.localStore,i))}async function Lk(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await Vx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new Z(z.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qa(n,r.hs)}}function Ok(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let s=fe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function ew(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ok.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pk.bind(null,e),e.Ca.d_=_k.bind(null,e.eventManager),e.Ca.$a=xk.bind(null,e.eventManager),e}function Vk(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jk.bind(null,e),e}class $u{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return BN(this.persistence,new zN,e.initialUser,this.serializer)}Ga(e){return new MN(mp.Zr,this.serializer)}Wa(e){return new YN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$u.provider={build:()=>new $u};class Bh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lk.bind(null,this.syncEngine),await gk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vk}()}createDatastore(e){const n=Tc(e.databaseInfo.databaseId),r=function(i){return new ek(i)}(e.databaseInfo);return function(i,o,u,c){return new rk(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new ik(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>I0(this.syncEngine,n,0),function(){return x0.D()?new x0:new XN}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,m){const g=new Tk(s,i,o,u,c,h);return m&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);J("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ba(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bh.provider={build:()=>new Bh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=ix.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ep(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Id(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Vx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function N0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Fk(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>w0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>w0(e.remoteStore,s)),t._onlineComponents=e}async function Fk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Id(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;zi("Error using user provided cache. Falling back to memory cache: "+n),await Id(t,new $u)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Id(t,new $u);return t._offlineComponents}async function tw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await N0(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await N0(t,new Bh))),t._onlineComponents}function Uk(t){return tw(t).then(e=>e.syncEngine)}async function Bu(t){const e=await tw(t),n=e.eventManager;return n.onListen=Ik.bind(null,e.syncEngine),n.onUnlisten=kk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ck.bind(null,e.syncEngine),n}function zk(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new kp({next:_=>{m.Za(),o.enqueueAndForget(()=>Tp(i,g));const A=_.docs.has(u);!A&&_.fromCache?h.reject(new Z(z.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&_.fromCache&&c&&c.source==="server"?h.reject(new Z(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new Sp(vc(u.path),m,{includeMetadataChanges:!0,_a:!0});return bp(i,g)}(await Bu(t),t.asyncQueue,e,n,r)),r.promise}function $k(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new kp({next:_=>{m.Za(),o.enqueueAndForget(()=>Tp(i,g)),_.fromCache&&c.source==="server"?h.reject(new Z(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new Sp(u,m,{includeMetadataChanges:!0,_a:!0});return bp(i,g)}(await Bu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e,n){if(!n)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Bk(t,e,n,r){if(e===!0&&r===!0)throw new Z(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function C0(t){if(!ee.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A0(t){if(ee.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cp(t);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o2;switch(r.type){case"firstParty":return new c2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=k0.get(n);r&&(J("ComponentProvider","Removing Datastore"),k0.delete(n),r.terminate())}(this),Promise.resolve()}}function qk(t,e,n,r={}){var s;const i=(t=Lt(t,Nc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=gt.MOCK_USER;else{u=xb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new gt(h)}t._authCredentials=new a2(new sx(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ha(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class Jr extends Ha{constructor(e,n,r){super(e,n,vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new ee(e))}withConverter(e){return new Jr(this.firestore,e,this._path)}}function Uo(t,e,...n){if(t=qe(t),rw("collection","path",e),t instanceof Nc){const r=Ae.fromString(e,...n);return A0(r),new Jr(t,null,r)}{if(!(t instanceof It||t instanceof Jr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return A0(r),new Jr(t.firestore,null,r)}}function Zt(t,e,...n){if(t=qe(t),arguments.length===1&&(e=ix.newId()),rw("doc","path",e),t instanceof Nc){const r=Ae.fromString(e,...n);return C0(r),new It(t,null,new ee(r))}{if(!(t instanceof It||t instanceof Jr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return C0(r),new It(t.firestore,t instanceof Jr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fx(this,"async_queue_retry"),this.Vu=()=>{const r=Td();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Td();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ua(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function j0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class cr extends Nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new R0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function Hk(t,e){const n=typeof t=="object"?t:p_(),r=typeof t=="string"?t:"(default)",s=Wf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vb("firestore");i&&qk(s,...i)}return s}function kc(t){if(t._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Wk(t),t._firestoreClient}function Wk(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,h,m){return new b2(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,nw(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Mk(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(ut.fromBase64String(e))}catch(n){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=/^__.*__$/;class Gk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new za(e,this.data,n,this.fieldTransforms)}}class sw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class jp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(iw(this.Cu)&&Kk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Qk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tc(e)}Qu(e,n,r,s=!1){return new jp({Cu:e,methodName:n,qu:r,path:it.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dp(t){const e=t._freezeSettings(),n=Tc(t._databaseId);return new Qk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ow(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Lp("Data must be an object, but it was:",o,r);const u=aw(r,o);let c,h;if(i.merge)c=new Bt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const g of i.mergeFields){const _=qh(e,g,n);if(!o.contains(_))throw new Z(z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);uw(m,_)||m.push(_)}c=new Bt(m),h=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=o.fieldTransforms;return new Gk(new At(u),c,h)}class Ac extends Ap{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ac}}function Yk(t,e,n,r){const s=t.Qu(1,e,n);Lp("Data must be an object, but it was:",s,r);const i=[],o=At.empty();Ws(r,(c,h)=>{const m=Op(e,c,n);h=qe(h);const g=s.Nu(m);if(h instanceof Ac)i.push(m);else{const _=Pc(h,g);_!=null&&(i.push(m),o.set(m,_))}});const u=new Bt(i);return new sw(o,u,s.fieldTransforms)}function Xk(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[qh(e,r,n)],c=[s];if(i.length%2!=0)throw new Z(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)u.push(qh(e,i[_])),c.push(i[_+1]);const h=[],m=At.empty();for(let _=u.length-1;_>=0;--_)if(!uw(h,u[_])){const A=u[_];let R=c[_];R=qe(R);const L=o.Nu(A);if(R instanceof Ac)h.push(A);else{const U=Pc(R,L);U!=null&&(h.push(A),m.set(A,U))}}const g=new Bt(h);return new sw(m,g,o.fieldTransforms)}function Pc(t,e){if(lw(t=qe(t)))return Lp("Unsupported field value:",e,t),aw(t,e);if(t instanceof Ap)return function(r,s){if(!iw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Pc(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return W2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:Uu(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uu(s.serializer,i)}}if(r instanceof Pp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ki)return{bytesValue:Ax(s.serializer,r._byteString)};if(r instanceof It){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Rp)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return up(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Cp(r)}`)}(t,e)}function aw(t,e){const n={};return ox(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(t,(r,s)=>{const i=Pc(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function lw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Pp||t instanceof Ki||t instanceof It||t instanceof Ap||t instanceof Rp)}function Lp(t,e,n){if(!lw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Cp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qh(t,e,n){if((e=qe(e))instanceof Cc)return e._internalPath;if(typeof e=="string")return Op(t,e);throw qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Jk=new RegExp("[~\\*/\\[\\]]");function Op(t,e,n){if(e.search(Jk)>=0)throw qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cc(...e.split("."))._internalPath}catch{throw qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Z(z.INVALID_ARGUMENT,u+t+c)}function uw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Zk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Zk extends cw{data(){return super.data()}}function dw(t,e){return typeof e=="string"?Op(t,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eC{convertValue(e,n="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ws(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new Rp(i)}convertGeoPoint(e){return new Pp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ip(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ea(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);Ee(Ox(r));const s=new ba(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pw extends cw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class eu extends pw{data(e={}){return super.data(e)}}class mw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new zo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new eu(this._firestore,this._userDataWriter,r.key,r,new zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new eu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new eu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:tC(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){t=Lt(t,It);const e=Lt(t.firestore,cr);return zk(kc(e),t._key).then(n=>yw(e,t,n))}class Vp extends eC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function nC(t){t=Lt(t,Ha);const e=Lt(t.firestore,cr),n=kc(e),r=new Vp(e);return hw(t._query),$k(n,t._query).then(s=>new mw(e,r,t,s))}function Hh(t,e,n){t=Lt(t,It);const r=Lt(t.firestore,cr),s=fw(t.converter,e);return Rc(r,[ow(Dp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sn.none())])}function Hu(t,e,n,...r){t=Lt(t,It);const s=Lt(t.firestore,cr),i=Dp(s);let o;return o=typeof(e=qe(e))=="string"||e instanceof Cc?Xk(i,"updateDoc",t._key,e,n,r):Yk(i,"updateDoc",t._key,e),Rc(s,[o.toMutation(t._key,sn.exists(!0))])}function gw(t){return Rc(Lt(t.firestore,cr),[new cp(t._key,sn.none())])}function L0(t,e){const n=Lt(t.firestore,cr),r=Zt(t),s=fw(t.converter,e);return Rc(n,[ow(Dp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function O0(t,...e){var n,r,s;t=qe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||j0(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(j0(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let c,h,m;if(t instanceof It)h=Lt(t.firestore,cr),m=vc(t._key.path),c={next:g=>{e[o]&&e[o](yw(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Lt(t,Ha);h=Lt(g.firestore,cr),m=g._query;const _=new Vp(h);c={next:A=>{e[o]&&e[o](new mw(h,_,g,A))},error:e[o+1],complete:e[o+2]},hw(t._query)}return function(_,A,R,L){const U=new kp(L),I=new Sp(A,U,R);return _.asyncQueue.enqueueAndForget(async()=>bp(await Bu(_),I)),()=>{U.Za(),_.asyncQueue.enqueueAndForget(async()=>Tp(await Bu(_),I))}}(kc(h),m,u,c)}function Rc(t,e){return function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget(async()=>Ak(await Uk(r),s,i)),i.promise}(kc(t),e)}function yw(t,e,n){const r=n.docs.get(e._key),s=new Vp(t);return new pw(t,s,e._key,r,new zo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Zi=s})(Ji),Fi(new Vs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new cr(new l2(r.getProvider("auth-internal")),new h2(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(h.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Xr(Xg,"4.7.3",e),Xr(Xg,"4.7.3","esm2017")})();var rC="firebase",sC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xr(rC,sC,"app");const iC={apiKey:"AIzaSyCfoxtQy_MCf5_fqKFq4OsXYvvyhkmwEYo",authDomain:"alfa-app-b4052.firebaseapp.com",projectId:"alfa-app-b4052",storageBucket:"alfa-app-b4052.firebasestorage.app",messagingSenderId:"644138783201",appId:"1:644138783201:web:16308247c9ef93f1d242a0"},vw=f_(iC),Ir=s2(vw),yt=Hk(vw),_w=q.createContext();function no(){return q.useContext(_w)}function xw({children:t}){const[e,n]=q.useState(null),[r,s]=q.useState(null),[i,o]=q.useState(!0),[u,c]=q.useState(!1),h=F=>{const V={admin:{canViewOS:!0,canEditOS:!0,canDeleteOS:!0,canViewFinancial:!0,canEditFinancial:!0,canViewContracts:!0,canEditContracts:!0,canManageUsers:!0,canViewAllClients:!0,canViewOnlyOwnClient:!1,canPrint:!0,canExport:!0},client:{canViewOS:!0,canEditOS:!1,canDeleteOS:!1,canViewFinancial:!1,canEditFinancial:!1,canViewContracts:!1,canEditContracts:!1,canManageUsers:!1,canViewAllClients:!1,canViewOnlyOwnClient:!0,canPrint:!1,canExport:!1}};return V[F]||V.client};async function m(F,V,x,v="client",w=null){console.log(" Iniciando criao de usurio:",{email:F,displayName:x,role:v});try{const E=Ir.currentUser,C=E==null?void 0:E.email;if(console.log(" Usurio atual antes da criao:",C),w&&E){console.log(" Reautenticando admin...");try{const Xe=Hs.credential(C,w);await UI(E,Xe),console.log(" Admin reautenticado com sucesso")}catch(Xe){throw console.error(" Erro na reautenticao:",Xe),new Error("Senha do admin incorreta. Por favor, verifique sua senha.")}}const N=await $I(Ir,F,V);console.log(" Usurio criado no Firebase Auth:",N.user.email),x&&(await qI(N.user,{displayName:x}),console.log(" Perfil atualizado no Auth"));const S=h(v),Ie={uid:N.user.uid,email:F,displayName:x||F.split("@")[0],role:v,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),permissions:S,status:"active",emailVerified:!1,createdBy:C||"system"};if(console.log(" Salvando dados no Firestore..."),await Hh(Zt(yt,"users",N.user.uid),Ie),console.log(" Dados salvos no Firestore"),console.log(" Fazendo logout do novo usurio..."),await Ug(Ir),console.log(" Logout do novo usurio realizado"),E&&w){console.log(" Tentando restaurar sesso do admin...");try{await Fg(Ir,C,w),console.log(" Admin restaurado com sucesso!")}catch(Xe){console.error(" Erro ao restaurar admin:",Xe)}}return console.log(" Usurio criado com sucesso em ambos os sistemas!"),{success:!0,userId:N.user.uid,adminRestored:!!w}}catch(E){console.error(" Erro ao criar usurio:",E);let C=E.message;switch(E.code){case"auth/email-already-in-use":C="Este email j est em uso por outra conta.";break;case"auth/invalid-email":C="Email invlido.";break;case"auth/operation-not-allowed":C="Operao no permitida. Contate o administrador.";break;case"auth/weak-password":C="A senha  muito fraca. Use pelo menos 6 caracteres.";break;case"auth/wrong-password":C="Senha do admin incorreta.";break;default:C="Erro ao criar usurio: "+E.message}throw new Error(C)}}async function g(F,V){console.log("Tentando login para:",F);try{const x=await Fg(Ir,F,V);return console.log(" Login bem-sucedido:",x.user.email),x}catch(x){throw console.error(" Erro no login:",x),x}}async function _(){if(u){console.log("Logout j em andamento...");return}c(!0);try{return console.log("Iniciando logout..."),n(null),s(null),await Ug(Ir),console.log(" Logout realizado com sucesso"),!0}catch(F){throw console.error(" Erro ao fazer logout:",F),F}finally{c(!1)}}function A(F){return console.log("Solicitando redefinio de senha para:",F),zI(Ir,F)}async function R(F,V){console.log("Atualizando dados do usurio:",F),await Hu(Zt(yt,"users",F),{...V,updatedAt:new Date().toISOString()}),F===(e==null?void 0:e.uid)&&(console.log("Recarregando dados do usurio atual..."),await L(F))}async function L(F){console.log("Carregando dados do usurio do Firestore:",F);try{const V=await D0(Zt(yt,"users",F));if(V.exists()){const x=V.data(),v={...h(x.role||"client"),...x.permissions||{}},w={...x,permissions:v};return s(w),w}else return console.log("Usurio no encontrado no Firestore"),s(null),null}catch(V){return console.error("Erro ao carregar dados do usurio:",V),s(null),null}}const U=async(F,V)=>{if(!e||(r==null?void 0:r.role)!=="admin")throw console.warn("Tentativa no autorizada de atualizar cargo"),new Error("Sem permisso para atualizar cargos");console.log("Atualizando cargo do usurio:",F,"para",V);const x=h(V),v={role:V,permissions:x,updatedAt:new Date().toISOString()};return await Hu(Zt(yt,"users",F),v),v},I=async F=>{if(!e||(r==null?void 0:r.role)!=="admin")throw console.warn("Tentativa no autorizada de deletar usurio"),new Error("Sem permisso para deletar usurios");console.log("Deletando conta do usurio:",F);try{return await gw(Zt(yt,"users",F)),console.log(" Usurio deletado do Firestore"),{success:!0}}catch(V){throw console.error(" Erro ao deletar usurio:",V),V}};function b(F){var V;return r?r.role==="admin"?!0:((V=r.permissions)==null?void 0:V[F])||!1:!1}const k=async()=>{try{const F=Uo(yt,"users"),x=(await nC(F)).docs.map(v=>({id:v.id,...v.data()}));if(console.log("Total de usurios encontrados:",x.length),(r==null?void 0:r.role)!=="admin"&&!b("canViewAllClients")){const v=x.filter(w=>w.createdBy===(e==null?void 0:e.email)||w.id===(e==null?void 0:e.uid));return console.log("Usurios filtrados para visualizao:",v.length),v.sort((w,E)=>{const C=new Date(w.createdAt||0);return new Date(E.createdAt||0)-C}),v}return x.sort((v,w)=>{const E=new Date(v.createdAt||0);return new Date(w.createdAt||0)-E}),x}catch(F){throw console.error("Erro ao buscar todos os usurios:",F),F}};q.useEffect(()=>(console.log(" Configurando listener onAuthStateChanged..."),KI(Ir,async V=>{var x,v;if(console.log(" onAuthStateChanged disparado!"),console.log(" Usurio do Firebase:",V?`${V.email} (${V.uid})`:"Nenhum"),V&&!u){console.log(" Processando usurio autenticado...");try{const w=await D0(Zt(yt,"users",V.uid));if(w.exists()){const E=w.data();console.log(" Dados do Firestore encontrados para:",V.email);const C={...h(E.role||"client"),...E.permissions||{}},N={...E,permissions:C};s(N),console.log(" Dados do usurio carregados com sucesso")}else{console.log(" Usurio no encontrado no Firestore - criando...");const E={uid:V.uid,email:V.email,displayName:V.displayName||((x=V.email)==null?void 0:x.split("@")[0])||"Usurio",role:"client",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),permissions:h("client"),status:"active",emailVerified:V.emailVerified,createdBy:"system"};await Hh(Zt(yt,"users",V.uid),E),s(E),console.log(" Registro criado no Firestore")}n(V),c(!1),console.log(" Estado atualizado com sucesso")}catch(w){console.error(" Erro ao carregar dados do usurio:",w),n(V);const E=h("client"),C={uid:V.uid,email:V.email,displayName:V.displayName||((v=V.email)==null?void 0:v.split("@")[0])||"Usurio",role:"client",permissions:E};s(C),c(!1)}}else console.log(u?" Logout confirmado - limpando estado":" Nenhum usurio autenticado"),n(null),s(null);o(!1)})),[u]);const M={user:e,userData:r,loading:i,isLoggingOut:u,signup:m,login:g,logout:_,resetPassword:A,updateUserRole:U,updateUserData:R,loadUserData:L,deleteUserAccount:I,getAllUsers:k,hasPermission:b,getDefaultPermissions:h};return l.jsx(_w.Provider,{value:M,children:!i&&t})}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},m)=>q.createElement("svg",{ref:m,...oC,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${aC(t)}`,u].join(" "),...h},[...e.map(([g,_])=>q.createElement(g,_)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=te("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=te("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=te("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=te("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=te("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=te("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=te("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=te("FileSignature",[["path",{d:"M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5",key:"kd5d3"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=te("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=te("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=te("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=te("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=te("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=te("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=te("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=te("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=te("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=te("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),q0={admin:"bg-red-100 text-red-800",client:"bg-purple-100 text-purple-800"},Qu={admin:"Administrador",client:"Cliente"},PC=({onClose:t,onSuccess:e})=>{const{signup:n,user:r}=no(),[s,i]=q.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"client"}),[o,u]=q.useState(!1),[c,h]=q.useState(""),[m,g]=q.useState(!1),[_,A]=q.useState(!1),[R,L]=q.useState(!1),U=async I=>{if(I.preventDefault(),h(""),g(!1),s.password!==s.confirmPassword){h("As senhas no conferem");return}if(s.password.length<6){h("A senha deve ter pelo menos 6 caracteres");return}u(!0);try{console.log("Criando usurio:",{email:s.email,displayName:s.displayName,role:s.role});const b=await n(s.email,s.password,s.displayName,s.role);b.success&&(console.log("Usurio criado com sucesso!",b),g(!0),i({email:"",password:"",confirmPassword:"",displayName:"",role:"client"}),setTimeout(()=>{e==null||e(),t()},2e3))}catch(b){switch(console.error("Erro ao criar usurio:",b),b.message){case"Senha do admin incorreta.":h("Sua senha de administrador est incorreta. Por favor, verifique e tente novamente.");break;case"Este email j est em uso por outra conta.":h("Este email j est em uso por outra conta.");break;case"Email invlido.":h("Email invlido.");break;case"A senha  muito fraca. Use pelo menos 6 caracteres.":h("A senha  muito fraca. Use pelo menos 6 caracteres.");break;default:h(b.message||"Erro ao criar usurio. Verifique os dados e tente novamente.")}}finally{u(!1)}};return l.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:t}),l.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all duration-300 scale-100",children:[l.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:l.jsx(Or,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Criar Novo Usurio"}),l.jsx("p",{className:"text-slate-500 text-sm",children:"Adicione um novo usurio ao sistema"})]})]}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",disabled:o,children:l.jsx(Vr,{size:20})})]}),l.jsxs("form",{onSubmit:U,className:"p-6 space-y-4",children:[c&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(ss,{size:16}),l.jsx("span",{className:"font-bold",children:"Erro"})]}),c]}),m&&l.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Gi,{size:16}),l.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),"Usurio criado com sucesso! O usurio foi registrado no Authentication e no Firestore.",l.jsx("div",{className:"mt-2 text-xs",children:"Fechando o modal em instantes..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome Completo *"}),l.jsxs("div",{className:"relative",children:[l.jsx(Gu,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"text",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.displayName,onChange:I=>i({...s,displayName:I.target.value}),placeholder:"Joo Silva",disabled:o||m})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email *"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mp,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"email",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.email,onChange:I=>i({...s,email:I.target.value}),placeholder:"usuario@exemplo.com",disabled:o||m})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Senha *"}),l.jsxs("div",{className:"relative",children:[l.jsx(U0,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:_?"text":"password",required:!0,className:"w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.password,onChange:I=>i({...s,password:I.target.value}),placeholder:"",disabled:o||m,minLength:"6"}),l.jsx("button",{type:"button",onClick:()=>A(!_),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",disabled:o||m,children:_?l.jsx(Wu,{size:18}):l.jsx(Ku,{size:18})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirmar Senha *"}),l.jsxs("div",{className:"relative",children:[l.jsx(U0,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:R?"text":"password",required:!0,className:"w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.confirmPassword,onChange:I=>i({...s,confirmPassword:I.target.value}),placeholder:"",disabled:o||m,minLength:"6"}),l.jsx("button",{type:"button",onClick:()=>L(!R),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",disabled:o||m,children:R?l.jsx(Wu,{size:18}):l.jsx(Ku,{size:18})})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cargo *"}),l.jsxs("div",{className:"relative",children:[l.jsx(jc,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("select",{className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all bg-white",value:s.role,onChange:I=>i({...s,role:I.target.value}),disabled:o||m,children:Object.entries(Qu).map(([I,b])=>l.jsx("option",{value:I,children:b},I))})]})]}),l.jsxs("div",{className:"pt-4 flex gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o||m,className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando..."]}):m?l.jsxs(l.Fragment,{children:[l.jsx(Gi,{size:18}),"Usurio Criado!"]}):l.jsxs(l.Fragment,{children:[l.jsx(Or,{size:18}),"Criar Usurio"]})})]})]})]})]})},RC=({user:t,onClose:e,onSuccess:n})=>{const{updateUserData:r}=no(),[s,i]=q.useState({displayName:t.displayName||"",role:t.role||"client",newPassword:"",confirmNewPassword:""}),[o,u]=q.useState(!1),[c,h]=q.useState(""),[m,g]=q.useState(""),[_,A]=q.useState(!1),[R,L]=q.useState(!1),U=async()=>{if(u(!0),h(""),g(""),s.newPassword||s.confirmNewPassword){if(s.newPassword!==s.confirmNewPassword){h("As novas senhas no conferem"),u(!1);return}if(s.newPassword.length<6){h("A nova senha deve ter pelo menos 6 caracteres"),u(!1);return}}try{const I={displayName:s.displayName,role:s.role,updatedAt:new Date().toISOString()};s.newPassword&&console.log("Nova senha definida (necessitaria Admin SDK para atualizar no Authentication)"),await r(t.id,I),g("Dados do usurio atualizados com sucesso!"),setTimeout(()=>{n==null||n(),e()},2e3)}catch(I){console.error("Erro ao atualizar usurio:",I),h("Erro ao atualizar usurio: "+I.message)}finally{u(!1)}};return l.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:e}),l.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all duration-300 scale-100",children:[l.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:l.jsx(IC,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Editar Usurio"}),l.jsx("p",{className:"text-slate-500 text-sm",children:"Atualize os dados do usurio"})]})]}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",disabled:o,children:l.jsx(Vr,{size:20})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[c&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(ss,{size:16}),l.jsx("span",{className:"font-bold",children:"Erro"})]}),c]}),m&&l.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Gi,{size:16}),l.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),m]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome Completo"}),l.jsxs("div",{className:"relative",children:[l.jsx(Gu,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.displayName,onChange:I=>i({...s,displayName:I.target.value}),placeholder:"Joo Silva",disabled:o})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mp,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"email",className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed",value:t.email,disabled:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cargo"}),l.jsxs("div",{className:"relative",children:[l.jsx(jc,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("select",{className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:s.role,onChange:I=>i({...s,role:I.target.value}),disabled:o,children:Object.entries(Qu).map(([I,b])=>l.jsx("option",{value:I,children:b},I))})]})]}),l.jsxs("div",{className:"pt-4 flex gap-3",children:[l.jsx("button",{onClick:e,disabled:o,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:U,disabled:o,className:"flex-1 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Kh,{size:16}),"Salvar Alteraes"]})})]})]})]})]})},jC=({user:t,onClose:e,onSuccess:n})=>{const{deleteUserAccount:r}=no(),[s,i]=q.useState(!1),[o,u]=q.useState(""),[c,h]=q.useState(""),m=async()=>{i(!0),u("");try{await r(t.id),h("Usurio deletado com sucesso!"),setTimeout(()=>{n==null||n(),e()},2e3)}catch(g){console.error("Erro ao deletar usurio:",g),u("Erro ao deletar usurio: "+g.message)}finally{i(!1)}};return l.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:e}),l.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[l.jsx("div",{className:"p-6 border-b",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-red-100 p-2 rounded-lg text-red-600",children:l.jsx(Na,{size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Deletar Usurio"}),l.jsx("p",{className:"text-slate-500 text-sm",children:"Esta ao no pode ser desfeita"})]})]})}),l.jsxs("div",{className:"p-6 space-y-4",children:[o&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(ss,{size:16}),l.jsx("span",{className:"font-bold",children:"Erro"})]}),o]}),c&&l.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Gi,{size:16}),l.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),c]}),l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("p",{className:"text-red-800 font-bold mb-2",children:" Ateno!"}),l.jsxs("p",{className:"text-red-700 text-sm",children:["Voc est prestes a deletar o usurio ",l.jsx("span",{className:"font-bold",children:t.displayName})," (",t.email,"). Esta ao remover permanentemente o usurio do sistema."]}),l.jsxs("p",{className:"text-red-700 text-sm mt-2",children:[l.jsx("span",{className:"font-bold",children:"Nota:"})," A conta do Firebase Authentication no ser deletada automaticamente. O usurio ainda poder fazer login, mas no ter acesso ao sistema."]})]}),l.jsxs("div",{className:"pt-4 flex gap-3",children:[l.jsx("button",{onClick:e,disabled:s,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:m,disabled:s||c,className:"flex-1 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deletando..."]}):c?l.jsxs(l.Fragment,{children:[l.jsx(Gi,{size:16}),"Deletado!"]}):l.jsxs(l.Fragment,{children:[l.jsx(Na,{size:16}),"Deletar Usurio"]})})]})]})]})]})};function DC(){const{userData:t,hasPermission:e,getAllUsers:n}=no(),[r,s]=q.useState([]),[i,o]=q.useState(!0),[u,c]=q.useState(null),[h,m]=q.useState(""),[g,_]=q.useState({}),[A,R]=q.useState(!1),[L,U]=q.useState(!1),[I,b]=q.useState(!1),[k,M]=q.useState(null),[F,V]=q.useState(0);q.useEffect(()=>{e("canManageUsers")&&x()},[e,F]);const x=async()=>{o(!0),c(null);try{const N=await n();s(N)}catch(N){console.error("Erro ao carregar usurios:",N),c("Falha ao carregar a lista de usurios. Verifique a conexo e tente novamente.")}finally{o(!1)}},v=N=>{M(N),U(!0)},w=N=>{M(N),b(!0)},E=N=>{_(S=>({...S,[N]:!S[N]}))},C=r.filter(N=>{var S,Ie,Xe;return((S=N.email)==null?void 0:S.toLowerCase().includes(h.toLowerCase()))||((Ie=N.displayName)==null?void 0:Ie.toLowerCase().includes(h.toLowerCase()))||((Xe=N.role)==null?void 0:Xe.toLowerCase().includes(h.toLowerCase()))});return e("canManageUsers")?l.jsxs("div",{className:"p-6 space-y-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-slate-900",children:"Gerenciamento de Usurios"}),l.jsx("p",{className:"text-slate-500",children:"Controle de cargos e permisses do sistema"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Gh,{className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"text",placeholder:"Buscar usurios...",className:"pl-11 pr-4 py-3 rounded-xl border border-slate-200 w-64 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:h,onChange:N=>m(N.target.value)})]}),l.jsxs("button",{onClick:()=>V(N=>N+1),className:"bg-slate-200 text-slate-700 px-4 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-300 transition-colors",children:[l.jsx(bw,{size:18}),"Atualizar"]}),l.jsxs("button",{onClick:()=>R(!0),className:"bg-green-600 text-white px-4 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-green-700 transition-colors",children:[l.jsx(Or,{size:18}),"Novo Usurio"]})]})]}),u&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-4 border border-red-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(ss,{size:20}),l.jsx("span",{className:"font-bold",children:"Erro"})]}),u,l.jsx("button",{onClick:x,className:"mt-2 text-sm underline font-bold",children:"Tentar novamente"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Total"}),l.jsx("div",{className:"text-2xl font-black text-slate-900",children:r.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Administradores"}),l.jsx("div",{className:"text-2xl font-black text-red-600",children:r.filter(N=>N.role==="admin").length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Clientes"}),l.jsx("div",{className:"text-2xl font-black text-purple-600",children:r.filter(N=>N.role==="client").length})]})]}),l.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-slate-50 border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Usurio"}),l.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Cargo"}),l.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Permisses"}),l.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Aes"})]})}),l.jsx("tbody",{children:i?l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"p-8 text-center",children:l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"})})}):C.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"p-8 text-center text-slate-400",children:"Nenhum usurio encontrado"})}):C.map(N=>l.jsxs(ny.Fragment,{children:[l.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:N.displayName}),l.jsx("div",{className:"text-sm text-slate-500",children:N.email})]}),l.jsx("td",{className:"p-4",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${q0[N.role]||"bg-gray-100 text-gray-800"}`,children:Qu[N.role]||N.role})}),l.jsx("td",{className:"p-4",children:l.jsxs("button",{onClick:()=>E(N.id),className:"text-blue-600 hover:text-blue-800 text-sm font-bold flex items-center gap-1 transition-colors",children:[g[N.id]?"Ocultar":"Ver"," Permisses",g[N.id]?l.jsx(Ew,{size:14}):l.jsx(ww,{size:14})]})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>v(N),className:"bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-blue-700 transition-colors",children:l.jsx(bC,{size:14})}),l.jsx("button",{onClick:()=>w(N),className:"bg-red-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-red-700 transition-colors",disabled:N.id===(t==null?void 0:t.uid),children:l.jsx(Na,{size:14})})]})})]}),g[N.id]&&l.jsx("tr",{className:"bg-slate-50",children:l.jsx("td",{colSpan:"4",className:"p-4",children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:N.permissions&&Object.entries(N.permissions).map(([S,Ie])=>l.jsxs("div",{className:"flex items-center gap-2",children:[Ie?l.jsx(Gi,{size:16,className:"text-green-500"}):l.jsx(AC,{size:16,className:"text-red-300"}),l.jsx("span",{className:"text-sm text-slate-700 capitalize",children:S.replace(/([A-Z])/g," $1").toLowerCase()})]},S))})})})]},N.id))})]})})}),l.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2",children:[l.jsx(jc,{size:20})," Legenda de Cargos"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(Qu).map(([N,S])=>l.jsxs("div",{className:"bg-white p-4 rounded-xl border",children:[l.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold inline-block mb-2 ${q0[N]}`,children:S}),l.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[N==="admin"&&l.jsx("li",{children:" Acesso total ao sistema"}),N==="client"&&l.jsx("li",{children:" Dados prprios apenas"})]})]},N))})]}),A&&l.jsx(PC,{onClose:()=>R(!1),onSuccess:()=>{x(),V(N=>N+1)}}),L&&k&&l.jsx(RC,{user:k,onClose:()=>{U(!1),M(null)},onSuccess:()=>{x(),V(N=>N+1)}}),I&&k&&l.jsx(jC,{user:k,onClose:()=>{b(!1),M(null)},onSuccess:()=>{x(),V(N=>N+1)}})]}):l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(ss,{className:"mx-auto text-amber-500 mb-4",size:48}),l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Acesso Restrito"}),l.jsx("p",{className:"text-slate-600 mt-2",children:"Voc no tem permisso para gerenciar usurios."})]})}function LC(){const{login:t}=no(),[e,n]=q.useState(""),[r,s]=q.useState(""),[i,o]=q.useState(""),[u,c]=q.useState(!1),h=async m=>{m.preventDefault(),o(""),c(!0);try{await t(e,r)}catch(g){switch(console.error("Erro de login:",g),g.code){case"auth/user-not-found":case"auth/wrong-password":o("Email ou senha incorretos.");break;case"auth/invalid-email":o("Email invlido.");break;case"auth/too-many-requests":o("Muitas tentativas. Tente novamente mais tarde.");break;case"auth/user-disabled":o("Esta conta foi desativada.");break;default:o("Erro ao fazer login. Tente novamente.")}}finally{c(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-4",children:l.jsx(z0,{className:"text-white",size:28})}),l.jsx("h1",{className:"text-2xl font-black text-slate-900",children:"ALFA"}),l.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Tecnologia Hospitalar"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[i&&l.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[l.jsx(ss,{size:18}),l.jsx("span",{className:"text-sm font-medium",children:i})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mp,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"email",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"seu@email.com",value:e,onChange:m=>n(m.target.value),disabled:u})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Senha"}),l.jsxs("div",{className:"relative",children:[l.jsx(z0,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"",value:r,onChange:m=>s(m.target.value),disabled:u})]})]}),l.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?l.jsxs(l.Fragment,{children:[l.jsx(li,{className:"animate-spin",size:18}),"Entrando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(xC,{size:18}),"Entrar no Sistema"]})})]}),l.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:l.jsx("p",{className:"text-slate-500 text-sm",children:"Entre em contato com o administrador para criar uma conta."})})]})})}const Sr="alfa-tecnologia-hospitalar-prod",OC=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],VC=({data:t,colors:e,onClick:n})=>{const r=t.reduce((i,o)=>i+o.value,0);let s=0;return r===0?l.jsx("div",{className:"text-gray-400 text-xs text-center py-10",children:"Sem dados"}):l.jsxs("div",{className:"relative w-48 h-48 mx-auto group cursor-pointer",children:[l.jsxs("svg",{viewBox:"0 0 100 100",className:"transform -rotate-90 w-full h-full",children:[t.map((i,o)=>{const u=i.value/r*360,c=u>180?1:0,h=50+40*Math.cos(s*Math.PI/180),m=50+40*Math.sin(s*Math.PI/180),g=50+40*Math.cos((s+u)*Math.PI/180),_=50+40*Math.sin((s+u)*Math.PI/180),A=r===i.value?"M 50 10 a 40 40 0 1 1 0 80 a 40 40 0 1 1 0 -80":`M 50 50 L ${h} ${m} A 40 40 0 ${c} 1 ${g} ${_} Z`;return s+=u,l.jsx("path",{d:A,fill:e[o%e.length],stroke:"white",strokeWidth:"2",className:"hover:opacity-80 transition-opacity",onClick:R=>{R.stopPropagation(),n(i.label)}},o)}),l.jsx("circle",{cx:"50",cy:"50",r:"25",fill:"white",className:"pointer-events-none"})]}),l.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col pointer-events-none",children:[l.jsx("span",{className:"text-3xl font-black text-slate-800",children:r}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Total"})]}),l.jsx("div",{className:"absolute -bottom-6 left-0 right-0 text-center opacity-0 group-hover:opacity-100 transition-opacity text-[10px] text-blue-500 font-bold bg-white/90 py-1 rounded-full pointer-events-none",children:"Clique para filtrar"})]})},H0=({data:t,maxVal:e,colorClass:n,onClick:r,showValues:s=!0})=>l.jsx("div",{className:"space-y-3",children:t.map((i,o)=>l.jsxs("div",{className:"space-y-1 cursor-pointer group hover:bg-slate-50 p-2 rounded-xl transition-colors",onClick:()=>r&&r(i.label),children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-600 group-hover:text-blue-600 transition-colors",children:[l.jsx("span",{className:"truncate pr-2",children:i.label}),l.jsx("span",{className:"whitespace-nowrap",children:s?i.valueFormatted||i.value:""})]}),l.jsx("div",{className:"h-3 w-full bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} group-hover:brightness-90 transition-all`,style:{width:`${e>0?i.value/e*100:0}%`}})})]},o))}),MC=({message:t,type:e="error",onClose:n})=>{const r={error:{bg:"bg-red-500",icon:l.jsx(ss,{size:20}),title:"Ateno!",border:"border-l-4 border-red-600"},success:{bg:"bg-green-500",icon:l.jsx(Wh,{size:20}),title:"Sucesso!",border:"border-l-4 border-green-600"},info:{bg:"bg-blue-500",icon:l.jsx(tu,{size:20}),title:"Informao",border:"border-l-4 border-blue-600"}},{bg:s,icon:i,title:o,border:u}=r[e];return l.jsx("div",{className:"fixed top-6 right-6 z-[100] animate-in slide-in-from-right-8 fade-in duration-300",children:l.jsxs("div",{className:`${s} ${u} text-white px-6 py-4 rounded-r-2xl shadow-2xl flex items-start gap-3 min-w-[320px] max-w-[400px]`,children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-sm mb-1",children:o}),l.jsx("div",{className:"text-sm opacity-90 whitespace-pre-line",children:t})]}),l.jsx("button",{onClick:n,className:"ml-2 opacity-70 hover:opacity-100 transition-opacity flex-shrink-0",children:l.jsx(Vr,{size:16})})]})})},Et=t=>t?typeof t=="number"?t:parseFloat(t.toString().replace(/\./g,"").replace(",","."))||0:0,Nr=({icon:t,label:e,active:n,onClick:r,isSidebarOpen:s})=>l.jsxs("button",{onClick:r,className:`w-full flex items-center gap-4 p-3 rounded-xl transition-colors ${n?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[t,s&&l.jsx("span",{className:"text-sm font-bold tracking-tight",children:e})]});function FC(){const{user:t,userData:e,loading:n,hasPermission:r,logout:s}=no(),[i,o]=q.useState("os"),[u,c]=q.useState(!0),[h,m]=q.useState(!0),[g,_]=q.useState([]),[A,R]=q.useState([]),[L,U]=q.useState([]),[I,b]=q.useState(!0),[k,M]=q.useState(""),[F,V]=q.useState("desc"),[x,v]=q.useState(!1),[w,E]=q.useState(!1),[C,N]=q.useState(!1),[S,Ie]=q.useState(!1),[Xe,ln]=q.useState(!1),[un,K]=q.useState(!1),[re,se]=q.useState(!1),[Se,ye]=q.useState(!1),[Pe,Ot]=q.useState(!1),[Vt,Gt]=q.useState(!1),[cn,cs]=q.useState(!1),[ds,hs]=q.useState(!1),[En,fs]=q.useState(null),[Un,Gs]=q.useState(null),[bn,zn]=q.useState(!1),[He,$n]=q.useState([]),[ps,pr]=q.useState(""),[ro,so]=q.useState(""),[mr,gr]=q.useState(""),[ms,Me]=q.useState(""),[j,ie]=q.useState({client:"",cnpj:"",contactPerson:"",address:"",email:"",billingType:"Avulso",maintenanceVisit:"",item:"",manufacturer:"",model:"",serial:"",defect:"",defectsList:[],solutionType:"Manual",solution:"",manualSolutionsList:[],solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",statusDate:new Date().toISOString().split("T")[0],statusHistory:[],trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:"",osNumber:""}),[ce,We]=q.useState({clientName:"",cnpj:"",address:"",contactPerson:"",email:"",startDate:"",endDate:"",monthlyValue:"",annualValue:"",coveredItems:{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:""}),[Mt,Qt]=q.useState({client:!1,item:!1,defect:!1,solution:!1,notRepairableDetail:!1,solutionsList:!1}),[Qs,Ys]=q.useState({show:!1,message:"",type:"error"}),yr=[{value:"Recebido",label:"Recebido"},{value:"Em inspeo",label:"Inspeo"},{value:"Em oramento",label:"Oramento"},{value:"Aguardando aprovao do oramento",label:"Aprovao"},{value:"Em manuteno",label:"Manuteno"},{value:"Em rota de entrega",label:"Entrega"},{value:"Finalizado",label:"Finalizado"}],Dc=yr.map(p=>p.value),Lc=["Avulso","Cortesia (visita sem custo)","Contrato de manuteno"],Yt=OC[new Date().getMonth()],tt=(p,T="error")=>{Ys({show:!0,message:p,type:T}),setTimeout(()=>{Ys(D=>({...D,show:!1}))},5e3)},kt=p=>h?p.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):"R$ ",gs=()=>{const p=Et(j.costThirdPartyShipping),T=Et(j.costParts),D=Et(j.costClientShipping),G=Et(j.chargedAmount),Y=j.solutionsList.reduce((he,Xt)=>he+Et(Xt.cost),0),ue=p+T+D,X=ue*1.6,W=G-ue;return{totalCost:ue,profit:W,suggestedValue:X,solutionsTotal:Y}},{totalCost:io,profit:Tn,suggestedValue:Bn,solutionsTotal:Wa}=gs(),ys=()=>{const p=[],T={...Mt};return Object.keys(T).forEach(D=>T[D]=!1),j.client.trim()||(p.push(" Cliente  obrigatrio"),T.client=!0),j.item.trim()||(p.push(" Item/Equipamento  obrigatrio"),T.item=!0),(!j.defectsList||j.defectsList.length===0)&&!j.defect.trim()&&(p.push(" Descrio do defeito  obrigatria"),T.defect=!0),j.solutionType==="Manual"&&(!j.manualSolutionsList||j.manualSolutionsList.length===0)&&!j.solution.trim()&&(p.push(" Descrio da soluo  obrigatria no modo manual"),T.solution=!0),j.solutionType==="No passvel de conserto"&&!j.notRepairableDetail&&(p.push(" Selecione uma recomendao para equipamento no reparvel"),T.notRepairableDetail=!0),j.solutionType==="Preenchimento manual, com custo"&&j.solutionsList.length===0&&(p.push(" Adicione pelo menos um item na lista de solues com custo"),T.solutionsList=!0),Qt(T),p.length>0?(tt(`Preencha os campos obrigatrios:
`+p.join(`
`),"error"),!0):!1},Ka=p=>{let T=!1;switch(p){case"client":T=!j.client.trim();break;case"item":T=!j.item.trim();break;case"defect":T=(!j.defectsList||j.defectsList.length===0)&&!j.defect.trim();break;case"solution":T=j.solutionType==="Manual"&&(!j.manualSolutionsList||j.manualSolutionsList.length===0)&&!j.solution.trim();break;case"notRepairableDetail":T=j.solutionType==="No passvel de conserto"&&!j.notRepairableDetail;break;case"solutionsList":T=j.solutionType==="Preenchimento manual, com custo"&&j.solutionsList.length===0;break}Qt(D=>({...D,[p]:T}))},vs=q.useMemo(()=>{const p=new Map;return A.forEach(T=>{T.clientName&&p.set(T.clientName.trim(),{client:T.clientName,cnpj:T.cnpj,contactPerson:T.contactPerson,email:T.email,address:T.address})}),[...g].reverse().forEach(T=>{if(T.client&&!p.has(T.client.trim()))p.set(T.client.trim(),{client:T.client,cnpj:T.cnpj||"",contactPerson:T.contactPerson||"",email:T.email||"",address:T.address||""});else if(T.client&&p.has(T.client.trim())){const D=p.get(T.client.trim());!D.cnpj&&T.cnpj&&(D.cnpj=T.cnpj),!D.address&&T.address&&(D.address=T.address),!D.contactPerson&&T.contactPerson&&(D.contactPerson=T.contactPerson),!D.email&&T.email&&(D.email=T.email)}}),Array.from(p.values()).sort((T,D)=>T.client.localeCompare(D.client))},[g,A]),oo=q.useMemo(()=>{const p=new Set;return g.forEach(T=>{T.defect&&T.defect.length>3&&p.add(T.defect),T.defectsList&&Array.isArray(T.defectsList)&&T.defectsList.forEach(D=>{D&&D.length>2&&p.add(D)})}),[...p].sort()},[g]),ze=q.useMemo(()=>{const p=new Set;return g.forEach(T=>{T.solution&&T.solution.length>3&&p.add(T.solution),T.manualSolutionsList&&Array.isArray(T.manualSolutionsList)&&T.manualSolutionsList.forEach(D=>{D&&D.length>2&&p.add(D)}),T.solutionsList&&Array.isArray(T.solutionsList)&&T.solutionsList.forEach(D=>{D.text&&D.text.length>2&&p.add(D.text)})}),[...p].sort()},[g]),ao=q.useMemo(()=>[...new Set(g.map(p=>p.item).filter(p=>p&&p.length>1))].sort(),[g]),vr=q.useMemo(()=>[...new Set(g.map(p=>p.manufacturer).filter(p=>p&&p.length>1))].sort(),[g]),_r=q.useMemo(()=>[...new Set(g.map(p=>p.model).filter(p=>p&&p.length>1))].sort(),[g]),Ga=q.useMemo(()=>[...new Set(g.map(p=>p.serial).filter(p=>p&&p.length>1))].sort(),[g]),lo=q.useMemo(()=>[...g].sort((p,T)=>{var D,G;return F==="desc"?(D=T.osNumber)==null?void 0:D.localeCompare(p.osNumber):(G=p.osNumber)==null?void 0:G.localeCompare(T.osNumber)}),[g,F]),ct=q.useMemo(()=>{let p=0,T=0,D=0,G={};g.forEach(X=>{const W=Et(X.chargedAmount),he=Et(X.costThirdPartyShipping)+Et(X.costParts)+Et(X.costClientShipping),Xt=W-he;p+=W,T+=he,D+=Xt,W>0&&(G[X.client]=(G[X.client]||0)+W)});const Y=p>0?D/p*100:0,ue=Object.entries(G).map(([X,W])=>({label:X,value:W,valueFormatted:`R$ ${W.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`})).sort((X,W)=>W.value-X.value).slice(0,5);return{totalRevenue:p,totalCosts:T,totalProfit:D,margin:Y,topClients:ue}},[g]),Qa=q.useMemo(()=>{const p=new Set(g.filter(G=>G.billingType==="Contrato de manuteno").map(G=>G.client)),T=new Set(A.map(G=>G.clientName));return[...new Set([...p,...T])].map(G=>{const Y=A.find(X=>X.clientName===G),ue=g.find(X=>X.client===G);return{clientName:G,cnpj:(Y==null?void 0:Y.cnpj)||(ue==null?void 0:ue.cnpj)||"",address:(Y==null?void 0:Y.address)||(ue==null?void 0:ue.address)||"",contactPerson:(Y==null?void 0:Y.contactPerson)||(ue==null?void 0:ue.contactPerson)||"",email:(Y==null?void 0:Y.email)||(ue==null?void 0:ue.email)||"",startDate:(Y==null?void 0:Y.startDate)||"",endDate:(Y==null?void 0:Y.endDate)||"",monthlyValue:(Y==null?void 0:Y.monthlyValue)||"",annualValue:(Y==null?void 0:Y.annualValue)||"",coveredItems:(Y==null?void 0:Y.coveredItems)||{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:(Y==null?void 0:Y.observations)||"",isConfigured:!!Y}}).sort((G,Y)=>G.clientName.localeCompare(Y.clientName))},[g,A]),In=()=>{if(!e)return!1;if(e.role==="admin")return!0;if(e.role==="client")return["os","status","about"].includes(i);const T={os:"canViewOS",status:"canViewOS",financial:"canViewFinancial",contracts:"canViewContracts",inventory:"canViewOS",clients:"canViewAllClients",users:"canManageUsers",about:!0}[i];return T===!0||r(T)};q.useEffect(()=>{if(!t||n)return;const p=O0(Uo(yt,"artifacts",Sr,"public","data","serviceOrders"),D=>{const G=D.docs.map(Y=>({firestoreId:Y.id,...Y.data()}));_(G.sort((Y,ue)=>{var X;return(X=ue.osNumber)==null?void 0:X.localeCompare(Y.osNumber)})),b(!1)},D=>{console.error("Erro ao buscar OS:",D),b(!1)}),T=O0(Uo(yt,"artifacts",Sr,"public","data","contracts"),D=>{R(D.docs.map(G=>G.data()))},D=>{console.error("Erro ao buscar contratos:",D)});return()=>{p(),T()}},[t,n]);const Ft=q.useMemo(()=>{const p=He.length>0?g.filter(W=>He.includes(W.firestoreId)):g,T={};p.forEach(W=>{T[W.status]=(T[W.status]||0)+1});const D=Object.keys(T).map(W=>({label:W,value:T[W]})),G={};p.forEach(W=>{G[W.billingType]=(G[W.billingType]||0)+1});const Y=Object.keys(G).map(W=>({label:W,value:G[W]})).sort((W,he)=>he.value-W.value);let ue=0,X=0;return p.forEach(W=>{ue+=Et(W.costThirdPartyShipping)+Et(W.costParts),X+=Et(W.costClientShipping)}),{count:p.length,statusChartData:D,billingChartData:Y,totalInternalCosts:ue,totalClientFreight:X,isFiltered:He.length>0}},[g,He]),uo=p=>{const T=new Date().getFullYear(),D=p.filter(ue=>{if(!ue.osNumber)return!1;const[X,W]=ue.osNumber.split("/");return W&&parseInt(W)===T});let G=0;D.forEach(ue=>{if(ue.osNumber){const[X]=ue.osNumber.split("/"),W=parseInt(X);W>G&&(G=W)}});let Y;return T===2026?Y=Math.max(G+1,32):Y=G+1,`${String(Y).padStart(4,"0")}/${T}`},qn=(p=null)=>{pr(""),so(""),gr(""),Me(""),Gt(!1),v(!1),E(!1),N(!1),Ie(!1),ln(!1),K(!1),se(!1),Qt({client:!1,item:!1,defect:!1,solution:!1,notRepairableDetail:!1,solutionsList:!1}),p?(fs(p),ie({...p,solutionsList:p.solutionsList||[],defectsList:p.defectsList||(p.defect?[p.defect]:[]),manualSolutionsList:p.manualSolutionsList||(p.solutionType==="Manual"&&p.solution?[p.solution]:[]),statusDate:p.statusDate||new Date().toISOString().split("T")[0],statusHistory:p.statusHistory||[]})):(fs(null),ie({client:"",cnpj:"",contactPerson:"",address:"",email:"",billingType:"Avulso",maintenanceVisit:"",item:"",manufacturer:"",model:"",serial:"",defect:"",defectsList:[],solutionType:"Manual",solution:"",manualSolutionsList:[],solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",statusDate:new Date().toISOString().split("T")[0],statusHistory:[],trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:"",osNumber:uo(g)})),ye(!0)},Xs=p=>{ie(T=>({...T,client:p.client,cnpj:p.cnpj,contactPerson:p.contactPerson,email:p.email,address:p.address})),v(!1)},dn=()=>{if(!mr.trim()){tt("Descrio do defeito  obrigatria","error");return}ie(p=>({...p,defectsList:[...p.defectsList,mr.trim()]})),gr(""),E(!1)},Ya=p=>{ie(T=>({...T,defectsList:T.defectsList.filter((D,G)=>G!==p)}))},co=()=>{if(!ms.trim()){tt("Descrio da soluo  obrigatria","error");return}ie(p=>({...p,manualSolutionsList:[...p.manualSolutionsList,ms.trim()]})),Me(""),N(!1)},ho=p=>{ie(T=>({...T,manualSolutionsList:T.manualSolutionsList.filter((D,G)=>G!==p)}))},fo=()=>{if(!ps.trim()){tt("Descrio do item/servio  obrigatria","error");return}ie(p=>({...p,solutionsList:[...p.solutionsList,{id:Date.now(),text:ps,cost:ro||"0,00"}]})),pr(""),so(""),N(!1)},Xa=p=>{ie(T=>({...T,solutionsList:T.solutionsList.filter(D=>D.id!==p)}))},Js=()=>{const{firestoreId:p,...T}=j;T.defectsList&&T.defectsList.length>0?T.defect=T.defectsList.join(`
`):T.defectsList||(T.defect=T.defect||""),T.solutionType==="Manual"&&T.manualSolutionsList&&T.manualSolutionsList.length>0&&(T.solution=T.manualSolutionsList.join(`
`));let D=T.statusHistory?[...T.statusHistory]:[];const G=T.statusDate||new Date().toISOString().split("T")[0],Y=D.length>0?D[D.length-1]:null;return!Y||Y.status!==T.status?D.push({status:T.status,date:G,timestamp:Date.now()}):D[D.length-1].date=G,T.statusHistory=D,T.statusDate=G,T},Oc=async p=>{if(p&&p.preventDefault(),!ys()){zn(!0);try{const D=Js();En?(await Hu(Zt(yt,"artifacts",Sr,"public","data","serviceOrders",En.firestoreId),D),tt("OS atualizada com sucesso!","success")):(await L0(Uo(yt,"artifacts",Sr,"public","data","serviceOrders"),D),tt("OS criada com sucesso!","success")),ye(!1)}catch(D){console.error(D),tt(`Erro ao salvar: ${D.message}`,"error")}finally{zn(!1)}}},Zs=async()=>{if(!ys()){zn(!0);try{const T=Js();En?await Hu(Zt(yt,"artifacts",Sr,"public","data","serviceOrders",En.firestoreId),T):await L0(Uo(yt,"artifacts",Sr,"public","data","serviceOrders"),T),tt("OS salva e nova em branco criada!","success"),ie({...j,osNumber:uo([...g,j]),item:"",manufacturer:"",model:"",serial:"",defect:"",defectsList:[],solutionType:"Manual",solution:"",manualSolutionsList:[],solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",statusDate:new Date().toISOString().split("T")[0],statusHistory:[],trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:""}),fs(null)}catch(T){console.error(T),tt(`Erro ao salvar: ${T.message}`,"error")}finally{zn(!1)}}},Ja=p=>{if(j.status===p){if(j.statusDate){const T=j.statusDate.split("-");return`${T[2]}/${T[1]}`}return"Hoje"}if(j.statusHistory&&j.statusHistory.length>0){const T=[...j.statusHistory].reverse().find(D=>D.status===p);if(T&&T.date){const D=T.date.split("-");return`${D[2]}/${D[1]}`}}return null},xr=yr.findIndex(p=>p.value===j.status),_s=xr===-1?0:xr/(yr.length-1)*100,Sn=p=>{const T=Js(),D={},G=`${T.client}-${T.cnpj||"no-cnpj"}-${T.billingType}-${T.maintenanceVisit||"no-visit"}`;D[G]={header:{client:T.client,cnpj:T.cnpj,contactPerson:T.contactPerson,email:T.email,address:T.address,billingType:T.billingType,maintenanceVisit:T.maintenanceVisit},items:[T]};const Y=window.open("","_blank"),X=`<html><head><title>${p==="internal"?"Relatrio INTERNO - Alfa Tecnologia":"Relatrio de Atendimento - Alfa Tecnologia"}</title><style>
@media print{@page{margin:1cm}}body{font-family:'Segoe UI',sans-serif;color:#333;line-height:1.4;padding:0;margin:0}
.report-page{page-break-after:always;padding:20px;position:relative;min-height:27cm;border-bottom:1px solid #eee}
.header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #1a56db;padding-bottom:15px;margin-bottom:20px}
.logo-area{color:#1a56db}.logo-text{font-size:28px;font-weight:900;margin:0}
.logo-sub{font-size:10px;letter-spacing:2px;text-transform:uppercase;margin:0}
.report-info{text-align:right}.report-title{font-size:16px;font-weight:900;color:#1a56db;text-transform:uppercase}
.internal-badge{background:#b91c1c;color:white;padding:2px 6px;font-size:10px;border-radius:4px;font-weight:bold;margin-bottom:4px;display:inline-block}
.section{margin-bottom:25px}.section-title{background:#f8fafc;padding:6px 12px;font-size:11px;font-weight:900;text-transform:uppercase;border-left:5px solid #1a56db;margin-bottom:12px;color:#1e40af}
.client-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;font-size:12px;margin-bottom:20px}
.items-table{width:100%;border-collapse:collapse;margin-top:10px}
.items-table th{background:#f8fafc;text-align:left;padding:10px;font-size:10px;text-transform:uppercase;color:#64748b;border-bottom:2px solid #e2e8f0}
.items-table td{padding:12px 10px;font-size:11px;border-bottom:1px solid #f1f5f9;vertical-align:top}
.os-tag{font-weight:900;color:#1a56db;display:block;margin-bottom:4px}
.cost-list-table{width:100%;margin-top:8px;border:1px solid #f1f5f9;font-size:10px;border-radius:4px}
.cost-list-table th{background:#f8fafc;padding:4px 8px;font-size:9px}
.cost-list-table td{padding:4px 8px;border-bottom:1px solid #f8fafc}
.total-row{background:#f1f5f9;font-weight:bold}
.internal-costs{margin-top:8px;padding:8px;background:#fff1f2;border:1px dashed #fda4af;border-radius:4px;font-size:10px;color:#9f1239}
.signature-area{display:flex;justify-content:space-around;margin-top:80px}
.signature-box{border-top:1px solid #333;width:250px;text-align:center;padding-top:8px;font-size:11px;font-weight:600}</style></head><body>${Object.values(D).map(W=>`
        <div class="report-page">
            <div class="header">
                <div class="logo-area">
                    <h1 class="logo-text">ALFA</h1>
                    <p class="logo-sub">TECNOLOGIA HOSPITALAR</p>
                </div>
                <div class="report-info">
                    ${p==="internal"?'<div class="internal-badge">USO INTERNO - CONFIDENCIAL</div>':""}
                    <div class="report-title">${p==="internal"?"Relatrio Gerencial":"Relatrio de Atendimento"}</div>
                    <div style="font-size:10px;">Data: ${new Date().toLocaleDateString()}</div>
                </div>
            </div>
            <div class="section">
                <div class="section-title">Dados do Cliente</div>
                <div class="client-grid">
                    <div><strong>Cliente:</strong><br>${W.header.client}</div>
                    <div><strong>CNPJ:</strong><br>${W.header.cnpj||"---"}</div>
                    <div><strong>Atendimento:</strong><br>${W.header.billingType} ${W.header.maintenanceVisit?"- "+W.header.maintenanceVisit:""}</div>
                    <div><strong>Contato:</strong><br>${W.header.contactPerson||"---"}</div>
                    <div><strong>E-mail:</strong><br>${W.header.email||"---"}</div>
                    <div><strong>Endereo:</strong><br>${W.header.address||"---"}</div>
                </div>
            </div>
            <div class="section">
                <div class="section-title">Lista de Equipamentos</div>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th width="15%">OS</th>
                            <th width="30%">Equipamento</th>
                            <th width="55%">Laudo Tcnico</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${W.items.map(he=>{const Xt=he.solutionsList||[],xe=Xt.reduce((Jt,xs)=>Jt+parseFloat(xs.cost.replace(".","").replace(",",".")||0),0),hn=p==="internal"?`<div class="internal-costs">
                                    <strong>CONTROLE FINANCEIRO:</strong><br/>
                                    Cobrado: <b>R$ ${he.chargedAmount||"0,00"}</b> (${he.paymentCondition} ${he.installments?he.installments:""})<br/>
                                    Custos Operacionais: Frete Terceiro R$ ${he.costThirdPartyShipping||"0,00"} | Peas R$ ${he.costParts||"0,00"} | Frete Cliente R$ ${he.costClientShipping||"0,00"}
                                </div>`:"";return`<tr>
                                <td>
                                    <span class="os-tag">${he.osNumber}</span>
                                    <small>${he.status}</small>
                                </td>
                                <td>
                                    <strong>${he.item}</strong><br>
                                    <div style="font-size:9px;color:#666;margin-bottom:2px;">${he.manufacturer||""} ${he.model||""}</div>
                                    <small>NS: ${he.serial||"N/D"}</small>
                                </td>
                                <td>
                                    <div><strong>Defeito:</strong> ${he.defect||"N/A"}</div>
                                    <div><strong>Soluo:</strong> ${he.solutionType==="No passvel de conserto"?`NO PASSVEL (${he.notRepairableDetail})`:he.solutionType==="Preenchimento manual, com custo"?"Detalhamento abaixo:":he.solution||"Em anlise..."}</div>
                                    ${he.solutionType==="Preenchimento manual, com custo"&&Xt.length>0?`<table class="cost-list-table">
                                        <thead>
                                            <tr>
                                                <th style="text-align:left">Item / Servio</th>
                                                <th style="text-align:right">Valor</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${Xt.map(Jt=>`<tr><td>${Jt.text}</td><td style="text-align:right">R$ ${Jt.cost}</td></tr>`).join("")}
                                            <tr class="total-row">
                                                <td>TOTAL</td>
                                                <td style="text-align:right">R$ ${xe.toLocaleString("pt-BR",{minimumFractionDigits:2})}</td>
                                            </tr>
                                        </tbody>
                                    </table>`:""}
                                    ${hn}
                                </td>
                            </tr>`}).join("")}
                    </tbody>
                </table>
            </div>
            <div class="signature-area">
                <div class="signature-box">Tcnico Responsvel</div>
                <div class="signature-box">Cliente / Recebedor</div>
            </div>
        </div>`).join("")}<script>window.onload=function(){window.print();window.close()}<\/script></body></html>`;Y.document.write(X),Y.document.close()},po=()=>{We({clientName:"",cnpj:"",address:"",contactPerson:"",email:"",startDate:"",endDate:"",monthlyValue:"",annualValue:"",coveredItems:{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:""}),hs(!0),cs(!0)},Vc=p=>{We(p),hs(!1),cs(!0)},Za=async p=>{if(p.preventDefault(),!ce.clientName.trim()){tt("Nome do cliente  obrigatrio","error");return}zn(!0);try{const T=ce.clientName.replace(/\s+/g,"_").toLowerCase();await Hh(Zt(yt,"artifacts",Sr,"public","data","contracts",T),ce),tt("Contrato salvo com sucesso!","success"),cs(!1)}catch(T){console.error("Erro ao salvar contrato",T),tt("Erro ao salvar contrato: "+T.message,"error")}finally{zn(!1)}},el=p=>{Gs(p),Ot(!0)},tl=async()=>{if(Un)try{await gw(Zt(yt,"artifacts",Sr,"public","data","serviceOrders",Un.firestoreId)),tt("OS excluda com sucesso!","success"),Ot(!1),Gs(null)}catch(p){tt("Erro ao excluir: "+p.message,"error")}},ei=p=>{$n(g.filter(T=>T.status===p).map(T=>T.firestoreId))},mo=p=>{$n(g.filter(T=>T.billingType===p).map(T=>T.firestoreId))},nl=async()=>{try{localStorage.removeItem("adminRestoreToken"),localStorage.removeItem("adminEmail"),await s(),window.location.href="/",setTimeout(()=>{window.location.reload()},100)}catch(p){console.error("Erro ao fazer logout:",p),window.location.reload()}},go=p=>{const T=g.filter(X=>He.includes(X.firestoreId));if(T.length===0)return;const D={};T.forEach(X=>{const W=`${X.client}-${X.cnpj||"no-cnpj"}-${X.billingType}-${X.maintenanceVisit||"no-visit"}`;D[W]||(D[W]={header:{client:X.client,cnpj:X.cnpj,contactPerson:X.contactPerson,email:X.email,address:X.address,billingType:X.billingType,maintenanceVisit:X.maintenanceVisit},items:[]}),D[W].items.push(X)});const G=window.open("","_blank"),ue=`<html><head><title>${p==="internal"?"Relatrio INTERNO - Alfa Tecnologia":"Relatrio de Atendimento - Alfa Tecnologia"}</title><style>
@media print{@page{margin:1cm}}body{font-family:'Segoe UI',sans-serif;color:#333;line-height:1.4;padding:0;margin:0}
.report-page{page-break-after:always;padding:20px;position:relative;min-height:27cm;border-bottom:1px solid #eee}
.header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #1a56db;padding-bottom:15px;margin-bottom:20px}
.logo-area{color:#1a56db}.logo-text{font-size:28px;font-weight:900;margin:0}
.logo-sub{font-size:10px;letter-spacing:2px;text-transform:uppercase;margin:0}
.report-info{text-align:right}.report-title{font-size:16px;font-weight:900;color:#1a56db;text-transform:uppercase}
.internal-badge{background:#b91c1c;color:white;padding:2px 6px;font-size:10px;border-radius:4px;font-weight:bold;margin-bottom:4px;display:inline-block}
.section{margin-bottom:25px}.section-title{background:#f8fafc;padding:6px 12px;font-size:11px;font-weight:900;text-transform:uppercase;border-left:5px solid #1a56db;margin-bottom:12px;color:#1e40af}
.client-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;font-size:12px;margin-bottom:20px}
.items-table{width:100%;border-collapse:collapse;margin-top:10px}
.items-table th{background:#f8fafc;text-align:left;padding:10px;font-size:10px;text-transform:uppercase;color:#64748b;border-bottom:2px solid #e2e8f0}
.items-table td{padding:12px 10px;font-size:11px;border-bottom:1px solid #f1f5f9;vertical-align:top}
.os-tag{font-weight:900;color:#1a56db;display:block;margin-bottom:4px}
.cost-list-table{width:100%;margin-top:8px;border:1px solid #f1f5f9;font-size:10px;border-radius:4px}
.cost-list-table th{background:#f8fafc;padding:4px 8px;font-size:9px}
.cost-list-table td{padding:4px 8px;border-bottom:1px solid #f8fafc}
.total-row{background:#f1f5f9;font-weight:bold}
.internal-costs{margin-top:8px;padding:8px;background:#fff1f2;border:1px dashed #fda4af;border-radius:4px;font-size:10px;color:#9f1239}
.signature-area{display:flex;justify-content:space-around;margin-top:80px}
.signature-box{border-top:1px solid #333;width:250px;text-align:center;padding-top:8px;font-size:11px;font-weight:600}</style></head><body>${Object.values(D).map(X=>`
        <div class="report-page">
            <div class="header">
                <div class="logo-area">
                    <h1 class="logo-text">ALFA</h1>
                    <p class="logo-sub">TECNOLOGIA HOSPITALAR</p>
                </div>
                <div class="report-info">
                    ${p==="internal"?'<div class="internal-badge">USO INTERNO - CONFIDENCIAL</div>':""}
                    <div class="report-title">${p==="internal"?"Relatrio Gerencial":"Relatrio de Atendimento"}</div>
                    <div style="font-size:10px;">Data: ${new Date().toLocaleDateString()}</div>
                </div>
            </div>
            <div class="section">
                <div class="section-title">Dados do Cliente</div>
                <div class="client-grid">
                    <div><strong>Cliente:</strong><br>${X.header.client}</div>
                    <div><strong>CNPJ:</strong><br>${X.header.cnpj||"---"}</div>
                    <div><strong>Atendimento:</strong><br>${X.header.billingType} ${X.header.maintenanceVisit?"- "+X.header.maintenanceVisit:""}</div>
                    <div><strong>Contato:</strong><br>${X.header.contactPerson||"---"}</div>
                    <div><strong>E-mail:</strong><br>${X.header.email||"---"}</div>
                    <div><strong>Endereo:</strong><br>${X.header.address||"---"}</div>
                </div>
            </div>
            <div class="section">
                <div class="section-title">Lista de Equipamentos</div>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th width="15%">OS</th>
                            <th width="30%">Equipamento</th>
                            <th width="55%">Laudo Tcnico</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${X.items.map(W=>{const he=W.solutionsList||[],Xt=he.reduce((hn,Jt)=>hn+parseFloat(Jt.cost.replace(".","").replace(",",".")||0),0),xe=p==="internal"?`<div class="internal-costs">
                                    <strong>CONTROLE FINANCEIRO:</strong><br/>
                                    Cobrado: <b>R$ ${W.chargedAmount||"0,00"}</b> (${W.paymentCondition} ${W.installments?W.installments:""})<br/>
                                    Custos Operacionais: Frete Terceiro R$ ${W.costThirdPartyShipping||"0,00"} | Peas R$ ${W.costParts||"0,00"} | Frete Cliente R$ ${W.costClientShipping||"0,00"}
                                </div>`:"";return`<tr>
                                <td>
                                    <span class="os-tag">${W.osNumber}</span>
                                    <small>${W.status}</small>
                                </td>
                                <td>
                                    <strong>${W.item}</strong><br>
                                    <div style="font-size:9px;color:#666;margin-bottom:2px;">${W.manufacturer||""} ${W.model||""}</div>
                                    <small>NS: ${W.serial||"N/D"}</small>
                                </td>
                                <td>
                                    <div><strong>Defeito:</strong> ${W.defect||"N/A"}</div>
                                    <div><strong>Soluo:</strong> ${W.solutionType==="No passvel de conserto"?`NO PASSVEL (${W.notRepairableDetail})`:W.solutionType==="Preenchimento manual, com custo"?"Detalhamento abaixo:":W.solution||"Em anlise..."}</div>
                                    ${W.solutionType==="Preenchimento manual, com custo"&&he.length>0?`<table class="cost-list-table">
                                        <thead>
                                            <tr>
                                                <th style="text-align:left">Item / Servio</th>
                                                <th style="text-align:right">Valor</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${he.map(hn=>`<tr><td>${hn.text}</td><td style="text-align:right">R$ ${hn.cost}</td></tr>`).join("")}
                                            <tr class="total-row">
                                                <td>TOTAL</td>
                                                <td style="text-align:right">R$ ${Xt.toLocaleString("pt-BR",{minimumFractionDigits:2})}</td>
                                            </tr>
                                        </tbody>
                                    </table>`:""}
                                    ${xe}
                                </td>
                            </tr>`}).join("")}
                    </tbody>
                </table>
            </div>
            <div class="signature-area">
                <div class="signature-box">Tcnico Responsvel</div>
                <div class="signature-box">Cliente / Recebedor</div>
            </div>
        </div>`).join("")}<script>window.onload=function(){window.print();window.close()}<\/script></body></html>`;G.document.write(ue),G.document.close()};return n?l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(li,{className:"animate-spin mx-auto text-blue-600 mb-4",size:40}),l.jsx("p",{className:"text-slate-600 font-medium",children:"Verificando autenticao..."})]})}):t?In()?l.jsxs("div",{className:"flex min-h-screen bg-slate-50 font-sans overflow-hidden",children:[l.jsxs("aside",{className:`${u?"w-64":"w-20"} bg-slate-900 text-white transition-all duration-300 flex flex-col fixed h-full z-30 shadow-2xl`,children:[l.jsxs("div",{className:"p-6 flex items-center justify-between border-b border-slate-800",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white shadow-lg",children:l.jsx(vC,{size:20})}),u&&l.jsx("span",{className:"font-black tracking-tighter text-lg",children:"ALFA"})]}),u&&l.jsx("button",{onClick:()=>m(!h),className:"text-slate-400 hover:text-white transition-colors",title:h?"Ocultar Valores":"Mostrar Valores",children:h?l.jsx(Ku,{size:18}):l.jsx(Wu,{size:18})})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[l.jsx(Nr,{icon:l.jsx(_C,{size:20}),label:"Painel de OS",active:i==="os",onClick:()=>o("os"),isSidebarOpen:u}),l.jsx(Nr,{icon:l.jsx(B0,{size:20}),label:"Painel de Status",active:i==="status",onClick:()=>o("status"),isSidebarOpen:u}),l.jsx(Nr,{icon:l.jsx(M0,{size:20}),label:"Financeiro",active:i==="financial",onClick:()=>o("financial"),isSidebarOpen:u}),l.jsx(Nr,{icon:l.jsx(F0,{size:20}),label:"Contratos",active:i==="contracts",onClick:()=>o("contracts"),isSidebarOpen:u}),l.jsx(Nr,{icon:l.jsx(V0,{size:20}),label:"Inventrio",active:i==="inventory",onClick:()=>o("inventory"),isSidebarOpen:u}),l.jsx(Nr,{icon:l.jsx(kd,{size:20}),label:"Clientes",active:i==="clients",onClick:()=>o("clients"),isSidebarOpen:u}),r("canManageUsers")&&l.jsx(Nr,{icon:l.jsx(jc,{size:20}),label:"Usurios",active:i==="users",onClick:()=>o("users"),isSidebarOpen:u}),l.jsx("div",{className:"pt-4 border-t border-slate-800 mt-4",children:l.jsx(Nr,{icon:l.jsx(tu,{size:20}),label:"Sobre",active:i==="about",onClick:()=>o("about"),isSidebarOpen:u})})]}),l.jsxs("div",{className:"flex flex-col border-t border-slate-800",children:[!u&&l.jsx("button",{onClick:()=>m(!h),className:"p-6 hover:bg-slate-800 flex justify-center text-slate-400 hover:text-white",title:"Ocultar/Mostrar Valores",children:h?l.jsx(Ku,{size:20}):l.jsx(Wu,{size:20})}),l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsx("button",{onClick:()=>c(!u),className:"text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-slate-800",title:u?"Recolher Sidebar":"Expandir Sidebar",children:l.jsx(yC,{className:`transition-transform duration-300 ${u?"rotate-180":""}`,size:20})}),l.jsx("button",{onClick:nl,className:"text-red-400 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-slate-800",title:"Sair",children:l.jsx(wC,{size:20})})]})]})]}),l.jsxs("main",{className:`flex-1 transition-all duration-300 ${u?"ml-64":"ml-20"} p-4 md:p-8 overflow-y-auto h-screen`,children:[i==="os"&&In()&&l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Gesto de OS"}),l.jsx("p",{className:"text-slate-500 font-medium",children:"Fluxo operacional hospitalar"})]}),l.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[He.length>0?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>go("client"),className:"flex-1 md:flex-none bg-indigo-600 text-white px-6 py-4 rounded-[1.5rem] font-black flex items-center justify-center gap-2 shadow-xl hover:bg-indigo-700 transition-colors",children:[l.jsx(Sd,{size:20})," Imprimir Cliente (",He.length,")"]}),l.jsxs("button",{onClick:()=>go("internal"),className:"flex-1 md:flex-none bg-slate-800 text-white px-6 py-4 rounded-[1.5rem] font-black flex items-center justify-center gap-2 shadow-xl hover:bg-slate-900 transition-colors",children:[l.jsx(Nd,{size:20})," Imprimir Interno"]})]}):l.jsxs("div",{className:"bg-indigo-50 text-indigo-400 px-6 py-4 rounded-[1.5rem] font-bold text-sm flex items-center gap-2 border border-indigo-100",children:[l.jsx(Sd,{size:20,className:"opacity-50"})," Selecione OS para imprimir"]}),r("canEditOS")&&l.jsxs("button",{onClick:()=>qn(),className:"flex-1 md:flex-none bg-blue-600 text-white px-8 py-4 rounded-[1.5rem] font-black flex items-center justify-center gap-3 shadow-2xl shadow-blue-200 hover:bg-blue-700 transition-colors ml-2",children:[l.jsx(Or,{size:24})," Abrir Nova OS"]})]})]}),l.jsxs("div",{className:"relative group z-20 flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Gh,{className:"absolute left-5 top-5 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:24}),l.jsx("input",{className:"w-full pl-14 pr-6 py-5 rounded-[1.5rem] border-none shadow-xl shadow-slate-200/50 focus:ring-4 focus:ring-blue-500/10 text-lg font-medium outline-none bg-white relative z-10",placeholder:"Pesquise por cliente, OS ou equipamento...",value:k,onChange:p=>M(p.target.value)}),k&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-top-2 z-50",children:[g.filter(p=>{var T,D,G;return((T=p.client)==null?void 0:T.toLowerCase().includes(k.toLowerCase()))||((D=p.osNumber)==null?void 0:D.includes(k))||((G=p.item)==null?void 0:G.toLowerCase().includes(k.toLowerCase()))}).slice(0,5).map(p=>l.jsxs("div",{onClick:()=>{qn(p),M("")},className:"p-4 border-b border-slate-50 hover:bg-blue-50 cursor-pointer flex justify-between items-center group/item transition-colors",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-bold text-slate-800 flex items-center gap-2",children:[p.client,l.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 rounded-full uppercase",children:p.status})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[l.jsx("span",{className:"font-mono text-blue-600 font-bold",children:p.osNumber})," - ",p.item]})]}),l.jsxs("div",{className:"text-xs font-bold text-blue-600 opacity-0 group-hover/item:opacity-100 flex items-center gap-1 transition-all",children:["Abrir ",l.jsx(jl,{size:14})]})]},p.firestoreId)),g.filter(p=>{var T,D,G;return((T=p.client)==null?void 0:T.toLowerCase().includes(k.toLowerCase()))||((D=p.osNumber)==null?void 0:D.includes(k))||((G=p.item)==null?void 0:G.toLowerCase().includes(k.toLowerCase()))}).length===0&&l.jsx("div",{className:"p-6 text-center text-slate-400 text-sm font-medium",children:"Nenhum resultado encontrado."})]})]}),l.jsx("button",{onClick:()=>V(p=>p==="desc"?"asc":"desc"),className:"bg-white p-5 rounded-[1.5rem] shadow-xl shadow-slate-200/50 border-none hover:bg-slate-50 transition-colors text-slate-600",title:F==="desc"?"Mais Recentes Primeiro":"Mais Antigos Primeiro",children:F==="desc"?l.jsx(uC,{size:24}):l.jsx(cC,{size:24})})]}),l.jsx("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden overflow-x-auto relative z-0",children:l.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[l.jsx("thead",{className:"bg-slate-50/50 border-b text-[10px] font-black uppercase text-slate-400 tracking-widest",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-6 text-center w-12",children:l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600",onChange:p=>$n(p.target.checked?lo.filter(T=>{var D,G;return((D=T.client)==null?void 0:D.toLowerCase().includes(k.toLowerCase()))||((G=T.osNumber)==null?void 0:G.includes(k))}).map(T=>T.firestoreId):[]),checked:He.length>0&&He.length===lo.length})}),l.jsx("th",{className:"px-8 py-6",children:"Identificao"}),l.jsx("th",{className:"px-8 py-6",children:"Equipamento"}),l.jsx("th",{className:"px-8 py-6",children:"Tipo"}),l.jsx("th",{className:"px-8 py-6",children:"Status"}),l.jsx("th",{className:"px-8 py-6 text-right",children:"Aes"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-50",children:I?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"p-20 text-center",children:l.jsx(li,{className:"animate-spin mx-auto text-blue-600",size:32})})}):lo.filter(p=>{var T,D;return((T=p.client)==null?void 0:T.toLowerCase().includes(k.toLowerCase()))||((D=p.osNumber)==null?void 0:D.includes(k))}).map(p=>l.jsxs("tr",{className:`hover:bg-blue-50/30 transition-colors group ${He.includes(p.firestoreId)?"bg-blue-50/50":""}`,children:[l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600",checked:He.includes(p.firestoreId),onChange:()=>$n(T=>T.includes(p.firestoreId)?T.filter(D=>D!==p.firestoreId):[...T,p.firestoreId])})}),l.jsxs("td",{className:"px-8 py-6",children:[l.jsx("div",{className:"font-black text-blue-700 text-lg",children:p.osNumber}),l.jsx("div",{className:"font-bold text-slate-900 text-sm",children:p.client})]}),l.jsxs("td",{className:"px-8 py-6",children:[l.jsx("div",{className:"font-bold text-slate-900 text-sm",children:p.item}),(p.manufacturer||p.model)&&l.jsxs("div",{className:"text-xs text-slate-500 font-medium mb-0.5",children:[p.manufacturer||""," ",p.model||""]}),l.jsxs("div",{className:"text-[10px] text-slate-400 font-mono",children:["NS: ",p.serial||"N/D"]})]}),l.jsx("td",{className:"px-8 py-6",children:l.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-tighter",children:p.billingType})}),l.jsx("td",{className:"px-8 py-6",children:l.jsx("div",{className:"px-4 py-2 rounded-xl text-[10px] font-black uppercase inline-block border bg-slate-100 text-slate-600",children:p.status})}),l.jsx("td",{className:"px-8 py-6 text-right",children:l.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>qn(p),className:"p-3 bg-white border shadow-sm hover:bg-blue-600 hover:text-white rounded-xl transition-all",children:l.jsx(TC,{size:18})}),r("canDeleteOS")&&l.jsx("button",{onClick:()=>el(p),className:"p-3 bg-white border shadow-sm hover:bg-red-600 hover:text-white rounded-xl transition-all",children:l.jsx(Na,{size:18})})]})})]},p.firestoreId))})]})})]}),i==="status"&&In()&&l.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-7xl mx-auto h-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-end shrink-0",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Indicadores"}),l.jsx("p",{className:"text-slate-500 font-medium",children:Ft.isFiltered?`Visualizando mtricas de ${Ft.count} ordens selecionadas`:`Visualizando mtricas gerais de todas as ordens (${Ft.count})`})]}),Ft.isFiltered&&l.jsx("button",{onClick:()=>$n([]),className:"text-sm font-bold text-blue-600 hover:underline",children:"Limpar filtro e ver geral"})]}),l.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-6 min-h-0",children:[l.jsxs("div",{className:"lg:col-span-4 bg-white rounded-[2rem] shadow-xl border border-slate-100 flex flex-col overflow-hidden max-h-[calc(100vh-200px)]",children:[l.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:[l.jsxs("div",{className:"relative group mb-3 z-30",children:[l.jsx(Gh,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:18}),l.jsx("input",{className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 shadow-sm focus:ring-2 focus:ring-blue-500/20 text-sm font-bold outline-none bg-white relative z-20",placeholder:"Buscar OS para filtrar...",value:k,onChange:p=>M(p.target.value)}),k&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-top-2 z-50",children:[g.filter(p=>{var T,D,G;return((T=p.client)==null?void 0:T.toLowerCase().includes(k.toLowerCase()))||((D=p.osNumber)==null?void 0:D.includes(k))||((G=p.item)==null?void 0:G.toLowerCase().includes(k.toLowerCase()))}).slice(0,5).map(p=>l.jsxs("div",{onClick:()=>{qn(p),M("")},className:"p-3 border-b border-slate-50 hover:bg-blue-50 cursor-pointer flex justify-between items-center group/item transition-colors",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 text-xs flex items-center gap-2",children:p.client}),l.jsxs("div",{className:"text-[10px] text-slate-500 mt-0.5",children:[l.jsx("span",{className:"font-mono text-blue-600 font-bold",children:p.osNumber})," - ",p.item]})]}),l.jsxs("div",{className:"text-[10px] font-bold text-blue-600 opacity-0 group-hover/item:opacity-100 flex items-center gap-1 transition-all",children:["Abrir ",l.jsx(jl,{size:12})]})]},p.firestoreId)),g.filter(p=>{var T,D,G;return((T=p.client)==null?void 0:T.toLowerCase().includes(k.toLowerCase()))||((D=p.osNumber)==null?void 0:D.includes(k))||((G=p.item)==null?void 0:G.toLowerCase().includes(k.toLowerCase()))}).length===0&&l.jsx("div",{className:"p-4 text-center text-slate-400 text-[10px] font-medium",children:"Nenhum resultado."})]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 px-1",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-0 cursor-pointer",onChange:p=>{const T=g.filter(D=>{var G,Y;return((G=D.client)==null?void 0:G.toLowerCase().includes(k.toLowerCase()))||((Y=D.osNumber)==null?void 0:Y.includes(k))});$n(p.target.checked?T.map(D=>D.firestoreId):[])},checked:He.length>0&&g.filter(p=>{var T,D;return((T=p.client)==null?void 0:T.toLowerCase().includes(k.toLowerCase()))||((D=p.osNumber)==null?void 0:D.includes(k))}).every(p=>He.includes(p.firestoreId))}),l.jsx("span",{children:"Selecionar Todos da Busca"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 relative z-0",children:[g.filter(p=>{var T,D;return((T=p.client)==null?void 0:T.toLowerCase().includes(k.toLowerCase()))||((D=p.osNumber)==null?void 0:D.includes(k))}).map(p=>l.jsx("div",{onClick:()=>$n(T=>T.includes(p.firestoreId)?T.filter(D=>D!==p.firestoreId):[...T,p.firestoreId]),className:`p-3 rounded-xl border cursor-pointer transition-all hover:shadow-md select-none ${He.includes(p.firestoreId)?"bg-blue-50 border-blue-200 ring-1 ring-blue-200":"bg-white border-slate-100 hover:bg-slate-50"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`mt-1 w-4 h-4 rounded border flex items-center justify-center transition-colors ${He.includes(p.firestoreId)?"bg-blue-600 border-blue-600":"border-slate-300 bg-white"}`,children:He.includes(p.firestoreId)&&l.jsx(Wh,{size:12,className:"text-white"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"font-black text-blue-700 text-xs",children:p.osNumber}),l.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded font-bold uppercase ${He.includes(p.firestoreId)?"bg-blue-200 text-blue-800":"bg-slate-100 text-slate-500"}`,children:p.status})]}),l.jsx("div",{className:"font-bold text-slate-800 text-sm leading-tight truncate",children:p.client}),l.jsx("div",{className:"text-[10px] text-slate-400 mt-0.5 truncate",children:p.item})]}),l.jsx("button",{onClick:T=>{T.stopPropagation(),qn(p)},className:"p-2 -mr-1 mt-0.5 text-slate-400 hover:text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Abrir Detalhes da OS",children:l.jsx(jl,{size:18})})]})},p.firestoreId)),g.length===0&&l.jsx("div",{className:"text-center py-10 text-slate-400 text-xs",children:"Nenhuma OS encontrada."})]})]}),l.jsx("div",{className:"lg:col-span-8 space-y-6 overflow-y-auto pr-1 pb-10",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-4 relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(B0,{size:16})," Status Geral"]}),l.jsx(VC,{data:Ft.statusChartData,colors:["#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#f59e0b"],onClick:ei}),l.jsx("div",{className:"space-y-2 mt-4",children:Ft.statusChartData.slice(0,4).map((p,T)=>l.jsxs("div",{className:"flex justify-between text-xs text-slate-600 font-medium cursor-pointer hover:bg-slate-50 p-1 rounded transition-colors",onClick:()=>ei(p.label),children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:["#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#f59e0b"][T]}})," ",p.label]}),l.jsx("span",{children:p.value})]},T))}),l.jsx("div",{className:"absolute top-4 right-4 text-slate-300",children:l.jsx($0,{size:16})})]}),l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-4 relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(hC,{size:16})," Tipo de Faturamento"]}),l.jsx(H0,{data:Ft.billingChartData,maxVal:Math.max(...Ft.billingChartData.map(p=>p.value),1),colorClass:"bg-emerald-500",onClick:mo,showValues:h}),l.jsx("div",{className:"absolute top-4 right-4 text-slate-300",children:l.jsx($0,{size:16})})]})]})})]})]}),i==="financial"&&In()&&l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto h-full",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Financeiro"}),l.jsx("p",{className:"text-slate-500 font-medium",children:"Anlise de custos e receitas acumuladas"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(NC,{size:16})," Receita Bruta"]}),l.jsxs("div",{className:"text-3xl font-black text-slate-900",children:["R$ ",kt(ct.totalRevenue)]}),l.jsx("div",{className:"text-xs text-slate-400",children:"Total cobrado em OS"})]}),l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold uppercase text-xs tracking-widest",children:[l.jsx(lC,{size:16})," Custos Operacionais"]}),l.jsxs("div",{className:"text-3xl font-black text-slate-900",children:["R$ ",kt(ct.totalCosts)]}),l.jsx("div",{className:"text-xs text-slate-400",children:"Peas + Fretes Terceiros"})]}),l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(dC,{size:16})," Lucro Lquido"]}),l.jsxs("div",{className:"text-3xl font-black text-green-600",children:["R$ ",kt(ct.totalProfit)]}),l.jsx("div",{className:"text-xs text-slate-400",children:"Receita - Custos"})]}),l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-purple-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(SC,{size:16})," Margem de Lucro"]}),l.jsxs("div",{className:"text-3xl font-black text-purple-600",children:[ct.margin.toLocaleString("pt-BR",{maximumFractionDigits:1}),"%"]}),l.jsx("div",{className:"text-xs text-slate-400",children:"Rentabilidade mdia"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-bold uppercase text-xs tracking-widest mb-6",children:[l.jsx(kd,{size:16})," Top Clientes (Receita)"]}),ct.topClients.length>0?l.jsx(H0,{data:ct.topClients,maxVal:ct.topClients[0].value,colorClass:"bg-blue-600",showValues:h}):l.jsx("div",{className:"text-center py-10 text-slate-400",children:"Sem dados financeiros"})]}),l.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-[2rem] shadow-xl text-white flex flex-col justify-center",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Status Financeiro"}),l.jsx("h3",{className:"text-2xl font-black",children:"Resumo Geral"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Total de Ordens Analisadas"}),l.jsx("span",{className:"font-bold text-xl",children:g.length})]}),l.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Ticket Mdio (Receita/OS)"}),l.jsxs("span",{className:"font-bold text-xl",children:["R$ ",kt(g.length>0?ct.totalRevenue/g.length:0)]})]}),l.jsxs("div",{className:"flex justify-between items-center pb-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Lucro Mdio por OS"}),l.jsxs("span",{className:"font-bold text-xl text-green-400",children:["R$ ",kt(g.length>0?ct.totalProfit/g.length:0)]})]})]})]})})]})]}),i==="contracts"&&In()&&l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Contratos de Manuteno"}),l.jsx("p",{className:"text-slate-500 font-medium",children:"Gesto de vigncias e escopo de atendimento"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"hidden md:flex bg-blue-50 text-blue-600 px-6 py-3 rounded-2xl font-bold text-sm border border-blue-100 items-center gap-2",children:[l.jsx(tu,{size:18}),"Contratos ativos e manuais"]}),l.jsxs("button",{onClick:po,className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black flex items-center gap-2 shadow-xl shadow-blue-200 hover:bg-blue-700 transition-colors",children:[l.jsx(Or,{size:20})," Novo Contrato"]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Qa.length===0?l.jsx("div",{className:"col-span-3 text-center py-20 text-slate-400",children:"Nenhum contrato encontrado. Adicione um manualmente ou crie uma OS."}):Qa.map((p,T)=>l.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl overflow-hidden group hover:shadow-2xl transition-all",children:[l.jsxs("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-black text-lg text-slate-800 leading-tight mb-1",children:p.clientName}),l.jsx("div",{className:"text-xs text-slate-500 font-medium truncate max-w-[200px]",children:p.cnpj||"CNPJ no informado"})]}),l.jsx("div",{className:`p-2 rounded-lg ${p.isConfigured?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"}`,children:p.isConfigured?l.jsx(Wh,{size:20}):l.jsx(ss,{size:20})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia Incio"}),l.jsx("div",{className:"font-bold text-slate-700",children:p.startDate?new Date(p.startDate+"T00:00:00").toLocaleDateString():"---"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia Fim"}),l.jsx("div",{className:"font-bold text-slate-700",children:p.endDate?new Date(p.endDate+"T00:00:00").toLocaleDateString():"---"})]})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Mensal"}),l.jsxs("span",{className:"font-black text-slate-800",children:["R$ ",kt(Et(p.monthlyValue))]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Anual"}),l.jsxs("span",{className:"font-black text-blue-600",children:["R$ ",kt(Et(p.annualValue))]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Escopo Contratado"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.coveredItems.videoSurgeryInstruments&&l.jsx("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-2 py-1 rounded border border-indigo-100 font-bold",children:"Instr. Videocirurgia"}),p.coveredItems.openInstruments&&l.jsx("span",{className:"text-[9px] bg-purple-50 text-purple-600 px-2 py-1 rounded border border-purple-100 font-bold",children:"Instr. Abertos"}),p.coveredItems.videoSurgeryEquipment&&l.jsx("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-100 font-bold",children:"Equip. Vdeo"}),p.coveredItems.endoscopes&&l.jsx("span",{className:"text-[9px] bg-emerald-50 text-emerald-600 px-2 py-1 rounded border border-emerald-100 font-bold",children:"Endoscpios"}),!Object.values(p.coveredItems).some(Boolean)&&l.jsx("span",{className:"text-[9px] text-slate-400 italic",children:"Nenhum item selecionado"})]})]})]}),l.jsxs("button",{onClick:()=>Vc(p),className:"w-full py-4 bg-slate-50 hover:bg-slate-100 border-t border-slate-100 text-slate-600 font-bold text-xs uppercase tracking-widest transition-colors flex items-center justify-center gap-2",children:[l.jsx(F0,{size:16})," ",p.isConfigured?"Editar Contrato":"Configurar Contrato"]})]},T))})]}),i==="inventory"&&In()&&l.jsxs("div",{className:"p-20 text-center",children:[l.jsx(V0,{size:80,className:"mx-auto text-slate-200 mb-6"}),l.jsx("h3",{className:"text-2xl font-black",children:"Inventrio em breve"})]}),i==="clients"&&In()&&l.jsxs("div",{className:"p-20 text-center",children:[l.jsx(kd,{size:80,className:"mx-auto text-slate-200 mb-6"}),l.jsx("h3",{className:"text-2xl font-black",children:"Mdulo de Clientes em breve"})]}),i==="users"&&In()&&l.jsx(DC,{}),i==="about"&&l.jsxs("div",{className:"p-20 text-center",children:[l.jsx(tu,{size:80,className:"mx-auto text-slate-200 mb-6"}),l.jsx("h3",{className:"text-2xl font-black",children:"Sobre o Sistema"})]})]}),Se&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-50 flex items-center justify-center p-2 sm:p-4 overflow-y-auto",children:l.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-5xl my-auto shadow-2xl border border-slate-200 animate-in zoom-in-95 duration-200",children:l.jsxs("form",{onSubmit:Oc,className:"p-6 md:p-10 space-y-10",children:[l.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:["OS ",j.osNumber]}),l.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Relatrio de Atendimento Tcnico"})]}),l.jsx("button",{type:"button",onClick:()=>ye(!1),className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:l.jsx(Vr,{})})]}),l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(Gu,{size:16})," Cliente"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{placeholder:"Nome da Empresa",className:`w-full p-4 bg-white border ${Mt.client?"border-red-500":"border-slate-200"} rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold`,value:j.client,onChange:p=>{ie({...j,client:p.target.value}),v(!0),Mt.client&&Qt(T=>({...T,client:!1}))},onFocus:()=>v(!0),onBlur:()=>setTimeout(()=>v(!1),200)}),x&&j.client&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-60 overflow-y-auto animate-in slide-in-from-top-2",children:vs.filter(p=>p.client.toLowerCase().includes(j.client.toLowerCase())).slice(0,5).map((p,T)=>l.jsxs("div",{className:"p-3 hover:bg-blue-50 cursor-pointer border-b border-slate-50 flex flex-col",onMouseDown:D=>{D.preventDefault(),Xs(p)},children:[l.jsx("span",{className:"font-bold text-slate-800 text-sm",children:p.client}),l.jsx("span",{className:"text-[10px] text-slate-400",children:p.cnpj||"Sem CNPJ"})]},T))}),Mt.client&&l.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Cliente  obrigatrio"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("input",{placeholder:"CNPJ",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:j.cnpj,onChange:p=>ie({...j,cnpj:p.target.value})}),l.jsx("input",{placeholder:"Responsvel",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:j.contactPerson,onChange:p=>ie({...j,contactPerson:p.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("input",{placeholder:"E-mail",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:j.email,onChange:p=>ie({...j,email:p.target.value})}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 flex justify-between",children:["Endereo",j.address&&l.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(j.address)}`,target:"_blank",className:"text-blue-600 hover:underline flex items-center gap-1",children:[l.jsx(jl,{size:10})," Ver no Maps"]})]}),l.jsx("input",{placeholder:"Endereo Completo",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:j.address,onChange:p=>ie({...j,address:p.target.value})})]})]})]}),l.jsx("hr",{className:"border-slate-200/50"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(pC,{size:16})," Atendimento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-indigo-500/10 transition-all font-bold",value:j.billingType,onChange:p=>ie({...j,billingType:p.target.value,maintenanceVisit:""}),children:Lc.map(p=>l.jsx("option",{value:p,children:p},p))}),j.billingType==="Contrato de manuteno"&&l.jsxs("select",{className:"w-full p-4 bg-white border border-indigo-200 rounded-2xl outline-none font-bold animate-in slide-in-from-top-2",value:j.maintenanceVisit,onChange:p=>ie({...j,maintenanceVisit:p.target.value}),children:[l.jsx("option",{value:"",children:"Selecione a visita..."}),l.jsxs("option",{value:`1 Visita de ${Yt}`,children:["1 Visita de ",Yt]}),l.jsxs("option",{value:`2 Visita de ${Yt}`,children:["2 Visita de ",Yt]}),l.jsxs("option",{value:`3 Visita de ${Yt}`,children:["3 Visita de ",Yt]}),l.jsxs("option",{value:`4 Visita de ${Yt}`,children:["4 Visita de ",Yt]})]})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-orange-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(EC,{size:16})," Equipamento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{placeholder:"Item / Nome",className:`w-full p-4 bg-slate-50 border ${Mt.item?"border-red-500":"border-slate-200"} rounded-2xl outline-none font-bold`,value:j.item,onChange:p=>{ie({...j,item:p.target.value}),Ie(!0),Mt.item&&Qt(T=>({...T,item:!1}))},onFocus:()=>Ie(!0),onBlur:()=>setTimeout(()=>Ie(!1),200)}),S&&ao.length>0&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de Itens"}),ao.filter(p=>p.toLowerCase().includes(j.item.toLowerCase())).slice(0,5).map((p,T)=>l.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-bold",onMouseDown:D=>{D.preventDefault(),ie({...j,item:p}),Ie(!1)},children:p},T))]}),Mt.item&&l.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Item/Equipamento  obrigatrio"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{placeholder:"Marca",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold",value:j.manufacturer,onChange:p=>{ie({...j,manufacturer:p.target.value}),ln(!0)},onFocus:()=>ln(!0),onBlur:()=>setTimeout(()=>ln(!1),200)}),Xe&&vr.length>0&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de Marcas"}),vr.filter(p=>p.toLowerCase().includes(j.manufacturer.toLowerCase())).slice(0,5).map((p,T)=>l.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-bold",onMouseDown:D=>{D.preventDefault(),ie({...j,manufacturer:p}),ln(!1)},children:p},T))]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{placeholder:"Modelo",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold",value:j.model,onChange:p=>{ie({...j,model:p.target.value}),K(!0)},onFocus:()=>K(!0),onBlur:()=>setTimeout(()=>K(!1),200)}),un&&_r.length>0&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de Modelos"}),_r.filter(p=>p.toLowerCase().includes(j.model.toLowerCase())).slice(0,5).map((p,T)=>l.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-bold",onMouseDown:D=>{D.preventDefault(),ie({...j,model:p}),K(!1)},children:p},T))]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{placeholder:"Nmero de Srie",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold font-mono",value:j.serial,onChange:p=>{ie({...j,serial:p.target.value}),se(!0)},onFocus:()=>se(!0),onBlur:()=>setTimeout(()=>se(!1),200)}),re&&Ga.length>0&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de NS"}),Ga.filter(p=>p.toLowerCase().includes(j.serial.toLowerCase())).slice(0,5).map((p,T)=>l.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-mono font-bold",onMouseDown:D=>{D.preventDefault(),ie({...j,serial:p}),se(!1)},children:p},T))]})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(CC,{size:16})," Laudo Tcnico"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Defeitos Encontrados"}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 space-y-3",children:[l.jsxs("div",{className:"relative flex gap-2",children:[l.jsx("input",{placeholder:"Descreva um defeito...",className:"flex-1 p-3 bg-white border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-emerald-500/20",value:mr,onChange:p=>{gr(p.target.value),E(!0)},onFocus:()=>E(!0),onBlur:()=>setTimeout(()=>E(!1),200),onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),dn())}}),l.jsx("button",{type:"button",onClick:dn,className:"bg-emerald-600 text-white p-3 rounded-xl shadow-lg shadow-emerald-200 hover:bg-emerald-700 transition-colors",children:l.jsx(Or,{size:20})}),w&&oo.length>0&&l.jsxs("div",{className:"absolute top-full left-0 right-14 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes"}),oo.filter(p=>p.toLowerCase().includes(mr.toLowerCase())).slice(0,5).map((p,T)=>l.jsx("div",{className:"p-3 hover:bg-emerald-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700",onMouseDown:D=>{D.preventDefault(),gr(p),E(!1)},children:p.length>50?p.substring(0,50)+"...":p},T))]})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:[j.defectsList&&j.defectsList.map((p,T)=>l.jsxs("div",{className:"flex justify-between items-start p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-left-2",children:[l.jsx("div",{className:"text-sm font-medium text-slate-700 leading-snug",children:p}),l.jsx("button",{type:"button",onClick:()=>Ya(T),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:l.jsx(Vr,{size:16})})]},T)),(!j.defectsList||j.defectsList.length===0)&&l.jsx("div",{className:"text-center text-xs text-slate-400 italic py-2",children:"Nenhum defeito listado."})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{className:"w-full p-4 bg-slate-900 text-white border-none rounded-2xl outline-none cursor-pointer font-bold",value:j.solutionType,onChange:p=>ie({...j,solutionType:p.target.value}),children:[l.jsx("option",{value:"Manual",children:"Preenchimento Manual"}),l.jsx("option",{value:"Preenchimento manual, com custo",children:"Manual com Custos Detalhados (+)"}),l.jsx("option",{value:"No passvel de conserto",children:"No Passvel de Conserto"})]}),j.solutionType==="Manual"&&l.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[l.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl border border-indigo-100 space-y-3",children:l.jsxs("div",{className:"relative flex gap-2",children:[l.jsx("input",{placeholder:"Descreva uma etapa da soluo...",className:"flex-1 p-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500/20",value:ms,onChange:p=>{Me(p.target.value),N(!0)},onFocus:()=>N(!0),onBlur:()=>setTimeout(()=>N(!1),200),onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),co())}}),l.jsx("button",{type:"button",onClick:co,className:"bg-indigo-600 text-white p-3 rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-colors",children:l.jsx(Or,{size:20})}),C&&ze.length>0&&l.jsxs("div",{className:"absolute top-full left-0 right-14 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes"}),ze.filter(p=>p.toLowerCase().includes(ms.toLowerCase())).slice(0,5).map((p,T)=>l.jsx("div",{className:"p-3 hover:bg-indigo-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700",onMouseDown:D=>{D.preventDefault(),Me(p),N(!1)},children:p.length>50?p.substring(0,50)+"...":p},T))]})]})}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:[j.manualSolutionsList&&j.manualSolutionsList.map((p,T)=>l.jsxs("div",{className:"flex justify-between items-start p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-left-2",children:[l.jsx("div",{className:"text-sm font-medium text-slate-700 leading-snug",children:p}),l.jsx("button",{type:"button",onClick:()=>ho(T),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:l.jsx(Vr,{size:16})})]},T)),(!j.manualSolutionsList||j.manualSolutionsList.length===0)&&l.jsx("div",{className:"text-center text-xs text-slate-400 italic py-2",children:"Nenhuma soluo listada."})]})]}),j.solutionType==="Preenchimento manual, com custo"&&l.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[l.jsxs("div",{className:"bg-green-50 p-4 rounded-2xl border border-green-100 space-y-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{placeholder:"Item, Pea ou Servio",className:"w-full p-2 bg-white border border-green-200 rounded-lg text-sm",value:ps,onChange:p=>{pr(p.target.value),N(!0)},onFocus:()=>N(!0),onBlur:()=>setTimeout(()=>N(!1),200)}),C&&ze.length>0&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes"}),ze.filter(p=>p.toLowerCase().includes(ps.toLowerCase())).slice(0,5).map((p,T)=>l.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700",onMouseDown:D=>{D.preventDefault(),pr(p),N(!1)},children:p},T))]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{placeholder:"Valor R$ 0,00",className:"flex-1 p-2 bg-white border border-green-200 rounded-lg text-sm",value:ro,onChange:p=>so(p.target.value)}),l.jsx("button",{type:"button",onClick:fo,className:"bg-green-600 text-white p-2.5 rounded-lg shadow-lg shadow-green-200",children:l.jsx(Or,{size:20})})]})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:j.solutionsList.map(p=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-right-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-bold text-slate-800",children:p.text}),l.jsxs("div",{className:"text-[10px] text-green-600 font-black",children:["R$ ",p.cost]})]}),l.jsx("button",{type:"button",onClick:()=>Xa(p.id),children:l.jsx(Vr,{size:16,className:"text-red-300 hover:text-red-500"})})]},p.id))}),Mt.solutionsList&&j.solutionsList.length===0&&l.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Adicione pelo menos um item na lista de solues"})]}),j.solutionType==="No passvel de conserto"&&l.jsxs("div",{children:[l.jsxs("select",{className:`w-full p-4 ${Mt.notRepairableDetail?"bg-red-50 border-red-500":"bg-red-50 border-red-100"} text-red-900 border rounded-2xl outline-none font-bold`,value:j.notRepairableDetail,onChange:p=>{ie({...j,notRepairableDetail:p.target.value}),Mt.notRepairableDetail&&Qt(T=>({...T,notRepairableDetail:!1}))},onBlur:()=>Ka("notRepairableDetail"),children:[l.jsx("option",{value:"",children:"Selecione Recomendao..."}),l.jsx("option",{value:"Conserto em bancada",children:"Conserto em bancada"}),l.jsx("option",{value:"Necessrio substituir por novo",children:"Substituir por equipamento novo"})]}),Mt.notRepairableDetail&&l.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Selecione uma recomendao"})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-6 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Gt(!Vt),children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-bold uppercase text-xs tracking-widest",children:[l.jsx(M0,{size:16})," Financeiro & Custos (Controle Interno)"]}),Vt?l.jsx(Ew,{size:20,className:"text-slate-400"}):l.jsx(ww,{size:20,className:"text-slate-400"})]}),Vt&&l.jsxs("div",{className:"space-y-6 animate-in slide-in-from-top-4 fade-in duration-300",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Nome do Terceiro / Transportadora"}),l.jsx("input",{placeholder:"Ex: JadLog / Lab Especializado",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:j.costThirdPartyName,onChange:p=>ie({...j,costThirdPartyName:p.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Frete Terceiro (R$)"}),l.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:j.costThirdPartyShipping,onChange:p=>ie({...j,costThirdPartyShipping:p.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Peas/Servios (R$)"}),l.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:j.costParts,onChange:p=>ie({...j,costParts:p.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Frete Cliente (R$)"}),l.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:j.costClientShipping,onChange:p=>ie({...j,costClientShipping:p.target.value})})]})]}),l.jsx("hr",{className:"border-slate-200/50"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 items-start",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-blue-500 uppercase",children:"Valor Sugerido (+60%)"}),l.jsxs("div",{className:"w-full p-4 bg-blue-50/50 border border-blue-100 rounded-2xl font-black text-blue-600 cursor-not-allowed text-sm",children:["R$ ",kt(Bn)]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase",children:"Soma Itens Laudo"}),l.jsxs("div",{className:"w-full p-4 bg-purple-50/50 border border-purple-100 rounded-2xl font-black text-purple-700 cursor-not-allowed text-sm",children:["R$ ",kt(Wa)]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-green-600 uppercase",children:"Valor Cobrado (R$)"}),l.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-green-50 border border-green-100 rounded-2xl outline-none font-black text-green-700 text-sm",value:j.chargedAmount,onChange:p=>ie({...j,chargedAmount:p.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Condio Pagamento"}),l.jsxs("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold text-sm",value:j.paymentCondition,onChange:p=>ie({...j,paymentCondition:p.target.value,installments:""}),children:[l.jsx("option",{value:" vista",children:" vista"}),l.jsx("option",{value:"Boleto",children:"Boleto"}),l.jsx("option",{value:"Carto",children:"Carto"})]})]}),(j.paymentCondition==="Boleto"||j.paymentCondition==="Carto")&&l.jsxs("div",{className:"space-y-2 animate-in fade-in",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Parcelas"}),l.jsxs("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold text-sm",value:j.installments,onChange:p=>ie({...j,installments:p.target.value}),children:[l.jsx("option",{value:"",children:"Selecione..."}),l.jsx("option",{value:"1x",children:"1x"}),l.jsx("option",{value:"2x",children:"2x"}),l.jsx("option",{value:"3x",children:"3x"}),l.jsx("option",{value:"4x",children:"4x"})]})]})]}),l.jsxs("div",{className:`p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4 transition-colors ${Tn>=0?"bg-green-100/50 border border-green-200":"bg-red-100/50 border border-red-200"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-3 rounded-full ${Tn>=0?"bg-green-200 text-green-700":"bg-red-200 text-red-700"}`,children:l.jsx(fC,{size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-black uppercase text-slate-500",children:"Resultado Operacional"}),l.jsx("div",{className:`text-2xl font-black ${Tn>=0?"text-green-700":"text-red-700"}`,children:Tn>=0?"LUCRO":"PREJUZO"})]})]}),l.jsxs("div",{className:"flex gap-8 text-right",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Custo Total"}),l.jsxs("div",{className:"font-bold text-slate-700",children:["R$ ",kt(io)]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Resultado"}),l.jsxs("div",{className:`text-xl font-black ${Tn>=0?"text-green-600":"text-red-600"}`,children:["R$ ",kt(Tn)]})]})]})]})]})]}),l.jsxs("div",{className:"space-y-6 pt-6 border-t",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-900 font-bold uppercase text-xs tracking-widest",children:[l.jsx(kC,{size:16})," Logstica e Status Final"]}),l.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-6",children:[l.jsx("div",{className:"w-full overflow-x-auto py-2",children:l.jsxs("div",{className:"flex items-center justify-between min-w-[600px] relative px-4",children:[l.jsx("div",{className:"absolute left-4 right-4 top-1/2 -translate-y-1/2 h-0.5 bg-slate-200 z-0"}),l.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 h-0.5 bg-blue-600 z-0 transition-all duration-500 ease-in-out",style:{width:`${_s}%`}}),yr.map((p,T)=>{const D=T<=xr,G=T===xr,Y=Ja(p.value);return l.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-3 cursor-pointer group min-w-[80px]",onClick:()=>ie({...j,status:p.value,statusDate:new Date().toISOString().split("T")[0]}),children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-300 shadow-sm ${D?"bg-blue-600 border-blue-600 text-white scale-110":"bg-white border-slate-300 text-slate-300 group-hover:border-blue-300"}`,children:D?l.jsx(gC,{size:14,strokeWidth:4}):l.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-200"})}),l.jsxs("div",{className:"text-center flex flex-col items-center",children:[l.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide transition-colors ${G?"text-blue-700":"text-slate-400"}`,children:p.label}),l.jsx("span",{className:`text-[10px] font-medium px-1.5 py-0.5 rounded mt-1 whitespace-nowrap ${Y?"bg-white text-slate-600 shadow-sm border border-slate-200":"text-slate-300"}`,children:Y||"---"})]})]},T)})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start pt-4 border-t border-slate-200/50",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Status Geral (Seleo Manual)"}),l.jsx("select",{className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:j.status,onChange:p=>{ie({...j,status:p.target.value,statusDate:new Date().toISOString().split("T")[0]})},children:Dc.map(p=>l.jsx("option",{value:p,children:p},p))})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Data do Status Atual"}),l.jsx("input",{type:"date",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:j.statusDate,onChange:p=>ie({...j,statusDate:p.target.value})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[j.status!=="Recebido"&&l.jsxs("div",{className:"space-y-1 animate-in fade-in",children:[l.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Enviado para Terceiro?"}),l.jsxs("select",{className:"w-full p-4 bg-slate-100 border-none rounded-2xl outline-none font-bold",value:j.sentToThirdParty,onChange:p=>ie({...j,sentToThirdParty:p.target.value}),children:[l.jsx("option",{value:"No",children:"No"}),l.jsx("option",{value:"Sim",children:"Sim"})]})]}),j.status==="Em rota de entrega"&&l.jsxs("div",{className:"space-y-1 animate-in zoom-in-95",children:[l.jsx("label",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Rastreamento"}),l.jsx("input",{placeholder:"Cdigo de Rastreio",className:"w-full p-4 bg-blue-50 border border-blue-100 rounded-2xl outline-none font-bold",value:j.trackingCode,onChange:p=>ie({...j,trackingCode:p.target.value})})]})]}),j.sentToThirdParty==="Sim"&&j.status!=="Recebido"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-6 bg-slate-100 rounded-3xl border border-slate-200 animate-in slide-in-from-top-4",children:[l.jsx("input",{placeholder:"Empresa Terceira",className:"w-full p-3 bg-white border rounded-xl text-sm",value:j.thirdPartyInfo,onChange:p=>ie({...j,thirdPartyInfo:p.target.value})}),l.jsx("input",{placeholder:"Rastreio Terceiro",className:"w-full p-3 bg-white border rounded-xl text-sm",value:j.thirdPartyTracking,onChange:p=>ie({...j,thirdPartyTracking:p.target.value})}),l.jsx("input",{type:"date",className:"w-full p-3 bg-white border rounded-xl text-sm",value:j.thirdPartyDate,onChange:p=>ie({...j,thirdPartyDate:p.target.value})})]})]})]}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 pt-10 border-t",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>ye(!1),className:"px-6 py-5 bg-slate-100 text-slate-600 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-slate-200 transition-colors",children:"Cancelar"}),En&&l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",onClick:()=>Sn("client"),className:"p-5 bg-blue-50 text-blue-600 rounded-2xl hover:bg-blue-100 transition-colors border border-blue-100",title:"Imprimir Relatrio do Cliente",children:l.jsx(Sd,{size:20})}),l.jsx("button",{type:"button",onClick:()=>Sn("internal"),className:"p-5 bg-slate-50 text-slate-600 rounded-2xl hover:bg-slate-100 transition-colors border border-slate-200",title:"Imprimir Relatrio Interno",children:l.jsx(Nd,{size:20})})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4",children:[l.jsxs("button",{type:"button",onClick:Zs,disabled:bn,className:"flex-1 bg-indigo-50 text-indigo-700 border-2 border-indigo-100 p-5 rounded-2xl font-black text-xs hover:bg-indigo-100 transition-all flex items-center justify-center gap-3",children:[bn?l.jsx(li,{className:"animate-spin",size:18}):l.jsx(bw,{size:18})," NOVA OS COM MESMO CLIENTE"]}),l.jsxs("button",{type:"submit",disabled:bn,className:"flex-1 bg-blue-600 text-white p-5 rounded-2xl font-black text-lg hover:bg-blue-700 shadow-xl shadow-blue-200 transition-all flex items-center justify-center gap-3",children:[bn?l.jsx(li,{className:"animate-spin",size:20}):l.jsx(Kh,{size:20})," SALVAR OS"]})]})]})]})})}),cn&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[60] flex items-center justify-center p-2 sm:p-4",children:l.jsx("div",{className:"bg-white rounded-[2rem] w-full max-w-3xl my-auto shadow-2xl border border-slate-200 animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:l.jsxs("form",{onSubmit:Za,className:"p-8 space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center border-b pb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:ds?"Novo Contrato":"Configurar Contrato"}),l.jsx("p",{className:"text-slate-500 text-sm font-medium",children:ds?"Preencha os dados do cliente e contrato":ce.clientName})]}),l.jsx("button",{type:"button",onClick:()=>cs(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:l.jsx(Vr,{size:20})})]}),l.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest mb-2",children:[l.jsx(Gu,{size:16})," Dados do Cliente"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Nome do Cliente *"}),l.jsx("input",{className:`w-full p-3 border rounded-xl font-bold ${ds?"bg-white border-slate-200":"bg-slate-100 border-slate-200 cursor-not-allowed"}`,value:ce.clientName,onChange:p=>ds&&We({...ce,clientName:p.target.value}),placeholder:"Nome da Empresa / Hospital",readOnly:!ds,required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"CNPJ"}),l.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ce.cnpj,onChange:p=>We({...ce,cnpj:p.target.value}),placeholder:"00.000.000/0000-00"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Contato"}),l.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ce.contactPerson,onChange:p=>We({...ce,contactPerson:p.target.value}),placeholder:"Nome do Responsvel"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"E-mail"}),l.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ce.email,onChange:p=>We({...ce,email:p.target.value}),placeholder:"financeiro@hospital.com"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Endereo"}),l.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ce.address,onChange:p=>We({...ce,address:p.target.value}),placeholder:"Rua, Nmero, Cidade - UF"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia (Incio - Fim)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"date",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-sm",value:ce.startDate,onChange:p=>We({...ce,startDate:p.target.value}),required:!0}),l.jsx("input",{type:"date",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-sm",value:ce.endDate,onChange:p=>We({...ce,endDate:p.target.value}),required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Mensal (R$)"}),l.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-black text-slate-800",value:ce.monthlyValue,onChange:p=>{const T=p.target.value,D=Et(T);We({...ce,monthlyValue:T,annualValue:(D*12).toLocaleString("pt-BR",{minimumFractionDigits:2})})},placeholder:"0,00"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Anual (Estimado)"}),l.jsx("input",{className:"w-full p-3 bg-blue-50 border border-blue-100 rounded-xl font-black text-blue-600",value:ce.annualValue,onChange:p=>We({...ce,annualValue:p.target.value}),placeholder:"0,00"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Observaes"}),l.jsx("textarea",{rows:"3",className:"w-full p-3 bg-white border border-slate-200 rounded-xl text-sm",value:ce.observations,onChange:p=>We({...ce,observations:p.target.value}),placeholder:"Detalhes adicionais..."})]})]}),l.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest mb-2",children:[l.jsx(mC,{size:16})," Itens Cobertos"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[l.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ce.coveredItems.videoSurgeryInstruments,onChange:p=>We({...ce,coveredItems:{...ce.coveredItems,videoSurgeryInstruments:p.target.checked}})}),l.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Instrumentais de Vdeo Cirurgia"})]}),l.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[l.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ce.coveredItems.openInstruments,onChange:p=>We({...ce,coveredItems:{...ce.coveredItems,openInstruments:p.target.checked}})}),l.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Instrumentais Abertos"})]}),l.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[l.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ce.coveredItems.videoSurgeryEquipment,onChange:p=>We({...ce,coveredItems:{...ce.coveredItems,videoSurgeryEquipment:p.target.checked}})}),l.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Equipamentos de Vdeo"})]}),l.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[l.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300",checked:ce.coveredItems.endoscopes,onChange:p=>We({...ce,coveredItems:{...ce.coveredItems,endoscopes:p.target.checked}})}),l.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Endoscpios"})]})]})]})]}),l.jsxs("div",{className:"pt-4 border-t flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:()=>cs(!1),className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:bn,className:"px-8 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg hover:bg-blue-700 flex items-center gap-2",children:[bn?l.jsx(li,{className:"animate-spin",size:20}):l.jsx(Kh,{size:20})," Salvar Contrato"]})]})]})})}),Pe&&l.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[60] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl border border-slate-200 text-center space-y-6 animate-in zoom-in-95",children:[l.jsx("div",{className:"bg-red-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto text-red-500 mb-2",children:l.jsx(Na,{size:40})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Excluir OS?"}),l.jsxs("p",{className:"text-slate-500 mt-2",children:["Tem certeza que deseja remover permanentemente a OS ",l.jsx("span",{className:"font-bold text-slate-900",children:Un==null?void 0:Un.osNumber}),"?",l.jsx("br",{}),"Essa ao no pode ser desfeita."]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>Ot(!1),className:"flex-1 py-4 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:tl,className:"flex-1 py-4 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 shadow-xl shadow-red-200 transition-colors",children:"Sim, Excluir"})]})]})}),Qs.show&&l.jsx(MC,{message:Qs.message,type:Qs.type,onClose:()=>Ys(p=>({...p,show:!1}))})]}):l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center p-8",children:[l.jsx(Nd,{className:"mx-auto text-red-500 mb-6",size:60}),l.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2",children:"Acesso Negado"}),l.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"Voc no tem permisso para acessar esta pgina. Entre em contato com o administrador do sistema."})]})}):l.jsx(LC,{})}function UC(){return l.jsx(xw,{children:l.jsx(FC,{})})}Cd.createRoot(document.getElementById("root")).render(l.jsx(ny.StrictMode,{children:l.jsx(xw,{children:l.jsx(UC,{})})}));
