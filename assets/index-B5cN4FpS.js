(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function KS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lw={exports:{}},Yc={},Mw={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xl=Symbol.for("react.element"),GS=Symbol.for("react.portal"),QS=Symbol.for("react.fragment"),XS=Symbol.for("react.strict_mode"),YS=Symbol.for("react.profiler"),JS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),eA=Symbol.for("react.forward_ref"),tA=Symbol.for("react.suspense"),rA=Symbol.for("react.memo"),nA=Symbol.for("react.lazy"),ny=Symbol.iterator;function iA(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var Fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vw=Object.assign,Uw={};function Go(t,e,r){this.props=t,this.context=e,this.refs=Uw,this.updater=r||Fw}Go.prototype.isReactComponent={};Go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bw(){}Bw.prototype=Go.prototype;function Wm(t,e,r){this.props=t,this.context=e,this.refs=Uw,this.updater=r||Fw}var Hm=Wm.prototype=new Bw;Hm.constructor=Wm;Vw(Hm,Go.prototype);Hm.isPureReactComponent=!0;var iy=Array.isArray,zw=Object.prototype.hasOwnProperty,Km={current:null},qw={key:!0,ref:!0,__self:!0,__source:!0};function $w(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zw.call(e,n)&&!qw.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:xl,type:t,key:s,ref:o,props:i,_owner:Km.current}}function sA(t,e){return{$$typeof:xl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gm(t){return typeof t=="object"&&t!==null&&t.$$typeof===xl}function oA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var sy=/\/+/g;function Xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oA(""+t.key):e.toString(36)}function Fu(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xl:case GS:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Xd(o,0):n,iy(i)?(r="",t!=null&&(r=t.replace(sy,"$&/")+"/"),Fu(i,e,r,"",function(c){return c})):i!=null&&(Gm(i)&&(i=sA(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",iy(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Xd(s,a);o+=Fu(s,e,r,l,i)}else if(l=iA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Xd(s,a++),o+=Fu(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cu(t,e,r){if(t==null)return t;var n=[],i=0;return Fu(t,n,"","",function(s){return e.call(r,s,i++)}),n}function aA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},Vu={transition:null},lA={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Vu,ReactCurrentOwner:Km};function Ww(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:cu,forEach:function(t,e,r){cu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return cu(t,function(){e++}),e},toArray:function(t){return cu(t,function(e){return e})||[]},only:function(t){if(!Gm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=Go;Ge.Fragment=QS;Ge.Profiler=YS;Ge.PureComponent=Wm;Ge.StrictMode=XS;Ge.Suspense=tA;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA;Ge.act=Ww;Ge.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Vw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Km.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zw.call(e,l)&&!qw.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:xl,type:t.type,key:i,ref:s,props:n,_owner:o}};Ge.createContext=function(t){return t={$$typeof:ZS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JS,_context:t},t.Consumer=t};Ge.createElement=$w;Ge.createFactory=function(t){var e=$w.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:eA,render:t}};Ge.isValidElement=Gm;Ge.lazy=function(t){return{$$typeof:nA,_payload:{_status:-1,_result:t},_init:aA}};Ge.memo=function(t,e){return{$$typeof:rA,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=Vu.transition;Vu.transition={};try{t()}finally{Vu.transition=e}};Ge.unstable_act=Ww;Ge.useCallback=function(t,e){return hr.current.useCallback(t,e)};Ge.useContext=function(t){return hr.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return hr.current.useEffect(t,e)};Ge.useId=function(){return hr.current.useId()};Ge.useImperativeHandle=function(t,e,r){return hr.current.useImperativeHandle(t,e,r)};Ge.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return hr.current.useMemo(t,e)};Ge.useReducer=function(t,e,r){return hr.current.useReducer(t,e,r)};Ge.useRef=function(t){return hr.current.useRef(t)};Ge.useState=function(t){return hr.current.useState(t)};Ge.useSyncExternalStore=function(t,e,r){return hr.current.useSyncExternalStore(t,e,r)};Ge.useTransition=function(){return hr.current.useTransition()};Ge.version="18.3.1";Mw.exports=Ge;var we=Mw.exports;const Hw=KS(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA=we,cA=Symbol.for("react.element"),dA=Symbol.for("react.fragment"),hA=Object.prototype.hasOwnProperty,fA=uA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pA={key:!0,ref:!0,__self:!0,__source:!0};function Kw(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)hA.call(e,n)&&!pA.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:cA,type:t,key:s,ref:o,props:i,_owner:fA.current}}Yc.Fragment=dA;Yc.jsx=Kw;Yc.jsxs=Kw;Lw.exports=Yc;var d=Lw.exports,_p={},Gw={exports:{}},Nr={},Qw={exports:{}},Xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,se){var me=ie.length;ie.push(se);e:for(;0<me;){var ee=me-1>>>1,q=ie[ee];if(0<i(q,se))ie[ee]=se,ie[me]=q,me=ee;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var se=ie[0],me=ie.pop();if(me!==se){ie[0]=me;e:for(var ee=0,q=ie.length,ne=q>>>1;ee<ne;){var oe=2*(ee+1)-1,fe=ie[oe],re=oe+1,L=ie[re];if(0>i(fe,me))re<q&&0>i(L,fe)?(ie[ee]=L,ie[re]=me,ee=re):(ie[ee]=fe,ie[oe]=me,ee=oe);else if(re<q&&0>i(L,me))ie[ee]=L,ie[re]=me,ee=re;else break e}}return se}function i(ie,se){var me=ie.sortIndex-se.sortIndex;return me!==0?me:ie.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,g=null,w=3,_=!1,T=!1,x=!1,j=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(ie){for(var se=r(c);se!==null;){if(se.callback===null)n(c);else if(se.startTime<=ie)n(c),se.sortIndex=se.expirationTime,e(l,se);else break;se=r(c)}}function b(ie){if(x=!1,v(ie),!T)if(r(l)!==null)T=!0,de(I);else{var se=r(c);se!==null&&J(b,se.startTime-ie)}}function I(ie,se){T=!1,x&&(x=!1,f(R),R=-1),_=!0;var me=w;try{for(v(se),g=r(l);g!==null&&(!(g.expirationTime>se)||ie&&!W());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,w=g.priorityLevel;var q=ee(g.expirationTime<=se);se=t.unstable_now(),typeof q=="function"?g.callback=q:g===r(l)&&n(l),v(se)}else n(l);g=r(l)}if(g!==null)var ne=!0;else{var oe=r(c);oe!==null&&J(b,oe.startTime-se),ne=!1}return ne}finally{g=null,w=me,_=!1}}var B=!1,k=null,R=-1,E=5,U=-1;function W(){return!(t.unstable_now()-U<E)}function A(){if(k!==null){var ie=t.unstable_now();U=ie;var se=!0;try{se=k(!0,ie)}finally{se?M():(B=!1,k=null)}}else B=!1}var M;if(typeof y=="function")M=function(){y(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,te=P.port2;P.port1.onmessage=A,M=function(){te.postMessage(null)}}else M=function(){j(A,0)};function de(ie){k=ie,B||(B=!0,M())}function J(ie,se){R=j(function(){ie(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){T||_||(T=!0,de(I))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(ie){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var me=w;w=se;try{return ie()}finally{w=me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,se){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var me=w;w=ie;try{return se()}finally{w=me}},t.unstable_scheduleCallback=function(ie,se,me){var ee=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ee+me:ee):me=ee,ie){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=me+q,ie={id:h++,callback:se,priorityLevel:ie,startTime:me,expirationTime:q,sortIndex:-1},me>ee?(ie.sortIndex=me,e(c,ie),r(l)===null&&ie===r(c)&&(x?(f(R),R=-1):x=!0,J(b,me-ee))):(ie.sortIndex=q,e(l,ie),T||_||(T=!0,de(I))),ie},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(ie){var se=w;return function(){var me=w;w=se;try{return ie.apply(this,arguments)}finally{w=me}}}})(Xw);Qw.exports=Xw;var mA=Qw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA=we,Ir=mA;function Se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yw=new Set,Xa={};function ks(t,e){Co(t,e),Co(t+"Capture",e)}function Co(t,e){for(Xa[t]=e,t=0;t<e.length;t++)Yw.add(e[t])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wp=Object.prototype.hasOwnProperty,yA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},ay={};function vA(t){return wp.call(ay,t)?!0:wp.call(oy,t)?!1:yA.test(t)?ay[t]=!0:(oy[t]=!0,!1)}function _A(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wA(t,e,r,n){if(e===null||typeof e>"u"||_A(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fr(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qm=/[\-:]([a-z])/g;function Xm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qm,Xm);Gt[e]=new fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qm,Xm);Gt[e]=new fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qm,Xm);Gt[e]=new fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new fr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ym(t,e,r,n){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wA(e,r,i,n)&&(r=null),n||i===null?vA(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ii=gA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,du=Symbol.for("react.element"),no=Symbol.for("react.portal"),io=Symbol.for("react.fragment"),Jm=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),Jw=Symbol.for("react.provider"),Zw=Symbol.for("react.context"),Zm=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),Ep=Symbol.for("react.suspense_list"),eg=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),eb=Symbol.for("react.offscreen"),ly=Symbol.iterator;function ha(t){return t===null||typeof t!="object"?null:(t=ly&&t[ly]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,Yd;function Ta(t){if(Yd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Yd=e&&e[1]||""}return`
`+Yd+t}var Jd=!1;function Zd(t,e){if(!t||Jd)return"";Jd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ta(t):""}function bA(t){switch(t.tag){case 5:return Ta(t.type);case 16:return Ta("Lazy");case 13:return Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 2:case 15:return t=Zd(t.type,!1),t;case 11:return t=Zd(t.type.render,!1),t;case 1:return t=Zd(t.type,!0),t;default:return""}}function Tp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case io:return"Fragment";case no:return"Portal";case bp:return"Profiler";case Jm:return"StrictMode";case xp:return"Suspense";case Ep:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zw:return(t.displayName||"Context")+".Consumer";case Jw:return(t._context.displayName||"Context")+".Provider";case Zm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case eg:return e=t.displayName||null,e!==null?e:Tp(t.type)||"Memo";case vi:e=t._payload,t=t._init;try{return Tp(t(e))}catch{}}return null}function xA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tp(e);case 8:return e===Jm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EA(t){var e=tb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hu(t){t._valueTracker||(t._valueTracker=EA(t))}function rb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=tb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function oc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sp(t,e){var r=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function uy(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Bi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nb(t,e){e=e.checked,e!=null&&Ym(t,"checked",e,!1)}function Ap(t,e){nb(t,e);var r=Bi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ip(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ip(t,e.type,Bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ip(t,e,r){(e!=="number"||oc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Sa=Array.isArray;function _o(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Bi(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Np(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dy(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Se(92));if(Sa(r)){if(1<r.length)throw Error(Se(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Bi(r)}}function ib(t,e){var r=Bi(e.value),n=Bi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function hy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fu,ob=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fu=fu||document.createElement("div"),fu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ya(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TA=["Webkit","ms","Moz","O"];Object.keys(Oa).forEach(function(t){TA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oa[e]=Oa[t]})});function ab(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Oa.hasOwnProperty(t)&&Oa[t]?(""+e).trim():e+"px"}function lb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=ab(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var SA=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cp(t,e){if(e){if(SA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function Rp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pp=null;function tg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jp=null,wo=null,bo=null;function fy(t){if(t=Sl(t)){if(typeof jp!="function")throw Error(Se(280));var e=t.stateNode;e&&(e=rd(e),jp(t.stateNode,t.type,e))}}function ub(t){wo?bo?bo.push(t):bo=[t]:wo=t}function cb(){if(wo){var t=wo,e=bo;if(bo=wo=null,fy(t),e)for(t=0;t<e.length;t++)fy(e[t])}}function db(t,e){return t(e)}function hb(){}var eh=!1;function fb(t,e,r){if(eh)return t(e,r);eh=!0;try{return db(t,e,r)}finally{eh=!1,(wo!==null||bo!==null)&&(hb(),cb())}}function Ja(t,e){var r=t.stateNode;if(r===null)return null;var n=rd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Se(231,e,typeof r));return r}var Dp=!1;if(Qn)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){Dp=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{Dp=!1}function AA(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var La=!1,ac=null,lc=!1,Op=null,IA={onError:function(t){La=!0,ac=t}};function NA(t,e,r,n,i,s,o,a,l){La=!1,ac=null,AA.apply(IA,arguments)}function kA(t,e,r,n,i,s,o,a,l){if(NA.apply(this,arguments),La){if(La){var c=ac;La=!1,ac=null}else throw Error(Se(198));lc||(lc=!0,Op=c)}}function Cs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function py(t){if(Cs(t)!==t)throw Error(Se(188))}function CA(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(Se(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return py(i),t;if(s===n)return py(i),e;s=s.sibling}throw Error(Se(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(r.alternate!==n)throw Error(Se(190))}if(r.tag!==3)throw Error(Se(188));return r.stateNode.current===r?t:e}function mb(t){return t=CA(t),t!==null?gb(t):null}function gb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gb(t);if(e!==null)return e;t=t.sibling}return null}var yb=Ir.unstable_scheduleCallback,my=Ir.unstable_cancelCallback,RA=Ir.unstable_shouldYield,PA=Ir.unstable_requestPaint,St=Ir.unstable_now,jA=Ir.unstable_getCurrentPriorityLevel,rg=Ir.unstable_ImmediatePriority,vb=Ir.unstable_UserBlockingPriority,uc=Ir.unstable_NormalPriority,DA=Ir.unstable_LowPriority,_b=Ir.unstable_IdlePriority,Jc=null,wn=null;function OA(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Jc,t,void 0,(t.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:FA,LA=Math.log,MA=Math.LN2;function FA(t){return t>>>=0,t===0?32:31-(LA(t)/MA|0)|0}var pu=64,mu=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Aa(a):(s&=o,s!==0&&(n=Aa(s)))}else o=r&~i,o!==0?n=Aa(o):s!==0&&(n=Aa(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Zr(e),i=1<<r,n|=t[r],e&=~i;return n}function VA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UA(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zr(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=VA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Lp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wb(){var t=pu;return pu<<=1,!(pu&4194240)&&(pu=64),t}function th(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function El(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zr(e),t[e]=r}function BA(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Zr(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function ng(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Zr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var it=0;function bb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xb,ig,Eb,Tb,Sb,Mp=!1,gu=[],ki=null,Ci=null,Ri=null,Za=new Map,el=new Map,wi=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gy(t,e){switch(t){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(e.pointerId)}}function pa(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Sl(e),e!==null&&ig(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qA(t,e,r,n,i){switch(e){case"focusin":return ki=pa(ki,t,e,r,n,i),!0;case"dragenter":return Ci=pa(Ci,t,e,r,n,i),!0;case"mouseover":return Ri=pa(Ri,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Za.set(s,pa(Za.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,el.set(s,pa(el.get(s)||null,t,e,r,n,i)),!0}return!1}function Ab(t){var e=cs(t.target);if(e!==null){var r=Cs(e);if(r!==null){if(e=r.tag,e===13){if(e=pb(r),e!==null){t.blockedOn=e,Sb(t.priority,function(){Eb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Pp=n,r.target.dispatchEvent(n),Pp=null}else return e=Sl(r),e!==null&&ig(e),t.blockedOn=r,!1;e.shift()}return!0}function yy(t,e,r){Uu(t)&&r.delete(e)}function $A(){Mp=!1,ki!==null&&Uu(ki)&&(ki=null),Ci!==null&&Uu(Ci)&&(Ci=null),Ri!==null&&Uu(Ri)&&(Ri=null),Za.forEach(yy),el.forEach(yy)}function ma(t,e){t.blockedOn===e&&(t.blockedOn=null,Mp||(Mp=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,$A)))}function tl(t){function e(i){return ma(i,t)}if(0<gu.length){ma(gu[0],t);for(var r=1;r<gu.length;r++){var n=gu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ki!==null&&ma(ki,t),Ci!==null&&ma(Ci,t),Ri!==null&&ma(Ri,t),Za.forEach(e),el.forEach(e),r=0;r<wi.length;r++)n=wi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<wi.length&&(r=wi[0],r.blockedOn===null);)Ab(r),r.blockedOn===null&&wi.shift()}var xo=ii.ReactCurrentBatchConfig,dc=!0;function WA(t,e,r,n){var i=it,s=xo.transition;xo.transition=null;try{it=1,sg(t,e,r,n)}finally{it=i,xo.transition=s}}function HA(t,e,r,n){var i=it,s=xo.transition;xo.transition=null;try{it=4,sg(t,e,r,n)}finally{it=i,xo.transition=s}}function sg(t,e,r,n){if(dc){var i=Fp(t,e,r,n);if(i===null)dh(t,e,n,hc,r),gy(t,n);else if(qA(i,t,e,r,n))n.stopPropagation();else if(gy(t,n),e&4&&-1<zA.indexOf(t)){for(;i!==null;){var s=Sl(i);if(s!==null&&xb(s),s=Fp(t,e,r,n),s===null&&dh(t,e,n,hc,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else dh(t,e,n,null,r)}}var hc=null;function Fp(t,e,r,n){if(hc=null,t=tg(n),t=cs(t),t!==null)if(e=Cs(t),e===null)t=null;else if(r=e.tag,r===13){if(t=pb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hc=t,null}function Ib(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jA()){case rg:return 1;case vb:return 4;case uc:case DA:return 16;case _b:return 536870912;default:return 16}default:return 16}}var Ai=null,og=null,Bu=null;function Nb(){if(Bu)return Bu;var t,e=og,r=e.length,n,i="value"in Ai?Ai.value:Ai.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Bu=i.slice(t,1<n?1-n:void 0)}function zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yu(){return!0}function vy(){return!1}function kr(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yu:vy,this.isPropagationStopped=vy,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yu)},persist:function(){},isPersistent:yu}),e}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ag=kr(Qo),Tl=_t({},Qo,{view:0,detail:0}),KA=kr(Tl),rh,nh,ga,Zc=_t({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ga&&(ga&&t.type==="mousemove"?(rh=t.screenX-ga.screenX,nh=t.screenY-ga.screenY):nh=rh=0,ga=t),rh)},movementY:function(t){return"movementY"in t?t.movementY:nh}}),_y=kr(Zc),GA=_t({},Zc,{dataTransfer:0}),QA=kr(GA),XA=_t({},Tl,{relatedTarget:0}),ih=kr(XA),YA=_t({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),JA=kr(YA),ZA=_t({},Qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e2=kr(ZA),t2=_t({},Qo,{data:0}),wy=kr(t2),r2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=i2[t])?!!e[t]:!1}function lg(){return s2}var o2=_t({},Tl,{key:function(t){if(t.key){var e=r2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lg,charCode:function(t){return t.type==="keypress"?zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a2=kr(o2),l2=_t({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),by=kr(l2),u2=_t({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lg}),c2=kr(u2),d2=_t({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),h2=kr(d2),f2=_t({},Zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),p2=kr(f2),m2=[9,13,27,32],ug=Qn&&"CompositionEvent"in window,Ma=null;Qn&&"documentMode"in document&&(Ma=document.documentMode);var g2=Qn&&"TextEvent"in window&&!Ma,kb=Qn&&(!ug||Ma&&8<Ma&&11>=Ma),xy=" ",Ey=!1;function Cb(t,e){switch(t){case"keyup":return m2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var so=!1;function y2(t,e){switch(t){case"compositionend":return Rb(e);case"keypress":return e.which!==32?null:(Ey=!0,xy);case"textInput":return t=e.data,t===xy&&Ey?null:t;default:return null}}function v2(t,e){if(so)return t==="compositionend"||!ug&&Cb(t,e)?(t=Nb(),Bu=og=Ai=null,so=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kb&&e.locale!=="ko"?null:e.data;default:return null}}var _2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_2[t.type]:e==="textarea"}function Pb(t,e,r,n){ub(n),e=fc(e,"onChange"),0<e.length&&(r=new ag("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Fa=null,rl=null;function w2(t){qb(t,0)}function ed(t){var e=lo(t);if(rb(e))return t}function b2(t,e){if(t==="change")return e}var jb=!1;if(Qn){var sh;if(Qn){var oh="oninput"in document;if(!oh){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),oh=typeof Sy.oninput=="function"}sh=oh}else sh=!1;jb=sh&&(!document.documentMode||9<document.documentMode)}function Ay(){Fa&&(Fa.detachEvent("onpropertychange",Db),rl=Fa=null)}function Db(t){if(t.propertyName==="value"&&ed(rl)){var e=[];Pb(e,rl,t,tg(t)),fb(w2,e)}}function x2(t,e,r){t==="focusin"?(Ay(),Fa=e,rl=r,Fa.attachEvent("onpropertychange",Db)):t==="focusout"&&Ay()}function E2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ed(rl)}function T2(t,e){if(t==="click")return ed(e)}function S2(t,e){if(t==="input"||t==="change")return ed(e)}function A2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:A2;function nl(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!wp.call(e,i)||!tn(t[i],e[i]))return!1}return!0}function Iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ny(t,e){var r=Iy(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Iy(r)}}function Ob(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ob(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lb(){for(var t=window,e=oc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=oc(t.document)}return e}function cg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I2(t){var e=Lb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Ob(r.ownerDocument.documentElement,r)){if(n!==null&&cg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Ny(r,s);var o=Ny(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N2=Qn&&"documentMode"in document&&11>=document.documentMode,oo=null,Vp=null,Va=null,Up=!1;function ky(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Up||oo==null||oo!==oc(n)||(n=oo,"selectionStart"in n&&cg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Va&&nl(Va,n)||(Va=n,n=fc(Vp,"onSelect"),0<n.length&&(e=new ag("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=oo)))}function vu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ao={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},ah={},Mb={};Qn&&(Mb=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function td(t){if(ah[t])return ah[t];if(!ao[t])return t;var e=ao[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Mb)return ah[t]=e[r];return t}var Fb=td("animationend"),Vb=td("animationiteration"),Ub=td("animationstart"),Bb=td("transitionend"),zb=new Map,Cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(t,e){zb.set(t,e),ks(e,[t])}for(var lh=0;lh<Cy.length;lh++){var uh=Cy[lh],k2=uh.toLowerCase(),C2=uh[0].toUpperCase()+uh.slice(1);Ki(k2,"on"+C2)}Ki(Fb,"onAnimationEnd");Ki(Vb,"onAnimationIteration");Ki(Ub,"onAnimationStart");Ki("dblclick","onDoubleClick");Ki("focusin","onFocus");Ki("focusout","onBlur");Ki(Bb,"onTransitionEnd");Co("onMouseEnter",["mouseout","mouseover"]);Co("onMouseLeave",["mouseout","mouseover"]);Co("onPointerEnter",["pointerout","pointerover"]);Co("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function Ry(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,kA(n,e,void 0,t),t.currentTarget=null}function qb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ry(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ry(i,a,c),s=l}}}if(lc)throw t=Op,lc=!1,Op=null,t}function dt(t,e){var r=e[Wp];r===void 0&&(r=e[Wp]=new Set);var n=t+"__bubble";r.has(n)||($b(e,t,2,!1),r.add(n))}function ch(t,e,r){var n=0;e&&(n|=4),$b(r,t,n,e)}var _u="_reactListening"+Math.random().toString(36).slice(2);function il(t){if(!t[_u]){t[_u]=!0,Yw.forEach(function(r){r!=="selectionchange"&&(R2.has(r)||ch(r,!1,t),ch(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_u]||(e[_u]=!0,ch("selectionchange",!1,e))}}function $b(t,e,r,n){switch(Ib(e)){case 1:var i=WA;break;case 4:i=HA;break;default:i=sg}r=i.bind(null,e,r,t),i=void 0,!Dp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function dh(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=cs(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}fb(function(){var c=s,h=tg(r),g=[];e:{var w=zb.get(t);if(w!==void 0){var _=ag,T=t;switch(t){case"keypress":if(zu(r)===0)break e;case"keydown":case"keyup":_=a2;break;case"focusin":T="focus",_=ih;break;case"focusout":T="blur",_=ih;break;case"beforeblur":case"afterblur":_=ih;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=_y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=QA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=c2;break;case Fb:case Vb:case Ub:_=JA;break;case Bb:_=h2;break;case"scroll":_=KA;break;case"wheel":_=p2;break;case"copy":case"cut":case"paste":_=e2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=by}var x=(e&4)!==0,j=!x&&t==="scroll",f=x?w!==null?w+"Capture":null:w;x=[];for(var y=c,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,f!==null&&(b=Ja(y,f),b!=null&&x.push(sl(y,b,v)))),j)break;y=y.return}0<x.length&&(w=new _(w,T,null,r,h),g.push({event:w,listeners:x}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",w&&r!==Pp&&(T=r.relatedTarget||r.fromElement)&&(cs(T)||T[Xn]))break e;if((_||w)&&(w=h.window===h?h:(w=h.ownerDocument)?w.defaultView||w.parentWindow:window,_?(T=r.relatedTarget||r.toElement,_=c,T=T?cs(T):null,T!==null&&(j=Cs(T),T!==j||T.tag!==5&&T.tag!==6)&&(T=null)):(_=null,T=c),_!==T)){if(x=_y,b="onMouseLeave",f="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=by,b="onPointerLeave",f="onPointerEnter",y="pointer"),j=_==null?w:lo(_),v=T==null?w:lo(T),w=new x(b,y+"leave",_,r,h),w.target=j,w.relatedTarget=v,b=null,cs(h)===c&&(x=new x(f,y+"enter",T,r,h),x.target=v,x.relatedTarget=j,b=x),j=b,_&&T)t:{for(x=_,f=T,y=0,v=x;v;v=Qs(v))y++;for(v=0,b=f;b;b=Qs(b))v++;for(;0<y-v;)x=Qs(x),y--;for(;0<v-y;)f=Qs(f),v--;for(;y--;){if(x===f||f!==null&&x===f.alternate)break t;x=Qs(x),f=Qs(f)}x=null}else x=null;_!==null&&Py(g,w,_,x,!1),T!==null&&j!==null&&Py(g,j,T,x,!0)}}e:{if(w=c?lo(c):window,_=w.nodeName&&w.nodeName.toLowerCase(),_==="select"||_==="input"&&w.type==="file")var I=b2;else if(Ty(w))if(jb)I=S2;else{I=E2;var B=x2}else(_=w.nodeName)&&_.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(I=T2);if(I&&(I=I(t,c))){Pb(g,I,r,h);break e}B&&B(t,w,c),t==="focusout"&&(B=w._wrapperState)&&B.controlled&&w.type==="number"&&Ip(w,"number",w.value)}switch(B=c?lo(c):window,t){case"focusin":(Ty(B)||B.contentEditable==="true")&&(oo=B,Vp=c,Va=null);break;case"focusout":Va=Vp=oo=null;break;case"mousedown":Up=!0;break;case"contextmenu":case"mouseup":case"dragend":Up=!1,ky(g,r,h);break;case"selectionchange":if(N2)break;case"keydown":case"keyup":ky(g,r,h)}var k;if(ug)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else so?Cb(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(kb&&r.locale!=="ko"&&(so||R!=="onCompositionStart"?R==="onCompositionEnd"&&so&&(k=Nb()):(Ai=h,og="value"in Ai?Ai.value:Ai.textContent,so=!0)),B=fc(c,R),0<B.length&&(R=new wy(R,t,null,r,h),g.push({event:R,listeners:B}),k?R.data=k:(k=Rb(r),k!==null&&(R.data=k)))),(k=g2?y2(t,r):v2(t,r))&&(c=fc(c,"onBeforeInput"),0<c.length&&(h=new wy("onBeforeInput","beforeinput",null,r,h),g.push({event:h,listeners:c}),h.data=k))}qb(g,e)})}function sl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function fc(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ja(t,r),s!=null&&n.unshift(sl(t,s,i)),s=Ja(t,e),s!=null&&n.push(sl(t,s,i))),t=t.return}return n}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Py(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Ja(r,s),l!=null&&o.unshift(sl(r,l,a))):i||(l=Ja(r,s),l!=null&&o.push(sl(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var P2=/\r\n?/g,j2=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(P2,`
`).replace(j2,"")}function wu(t,e,r){if(e=jy(e),jy(t)!==e&&r)throw Error(Se(425))}function pc(){}var Bp=null,zp=null;function qp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $p=typeof setTimeout=="function"?setTimeout:void 0,D2=typeof clearTimeout=="function"?clearTimeout:void 0,Dy=typeof Promise=="function"?Promise:void 0,O2=typeof queueMicrotask=="function"?queueMicrotask:typeof Dy<"u"?function(t){return Dy.resolve(null).then(t).catch(L2)}:$p;function L2(t){setTimeout(function(){throw t})}function hh(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),tl(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);tl(e)}function Pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Oy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),yn="__reactFiber$"+Xo,ol="__reactProps$"+Xo,Xn="__reactContainer$"+Xo,Wp="__reactEvents$"+Xo,M2="__reactListeners$"+Xo,F2="__reactHandles$"+Xo;function cs(t){var e=t[yn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Xn]||r[yn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Oy(t);t!==null;){if(r=t[yn])return r;t=Oy(t)}return e}t=r,r=t.parentNode}return null}function Sl(t){return t=t[yn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Se(33))}function rd(t){return t[ol]||null}var Hp=[],uo=-1;function Gi(t){return{current:t}}function ht(t){0>uo||(t.current=Hp[uo],Hp[uo]=null,uo--)}function ct(t,e){uo++,Hp[uo]=t.current,t.current=e}var zi={},or=Gi(zi),vr=Gi(!1),vs=zi;function Ro(t,e){var r=t.type.contextTypes;if(!r)return zi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _r(t){return t=t.childContextTypes,t!=null}function mc(){ht(vr),ht(or)}function Ly(t,e,r){if(or.current!==zi)throw Error(Se(168));ct(or,e),ct(vr,r)}function Wb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Se(108,xA(t)||"Unknown",i));return _t({},r,n)}function gc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zi,vs=or.current,ct(or,t),ct(vr,vr.current),!0}function My(t,e,r){var n=t.stateNode;if(!n)throw Error(Se(169));r?(t=Wb(t,e,vs),n.__reactInternalMemoizedMergedChildContext=t,ht(vr),ht(or),ct(or,t)):ht(vr),ct(vr,r)}var Mn=null,nd=!1,fh=!1;function Hb(t){Mn===null?Mn=[t]:Mn.push(t)}function V2(t){nd=!0,Hb(t)}function Qi(){if(!fh&&Mn!==null){fh=!0;var t=0,e=it;try{var r=Mn;for(it=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Mn=null,nd=!1}catch(i){throw Mn!==null&&(Mn=Mn.slice(t+1)),yb(rg,Qi),i}finally{it=e,fh=!1}}return null}var co=[],ho=0,yc=null,vc=0,Or=[],Lr=0,_s=null,Vn=1,Un="";function as(t,e){co[ho++]=vc,co[ho++]=yc,yc=t,vc=e}function Kb(t,e,r){Or[Lr++]=Vn,Or[Lr++]=Un,Or[Lr++]=_s,_s=t;var n=Vn;t=Un;var i=32-Zr(n)-1;n&=~(1<<i),r+=1;var s=32-Zr(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Vn=1<<32-Zr(e)+i|r<<i|n,Un=s+t}else Vn=1<<s|r<<i|n,Un=t}function dg(t){t.return!==null&&(as(t,1),Kb(t,1,0))}function hg(t){for(;t===yc;)yc=co[--ho],co[ho]=null,vc=co[--ho],co[ho]=null;for(;t===_s;)_s=Or[--Lr],Or[Lr]=null,Un=Or[--Lr],Or[Lr]=null,Vn=Or[--Lr],Or[Lr]=null}var Ar=null,Tr=null,pt=!1,Jr=null;function Gb(t,e){var r=Mr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Fy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ar=t,Tr=Pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ar=t,Tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=_s!==null?{id:Vn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Mr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ar=t,Tr=null,!0):!1;default:return!1}}function Kp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gp(t){if(pt){var e=Tr;if(e){var r=e;if(!Fy(t,e)){if(Kp(t))throw Error(Se(418));e=Pi(r.nextSibling);var n=Ar;e&&Fy(t,e)?Gb(n,r):(t.flags=t.flags&-4097|2,pt=!1,Ar=t)}}else{if(Kp(t))throw Error(Se(418));t.flags=t.flags&-4097|2,pt=!1,Ar=t}}}function Vy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ar=t}function bu(t){if(t!==Ar)return!1;if(!pt)return Vy(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qp(t.type,t.memoizedProps)),e&&(e=Tr)){if(Kp(t))throw Qb(),Error(Se(418));for(;e;)Gb(t,e),e=Pi(e.nextSibling)}if(Vy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Tr=Pi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Tr=null}}else Tr=Ar?Pi(t.stateNode.nextSibling):null;return!0}function Qb(){for(var t=Tr;t;)t=Pi(t.nextSibling)}function Po(){Tr=Ar=null,pt=!1}function fg(t){Jr===null?Jr=[t]:Jr.push(t)}var U2=ii.ReactCurrentBatchConfig;function ya(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Se(309));var n=r.stateNode}if(!n)throw Error(Se(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Se(284));if(!r._owner)throw Error(Se(290,t))}return t}function xu(t,e){throw t=Object.prototype.toString.call(e),Error(Se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uy(t){var e=t._init;return e(t._payload)}function Xb(t){function e(f,y){if(t){var v=f.deletions;v===null?(f.deletions=[y],f.flags|=16):v.push(y)}}function r(f,y){if(!t)return null;for(;y!==null;)e(f,y),y=y.sibling;return null}function n(f,y){for(f=new Map;y!==null;)y.key!==null?f.set(y.key,y):f.set(y.index,y),y=y.sibling;return f}function i(f,y){return f=Li(f,y),f.index=0,f.sibling=null,f}function s(f,y,v){return f.index=v,t?(v=f.alternate,v!==null?(v=v.index,v<y?(f.flags|=2,y):v):(f.flags|=2,y)):(f.flags|=1048576,y)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,y,v,b){return y===null||y.tag!==6?(y=wh(v,f.mode,b),y.return=f,y):(y=i(y,v),y.return=f,y)}function l(f,y,v,b){var I=v.type;return I===io?h(f,y,v.props.children,b,v.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===vi&&Uy(I)===y.type)?(b=i(y,v.props),b.ref=ya(f,y,v),b.return=f,b):(b=Qu(v.type,v.key,v.props,null,f.mode,b),b.ref=ya(f,y,v),b.return=f,b)}function c(f,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=bh(v,f.mode,b),y.return=f,y):(y=i(y,v.children||[]),y.return=f,y)}function h(f,y,v,b,I){return y===null||y.tag!==7?(y=gs(v,f.mode,b,I),y.return=f,y):(y=i(y,v),y.return=f,y)}function g(f,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=wh(""+y,f.mode,v),y.return=f,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case du:return v=Qu(y.type,y.key,y.props,null,f.mode,v),v.ref=ya(f,null,y),v.return=f,v;case no:return y=bh(y,f.mode,v),y.return=f,y;case vi:var b=y._init;return g(f,b(y._payload),v)}if(Sa(y)||ha(y))return y=gs(y,f.mode,v,null),y.return=f,y;xu(f,y)}return null}function w(f,y,v,b){var I=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return I!==null?null:a(f,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case du:return v.key===I?l(f,y,v,b):null;case no:return v.key===I?c(f,y,v,b):null;case vi:return I=v._init,w(f,y,I(v._payload),b)}if(Sa(v)||ha(v))return I!==null?null:h(f,y,v,b,null);xu(f,v)}return null}function _(f,y,v,b,I){if(typeof b=="string"&&b!==""||typeof b=="number")return f=f.get(v)||null,a(y,f,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case du:return f=f.get(b.key===null?v:b.key)||null,l(y,f,b,I);case no:return f=f.get(b.key===null?v:b.key)||null,c(y,f,b,I);case vi:var B=b._init;return _(f,y,v,B(b._payload),I)}if(Sa(b)||ha(b))return f=f.get(v)||null,h(y,f,b,I,null);xu(y,b)}return null}function T(f,y,v,b){for(var I=null,B=null,k=y,R=y=0,E=null;k!==null&&R<v.length;R++){k.index>R?(E=k,k=null):E=k.sibling;var U=w(f,k,v[R],b);if(U===null){k===null&&(k=E);break}t&&k&&U.alternate===null&&e(f,k),y=s(U,y,R),B===null?I=U:B.sibling=U,B=U,k=E}if(R===v.length)return r(f,k),pt&&as(f,R),I;if(k===null){for(;R<v.length;R++)k=g(f,v[R],b),k!==null&&(y=s(k,y,R),B===null?I=k:B.sibling=k,B=k);return pt&&as(f,R),I}for(k=n(f,k);R<v.length;R++)E=_(k,f,R,v[R],b),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?R:E.key),y=s(E,y,R),B===null?I=E:B.sibling=E,B=E);return t&&k.forEach(function(W){return e(f,W)}),pt&&as(f,R),I}function x(f,y,v,b){var I=ha(v);if(typeof I!="function")throw Error(Se(150));if(v=I.call(v),v==null)throw Error(Se(151));for(var B=I=null,k=y,R=y=0,E=null,U=v.next();k!==null&&!U.done;R++,U=v.next()){k.index>R?(E=k,k=null):E=k.sibling;var W=w(f,k,U.value,b);if(W===null){k===null&&(k=E);break}t&&k&&W.alternate===null&&e(f,k),y=s(W,y,R),B===null?I=W:B.sibling=W,B=W,k=E}if(U.done)return r(f,k),pt&&as(f,R),I;if(k===null){for(;!U.done;R++,U=v.next())U=g(f,U.value,b),U!==null&&(y=s(U,y,R),B===null?I=U:B.sibling=U,B=U);return pt&&as(f,R),I}for(k=n(f,k);!U.done;R++,U=v.next())U=_(k,f,R,U.value,b),U!==null&&(t&&U.alternate!==null&&k.delete(U.key===null?R:U.key),y=s(U,y,R),B===null?I=U:B.sibling=U,B=U);return t&&k.forEach(function(A){return e(f,A)}),pt&&as(f,R),I}function j(f,y,v,b){if(typeof v=="object"&&v!==null&&v.type===io&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case du:e:{for(var I=v.key,B=y;B!==null;){if(B.key===I){if(I=v.type,I===io){if(B.tag===7){r(f,B.sibling),y=i(B,v.props.children),y.return=f,f=y;break e}}else if(B.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===vi&&Uy(I)===B.type){r(f,B.sibling),y=i(B,v.props),y.ref=ya(f,B,v),y.return=f,f=y;break e}r(f,B);break}else e(f,B);B=B.sibling}v.type===io?(y=gs(v.props.children,f.mode,b,v.key),y.return=f,f=y):(b=Qu(v.type,v.key,v.props,null,f.mode,b),b.ref=ya(f,y,v),b.return=f,f=b)}return o(f);case no:e:{for(B=v.key;y!==null;){if(y.key===B)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(f,y.sibling),y=i(y,v.children||[]),y.return=f,f=y;break e}else{r(f,y);break}else e(f,y);y=y.sibling}y=bh(v,f.mode,b),y.return=f,f=y}return o(f);case vi:return B=v._init,j(f,y,B(v._payload),b)}if(Sa(v))return T(f,y,v,b);if(ha(v))return x(f,y,v,b);xu(f,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(f,y.sibling),y=i(y,v),y.return=f,f=y):(r(f,y),y=wh(v,f.mode,b),y.return=f,f=y),o(f)):r(f,y)}return j}var jo=Xb(!0),Yb=Xb(!1),_c=Gi(null),wc=null,fo=null,pg=null;function mg(){pg=fo=wc=null}function gg(t){var e=_c.current;ht(_c),t._currentValue=e}function Qp(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Eo(t,e){wc=t,pg=fo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yr=!0),t.firstContext=null)}function Ur(t){var e=t._currentValue;if(pg!==t)if(t={context:t,memoizedValue:e,next:null},fo===null){if(wc===null)throw Error(Se(308));fo=t,wc.dependencies={lanes:0,firstContext:t}}else fo=fo.next=t;return e}var ds=null;function yg(t){ds===null?ds=[t]:ds.push(t)}function Jb(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,yg(e)):(r.next=i.next,i.next=r),e.interleaved=r,Yn(t,n)}function Yn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var _i=!1;function vg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ji(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Je&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Yn(t,r)}return i=n.interleaved,i===null?(e.next=e,yg(n)):(e.next=i.next,i.next=e),n.interleaved=e,Yn(t,r)}function qu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ng(t,r)}}function By(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bc(t,e,r,n){var i=t.updateQueue;_i=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,h=c=l=null,a=s;do{var w=a.lane,_=a.eventTime;if((n&w)===w){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,x=a;switch(w=e,_=r,x.tag){case 1:if(T=x.payload,typeof T=="function"){g=T.call(_,g,w);break e}g=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=x.payload,w=typeof T=="function"?T.call(_,g,w):T,w==null)break e;g=_t({},g,w);break e;case 2:_i=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[a]:w.push(a))}else _={eventTime:_,lane:w,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=g):h=h.next=_,o|=w;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;w=a,a=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(h===null&&(l=g),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bs|=o,t.lanes=o,t.memoizedState=g}}function zy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Se(191,i));i.call(n)}}}var Al={},bn=Gi(Al),al=Gi(Al),ll=Gi(Al);function hs(t){if(t===Al)throw Error(Se(174));return t}function _g(t,e){switch(ct(ll,e),ct(al,t),ct(bn,Al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kp(e,t)}ht(bn),ct(bn,e)}function Do(){ht(bn),ht(al),ht(ll)}function ex(t){hs(ll.current);var e=hs(bn.current),r=kp(e,t.type);e!==r&&(ct(al,t),ct(bn,r))}function wg(t){al.current===t&&(ht(bn),ht(al))}var yt=Gi(0);function xc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ph=[];function bg(){for(var t=0;t<ph.length;t++)ph[t]._workInProgressVersionPrimary=null;ph.length=0}var $u=ii.ReactCurrentDispatcher,mh=ii.ReactCurrentBatchConfig,ws=0,vt=null,Ct=null,Mt=null,Ec=!1,Ua=!1,ul=0,B2=0;function er(){throw Error(Se(321))}function xg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!tn(t[r],e[r]))return!1;return!0}function Eg(t,e,r,n,i,s){if(ws=s,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?W2:H2,t=r(n,i),Ua){s=0;do{if(Ua=!1,ul=0,25<=s)throw Error(Se(301));s+=1,Mt=Ct=null,e.updateQueue=null,$u.current=K2,t=r(n,i)}while(Ua)}if($u.current=Tc,e=Ct!==null&&Ct.next!==null,ws=0,Mt=Ct=vt=null,Ec=!1,e)throw Error(Se(300));return t}function Tg(){var t=ul!==0;return ul=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?vt.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Br(){if(Ct===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Mt===null?vt.memoizedState:Mt.next;if(e!==null)Mt=e,Ct=t;else{if(t===null)throw Error(Se(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Mt===null?vt.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function cl(t,e){return typeof e=="function"?e(t):e}function gh(t){var e=Br(),r=e.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=t;var n=Ct,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((ws&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var g={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=g,o=n):l=l.next=g,vt.lanes|=h,bs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,tn(n,e.memoizedState)||(yr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,vt.lanes|=s,bs|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function yh(t){var e=Br(),r=e.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);tn(s,e.memoizedState)||(yr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function tx(){}function rx(t,e){var r=vt,n=Br(),i=e(),s=!tn(n.memoizedState,i);if(s&&(n.memoizedState=i,yr=!0),n=n.queue,Sg(sx.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Mt!==null&&Mt.memoizedState.tag&1){if(r.flags|=2048,dl(9,ix.bind(null,r,n,i,e),void 0,null),Ft===null)throw Error(Se(349));ws&30||nx(r,e,i)}return i}function nx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ix(t,e,r,n){e.value=r,e.getSnapshot=n,ox(e)&&ax(t)}function sx(t,e,r){return r(function(){ox(e)&&ax(t)})}function ox(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!tn(t,r)}catch{return!0}}function ax(t){var e=Yn(t,1);e!==null&&en(e,t,1,-1)}function qy(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:t},e.queue=t,t=t.dispatch=$2.bind(null,vt,t),[e.memoizedState,t]}function dl(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function lx(){return Br().memoizedState}function Wu(t,e,r,n){var i=pn();vt.flags|=t,i.memoizedState=dl(1|e,r,void 0,n===void 0?null:n)}function id(t,e,r,n){var i=Br();n=n===void 0?null:n;var s=void 0;if(Ct!==null){var o=Ct.memoizedState;if(s=o.destroy,n!==null&&xg(n,o.deps)){i.memoizedState=dl(e,r,s,n);return}}vt.flags|=t,i.memoizedState=dl(1|e,r,s,n)}function $y(t,e){return Wu(8390656,8,t,e)}function Sg(t,e){return id(2048,8,t,e)}function ux(t,e){return id(4,2,t,e)}function cx(t,e){return id(4,4,t,e)}function dx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hx(t,e,r){return r=r!=null?r.concat([t]):null,id(4,4,dx.bind(null,e,t),r)}function Ag(){}function fx(t,e){var r=Br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function px(t,e){var r=Br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function mx(t,e,r){return ws&21?(tn(r,e)||(r=wb(),vt.lanes|=r,bs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yr=!0),t.memoizedState=r)}function z2(t,e){var r=it;it=r!==0&&4>r?r:4,t(!0);var n=mh.transition;mh.transition={};try{t(!1),e()}finally{it=r,mh.transition=n}}function gx(){return Br().memoizedState}function q2(t,e,r){var n=Oi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},yx(t))vx(e,r);else if(r=Jb(t,e,r,n),r!==null){var i=cr();en(r,t,n,i),_x(r,e,n)}}function $2(t,e,r){var n=Oi(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(yx(t))vx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,tn(a,o)){var l=e.interleaved;l===null?(i.next=i,yg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=Jb(t,e,i,n),r!==null&&(i=cr(),en(r,t,n,i),_x(r,e,n))}}function yx(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function vx(t,e){Ua=Ec=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function _x(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ng(t,r)}}var Tc={readContext:Ur,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},W2={readContext:Ur,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Ur,useEffect:$y,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Wu(4194308,4,dx.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Wu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wu(4,2,t,e)},useMemo:function(t,e){var r=pn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=pn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=q2.bind(null,vt,t),[n.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:qy,useDebugValue:Ag,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=qy(!1),e=t[0];return t=z2.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=vt,i=pn();if(pt){if(r===void 0)throw Error(Se(407));r=r()}else{if(r=e(),Ft===null)throw Error(Se(349));ws&30||nx(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,$y(sx.bind(null,n,s,t),[t]),n.flags|=2048,dl(9,ix.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=pn(),e=Ft.identifierPrefix;if(pt){var r=Un,n=Vn;r=(n&~(1<<32-Zr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ul++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=B2++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H2={readContext:Ur,useCallback:fx,useContext:Ur,useEffect:Sg,useImperativeHandle:hx,useInsertionEffect:ux,useLayoutEffect:cx,useMemo:px,useReducer:gh,useRef:lx,useState:function(){return gh(cl)},useDebugValue:Ag,useDeferredValue:function(t){var e=Br();return mx(e,Ct.memoizedState,t)},useTransition:function(){var t=gh(cl)[0],e=Br().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:rx,useId:gx,unstable_isNewReconciler:!1},K2={readContext:Ur,useCallback:fx,useContext:Ur,useEffect:Sg,useImperativeHandle:hx,useInsertionEffect:ux,useLayoutEffect:cx,useMemo:px,useReducer:yh,useRef:lx,useState:function(){return yh(cl)},useDebugValue:Ag,useDeferredValue:function(t){var e=Br();return Ct===null?e.memoizedState=t:mx(e,Ct.memoizedState,t)},useTransition:function(){var t=yh(cl)[0],e=Br().memoizedState;return[t,e]},useMutableSource:tx,useSyncExternalStore:rx,useId:gx,unstable_isNewReconciler:!1};function Qr(t,e){if(t&&t.defaultProps){e=_t({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Xp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:_t({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var sd={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=cr(),i=Oi(t),s=Wn(n,i);s.payload=e,r!=null&&(s.callback=r),e=ji(t,s,i),e!==null&&(en(e,t,i,n),qu(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=cr(),i=Oi(t),s=Wn(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=ji(t,s,i),e!==null&&(en(e,t,i,n),qu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=cr(),n=Oi(t),i=Wn(r,n);i.tag=2,e!=null&&(i.callback=e),e=ji(t,i,n),e!==null&&(en(e,t,n,r),qu(e,t,n))}};function Wy(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!nl(r,n)||!nl(i,s):!0}function wx(t,e,r){var n=!1,i=zi,s=e.contextType;return typeof s=="object"&&s!==null?s=Ur(s):(i=_r(e)?vs:or.current,n=e.contextTypes,s=(n=n!=null)?Ro(t,i):zi),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sd,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&sd.enqueueReplaceState(e,e.state,null)}function Yp(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},vg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ur(s):(s=_r(e)?vs:or.current,i.context=Ro(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xp(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sd.enqueueReplaceState(i,i.state,null),bc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Oo(t,e){try{var r="",n=e;do r+=bA(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function vh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Jp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var G2=typeof WeakMap=="function"?WeakMap:Map;function bx(t,e,r){r=Wn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ac||(Ac=!0,lm=n),Jp(t,e)},r}function xx(t,e,r){r=Wn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Jp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Jp(t,e),typeof n!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Ky(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new G2;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=lI.bind(null,t,e,r),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qy(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Wn(-1,1),e.tag=2,ji(r,e,1))),r.lanes|=1),t)}var Q2=ii.ReactCurrentOwner,yr=!1;function ur(t,e,r,n){e.child=t===null?Yb(e,null,r,n):jo(e,t.child,r,n)}function Xy(t,e,r,n,i){r=r.render;var s=e.ref;return Eo(e,i),n=Eg(t,e,r,n,s,i),r=Tg(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(pt&&r&&dg(e),e.flags|=1,ur(t,e,n,i),e.child)}function Yy(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Dg(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Ex(t,e,s,n,i)):(t=Qu(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:nl,r(o,n)&&t.ref===e.ref)return Jn(t,e,i)}return e.flags|=1,t=Li(s,n),t.ref=e.ref,t.return=e,e.child=t}function Ex(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(nl(s,n)&&t.ref===e.ref)if(yr=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(yr=!0);else return e.lanes=t.lanes,Jn(t,e,i)}return Zp(t,e,r,n,i)}function Tx(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(mo,Er),Er|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ct(mo,Er),Er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ct(mo,Er),Er|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ct(mo,Er),Er|=n;return ur(t,e,i,r),e.child}function Sx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Zp(t,e,r,n,i){var s=_r(r)?vs:or.current;return s=Ro(e,s),Eo(e,i),r=Eg(t,e,r,n,s,i),n=Tg(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(pt&&n&&dg(e),e.flags|=1,ur(t,e,r,i),e.child)}function Jy(t,e,r,n,i){if(_r(r)){var s=!0;gc(e)}else s=!1;if(Eo(e,i),e.stateNode===null)Hu(t,e),wx(e,r,n),Yp(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ur(c):(c=_r(r)?vs:or.current,c=Ro(e,c));var h=r.getDerivedStateFromProps,g=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&Hy(e,o,n,c),_i=!1;var w=e.memoizedState;o.state=w,bc(e,n,o,i),l=e.memoizedState,a!==n||w!==l||vr.current||_i?(typeof h=="function"&&(Xp(e,r,h,n),l=e.memoizedState),(a=_i||Wy(e,r,a,n,w,l,c))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Zb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Qr(e.type,a),o.props=c,g=e.pendingProps,w=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ur(l):(l=_r(r)?vs:or.current,l=Ro(e,l));var _=r.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||w!==l)&&Hy(e,o,n,l),_i=!1,w=e.memoizedState,o.state=w,bc(e,n,o,i);var T=e.memoizedState;a!==g||w!==T||vr.current||_i?(typeof _=="function"&&(Xp(e,r,_,n),T=e.memoizedState),(c=_i||Wy(e,r,c,n,w,T,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=T),o.props=n,o.state=T,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),n=!1)}return em(t,e,r,n,s,i)}function em(t,e,r,n,i,s){Sx(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&My(e,r,!1),Jn(t,e,s);n=e.stateNode,Q2.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=jo(e,t.child,null,s),e.child=jo(e,null,a,s)):ur(t,e,a,s),e.memoizedState=n.state,i&&My(e,r,!0),e.child}function Ax(t){var e=t.stateNode;e.pendingContext?Ly(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ly(t,e.context,!1),_g(t,e.containerInfo)}function Zy(t,e,r,n,i){return Po(),fg(i),e.flags|=256,ur(t,e,r,n),e.child}var tm={dehydrated:null,treeContext:null,retryLane:0};function rm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ix(t,e,r){var n=e.pendingProps,i=yt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ct(yt,i&1),t===null)return Gp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ld(o,n,0,null),t=gs(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rm(r),e.memoizedState=tm,t):Ig(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return X2(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Li(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Li(a,s):(s=gs(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?rm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=tm,n}return s=t.child,t=s.sibling,n=Li(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ig(t,e){return e=ld({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eu(t,e,r,n){return n!==null&&fg(n),jo(e,t.child,null,r),t=Ig(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function X2(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=vh(Error(Se(422))),Eu(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=ld({mode:"visible",children:n.children},i,0,null),s=gs(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&jo(e,t.child,null,o),e.child.memoizedState=rm(o),e.memoizedState=tm,s);if(!(e.mode&1))return Eu(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Se(419)),n=vh(s,n,void 0),Eu(t,e,o,n)}if(a=(o&t.childLanes)!==0,yr||a){if(n=Ft,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yn(t,i),en(n,t,i,-1))}return jg(),n=vh(Error(Se(421))),Eu(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Tr=Pi(i.nextSibling),Ar=e,pt=!0,Jr=null,t!==null&&(Or[Lr++]=Vn,Or[Lr++]=Un,Or[Lr++]=_s,Vn=t.id,Un=t.overflow,_s=e),e=Ig(e,n.children),e.flags|=4096,e)}function ev(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Qp(t.return,e,r)}function _h(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Nx(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(ur(t,e,n.children,r),n=yt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ev(t,r,e);else if(t.tag===19)ev(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ct(yt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&xc(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),_h(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xc(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}_h(e,!0,r,null,s);break;case"together":_h(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),bs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Se(153));if(e.child!==null){for(t=e.child,r=Li(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Li(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Y2(t,e,r){switch(e.tag){case 3:Ax(e),Po();break;case 5:ex(e);break;case 1:_r(e.type)&&gc(e);break;case 4:_g(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ct(_c,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ct(yt,yt.current&1),e.flags|=128,null):r&e.child.childLanes?Ix(t,e,r):(ct(yt,yt.current&1),t=Jn(t,e,r),t!==null?t.sibling:null);ct(yt,yt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Nx(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ct(yt,yt.current),n)break;return null;case 22:case 23:return e.lanes=0,Tx(t,e,r)}return Jn(t,e,r)}var kx,nm,Cx,Rx;kx=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};nm=function(){};Cx=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,hs(bn.current);var s=null;switch(r){case"input":i=Sp(t,i),n=Sp(t,n),s=[];break;case"select":i=_t({},i,{value:void 0}),n=_t({},n,{value:void 0}),s=[];break;case"textarea":i=Np(t,i),n=Np(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=pc)}Cp(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Rx=function(t,e,r,n){r!==n&&(e.flags|=4)};function va(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function J2(t,e,r){var n=e.pendingProps;switch(hg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(e),null;case 1:return _r(e.type)&&mc(),tr(e),null;case 3:return n=e.stateNode,Do(),ht(vr),ht(or),bg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jr!==null&&(dm(Jr),Jr=null))),nm(t,e),tr(e),null;case 5:wg(e);var i=hs(ll.current);if(r=e.type,t!==null&&e.stateNode!=null)Cx(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Se(166));return tr(e),null}if(t=hs(bn.current),bu(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[yn]=e,n[ol]=s,t=(e.mode&1)!==0,r){case"dialog":dt("cancel",n),dt("close",n);break;case"iframe":case"object":case"embed":dt("load",n);break;case"video":case"audio":for(i=0;i<Ia.length;i++)dt(Ia[i],n);break;case"source":dt("error",n);break;case"img":case"image":case"link":dt("error",n),dt("load",n);break;case"details":dt("toggle",n);break;case"input":uy(n,s),dt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},dt("invalid",n);break;case"textarea":dy(n,s),dt("invalid",n)}Cp(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&wu(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wu(n.textContent,a,t),i=["children",""+a]):Xa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dt("scroll",n)}switch(r){case"input":hu(n),cy(n,s,!0);break;case"textarea":hu(n),hy(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=pc)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[yn]=e,t[ol]=n,kx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rp(r,n),r){case"dialog":dt("cancel",t),dt("close",t),i=n;break;case"iframe":case"object":case"embed":dt("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ia.length;i++)dt(Ia[i],t);i=n;break;case"source":dt("error",t),i=n;break;case"img":case"image":case"link":dt("error",t),dt("load",t),i=n;break;case"details":dt("toggle",t),i=n;break;case"input":uy(t,n),i=Sp(t,n),dt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=_t({},n,{value:void 0}),dt("invalid",t);break;case"textarea":dy(t,n),i=Np(t,n),dt("invalid",t);break;default:i=n}Cp(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?lb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ob(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ya(t,l):typeof l=="number"&&Ya(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dt("scroll",t):l!=null&&Ym(t,s,l,o))}switch(r){case"input":hu(t),cy(t,n,!1);break;case"textarea":hu(t),hy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Bi(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?_o(t,!!n.multiple,s,!1):n.defaultValue!=null&&_o(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=pc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tr(e),null;case 6:if(t&&e.stateNode!=null)Rx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Se(166));if(r=hs(ll.current),hs(bn.current),bu(e)){if(n=e.stateNode,r=e.memoizedProps,n[yn]=e,(s=n.nodeValue!==r)&&(t=Ar,t!==null))switch(t.tag){case 3:wu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wu(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yn]=e,e.stateNode=n}return tr(e),null;case 13:if(ht(yt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Tr!==null&&e.mode&1&&!(e.flags&128))Qb(),Po(),e.flags|=98560,s=!1;else if(s=bu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Se(317));s[yn]=e}else Po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tr(e),s=!1}else Jr!==null&&(dm(Jr),Jr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?Pt===0&&(Pt=3):jg())),e.updateQueue!==null&&(e.flags|=4),tr(e),null);case 4:return Do(),nm(t,e),t===null&&il(e.stateNode.containerInfo),tr(e),null;case 10:return gg(e.type._context),tr(e),null;case 17:return _r(e.type)&&mc(),tr(e),null;case 19:if(ht(yt),s=e.memoizedState,s===null)return tr(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)va(s,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xc(t),o!==null){for(e.flags|=128,va(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ct(yt,yt.current&1|2),e.child}t=t.sibling}s.tail!==null&&St()>Lo&&(e.flags|=128,n=!0,va(s,!1),e.lanes=4194304)}else{if(!n)if(t=xc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),va(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pt)return tr(e),null}else 2*St()-s.renderingStartTime>Lo&&r!==1073741824&&(e.flags|=128,n=!0,va(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=St(),e.sibling=null,r=yt.current,ct(yt,n?r&1|2:r&1),e):(tr(e),null);case 22:case 23:return Pg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Er&1073741824&&(tr(e),e.subtreeFlags&6&&(e.flags|=8192)):tr(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function Z2(t,e){switch(hg(e),e.tag){case 1:return _r(e.type)&&mc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),ht(vr),ht(or),bg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wg(e),null;case 13:if(ht(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));Po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(yt),null;case 4:return Do(),null;case 10:return gg(e.type._context),null;case 22:case 23:return Pg(),null;case 24:return null;default:return null}}var Tu=!1,ir=!1,eI=typeof WeakSet=="function"?WeakSet:Set,ke=null;function po(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Et(t,e,n)}else r.current=null}function im(t,e,r){try{r()}catch(n){Et(t,e,n)}}var tv=!1;function tI(t,e){if(Bp=dc,t=Lb(),cg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,g=t,w=null;t:for(;;){for(var _;g!==r||i!==0&&g.nodeType!==3||(a=o+i),g!==s||n!==0&&g.nodeType!==3||(l=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(_=g.firstChild)!==null;)w=g,g=_;for(;;){if(g===t)break t;if(w===r&&++c===i&&(a=o),w===s&&++h===n&&(l=o),(_=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=_}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(zp={focusedElem:t,selectionRange:r},dc=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var x=T.memoizedProps,j=T.memoizedState,f=e.stateNode,y=f.getSnapshotBeforeUpdate(e.elementType===e.type?x:Qr(e.type,x),j);f.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(b){Et(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return T=tv,tv=!1,T}function Ba(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&im(e,r,s)}i=i.next}while(i!==n)}}function od(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function sm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Px(t){var e=t.alternate;e!==null&&(t.alternate=null,Px(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[ol],delete e[Wp],delete e[M2],delete e[F2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jx(t){return t.tag===5||t.tag===3||t.tag===4}function rv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=pc));else if(n!==4&&(t=t.child,t!==null))for(om(t,e,r),t=t.sibling;t!==null;)om(t,e,r),t=t.sibling}function am(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(am(t,e,r),t=t.sibling;t!==null;)am(t,e,r),t=t.sibling}var qt=null,Yr=!1;function mi(t,e,r){for(r=r.child;r!==null;)Dx(t,e,r),r=r.sibling}function Dx(t,e,r){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Jc,r)}catch{}switch(r.tag){case 5:ir||po(r,e);case 6:var n=qt,i=Yr;qt=null,mi(t,e,r),qt=n,Yr=i,qt!==null&&(Yr?(t=qt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):qt.removeChild(r.stateNode));break;case 18:qt!==null&&(Yr?(t=qt,r=r.stateNode,t.nodeType===8?hh(t.parentNode,r):t.nodeType===1&&hh(t,r),tl(t)):hh(qt,r.stateNode));break;case 4:n=qt,i=Yr,qt=r.stateNode.containerInfo,Yr=!0,mi(t,e,r),qt=n,Yr=i;break;case 0:case 11:case 14:case 15:if(!ir&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&im(r,e,o),i=i.next}while(i!==n)}mi(t,e,r);break;case 1:if(!ir&&(po(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Et(r,e,a)}mi(t,e,r);break;case 21:mi(t,e,r);break;case 22:r.mode&1?(ir=(n=ir)||r.memoizedState!==null,mi(t,e,r),ir=n):mi(t,e,r);break;default:mi(t,e,r)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new eI),e.forEach(function(n){var i=cI.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Gr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qt=a.stateNode,Yr=!1;break e;case 3:qt=a.stateNode.containerInfo,Yr=!0;break e;case 4:qt=a.stateNode.containerInfo,Yr=!0;break e}a=a.return}if(qt===null)throw Error(Se(160));Dx(s,o,i),qt=null,Yr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Et(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ox(e,t),e=e.sibling}function Ox(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gr(e,t),cn(t),n&4){try{Ba(3,t,t.return),od(3,t)}catch(x){Et(t,t.return,x)}try{Ba(5,t,t.return)}catch(x){Et(t,t.return,x)}}break;case 1:Gr(e,t),cn(t),n&512&&r!==null&&po(r,r.return);break;case 5:if(Gr(e,t),cn(t),n&512&&r!==null&&po(r,r.return),t.flags&32){var i=t.stateNode;try{Ya(i,"")}catch(x){Et(t,t.return,x)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nb(i,s),Rp(a,o);var c=Rp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],g=l[o+1];h==="style"?lb(i,g):h==="dangerouslySetInnerHTML"?ob(i,g):h==="children"?Ya(i,g):Ym(i,h,g,c)}switch(a){case"input":Ap(i,s);break;case"textarea":ib(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?_o(i,!!s.multiple,_,!1):w!==!!s.multiple&&(s.defaultValue!=null?_o(i,!!s.multiple,s.defaultValue,!0):_o(i,!!s.multiple,s.multiple?[]:"",!1))}i[ol]=s}catch(x){Et(t,t.return,x)}}break;case 6:if(Gr(e,t),cn(t),n&4){if(t.stateNode===null)throw Error(Se(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Et(t,t.return,x)}}break;case 3:if(Gr(e,t),cn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{tl(e.containerInfo)}catch(x){Et(t,t.return,x)}break;case 4:Gr(e,t),cn(t);break;case 13:Gr(e,t),cn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cg=St())),n&4&&nv(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(ir=(c=ir)||h,Gr(e,t),ir=c):Gr(e,t),cn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ke=t,h=t.child;h!==null;){for(g=ke=h;ke!==null;){switch(w=ke,_=w.child,w.tag){case 0:case 11:case 14:case 15:Ba(4,w,w.return);break;case 1:po(w,w.return);var T=w.stateNode;if(typeof T.componentWillUnmount=="function"){n=w,r=w.return;try{e=n,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(x){Et(n,r,x)}}break;case 5:po(w,w.return);break;case 22:if(w.memoizedState!==null){sv(g);continue}}_!==null?(_.return=w,ke=_):sv(g)}h=h.sibling}e:for(h=null,g=t;;){if(g.tag===5){if(h===null){h=g;try{i=g.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ab("display",o))}catch(x){Et(t,t.return,x)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(x){Et(t,t.return,x)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Gr(e,t),cn(t),n&4&&nv(t);break;case 21:break;default:Gr(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(jx(r)){var n=r;break e}r=r.return}throw Error(Se(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ya(i,""),n.flags&=-33);var s=rv(t);am(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=rv(t);om(t,a,o);break;default:throw Error(Se(161))}}catch(l){Et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rI(t,e,r){ke=t,Lx(t)}function Lx(t,e,r){for(var n=(t.mode&1)!==0;ke!==null;){var i=ke,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Tu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ir;a=Tu;var c=ir;if(Tu=o,(ir=l)&&!c)for(ke=i;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?ov(i):l!==null?(l.return=o,ke=l):ov(i);for(;s!==null;)ke=s,Lx(s),s=s.sibling;ke=i,Tu=a,ir=c}iv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ke=s):iv(t)}}function iv(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ir||od(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ir)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Qr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zy(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}zy(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&tl(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}ir||e.flags&512&&sm(e)}catch(w){Et(e,e.return,w)}}if(e===t){ke=null;break}if(r=e.sibling,r!==null){r.return=e.return,ke=r;break}ke=e.return}}function sv(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ke=r;break}ke=e.return}}function ov(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{od(4,e)}catch(l){Et(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Et(e,i,l)}}var s=e.return;try{sm(e)}catch(l){Et(e,s,l)}break;case 5:var o=e.return;try{sm(e)}catch(l){Et(e,o,l)}}}catch(l){Et(e,e.return,l)}if(e===t){ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ke=a;break}ke=e.return}}var nI=Math.ceil,Sc=ii.ReactCurrentDispatcher,Ng=ii.ReactCurrentOwner,Fr=ii.ReactCurrentBatchConfig,Je=0,Ft=null,Nt=null,Ht=0,Er=0,mo=Gi(0),Pt=0,hl=null,bs=0,ad=0,kg=0,za=null,mr=null,Cg=0,Lo=1/0,Ln=null,Ac=!1,lm=null,Di=null,Su=!1,Ii=null,Ic=0,qa=0,um=null,Ku=-1,Gu=0;function cr(){return Je&6?St():Ku!==-1?Ku:Ku=St()}function Oi(t){return t.mode&1?Je&2&&Ht!==0?Ht&-Ht:U2.transition!==null?(Gu===0&&(Gu=wb()),Gu):(t=it,t!==0||(t=window.event,t=t===void 0?16:Ib(t.type)),t):1}function en(t,e,r,n){if(50<qa)throw qa=0,um=null,Error(Se(185));El(t,r,n),(!(Je&2)||t!==Ft)&&(t===Ft&&(!(Je&2)&&(ad|=r),Pt===4&&bi(t,Ht)),wr(t,n),r===1&&Je===0&&!(e.mode&1)&&(Lo=St()+500,nd&&Qi()))}function wr(t,e){var r=t.callbackNode;UA(t,e);var n=cc(t,t===Ft?Ht:0);if(n===0)r!==null&&my(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&my(r),e===1)t.tag===0?V2(av.bind(null,t)):Hb(av.bind(null,t)),O2(function(){!(Je&6)&&Qi()}),r=null;else{switch(bb(n)){case 1:r=rg;break;case 4:r=vb;break;case 16:r=uc;break;case 536870912:r=_b;break;default:r=uc}r=$x(r,Mx.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Mx(t,e){if(Ku=-1,Gu=0,Je&6)throw Error(Se(327));var r=t.callbackNode;if(To()&&t.callbackNode!==r)return null;var n=cc(t,t===Ft?Ht:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Nc(t,n);else{e=n;var i=Je;Je|=2;var s=Vx();(Ft!==t||Ht!==e)&&(Ln=null,Lo=St()+500,ms(t,e));do try{oI();break}catch(a){Fx(t,a)}while(!0);mg(),Sc.current=s,Je=i,Nt!==null?e=0:(Ft=null,Ht=0,e=Pt)}if(e!==0){if(e===2&&(i=Lp(t),i!==0&&(n=i,e=cm(t,i))),e===1)throw r=hl,ms(t,0),bi(t,n),wr(t,St()),r;if(e===6)bi(t,n);else{if(i=t.current.alternate,!(n&30)&&!iI(i)&&(e=Nc(t,n),e===2&&(s=Lp(t),s!==0&&(n=s,e=cm(t,s))),e===1))throw r=hl,ms(t,0),bi(t,n),wr(t,St()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Se(345));case 2:ls(t,mr,Ln);break;case 3:if(bi(t,n),(n&130023424)===n&&(e=Cg+500-St(),10<e)){if(cc(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){cr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$p(ls.bind(null,t,mr,Ln),e);break}ls(t,mr,Ln);break;case 4:if(bi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Zr(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=St()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nI(n/1960))-n,10<n){t.timeoutHandle=$p(ls.bind(null,t,mr,Ln),n);break}ls(t,mr,Ln);break;case 5:ls(t,mr,Ln);break;default:throw Error(Se(329))}}}return wr(t,St()),t.callbackNode===r?Mx.bind(null,t):null}function cm(t,e){var r=za;return t.current.memoizedState.isDehydrated&&(ms(t,e).flags|=256),t=Nc(t,e),t!==2&&(e=mr,mr=r,e!==null&&dm(e)),t}function dm(t){mr===null?mr=t:mr.push.apply(mr,t)}function iI(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!tn(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bi(t,e){for(e&=~kg,e&=~ad,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Zr(e),n=1<<r;t[r]=-1,e&=~n}}function av(t){if(Je&6)throw Error(Se(327));To();var e=cc(t,0);if(!(e&1))return wr(t,St()),null;var r=Nc(t,e);if(t.tag!==0&&r===2){var n=Lp(t);n!==0&&(e=n,r=cm(t,n))}if(r===1)throw r=hl,ms(t,0),bi(t,e),wr(t,St()),r;if(r===6)throw Error(Se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ls(t,mr,Ln),wr(t,St()),null}function Rg(t,e){var r=Je;Je|=1;try{return t(e)}finally{Je=r,Je===0&&(Lo=St()+500,nd&&Qi())}}function xs(t){Ii!==null&&Ii.tag===0&&!(Je&6)&&To();var e=Je;Je|=1;var r=Fr.transition,n=it;try{if(Fr.transition=null,it=1,t)return t()}finally{it=n,Fr.transition=r,Je=e,!(Je&6)&&Qi()}}function Pg(){Er=mo.current,ht(mo)}function ms(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,D2(r)),Nt!==null)for(r=Nt.return;r!==null;){var n=r;switch(hg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mc();break;case 3:Do(),ht(vr),ht(or),bg();break;case 5:wg(n);break;case 4:Do();break;case 13:ht(yt);break;case 19:ht(yt);break;case 10:gg(n.type._context);break;case 22:case 23:Pg()}r=r.return}if(Ft=t,Nt=t=Li(t.current,null),Ht=Er=e,Pt=0,hl=null,kg=ad=bs=0,mr=za=null,ds!==null){for(e=0;e<ds.length;e++)if(r=ds[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}ds=null}return t}function Fx(t,e){do{var r=Nt;try{if(mg(),$u.current=Tc,Ec){for(var n=vt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ec=!1}if(ws=0,Mt=Ct=vt=null,Ua=!1,ul=0,Ng.current=null,r===null||r.return===null){Pt=1,hl=e,Nt=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Ht,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var w=h.alternate;w?(h.updateQueue=w.updateQueue,h.memoizedState=w.memoizedState,h.lanes=w.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Gy(o);if(_!==null){_.flags&=-257,Qy(_,o,a,s,e),_.mode&1&&Ky(s,c,e),e=_,l=c;var T=e.updateQueue;if(T===null){var x=new Set;x.add(l),e.updateQueue=x}else T.add(l);break e}else{if(!(e&1)){Ky(s,c,e),jg();break e}l=Error(Se(426))}}else if(pt&&a.mode&1){var j=Gy(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Qy(j,o,a,s,e),fg(Oo(l,a));break e}}s=l=Oo(l,a),Pt!==4&&(Pt=2),za===null?za=[s]:za.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=bx(s,l,e);By(s,f);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Di===null||!Di.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=xx(s,a,e);By(s,b);break e}}s=s.return}while(s!==null)}Bx(r)}catch(I){e=I,Nt===r&&r!==null&&(Nt=r=r.return);continue}break}while(!0)}function Vx(){var t=Sc.current;return Sc.current=Tc,t===null?Tc:t}function jg(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ft===null||!(bs&268435455)&&!(ad&268435455)||bi(Ft,Ht)}function Nc(t,e){var r=Je;Je|=2;var n=Vx();(Ft!==t||Ht!==e)&&(Ln=null,ms(t,e));do try{sI();break}catch(i){Fx(t,i)}while(!0);if(mg(),Je=r,Sc.current=n,Nt!==null)throw Error(Se(261));return Ft=null,Ht=0,Pt}function sI(){for(;Nt!==null;)Ux(Nt)}function oI(){for(;Nt!==null&&!RA();)Ux(Nt)}function Ux(t){var e=qx(t.alternate,t,Er);t.memoizedProps=t.pendingProps,e===null?Bx(t):Nt=e,Ng.current=null}function Bx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Z2(r,e),r!==null){r.flags&=32767,Nt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,Nt=null;return}}else if(r=J2(r,e,Er),r!==null){Nt=r;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Pt===0&&(Pt=5)}function ls(t,e,r){var n=it,i=Fr.transition;try{Fr.transition=null,it=1,aI(t,e,r,n)}finally{Fr.transition=i,it=n}return null}function aI(t,e,r,n){do To();while(Ii!==null);if(Je&6)throw Error(Se(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Se(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(BA(t,s),t===Ft&&(Nt=Ft=null,Ht=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Su||(Su=!0,$x(uc,function(){return To(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Fr.transition,Fr.transition=null;var o=it;it=1;var a=Je;Je|=4,Ng.current=null,tI(t,r),Ox(r,t),I2(zp),dc=!!Bp,zp=Bp=null,t.current=r,rI(r),PA(),Je=a,it=o,Fr.transition=s}else t.current=r;if(Su&&(Su=!1,Ii=t,Ic=i),s=t.pendingLanes,s===0&&(Di=null),OA(r.stateNode),wr(t,St()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ac)throw Ac=!1,t=lm,lm=null,t;return Ic&1&&t.tag!==0&&To(),s=t.pendingLanes,s&1?t===um?qa++:(qa=0,um=t):qa=0,Qi(),null}function To(){if(Ii!==null){var t=bb(Ic),e=Fr.transition,r=it;try{if(Fr.transition=null,it=16>t?16:t,Ii===null)var n=!1;else{if(t=Ii,Ii=null,Ic=0,Je&6)throw Error(Se(331));var i=Je;for(Je|=4,ke=t.current;ke!==null;){var s=ke,o=s.child;if(ke.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ke=c;ke!==null;){var h=ke;switch(h.tag){case 0:case 11:case 15:Ba(8,h,s)}var g=h.child;if(g!==null)g.return=h,ke=g;else for(;ke!==null;){h=ke;var w=h.sibling,_=h.return;if(Px(h),h===c){ke=null;break}if(w!==null){w.return=_,ke=w;break}ke=_}}}var T=s.alternate;if(T!==null){var x=T.child;if(x!==null){T.child=null;do{var j=x.sibling;x.sibling=null,x=j}while(x!==null)}}ke=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ke=o;else e:for(;ke!==null;){if(s=ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ba(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,ke=f;break e}ke=s.return}}var y=t.current;for(ke=y;ke!==null;){o=ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ke=v;else e:for(o=y;ke!==null;){if(a=ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:od(9,a)}}catch(I){Et(a,a.return,I)}if(a===o){ke=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ke=b;break e}ke=a.return}}if(Je=i,Qi(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Jc,t)}catch{}n=!0}return n}finally{it=r,Fr.transition=e}}return!1}function lv(t,e,r){e=Oo(r,e),e=bx(t,e,1),t=ji(t,e,1),e=cr(),t!==null&&(El(t,1,e),wr(t,e))}function Et(t,e,r){if(t.tag===3)lv(t,t,r);else for(;e!==null;){if(e.tag===3){lv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Di===null||!Di.has(n))){t=Oo(r,t),t=xx(e,t,1),e=ji(e,t,1),t=cr(),e!==null&&(El(e,1,t),wr(e,t));break}}e=e.return}}function lI(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=cr(),t.pingedLanes|=t.suspendedLanes&r,Ft===t&&(Ht&r)===r&&(Pt===4||Pt===3&&(Ht&130023424)===Ht&&500>St()-Cg?ms(t,0):kg|=r),wr(t,e)}function zx(t,e){e===0&&(t.mode&1?(e=mu,mu<<=1,!(mu&130023424)&&(mu=4194304)):e=1);var r=cr();t=Yn(t,e),t!==null&&(El(t,e,r),wr(t,r))}function uI(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),zx(t,r)}function cI(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Se(314))}n!==null&&n.delete(e),zx(t,r)}var qx;qx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)yr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return yr=!1,Y2(t,e,r);yr=!!(t.flags&131072)}else yr=!1,pt&&e.flags&1048576&&Kb(e,vc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Hu(t,e),t=e.pendingProps;var i=Ro(e,or.current);Eo(e,r),i=Eg(null,e,n,t,i,r);var s=Tg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(n)?(s=!0,gc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vg(e),i.updater=sd,e.stateNode=i,i._reactInternals=e,Yp(e,n,t,r),e=em(null,e,n,!0,s,r)):(e.tag=0,pt&&s&&dg(e),ur(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Hu(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=hI(n),t=Qr(n,t),i){case 0:e=Zp(null,e,n,t,r);break e;case 1:e=Jy(null,e,n,t,r);break e;case 11:e=Xy(null,e,n,t,r);break e;case 14:e=Yy(null,e,n,Qr(n.type,t),r);break e}throw Error(Se(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qr(n,i),Zp(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qr(n,i),Jy(t,e,n,i,r);case 3:e:{if(Ax(e),t===null)throw Error(Se(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Zb(t,e),bc(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Oo(Error(Se(423)),e),e=Zy(t,e,n,r,i);break e}else if(n!==i){i=Oo(Error(Se(424)),e),e=Zy(t,e,n,r,i);break e}else for(Tr=Pi(e.stateNode.containerInfo.firstChild),Ar=e,pt=!0,Jr=null,r=Yb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Po(),n===i){e=Jn(t,e,r);break e}ur(t,e,n,r)}e=e.child}return e;case 5:return ex(e),t===null&&Gp(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qp(n,i)?o=null:s!==null&&qp(n,s)&&(e.flags|=32),Sx(t,e),ur(t,e,o,r),e.child;case 6:return t===null&&Gp(e),null;case 13:return Ix(t,e,r);case 4:return _g(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=jo(e,null,n,r):ur(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qr(n,i),Xy(t,e,n,i,r);case 7:return ur(t,e,e.pendingProps,r),e.child;case 8:return ur(t,e,e.pendingProps.children,r),e.child;case 12:return ur(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ct(_c,n._currentValue),n._currentValue=o,s!==null)if(tn(s.value,o)){if(s.children===i.children&&!vr.current){e=Jn(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Wn(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Qp(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Se(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Qp(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ur(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Eo(e,r),i=Ur(i),n=n(i),e.flags|=1,ur(t,e,n,r),e.child;case 14:return n=e.type,i=Qr(n,e.pendingProps),i=Qr(n.type,i),Yy(t,e,n,i,r);case 15:return Ex(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qr(n,i),Hu(t,e),e.tag=1,_r(n)?(t=!0,gc(e)):t=!1,Eo(e,r),wx(e,n,i),Yp(e,n,i,r),em(null,e,n,!0,t,r);case 19:return Nx(t,e,r);case 22:return Tx(t,e,r)}throw Error(Se(156,e.tag))};function $x(t,e){return yb(t,e)}function dI(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(t,e,r,n){return new dI(t,e,r,n)}function Dg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hI(t){if(typeof t=="function")return Dg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zm)return 11;if(t===eg)return 14}return 2}function Li(t,e){var r=t.alternate;return r===null?(r=Mr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Qu(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")Dg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case io:return gs(r.children,i,s,e);case Jm:o=8,i|=8;break;case bp:return t=Mr(12,r,e,i|2),t.elementType=bp,t.lanes=s,t;case xp:return t=Mr(13,r,e,i),t.elementType=xp,t.lanes=s,t;case Ep:return t=Mr(19,r,e,i),t.elementType=Ep,t.lanes=s,t;case eb:return ld(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jw:o=10;break e;case Zw:o=9;break e;case Zm:o=11;break e;case eg:o=14;break e;case vi:o=16,n=null;break e}throw Error(Se(130,t==null?t:typeof t,""))}return e=Mr(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function gs(t,e,r,n){return t=Mr(7,t,n,e),t.lanes=r,t}function ld(t,e,r,n){return t=Mr(22,t,n,e),t.elementType=eb,t.lanes=r,t.stateNode={isHidden:!1},t}function wh(t,e,r){return t=Mr(6,t,null,e),t.lanes=r,t}function bh(t,e,r){return e=Mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fI(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=th(0),this.expirationTimes=th(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=th(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Og(t,e,r,n,i,s,o,a,l){return t=new fI(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vg(s),t}function pI(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:no,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Wx(t){if(!t)return zi;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(Se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(t.tag===1){var r=t.type;if(_r(r))return Wb(t,r,e)}return e}function Hx(t,e,r,n,i,s,o,a,l){return t=Og(r,n,!0,t,i,s,o,a,l),t.context=Wx(null),r=t.current,n=cr(),i=Oi(r),s=Wn(n,i),s.callback=e??null,ji(r,s,i),t.current.lanes=i,El(t,i,n),wr(t,n),t}function ud(t,e,r,n){var i=e.current,s=cr(),o=Oi(i);return r=Wx(r),e.context===null?e.context=r:e.pendingContext=r,e=Wn(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ji(i,e,o),t!==null&&(en(t,i,o,s),qu(t,i,o)),o}function kc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Lg(t,e){uv(t,e),(t=t.alternate)&&uv(t,e)}function mI(){return null}var Kx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mg(t){this._internalRoot=t}cd.prototype.render=Mg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Se(409));ud(t,e,null,null)};cd.prototype.unmount=Mg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){ud(null,t,null,null)}),e[Xn]=null}};function cd(t){this._internalRoot=t}cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<wi.length&&e!==0&&e<wi[r].priority;r++);wi.splice(r,0,t),r===0&&Ab(t)}};function Fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cv(){}function gI(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=kc(o);s.call(c)}}var o=Hx(e,n,t,0,null,!1,!1,"",cv);return t._reactRootContainer=o,t[Xn]=o.current,il(t.nodeType===8?t.parentNode:t),xs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=kc(l);a.call(c)}}var l=Og(t,0,!1,null,null,!1,!1,"",cv);return t._reactRootContainer=l,t[Xn]=l.current,il(t.nodeType===8?t.parentNode:t),xs(function(){ud(e,l,r,n)}),l}function hd(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=kc(o);a.call(l)}}ud(e,o,t,i)}else o=gI(r,e,t,i,n);return kc(o)}xb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Aa(e.pendingLanes);r!==0&&(ng(e,r|1),wr(e,St()),!(Je&6)&&(Lo=St()+500,Qi()))}break;case 13:xs(function(){var n=Yn(t,1);if(n!==null){var i=cr();en(n,t,1,i)}}),Lg(t,1)}};ig=function(t){if(t.tag===13){var e=Yn(t,134217728);if(e!==null){var r=cr();en(e,t,134217728,r)}Lg(t,134217728)}};Eb=function(t){if(t.tag===13){var e=Oi(t),r=Yn(t,e);if(r!==null){var n=cr();en(r,t,e,n)}Lg(t,e)}};Tb=function(){return it};Sb=function(t,e){var r=it;try{return it=t,e()}finally{it=r}};jp=function(t,e,r){switch(e){case"input":if(Ap(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=rd(n);if(!i)throw Error(Se(90));rb(n),Ap(n,i)}}}break;case"textarea":ib(t,r);break;case"select":e=r.value,e!=null&&_o(t,!!r.multiple,e,!1)}};db=Rg;hb=xs;var yI={usingClientEntryPoint:!1,Events:[Sl,lo,rd,ub,cb,Rg]},_a={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vI={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mb(t),t===null?null:t.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||mI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{Jc=Au.inject(vI),wn=Au}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yI;Nr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fg(e))throw Error(Se(200));return pI(t,e,null,r)};Nr.createRoot=function(t,e){if(!Fg(t))throw Error(Se(299));var r=!1,n="",i=Kx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Og(t,1,!1,null,null,r,!1,n,i),t[Xn]=e.current,il(t.nodeType===8?t.parentNode:t),new Mg(e)};Nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Se(188)):(t=Object.keys(t).join(","),Error(Se(268,t)));return t=mb(e),t=t===null?null:t.stateNode,t};Nr.flushSync=function(t){return xs(t)};Nr.hydrate=function(t,e,r){if(!dd(e))throw Error(Se(200));return hd(null,t,e,!0,r)};Nr.hydrateRoot=function(t,e,r){if(!Fg(t))throw Error(Se(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Kx;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Hx(e,null,t,1,r??null,i,!1,s,o),t[Xn]=e.current,il(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new cd(e)};Nr.render=function(t,e,r){if(!dd(e))throw Error(Se(200));return hd(null,t,e,!1,r)};Nr.unmountComponentAtNode=function(t){if(!dd(t))throw Error(Se(40));return t._reactRootContainer?(xs(function(){hd(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};Nr.unstable_batchedUpdates=Rg;Nr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!dd(r))throw Error(Se(200));if(t==null||t._reactInternals===void 0)throw Error(Se(38));return hd(t,e,r,!1,n)};Nr.version="18.3.1-next-f1338f8080-20240426";function Gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gx)}catch(t){console.error(t)}}Gx(),Gw.exports=Nr;var _I=Gw.exports,dv=_I;_p.createRoot=dv.createRoot,_p.hydrateRoot=dv.hydrateRoot;var hv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},wI=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],o=t[r++],a=t[r++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4;let w=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(w=64)),n.push(r[h],r[g],r[w],r[_])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const g=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||g==null)throw new bI;const w=s<<2|a>>4;if(n.push(w),c!==64){const _=a<<4&240|c>>2;if(n.push(_),g!==64){const T=c<<6&192|g;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xI=function(t){const e=Qx(t);return Xx.encodeByteArray(e,!0)},Cc=function(t){return xI(t).replace(/\./g,"")},Yx=function(t){try{return Xx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=()=>EI().__FIREBASE_DEFAULTS__,SI=()=>{if(typeof process>"u"||typeof hv>"u")return;const t=hv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yx(t[1]);return e&&JSON.parse(e)},fd=()=>{try{return TI()||SI()||AI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jx=t=>{var e,r;return(r=(e=fd())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},II=t=>{const e=Jx(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Zx=()=>{var t;return(t=fd())===null||t===void 0?void 0:t.config},eE=t=>{var e;return(e=fd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Cc(JSON.stringify(r)),Cc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ar())}function RI(){var t;const e=(t=fd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OI(){const t=ar();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LI(){return!RI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MI(){try{return typeof indexedDB=="object"}catch{return!1}}function FI(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="FirebaseError";class si extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=VI,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?UI(s,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new si(i,a,n)}}function UI(t,e){return t.replace(BI,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const BI=/\{\$([^}]+)}/g;function zI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rc(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],o=e[i];if(fv(s)&&fv(o)){if(!Rc(s,o))return!1}else if(s!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function fv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Na(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ka(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function qI(t,e){const r=new $I(t,e);return r.subscribe.bind(r)}class $I{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");WI(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=xh),i.error===void 0&&(i.error=xh),i.complete===void 0&&(i.complete=xh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WI(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function xh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new NI;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GI(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&o.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:KI(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KI(t){return t===us?void 0:t}function GI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new HI(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const XI={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},YI=Xe.INFO,JI={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},ZI=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=JI[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vg{constructor(e){this.name=e,this._logLevel=YI,this._logHandler=ZI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const eN=(t,e)=>e.some(r=>t instanceof r);let pv,mv;function tN(){return pv||(pv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rN(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,hm=new WeakMap,rE=new WeakMap,Eh=new WeakMap,Ug=new WeakMap;function nN(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(Mi(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&tE.set(r,t)}).catch(()=>{}),Ug.set(e,t),e}function iN(t){if(hm.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hm.set(t,e)}let fm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return hm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Mi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sN(t){fm=t(fm)}function oN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Th(this),e,...r);return rE.set(n,e.sort?e.sort():[e]),Mi(n)}:rN().includes(t)?function(...e){return t.apply(Th(this),e),Mi(tE.get(this))}:function(...e){return Mi(t.apply(Th(this),e))}}function aN(t){return typeof t=="function"?oN(t):(t instanceof IDBTransaction&&iN(t),eN(t,tN())?new Proxy(t,fm):t)}function Mi(t){if(t instanceof IDBRequest)return nN(t);if(Eh.has(t))return Eh.get(t);const e=aN(t);return e!==t&&(Eh.set(t,e),Ug.set(e,t)),e}const Th=t=>Ug.get(t);function lN(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Mi(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Mi(o.result),l.oldVersion,l.newVersion,Mi(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const uN=["get","getKey","getAll","getAllKeys","count"],cN=["put","add","delete","clear"],Sh=new Map;function gv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sh.get(e))return Sh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=cN.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||uN.includes(r)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),i&&l.done]))[0]};return Sh.set(e,s),s}sN(t=>({...t,get:(e,r,n)=>gv(e,r)||t.get(e,r,n),has:(e,r)=>!!gv(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(hN(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function hN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",yv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new Vg("@firebase/app"),fN="@firebase/app-compat",pN="@firebase/analytics-compat",mN="@firebase/analytics",gN="@firebase/app-check-compat",yN="@firebase/app-check",vN="@firebase/auth",_N="@firebase/auth-compat",wN="@firebase/database",bN="@firebase/data-connect",xN="@firebase/database-compat",EN="@firebase/functions",TN="@firebase/functions-compat",SN="@firebase/installations",AN="@firebase/installations-compat",IN="@firebase/messaging",NN="@firebase/messaging-compat",kN="@firebase/performance",CN="@firebase/performance-compat",RN="@firebase/remote-config",PN="@firebase/remote-config-compat",jN="@firebase/storage",DN="@firebase/storage-compat",ON="@firebase/firestore",LN="@firebase/vertexai-preview",MN="@firebase/firestore-compat",FN="firebase",VN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",UN={[pm]:"fire-core",[fN]:"fire-core-compat",[mN]:"fire-analytics",[pN]:"fire-analytics-compat",[yN]:"fire-app-check",[gN]:"fire-app-check-compat",[vN]:"fire-auth",[_N]:"fire-auth-compat",[wN]:"fire-rtdb",[bN]:"fire-data-connect",[xN]:"fire-rtdb-compat",[EN]:"fire-fn",[TN]:"fire-fn-compat",[SN]:"fire-iid",[AN]:"fire-iid-compat",[IN]:"fire-fcm",[NN]:"fire-fcm-compat",[kN]:"fire-perf",[CN]:"fire-perf-compat",[RN]:"fire-rc",[PN]:"fire-rc-compat",[jN]:"fire-gcs",[DN]:"fire-gcs-compat",[ON]:"fire-fst",[MN]:"fire-fst-compat",[LN]:"fire-vertex","fire-js":"fire-js",[FN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,BN=new Map,gm=new Map;function vv(t,e){try{t.container.addComponent(e)}catch(r){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Mo(t){const e=t.name;if(gm.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,t);for(const r of Pc.values())vv(r,t);for(const r of BN.values())vv(r,t);return!0}function Bg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new Il("app","Firebase",zN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=VN;function nE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:mm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Fi.create("bad-app-name",{appName:String(i)});if(r||(r=Zx()),!r)throw Fi.create("no-options");const s=Pc.get(i);if(s){if(Rc(r,s.options)&&Rc(n,s.config))return s;throw Fi.create("duplicate-app",{appName:i})}const o=new QI(i);for(const l of gm.values())o.addComponent(l);const a=new qN(r,n,o);return Pc.set(i,a),a}function iE(t=mm){const e=Pc.get(t);if(!e&&t===mm&&Zx())return nE();if(!e)throw Fi.create("no-app",{appName:t});return e}function Vi(t,e,r){var n;let i=(n=UN[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(a.join(" "));return}Mo(new Es(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="firebase-heartbeat-database",WN=1,fl="firebase-heartbeat-store";let Ah=null;function sE(){return Ah||(Ah=lN($N,WN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fl)}catch(r){console.warn(r)}}}}).catch(t=>{throw Fi.create("idb-open",{originalErrorMessage:t.message})})),Ah}async function HN(t){try{const r=(await sE()).transaction(fl),n=await r.objectStore(fl).get(oE(t));return await r.done,n}catch(e){if(e instanceof si)Zn.warn(e.message);else{const r=Fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zn.warn(r.message)}}}async function _v(t,e){try{const n=(await sE()).transaction(fl,"readwrite");await n.objectStore(fl).put(e,oE(t)),await n.done}catch(r){if(r instanceof si)Zn.warn(r.message);else{const n=Fi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Zn.warn(n.message)}}}function oE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1024,GN=30*24*60*60*1e3;class QN{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new YN(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=GN}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Zn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=wv(),{heartbeatsToSend:n,unsentEntries:i}=XN(this._heartbeatsCache.heartbeats),s=Cc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Zn.warn(r),""}}}function wv(){return new Date().toISOString().substring(0,10)}function XN(t,e=KN){const r=[];let n=t.slice();for(const i of t){const s=r.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),bv(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),bv(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class YN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MI()?FI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await HN(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return _v(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return _v(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bv(t){return Cc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){Mo(new Es("platform-logger",e=>new dN(e),"PRIVATE")),Mo(new Es("heartbeat",e=>new QN(e),"PRIVATE")),Vi(pm,yv,t),Vi(pm,yv,"esm2017"),Vi("fire-js","")}JN("");function zg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function aE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZN=aE,lE=new Il("auth","Firebase",aE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Vg("@firebase/auth");function ek(t,...e){jc.logLevel<=Xe.WARN&&jc.warn(`Auth (${Yo}): ${t}`,...e)}function Xu(t,...e){jc.logLevel<=Xe.ERROR&&jc.error(`Auth (${Yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t,...e){throw qg(t,...e)}function xn(t,...e){return qg(t,...e)}function uE(t,e,r){const n=Object.assign(Object.assign({},ZN()),{[e]:r});return new Il("auth","Firebase",n).create(e,{appName:t.name})}function Hn(t){return uE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qg(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return lE.create(t,...e)}function Fe(t,e,...r){if(!t)throw qg(e,...r)}function Bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xu(e),new Error(e)}function ei(t,e){t||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tk(){return xv()==="http:"||xv()==="https:"}function xv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tk()||jI()||"connection"in navigator)?navigator.onLine:!0}function nk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,r){this.shortDelay=e,this.longDelay=r,ei(r>e,"Short delay should be less than long delay!"),this.isMobile=CI()||DI()}get(){return rk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t,e){ei(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new kl(3e4,6e4);function oi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nn(t,e,r,n,i={}){return dE(t,i,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const a=Nl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return PI()||(c.referrerPolicy="no-referrer"),cE.fetch()(hE(t,t.config.apiHost,r,a),c)})}async function dE(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},ik),e);try{const i=new ak(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Iu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Iu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Iu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Iu(t,"user-disabled",o);const h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uE(t,h,c);rn(t,h)}}catch(i){if(i instanceof si)throw i;rn(t,"network-request-failed",{message:String(i)})}}async function Cl(t,e,r,n,i={}){const s=await Nn(t,e,r,n,i);return"mfaPendingCredential"in s&&rn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hE(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?$g(t.config,i):`${t.config.apiScheme}://${i}`}function ok(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ak{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(xn(this.auth,"network-request-failed")),sk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Iu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=xn(t,e,n);return i.customData._tokenResponse=r,i}function Ev(t){return t!==void 0&&t.enterprise!==void 0}class lk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return ok(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function uk(t,e){return Nn(t,"GET","/v2/recaptchaConfig",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e){return Nn(t,"POST","/v1/accounts:delete",e)}async function fE(t,e){return Nn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dk(t,e=!1){const r=kt(t),n=await r.getIdToken(e),i=Wg(n);Fe(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:$a(Ih(i.auth_time)),issuedAtTime:$a(Ih(i.iat)),expirationTime:$a(Ih(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ih(t){return Number(t)*1e3}function Wg(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Yx(r);return i?JSON.parse(i):(Xu("Failed to decode base64 JWT payload"),null)}catch(i){return Xu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Tv(t){const e=Wg(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof si&&hk(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function hk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=$a(this.lastLoginAt),this.creationTime=$a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Fo(t,fE(r,{idToken:n}));Fe(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pE(s.providerUserInfo):[],a=mk(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,g)}async function pk(t){const e=kt(t);await Dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mk(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function pE(t){return t.map(e=>{var{providerId:r}=e,n=zg(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e){const r=await dE(t,{},async()=>{const n=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=hE(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",cE.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function yk(t,e){return Nn(t,"POST","/v2/accounts:revokeToken",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const r=Tv(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await gk(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,o=new So;return n&&(Fe(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(Fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=zg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Fo(this,this.stsTokenManager.getToken(this.auth,e));return Fe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return dk(this,e)}reload(){return pk(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Dc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Hn(this.auth));const e=await this.getIdToken();return await Fo(this,ck(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,o,a,l,c,h;const g=(n=r.displayName)!==null&&n!==void 0?n:void 0,w=(i=r.email)!==null&&i!==void 0?i:void 0,_=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=r.photoURL)!==null&&o!==void 0?o:void 0,x=(a=r.tenantId)!==null&&a!==void 0?a:void 0,j=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,f=(c=r.createdAt)!==null&&c!==void 0?c:void 0,y=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:v,emailVerified:b,isAnonymous:I,providerData:B,stsTokenManager:k}=r;Fe(v&&k,e,"internal-error");const R=So.fromJSON(this.name,k);Fe(typeof v=="string",e,"internal-error"),gi(g,e.name),gi(w,e.name),Fe(typeof b=="boolean",e,"internal-error"),Fe(typeof I=="boolean",e,"internal-error"),gi(_,e.name),gi(T,e.name),gi(x,e.name),gi(j,e.name),gi(f,e.name),gi(y,e.name);const E=new zn({uid:v,auth:e,email:w,emailVerified:b,displayName:g,isAnonymous:I,photoURL:T,phoneNumber:_,tenantId:x,stsTokenManager:R,createdAt:f,lastLoginAt:y});return B&&Array.isArray(B)&&(E.providerData=B.map(U=>Object.assign({},U))),j&&(E._redirectEventId=j),E}static async _fromIdTokenResponse(e,r,n=!1){const i=new So;i.updateFromServerResponse(r);const s=new zn({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Dc(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new So;a.updateFromIdToken(n);const l=new zn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;function qn(t){ei(t instanceof Function,"Expected a class definition");let e=Sv.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}mE.type="NONE";const Av=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,r){return`firebase:${t}:${e}:${r}`}class Ao{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Yu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yu("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ao(qn(Av),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||qn(Av);const o=Yu(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const h=await c._get(o);if(h){const g=zn._fromJSON(e,h);c!==s&&(a=g),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ao(s,e,n):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ao(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_E(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bE(e))return"Blackberry";if(xE(e))return"Webos";if(yE(e))return"Safari";if((e.includes("chrome/")||vE(e))&&!e.includes("edge/"))return"Chrome";if(wE(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function gE(t=ar()){return/firefox\//i.test(t)}function yE(t=ar()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vE(t=ar()){return/crios\//i.test(t)}function _E(t=ar()){return/iemobile/i.test(t)}function wE(t=ar()){return/android/i.test(t)}function bE(t=ar()){return/blackberry/i.test(t)}function xE(t=ar()){return/webos/i.test(t)}function Hg(t=ar()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vk(t=ar()){var e;return Hg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _k(){return OI()&&document.documentMode===10}function EE(t=ar()){return Hg(t)||wE(t)||xE(t)||bE(t)||/windows phone/i.test(t)||_E(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e=[]){let r;switch(t){case"Browser":r=Iv(ar());break;case"Worker":r=`${Iv(ar())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Yo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e={}){return Nn(t,"GET","/v2/passwordPolicy",oi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=6;class Ek{constructor(e){var r,n,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:xk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new wk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=qn(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await fE(this,{idToken:e}),n=await zn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Dc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Hn(this));const r=e?kt(e):null;return r&&Fe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bk(this),r=new Ek(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await yk(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&qn(e)||this._popupRedirectResolver;Fe(r,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[qn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{o=!0,l()}}else{const l=e.addObserver(r);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&ek(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Xi(t){return kt(t)}class Nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=qI(r=>this.observer=r)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sk(t){pd=t}function SE(t){return pd.loadJS(t)}function Ak(){return pd.recaptchaEnterpriseScript}function Ik(){return pd.gapiScript}function Nk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kk="recaptcha-enterprise",Ck="NO_RECAPTCHA";class Rk{constructor(e){this.type=kk,this.auth=Xi(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{uk(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new lk(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Ev(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Ck)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(a=>{if(!r&&Ev(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Ak();l.length!==0&&(l+=a),SE(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function kv(t,e,r,n=!1){const i=new Rk(t);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Oc(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await kv(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await kv(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e){const r=Bg(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(Rc(s,e??{}))return i;rn(i,"already-initialized")}return r.initialize({options:e})}function jk(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Dk(t,e,r){const n=Xi(t);Fe(n._canInitEmulator,n,"emulator-config-failed"),Fe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=AE(e),{host:o,port:a}=Ok(e),l=a===null?"":`:${a}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Lk()}function AE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ok(t){const e=AE(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:Cv(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:Cv(o)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Lk(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,r){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}async function Mk(t,e){return Nn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){return Cl(t,"POST","/v1/accounts:signInWithPassword",oi(t,e))}async function Vk(t,e){return Nn(t,"POST","/v1/accounts:sendOobCode",oi(t,e))}async function Uk(t,e){return Vk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e){return Cl(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}async function zk(t,e){return Cl(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Kg{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new pl(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new pl(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oc(e,r,"signInWithPassword",Fk);case"emailLink":return Bk(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oc(e,n,"signUpPassword",Mk);case"emailLink":return zk(e,{idToken:r,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e){return Cl(t,"POST","/v1/accounts:signInWithIdp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="http://localhost";class Ts extends Kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):rn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=zg(r,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Ts(n,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Io(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Io(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Io(e,r)}buildRequest(){const e={requestUri:qk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Nl(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Wk(t){const e=Na(ka(t)).link,r=e?Na(ka(e)).deep_link_id:null,n=Na(ka(t)).deep_link_id;return(n?Na(ka(n)).link:null)||n||r||e||t}class Gg{constructor(e){var r,n,i,s,o,a;const l=Na(ka(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,h=(n=l.oobCode)!==null&&n!==void 0?n:null,g=$k((i=l.mode)!==null&&i!==void 0?i:null);Fe(c&&h&&g,"argument-error"),this.apiKey=c,this.operation=g,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=Wk(e);try{return new Gg(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.providerId=Rs.PROVIDER_ID}static credential(e,r){return pl._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Gg.parseLink(r);return Fe(n,"argument-error"),pl._fromEmailAndCode(e,n.code,n.tenantId)}}Rs.PROVIDER_ID="password";Rs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends IE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Rl{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ts._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ei.credential(r,n)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Rl{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Rl{constructor(){super("twitter.com")}static credential(e,r){return Ts._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Si.credential(r,n)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e){return Cl(t,"POST","/v1/accounts:signUp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await zn._fromIdTokenResponse(e,n,i),o=Rv(n);return new Ss({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=Rv(n);return new Ss({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function Rv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends si{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Lc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Lc(e,r,n,i)}}function NE(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Lc._fromErrorAndOperation(t,s,e,n):s})}async function Kk(t,e,r=!1){const n=await Fo(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ss._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(t,e,r=!1){const{auth:n}=t;if(vn(n.app))return Promise.reject(Hn(n));const i="reauthenticate";try{const s=await Fo(t,NE(n,i,e,t),r);Fe(s.idToken,n,"internal-error");const o=Wg(s.idToken);Fe(o,n,"internal-error");const{sub:a}=o;return Fe(t.uid===a,n,"user-mismatch"),Ss._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rn(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CE(t,e,r=!1){if(vn(t.app))return Promise.reject(Hn(t));const n="signIn",i=await NE(t,n,e),s=await Ss._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function Gk(t,e){return CE(Xi(t),e)}async function Qk(t,e){return kE(kt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(t){const e=Xi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Xk(t,e,r){const n=Xi(t);await Oc(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Uk)}async function Yk(t,e,r){if(vn(t.app))return Promise.reject(Hn(t));const n=Xi(t),o=await Oc(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&RE(t),l}),a=await Ss._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(a.user),a}function Pv(t,e,r){return vn(t.app)?Promise.reject(Hn(t)):Gk(kt(t),Rs.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&RE(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(t,e){return Nn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=kt(t),s={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Fo(n,Jk(n.auth,s));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const a=n.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=n.displayName,a.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function eC(t,e,r,n){return kt(t).onIdTokenChanged(e,r,n)}function tC(t,e,r){return kt(t).beforeAuthStateChanged(e,r)}function rC(t,e,r,n){return kt(t).onAuthStateChanged(e,r,n)}function jv(t){return kt(t).signOut()}const Mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Mc,"1"),this.storage.removeItem(Mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=1e3,iC=10;class jE extends PE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);_k()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iC):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},nC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}jE.type="LOCAL";const sC=jE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends PE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}DE.type="SESSION";const OE=DE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new md(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(o).map(async c=>c(r.origin,s)),l=await oC(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Qg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(g){const w=g;if(w.data.eventId===c)switch(w.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(w.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function lC(t){En().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function uC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dC(){return LE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firebaseLocalStorageDb",hC=1,Fc="firebaseLocalStorage",FE="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function gd(t,e){return t.transaction([Fc],e?"readwrite":"readonly").objectStore(Fc)}function fC(){const t=indexedDB.deleteDatabase(ME);return new Pl(t).toPromise()}function _m(){const t=indexedDB.open(ME,hC);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Fc,{keyPath:FE})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Fc)?e(n):(n.close(),await fC(),e(await _m()))})})}async function Dv(t,e,r){const n=gd(t,!0).put({[FE]:e,value:r});return new Pl(n).toPromise()}async function pC(t,e){const r=gd(t,!1).get(e),n=await new Pl(r).toPromise();return n===void 0?null:n.value}function Ov(t,e){const r=gd(t,!0).delete(e);return new Pl(r).toPromise()}const mC=800,gC=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>gC)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=md._getInstance(dC()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await uC(),!this.activeServiceWorker)return;this.sender=new aC(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await Dv(e,Mc,"1"),await Ov(e,Mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dv(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>pC(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ov(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gd(i,!1).getAll();return new Pl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const yC=VE;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t,e){return e?qn(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends Kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Io(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function _C(t){return CE(t.auth,new Xg(t),t.bypassAuthState)}function wC(t){const{auth:e,user:r}=t;return Fe(r,e,"internal-error"),kE(r,new Xg(t),t.bypassAuthState)}async function bC(t){const{auth:e,user:r}=t;return Fe(r,e,"internal-error"),Kk(r,new Xg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _C;case"linkViaPopup":case"linkViaRedirect":return bC;case"reauthViaPopup":case"reauthViaRedirect":return wC;default:rn(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new kl(2e3,1e4);class go extends UE{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xC.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="pendingRedirect",Ju=new Map;class TC extends UE{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const n=await SC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SC(t,e){const r=NC(e),n=IC(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function AC(t,e){Ju.set(t._key(),e)}function IC(t){return qn(t._redirectPersistence)}function NC(t){return Yu(EC,t.config.apiKey,t.name)}async function kC(t,e,r=!1){if(vn(t.app))return Promise.reject(Hn(t));const n=Xi(t),i=vC(n,e),o=await new TC(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=10*60*1e3;class RC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PC(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!BE(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(xn(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lv(e))}saveEventToCache(e){this.cachedEventUids.add(Lv(e)),this.lastProcessedEventTime=Date.now()}}function Lv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e={}){return Nn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OC=/^https?/;async function LC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jC(t);for(const r of e)try{if(MC(r))return}catch{}rn(t,"unauthorized-domain")}function MC(t){const e=ym(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!OC.test(r))return!1;if(DC.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new kl(3e4,6e4);function Mv(){const t=En().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function VC(t){return new Promise((e,r)=>{var n,i,s;function o(){Mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mv(),r(xn(t,"network-request-failed"))},timeout:FC.get()})}if(!((i=(n=En().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=En().gapi)===null||s===void 0)&&s.load)o();else{const a=Nk("iframefcb");return En()[a]=()=>{gapi.load?o():r(xn(t,"network-request-failed"))},SE(`${Ik()}?onload=${a}`).catch(l=>r(l))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function UC(t){return Zu=Zu||VC(t),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new kl(5e3,15e3),zC="__/auth/iframe",qC="emulator/auth/iframe",$C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HC(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?$g(e,qC):`https://${t.config.authDomain}/${zC}`,n={apiKey:e.apiKey,appName:t.name,v:Yo},i=WC.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Nl(n).slice(1)}`}async function KC(t){const e=await UC(t),r=En().gapi;return Fe(r,t,"internal-error"),e.open({where:document.body,url:HC(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$C,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),a=En().setTimeout(()=>{s(o)},BC.get());function l(){En().clearTimeout(a),i(n)}n.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QC=500,XC=600,YC="_blank",JC="http://localhost";class Fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZC(t,e,r,n=QC,i=XC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},GC),{width:n.toString(),height:i.toString(),top:s,left:o}),c=ar().toLowerCase();r&&(a=vE(c)?YC:r),gE(c)&&(e=e||JC,l.scrollbars="yes");const h=Object.entries(l).reduce((w,[_,T])=>`${w}${_}=${T},`,"");if(vk(c)&&a!=="_self")return eR(e||"",a),new Fv(null);const g=window.open(e||"",a,h);Fe(g,t,"popup-blocked");try{g.focus()}catch{}return new Fv(g)}function eR(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="__/auth/handler",rR="emulator/auth/handler",nR=encodeURIComponent("fac");async function Vv(t,e,r,n,i,s){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Yo,eventId:i};if(e instanceof IE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof Rl){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${nR}=${encodeURIComponent(l)}`:"";return`${iR(t)}?${Nl(a).slice(1)}${c}`}function iR({config:t}){return t.emulator?$g(t,rR):`https://${t.authDomain}/${tR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh="webStorageSupport";class sR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OE,this._completeRedirectFn=kC,this._overrideRedirectResult=AC}async _openPopup(e,r,n,i){var s;ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Vv(e,r,n,ym(),i);return ZC(e,o,Qg())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await Vv(e,r,n,ym(),i);return lC(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(ei(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await KC(e),n=new RC(e);return r.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Nh,{type:Nh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Nh];o!==void 0&&r(!!o),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=LC(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return EE()||yE()||Hg()}}const oR=sR;var Uv="@firebase/auth",Bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uR(t){Mo(new Es("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(t)},c=new Tk(n,i,s,l);return jk(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Mo(new Es("auth-internal",e=>{const r=Xi(e.getProvider("auth").getImmediate());return(n=>new aR(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(Uv,Bv,lR(t)),Vi(Uv,Bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=5*60,dR=eE("authIdTokenMaxAge")||cR;let zv=null;const hR=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>dR)return;const i=r==null?void 0:r.token;zv!==i&&(zv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fR(t=iE()){const e=Bg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Pk(t,{popupRedirectResolver:oR,persistence:[yC,sC,OE]}),n=eE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=hR(s.toString());tC(r,o,()=>o(r.currentUser)),eC(r,a=>o(a))}}const i=Jx("auth");return i&&Dk(r,`http://${i}`),r}function pR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Sk({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=xn("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",pR().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uR("Browser");var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,zE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function E(){}E.prototype=R.prototype,k.D=R.prototype,k.prototype=new E,k.prototype.constructor=k,k.C=function(U,W,A){for(var M=Array(arguments.length-2),P=2;P<arguments.length;P++)M[P-2]=arguments[P];return R.prototype[W].apply(U,M)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,R,E){E||(E=0);var U=Array(16);if(typeof R=="string")for(var W=0;16>W;++W)U[W]=R.charCodeAt(E++)|R.charCodeAt(E++)<<8|R.charCodeAt(E++)<<16|R.charCodeAt(E++)<<24;else for(W=0;16>W;++W)U[W]=R[E++]|R[E++]<<8|R[E++]<<16|R[E++]<<24;R=k.g[0],E=k.g[1],W=k.g[2];var A=k.g[3],M=R+(A^E&(W^A))+U[0]+3614090360&4294967295;R=E+(M<<7&4294967295|M>>>25),M=A+(W^R&(E^W))+U[1]+3905402710&4294967295,A=R+(M<<12&4294967295|M>>>20),M=W+(E^A&(R^E))+U[2]+606105819&4294967295,W=A+(M<<17&4294967295|M>>>15),M=E+(R^W&(A^R))+U[3]+3250441966&4294967295,E=W+(M<<22&4294967295|M>>>10),M=R+(A^E&(W^A))+U[4]+4118548399&4294967295,R=E+(M<<7&4294967295|M>>>25),M=A+(W^R&(E^W))+U[5]+1200080426&4294967295,A=R+(M<<12&4294967295|M>>>20),M=W+(E^A&(R^E))+U[6]+2821735955&4294967295,W=A+(M<<17&4294967295|M>>>15),M=E+(R^W&(A^R))+U[7]+4249261313&4294967295,E=W+(M<<22&4294967295|M>>>10),M=R+(A^E&(W^A))+U[8]+1770035416&4294967295,R=E+(M<<7&4294967295|M>>>25),M=A+(W^R&(E^W))+U[9]+2336552879&4294967295,A=R+(M<<12&4294967295|M>>>20),M=W+(E^A&(R^E))+U[10]+4294925233&4294967295,W=A+(M<<17&4294967295|M>>>15),M=E+(R^W&(A^R))+U[11]+2304563134&4294967295,E=W+(M<<22&4294967295|M>>>10),M=R+(A^E&(W^A))+U[12]+1804603682&4294967295,R=E+(M<<7&4294967295|M>>>25),M=A+(W^R&(E^W))+U[13]+4254626195&4294967295,A=R+(M<<12&4294967295|M>>>20),M=W+(E^A&(R^E))+U[14]+2792965006&4294967295,W=A+(M<<17&4294967295|M>>>15),M=E+(R^W&(A^R))+U[15]+1236535329&4294967295,E=W+(M<<22&4294967295|M>>>10),M=R+(W^A&(E^W))+U[1]+4129170786&4294967295,R=E+(M<<5&4294967295|M>>>27),M=A+(E^W&(R^E))+U[6]+3225465664&4294967295,A=R+(M<<9&4294967295|M>>>23),M=W+(R^E&(A^R))+U[11]+643717713&4294967295,W=A+(M<<14&4294967295|M>>>18),M=E+(A^R&(W^A))+U[0]+3921069994&4294967295,E=W+(M<<20&4294967295|M>>>12),M=R+(W^A&(E^W))+U[5]+3593408605&4294967295,R=E+(M<<5&4294967295|M>>>27),M=A+(E^W&(R^E))+U[10]+38016083&4294967295,A=R+(M<<9&4294967295|M>>>23),M=W+(R^E&(A^R))+U[15]+3634488961&4294967295,W=A+(M<<14&4294967295|M>>>18),M=E+(A^R&(W^A))+U[4]+3889429448&4294967295,E=W+(M<<20&4294967295|M>>>12),M=R+(W^A&(E^W))+U[9]+568446438&4294967295,R=E+(M<<5&4294967295|M>>>27),M=A+(E^W&(R^E))+U[14]+3275163606&4294967295,A=R+(M<<9&4294967295|M>>>23),M=W+(R^E&(A^R))+U[3]+4107603335&4294967295,W=A+(M<<14&4294967295|M>>>18),M=E+(A^R&(W^A))+U[8]+1163531501&4294967295,E=W+(M<<20&4294967295|M>>>12),M=R+(W^A&(E^W))+U[13]+2850285829&4294967295,R=E+(M<<5&4294967295|M>>>27),M=A+(E^W&(R^E))+U[2]+4243563512&4294967295,A=R+(M<<9&4294967295|M>>>23),M=W+(R^E&(A^R))+U[7]+1735328473&4294967295,W=A+(M<<14&4294967295|M>>>18),M=E+(A^R&(W^A))+U[12]+2368359562&4294967295,E=W+(M<<20&4294967295|M>>>12),M=R+(E^W^A)+U[5]+4294588738&4294967295,R=E+(M<<4&4294967295|M>>>28),M=A+(R^E^W)+U[8]+2272392833&4294967295,A=R+(M<<11&4294967295|M>>>21),M=W+(A^R^E)+U[11]+1839030562&4294967295,W=A+(M<<16&4294967295|M>>>16),M=E+(W^A^R)+U[14]+4259657740&4294967295,E=W+(M<<23&4294967295|M>>>9),M=R+(E^W^A)+U[1]+2763975236&4294967295,R=E+(M<<4&4294967295|M>>>28),M=A+(R^E^W)+U[4]+1272893353&4294967295,A=R+(M<<11&4294967295|M>>>21),M=W+(A^R^E)+U[7]+4139469664&4294967295,W=A+(M<<16&4294967295|M>>>16),M=E+(W^A^R)+U[10]+3200236656&4294967295,E=W+(M<<23&4294967295|M>>>9),M=R+(E^W^A)+U[13]+681279174&4294967295,R=E+(M<<4&4294967295|M>>>28),M=A+(R^E^W)+U[0]+3936430074&4294967295,A=R+(M<<11&4294967295|M>>>21),M=W+(A^R^E)+U[3]+3572445317&4294967295,W=A+(M<<16&4294967295|M>>>16),M=E+(W^A^R)+U[6]+76029189&4294967295,E=W+(M<<23&4294967295|M>>>9),M=R+(E^W^A)+U[9]+3654602809&4294967295,R=E+(M<<4&4294967295|M>>>28),M=A+(R^E^W)+U[12]+3873151461&4294967295,A=R+(M<<11&4294967295|M>>>21),M=W+(A^R^E)+U[15]+530742520&4294967295,W=A+(M<<16&4294967295|M>>>16),M=E+(W^A^R)+U[2]+3299628645&4294967295,E=W+(M<<23&4294967295|M>>>9),M=R+(W^(E|~A))+U[0]+4096336452&4294967295,R=E+(M<<6&4294967295|M>>>26),M=A+(E^(R|~W))+U[7]+1126891415&4294967295,A=R+(M<<10&4294967295|M>>>22),M=W+(R^(A|~E))+U[14]+2878612391&4294967295,W=A+(M<<15&4294967295|M>>>17),M=E+(A^(W|~R))+U[5]+4237533241&4294967295,E=W+(M<<21&4294967295|M>>>11),M=R+(W^(E|~A))+U[12]+1700485571&4294967295,R=E+(M<<6&4294967295|M>>>26),M=A+(E^(R|~W))+U[3]+2399980690&4294967295,A=R+(M<<10&4294967295|M>>>22),M=W+(R^(A|~E))+U[10]+4293915773&4294967295,W=A+(M<<15&4294967295|M>>>17),M=E+(A^(W|~R))+U[1]+2240044497&4294967295,E=W+(M<<21&4294967295|M>>>11),M=R+(W^(E|~A))+U[8]+1873313359&4294967295,R=E+(M<<6&4294967295|M>>>26),M=A+(E^(R|~W))+U[15]+4264355552&4294967295,A=R+(M<<10&4294967295|M>>>22),M=W+(R^(A|~E))+U[6]+2734768916&4294967295,W=A+(M<<15&4294967295|M>>>17),M=E+(A^(W|~R))+U[13]+1309151649&4294967295,E=W+(M<<21&4294967295|M>>>11),M=R+(W^(E|~A))+U[4]+4149444226&4294967295,R=E+(M<<6&4294967295|M>>>26),M=A+(E^(R|~W))+U[11]+3174756917&4294967295,A=R+(M<<10&4294967295|M>>>22),M=W+(R^(A|~E))+U[2]+718787259&4294967295,W=A+(M<<15&4294967295|M>>>17),M=E+(A^(W|~R))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(W+(M<<21&4294967295|M>>>11))&4294967295,k.g[2]=k.g[2]+W&4294967295,k.g[3]=k.g[3]+A&4294967295}n.prototype.u=function(k,R){R===void 0&&(R=k.length);for(var E=R-this.blockSize,U=this.B,W=this.h,A=0;A<R;){if(W==0)for(;A<=E;)i(this,k,A),A+=this.blockSize;if(typeof k=="string"){for(;A<R;)if(U[W++]=k.charCodeAt(A++),W==this.blockSize){i(this,U),W=0;break}}else for(;A<R;)if(U[W++]=k[A++],W==this.blockSize){i(this,U),W=0;break}}this.h=W,this.o+=R},n.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;var E=8*this.o;for(R=k.length-8;R<k.length;++R)k[R]=E&255,E/=256;for(this.u(k),k=Array(16),R=E=0;4>R;++R)for(var U=0;32>U;U+=8)k[E++]=this.g[R]>>>U&255;return k};function s(k,R){var E=a;return Object.prototype.hasOwnProperty.call(E,k)?E[k]:E[k]=R(k)}function o(k,R){this.h=R;for(var E=[],U=!0,W=k.length-1;0<=W;W--){var A=k[W]|0;U&&A==R||(E[W]=A,U=!1)}this.g=E}var a={};function l(k){return-128<=k&&128>k?s(k,function(R){return new o([R|0],0>R?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return g;if(0>k)return j(c(-k));for(var R=[],E=1,U=0;k>=E;U++)R[U]=k/E|0,E*=4294967296;return new o(R,0)}function h(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return j(h(k.substring(1),R));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(R,8)),U=g,W=0;W<k.length;W+=8){var A=Math.min(8,k.length-W),M=parseInt(k.substring(W,W+A),R);8>A?(A=c(Math.pow(R,A)),U=U.j(A).add(c(M))):(U=U.j(E),U=U.add(c(M)))}return U}var g=l(0),w=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-j(this).m();for(var k=0,R=1,E=0;E<this.g.length;E++){var U=this.i(E);k+=(0<=U?U:4294967296+U)*R,R*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T(this))return"0";if(x(this))return"-"+j(this).toString(k);for(var R=c(Math.pow(k,6)),E=this,U="";;){var W=b(E,R).g;E=f(E,W.j(R));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(k);if(E=W,T(E))return A+U;for(;6>A.length;)A="0"+A;U=A+U}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function T(k){if(k.h!=0)return!1;for(var R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=f(this,k),x(k)?-1:T(k)?0:1};function j(k){for(var R=k.g.length,E=[],U=0;U<R;U++)E[U]=~k.g[U];return new o(E,~k.h).add(w)}t.abs=function(){return x(this)?j(this):this},t.add=function(k){for(var R=Math.max(this.g.length,k.g.length),E=[],U=0,W=0;W<=R;W++){var A=U+(this.i(W)&65535)+(k.i(W)&65535),M=(A>>>16)+(this.i(W)>>>16)+(k.i(W)>>>16);U=M>>>16,A&=65535,M&=65535,E[W]=M<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function f(k,R){return k.add(j(R))}t.j=function(k){if(T(this)||T(k))return g;if(x(this))return x(k)?j(this).j(j(k)):j(j(this).j(k));if(x(k))return j(this.j(j(k)));if(0>this.l(_)&&0>k.l(_))return c(this.m()*k.m());for(var R=this.g.length+k.g.length,E=[],U=0;U<2*R;U++)E[U]=0;for(U=0;U<this.g.length;U++)for(var W=0;W<k.g.length;W++){var A=this.i(U)>>>16,M=this.i(U)&65535,P=k.i(W)>>>16,te=k.i(W)&65535;E[2*U+2*W]+=M*te,y(E,2*U+2*W),E[2*U+2*W+1]+=A*te,y(E,2*U+2*W+1),E[2*U+2*W+1]+=M*P,y(E,2*U+2*W+1),E[2*U+2*W+2]+=A*P,y(E,2*U+2*W+2)}for(U=0;U<R;U++)E[U]=E[2*U+1]<<16|E[2*U];for(U=R;U<2*R;U++)E[U]=0;return new o(E,0)};function y(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function v(k,R){this.g=k,this.h=R}function b(k,R){if(T(R))throw Error("division by zero");if(T(k))return new v(g,g);if(x(k))return R=b(j(k),R),new v(j(R.g),j(R.h));if(x(R))return R=b(k,j(R)),new v(j(R.g),R.h);if(30<k.g.length){if(x(k)||x(R))throw Error("slowDivide_ only works with positive integers.");for(var E=w,U=R;0>=U.l(k);)E=I(E),U=I(U);var W=B(E,1),A=B(U,1);for(U=B(U,2),E=B(E,2);!T(U);){var M=A.add(U);0>=M.l(k)&&(W=W.add(E),A=M),U=B(U,1),E=B(E,1)}return R=f(k,W.j(R)),new v(W,R)}for(W=g;0<=k.l(R);){for(E=Math.max(1,Math.floor(k.m()/R.m())),U=Math.ceil(Math.log(E)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),A=c(E),M=A.j(R);x(M)||0<M.l(k);)E-=U,A=c(E),M=A.j(R);T(A)&&(A=w),W=W.add(A),k=f(k,M)}return new v(W,k)}t.A=function(k){return b(this,k).h},t.and=function(k){for(var R=Math.max(this.g.length,k.g.length),E=[],U=0;U<R;U++)E[U]=this.i(U)&k.i(U);return new o(E,this.h&k.h)},t.or=function(k){for(var R=Math.max(this.g.length,k.g.length),E=[],U=0;U<R;U++)E[U]=this.i(U)|k.i(U);return new o(E,this.h|k.h)},t.xor=function(k){for(var R=Math.max(this.g.length,k.g.length),E=[],U=0;U<R;U++)E[U]=this.i(U)^k.i(U);return new o(E,this.h^k.h)};function I(k){for(var R=k.g.length+1,E=[],U=0;U<R;U++)E[U]=k.i(U)<<1|k.i(U-1)>>>31;return new o(E,k.h)}function B(k,R){var E=R>>5;R%=32;for(var U=k.g.length-E,W=[],A=0;A<U;A++)W[A]=0<R?k.i(A+E)>>>R|k.i(A+E+1)<<32-R:k.i(A+E);return new o(W,k.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,zE=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ys=o}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qE,Ca,$E,ec,wm,WE,HE,KE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,S,V){return u==Array.prototype||u==Object.prototype||(u[S]=V.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var S=0;S<u.length;++S){var V=u[S];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function i(u,S){if(S)e:{var V=n;u=u.split(".");for(var K=0;K<u.length-1;K++){var he=u[K];if(!(he in V))break e;V=V[he]}u=u[u.length-1],K=V[u],S=S(K),S!=K&&S!=null&&e(V,u,{configurable:!0,writable:!0,value:S})}}function s(u,S){u instanceof String&&(u+="");var V=0,K=!1,he={next:function(){if(!K&&V<u.length){var ge=V++;return{value:S(ge,u[ge]),done:!1}}return K=!0,{done:!0,value:void 0}}};return he[Symbol.iterator]=function(){return he},he}i("Array.prototype.values",function(u){return u||function(){return s(this,function(S,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var S=typeof u;return S=S!="object"?S:u?Array.isArray(u)?"array":S:"null",S=="array"||S=="object"&&typeof u.length=="number"}function c(u){var S=typeof u;return S=="object"&&u!=null||S=="function"}function h(u,S,V){return u.call.apply(u.bind,arguments)}function g(u,S,V){if(!u)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var he=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(he,K),u.apply(S,he)}}return function(){return u.apply(S,arguments)}}function w(u,S,V){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,w.apply(null,arguments)}function _(u,S){var V=Array.prototype.slice.call(arguments,1);return function(){var K=V.slice();return K.push.apply(K,arguments),u.apply(this,K)}}function T(u,S){function V(){}V.prototype=S.prototype,u.aa=S.prototype,u.prototype=new V,u.prototype.constructor=u,u.Qb=function(K,he,ge){for(var Ie=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Ie[ut-2]=arguments[ut];return S.prototype[he].apply(K,Ie)}}function x(u){const S=u.length;if(0<S){const V=Array(S);for(let K=0;K<S;K++)V[K]=u[K];return V}return[]}function j(u,S){for(let V=1;V<arguments.length;V++){const K=arguments[V];if(l(K)){const he=u.length||0,ge=K.length||0;u.length=he+ge;for(let Ie=0;Ie<ge;Ie++)u[he+Ie]=K[Ie]}else u.push(K)}}class f{constructor(S,V){this.i=S,this.j=V,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function y(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var I=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function B(u,S,V){for(const K in u)S.call(V,u[K],K,u)}function k(u,S){for(const V in u)S.call(void 0,u[V],V,u)}function R(u){const S={};for(const V in u)S[V]=u[V];return S}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(u,S){let V,K;for(let he=1;he<arguments.length;he++){K=arguments[he];for(V in K)u[V]=K[V];for(let ge=0;ge<E.length;ge++)V=E[ge],Object.prototype.hasOwnProperty.call(K,V)&&(u[V]=K[V])}}function W(u){var S=1;u=u.split(":");const V=[];for(;0<S&&u.length;)V.push(u.shift()),S--;return u.length&&V.push(u.join(":")),V}function A(u){a.setTimeout(()=>{throw u},0)}function M(){var u=se;let S=null;return u.g&&(S=u.g,u.g=u.g.next,u.g||(u.h=null),S.next=null),S}class P{constructor(){this.h=this.g=null}add(S,V){const K=te.get();K.set(S,V),this.h?this.h.next=K:this.g=K,this.h=K}}var te=new f(()=>new de,u=>u.reset());class de{constructor(){this.next=this.g=this.h=null}set(S,V){this.h=S,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ie=!1,se=new P,me=()=>{const u=a.Promise.resolve(void 0);J=()=>{u.then(ee)}};var ee=()=>{for(var u;u=M();){try{u.h.call(u.g)}catch(V){A(V)}var S=te;S.j(u),100>S.h&&(S.h++,u.next=S.g,S.g=u)}ie=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,S){this.type=u,this.g=this.target=S,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,S=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const V=()=>{};a.addEventListener("test",V,S),a.removeEventListener("test",V,S)}catch{}return u}();function fe(u,S){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var V=this.type=u.type,K=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=S,S=u.relatedTarget){if(I){e:{try{b(S.nodeName);var he=!0;break e}catch{}he=!1}he||(S=null)}}else V=="mouseover"?S=u.fromElement:V=="mouseout"&&(S=u.toElement);this.relatedTarget=S,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&fe.aa.h.call(this)}}T(fe,ne);var re={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),D=0;function Y(u,S,V,K,he){this.listener=u,this.proxy=null,this.src=S,this.type=V,this.capture=!!K,this.ha=he,this.key=++D,this.da=this.fa=!1}function Q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function $(u){this.src=u,this.g={},this.h=0}$.prototype.add=function(u,S,V,K,he){var ge=u.toString();u=this.g[ge],u||(u=this.g[ge]=[],this.h++);var Ie=ce(u,S,K,he);return-1<Ie?(S=u[Ie],V||(S.fa=!1)):(S=new Y(S,this.src,ge,!!K,he),S.fa=V,u.push(S)),S};function H(u,S){var V=S.type;if(V in u.g){var K=u.g[V],he=Array.prototype.indexOf.call(K,S,void 0),ge;(ge=0<=he)&&Array.prototype.splice.call(K,he,1),ge&&(Q(S),u.g[V].length==0&&(delete u.g[V],u.h--))}}function ce(u,S,V,K){for(var he=0;he<u.length;++he){var ge=u[he];if(!ge.da&&ge.listener==S&&ge.capture==!!V&&ge.ha==K)return he}return-1}var N="closure_lm_"+(1e6*Math.random()|0),ue={};function F(u,S,V,K,he){if(Array.isArray(S)){for(var ge=0;ge<S.length;ge++)F(u,S[ge],V,K,he);return null}return V=ye(V),u&&u[L]?u.K(S,V,c(K)?!!K.capture:!1,he):p(u,S,V,!1,K,he)}function p(u,S,V,K,he,ge){if(!S)throw Error("Invalid event type");var Ie=c(he)?!!he.capture:!!he,ut=pe(u);if(ut||(u[N]=ut=new $(u)),V=ut.add(S,V,K,Ie,ge),V.proxy)return V;if(K=m(),V.proxy=K,K.src=u,K.listener=V,u.addEventListener)oe||(he=Ie),he===void 0&&(he=!1),u.addEventListener(S.toString(),K,he);else if(u.attachEvent)u.attachEvent(Z(S.toString()),K);else if(u.addListener&&u.removeListener)u.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return V}function m(){function u(V){return S.call(u.src,u.listener,V)}const S=X;return u}function C(u,S,V,K,he){if(Array.isArray(S))for(var ge=0;ge<S.length;ge++)C(u,S[ge],V,K,he);else K=c(K)?!!K.capture:!!K,V=ye(V),u&&u[L]?(u=u.i,S=String(S).toString(),S in u.g&&(ge=u.g[S],V=ce(ge,V,K,he),-1<V&&(Q(ge[V]),Array.prototype.splice.call(ge,V,1),ge.length==0&&(delete u.g[S],u.h--)))):u&&(u=pe(u))&&(S=u.g[S.toString()],u=-1,S&&(u=ce(S,V,K,he)),(V=-1<u?S[u]:null)&&G(V))}function G(u){if(typeof u!="number"&&u&&!u.da){var S=u.src;if(S&&S[L])H(S.i,u);else{var V=u.type,K=u.proxy;S.removeEventListener?S.removeEventListener(V,K,u.capture):S.detachEvent?S.detachEvent(Z(V),K):S.addListener&&S.removeListener&&S.removeListener(K),(V=pe(S))?(H(V,u),V.h==0&&(V.src=null,S[N]=null)):Q(u)}}}function Z(u){return u in ue?ue[u]:ue[u]="on"+u}function X(u,S){if(u.da)u=!0;else{S=new fe(S,this);var V=u.listener,K=u.ha||u.src;u.fa&&G(u),u=V.call(K,S)}return u}function pe(u){return u=u[N],u instanceof $?u:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(u){return typeof u=="function"?u:(u[ve]||(u[ve]=function(S){return u.handleEvent(S)}),u[ve])}function Te(){q.call(this),this.i=new $(this),this.M=this,this.F=null}T(Te,q),Te.prototype[L]=!0,Te.prototype.removeEventListener=function(u,S,V,K){C(this,u,S,V,K)};function Ae(u,S){var V,K=u.F;if(K)for(V=[];K;K=K.F)V.push(K);if(u=u.M,K=S.type||S,typeof S=="string")S=new ne(S,u);else if(S instanceof ne)S.target=S.target||u;else{var he=S;S=new ne(K,u),U(S,he)}if(he=!0,V)for(var ge=V.length-1;0<=ge;ge--){var Ie=S.g=V[ge];he=Re(Ie,K,!0,S)&&he}if(Ie=S.g=u,he=Re(Ie,K,!0,S)&&he,he=Re(Ie,K,!1,S)&&he,V)for(ge=0;ge<V.length;ge++)Ie=S.g=V[ge],he=Re(Ie,K,!1,S)&&he}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var u=this.i,S;for(S in u.g){for(var V=u.g[S],K=0;K<V.length;K++)Q(V[K]);delete u.g[S],u.h--}}this.F=null},Te.prototype.K=function(u,S,V,K){return this.i.add(String(u),S,!1,V,K)},Te.prototype.L=function(u,S,V,K){return this.i.add(String(u),S,!0,V,K)};function Re(u,S,V,K){if(S=u.i.g[String(S)],!S)return!0;S=S.concat();for(var he=!0,ge=0;ge<S.length;++ge){var Ie=S[ge];if(Ie&&!Ie.da&&Ie.capture==V){var ut=Ie.listener,zt=Ie.ha||Ie.src;Ie.fa&&H(u.i,Ie),he=ut.call(zt,K)!==!1&&he}}return he&&!K.defaultPrevented}function Be(u,S,V){if(typeof u=="function")V&&(u=w(u,V));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:a.setTimeout(u,S||0)}function bt(u){u.g=Be(()=>{u.g=null,u.i&&(u.i=!1,bt(u))},u.l);const S=u.h;u.h=null,u.m.apply(null,S)}class Vt extends q{constructor(S,V){super(),this.m=S,this.l=V,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:bt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(u){q.call(this),this.h=u,this.g={}}T(Xt,q);var at=[];function zr(u){B(u.g,function(S,V){this.g.hasOwnProperty(V)&&G(S)},u),u.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),zr(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cr=a.JSON.stringify,Yt=a.JSON.parse,Cn=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function nn(){}nn.prototype.h=null;function li(u){return u.h||(u.h=u.i())}function ui(){}var le={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function De(){ne.call(this,"d")}T(De,ne);function ze(){ne.call(this,"c")}T(ze,ne);var ft={},lr=null;function qr(){return lr=lr||new Te}ft.La="serverreachability";function Ds(u){ne.call(this,ft.La,u)}T(Ds,ne);function Rn(u){const S=qr();Ae(S,new Ds(S))}ft.STAT_EVENT="statevent";function Zi(u,S){ne.call(this,ft.STAT_EVENT,u),this.stat=S}T(Zi,ne);function Ut(u){const S=qr();Ae(S,new Zi(S,u))}ft.Ma="timingevent";function Os(u,S){ne.call(this,ft.Ma,u),this.size=S}T(Os,ne);function es(u,S){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},S)}function ci(){this.g=!0}ci.prototype.xa=function(){this.g=!1};function Md(u,S,V,K,he,ge){u.info(function(){if(u.g)if(ge)for(var Ie="",ut=ge.split("&"),zt=0;zt<ut.length;zt++){var Ze=ut[zt].split("=");if(1<Ze.length){var Jt=Ze[0];Ze=Ze[1];var Zt=Jt.split("_");Ie=2<=Zt.length&&Zt[1]=="type"?Ie+(Jt+"="+Ze+"&"):Ie+(Jt+"=redacted&")}}else Ie=null;else Ie=ge;return"XMLHTTP REQ ("+K+") [attempt "+he+"]: "+S+`
`+V+`
`+Ie})}function Ls(u,S,V,K,he,ge,Ie){u.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+he+"]: "+S+`
`+V+`
`+ge+" "+Ie})}function Pn(u,S,V,K){u.info(function(){return"XMLHTTP TEXT ("+S+"): "+Vd(u,V)+(K?" "+K:"")})}function Fd(u,S){u.info(function(){return"TIMEOUT: "+S})}ci.prototype.info=function(){};function Vd(u,S){if(!u.g)return S;if(!S)return null;try{var V=JSON.parse(S);if(V){for(u=0;u<V.length;u++)if(Array.isArray(V[u])){var K=V[u];if(!(2>K.length)){var he=K[1];if(Array.isArray(he)&&!(1>he.length)){var ge=he[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var Ie=1;Ie<he.length;Ie++)he[Ie]=""}}}}return Cr(V)}catch{return S}}var ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dt;function Ms(){}T(Ms,nn),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Dt=new Ms;function sn(u,S,V,K){this.j=u,this.i=S,this.l=V,this.R=K||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jn}function jn(){this.i=null,this.g="",this.h=!1}var Wl={},na={};function Fs(u,S,V){u.L=1,u.v=qs(Wr(S)),u.m=V,u.P=!0,Hl(u,null)}function Hl(u,S){u.F=Date.now(),Dn(u),u.A=Wr(u.v);var V=u.A,K=u.R;Array.isArray(K)||(K=[String(K)]),aa(V.i,"t",K),u.C=0,V=u.j.J,u.h=new jn,u.g=Z0(u.j,V?S:null,!u.m),0<u.O&&(u.M=new Vt(w(u.Y,u,u.g),u.O)),S=u.U,V=u.g,K=u.ca;var he="readystatechange";Array.isArray(he)||(he&&(at[0]=he.toString()),he=at);for(var ge=0;ge<he.length;ge++){var Ie=F(V,he[ge],K||S.handleEvent,!1,S.h||S);if(!Ie)break;S.g[Ie.key]=Ie}S=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,S)):(u.u="GET",u.g.ea(u.A,u.u,null,S)),Rn(),Md(u.i,u.u,u.A,u.l,u.R,u.m)}sn.prototype.ca=function(u){u=u.target;const S=this.M;S&&Hr(u)==3?S.j():this.Y(u)},sn.prototype.Y=function(u){try{if(u==this.g)e:{const Zt=Hr(this.g);var S=this.g.Ba();const Gs=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||z0(this.g)))){this.J||Zt!=4||S==7||(S==8||0>=Gs?Rn(3):Rn(2)),Vs(this);var V=this.g.Z();this.X=V;t:if(Kl(this)){var K=z0(this.g);u="";var he=K.length,ge=Hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),di(this);var Ie="";break t}this.h.i=new a.TextDecoder}for(S=0;S<he;S++)this.h.h=!0,u+=this.h.i.decode(K[S],{stream:!(ge&&S==he-1)});K.length=0,this.h.g+=u,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=V==200,Ls(this.i,this.u,this.A,this.l,this.R,Zt,V),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,zt=this.g;if((ut=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ut)){var Ze=ut;break t}}Ze=null}if(V=Ze)Pn(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,V);else{this.o=!1,this.s=3,Ut(12),on(this),di(this);break e}}if(this.P){V=!0;let Kr;for(;!this.J&&this.C<Ie.length;)if(Kr=Gl(this,Ie),Kr==na){Zt==4&&(this.s=4,Ut(14),V=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Kr==Wl){this.s=4,Ut(15),Pn(this.i,this.l,Ie,"[Invalid Chunk]"),V=!1;break}else Pn(this.i,this.l,Kr,null),Ke(this,Kr);if(Kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||Ie.length!=0||this.h.h||(this.s=1,Ut(16),V=!1),this.o=this.o&&V,!V)Pn(this.i,this.l,Ie,"[Invalid Chunked Response]"),on(this),di(this);else if(0<Ie.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),Gd(Jt),Jt.M=!0,Ut(11))}}else Pn(this.i,this.l,Ie,null),Ke(this,Ie);Zt==4&&on(this),this.o&&!this.J&&(Zt==4?Q0(this.j,this):(this.o=!1,Dn(this)))}else WS(this.g),V==400&&0<Ie.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),on(this),di(this)}}}catch{}finally{}};function Kl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Gl(u,S){var V=u.C,K=S.indexOf(`
`,V);return K==-1?na:(V=Number(S.substring(V,K)),isNaN(V)?Wl:(K+=1,K+V>S.length?na:(S=S.slice(K,K+V),u.C=K+V,S)))}sn.prototype.cancel=function(){this.J=!0,on(this)};function Dn(u){u.S=Date.now()+u.I,ia(u,u.I)}function ia(u,S){if(u.B!=null)throw Error("WatchDog timer not null");u.B=es(w(u.ba,u),S)}function Vs(u){u.B&&(a.clearTimeout(u.B),u.B=null)}sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Fd(this.i,this.A),this.L!=2&&(Rn(),Ut(17)),on(this),this.s=2,di(this)):ia(this,this.S-u)};function di(u){u.j.G==0||u.J||Q0(u.j,u)}function on(u){Vs(u);var S=u.M;S&&typeof S.ma=="function"&&S.ma(),u.M=null,zr(u.U),u.g&&(S=u.g,u.g=null,S.abort(),S.ma())}function Ke(u,S){try{var V=u.j;if(V.G!=0&&(V.g==u||Pr(V.h,u))){if(!u.K&&Pr(V.h,u)&&V.G==3){try{var K=V.Da.g.parse(S)}catch{K=null}if(Array.isArray(K)&&K.length==3){var he=K;if(he[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<u.F)au(V),su(V);else break e;Kd(V),Ut(18)}}else V.za=he[1],0<V.za-V.T&&37500>he[2]&&V.F&&V.v==0&&!V.C&&(V.C=es(w(V.Za,V),6e3));if(1>=$r(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else ss(V,11)}else if((u.K||V.g==u)&&au(V),!y(S))for(he=V.Da.g.parse(S),S=0;S<he.length;S++){let Ze=he[S];if(V.T=Ze[0],Ze=Ze[1],V.G==2)if(Ze[0]=="c"){V.K=Ze[1],V.ia=Ze[2];const Jt=Ze[3];Jt!=null&&(V.la=Jt,V.j.info("VER="+V.la));const Zt=Ze[4];Zt!=null&&(V.Aa=Zt,V.j.info("SVER="+V.Aa));const Gs=Ze[5];Gs!=null&&typeof Gs=="number"&&0<Gs&&(K=1.5*Gs,V.L=K,V.j.info("backChannelRequestTimeoutMs_="+K)),K=V;const Kr=u.g;if(Kr){const uu=Kr.g?Kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uu){var ge=K.h;ge.g||uu.indexOf("spdy")==-1&&uu.indexOf("quic")==-1&&uu.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(Bs(ge,ge.h),ge.h=null))}if(K.D){const Qd=Kr.g?Kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Qd&&(K.ya=Qd,lt(K.I,K.D,Qd))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-u.F,V.j.info("Handshake RTT: "+V.R+"ms")),K=V;var Ie=u;if(K.qa=J0(K,K.J?K.ia:null,K.W),Ie.K){hi(K.h,Ie);var ut=Ie,zt=K.L;zt&&(ut.I=zt),ut.B&&(Vs(ut),Dn(ut)),K.g=Ie}else K0(K);0<V.i.length&&ou(V)}else Ze[0]!="stop"&&Ze[0]!="close"||ss(V,7);else V.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?ss(V,7):Hd(V):Ze[0]!="noop"&&V.l&&V.l.ta(Ze),V.v=0)}}Rn(4)}catch{}}var Us=class{constructor(u,S){this.g=u,this.map=S}};function Rr(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $r(u){return u.h?1:u.g?u.g.size:0}function Pr(u,S){return u.h?u.h==S:u.g?u.g.has(S):!1}function Bs(u,S){u.g?u.g.add(S):u.h=S}function hi(u,S){u.h&&u.h==S?u.h=null:u.g&&u.g.has(S)&&u.g.delete(S)}Rr.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ql(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let S=u.i;for(const V of u.g.values())S=S.concat(V.D);return S}return x(u.i)}function Xl(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var S=[],V=u.length,K=0;K<V;K++)S.push(u[K]);return S}S=[],V=0;for(K in u)S[V++]=u[K];return S}function Ud(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var S=[];u=u.length;for(var V=0;V<u;V++)S.push(V);return S}S=[],V=0;for(const K in u)S[V++]=K;return S}}}function oa(u,S){if(u.forEach&&typeof u.forEach=="function")u.forEach(S,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,S,void 0);else for(var V=Ud(u),K=Xl(u),he=K.length,ge=0;ge<he;ge++)S.call(void 0,K[ge],V&&V[ge],u)}var Yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jl(u,S){if(u){u=u.split("&");for(var V=0;V<u.length;V++){var K=u[V].indexOf("="),he=null;if(0<=K){var ge=u[V].substring(0,K);he=u[V].substring(K+1)}else ge=u[V];S(ge,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function On(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof On){this.h=u.h,zs(this,u.j),this.o=u.o,this.g=u.g,fi(this,u.s),this.l=u.l;var S=u.i,V=new ns;V.i=S.i,S.g&&(V.g=new Map(S.g),V.h=S.h),Zl(this,V),this.m=u.m}else u&&(S=String(u).match(Yl))?(this.h=!1,zs(this,S[1]||"",!0),this.o=an(S[2]||""),this.g=an(S[3]||"",!0),fi(this,S[4]),this.l=an(S[5]||"",!0),Zl(this,S[6]||"",!0),this.m=an(S[7]||"")):(this.h=!1,this.i=new ns(null,this.h))}On.prototype.toString=function(){var u=[],S=this.j;S&&u.push(rs(S,eu,!0),":");var V=this.g;return(V||S=="file")&&(u.push("//"),(S=this.o)&&u.push(rs(S,eu,!0),"@"),u.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&u.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&u.push("/"),u.push(rs(V,V.charAt(0)=="/"?qd:zd,!0))),(V=this.i.toString())&&u.push("?",V),(V=this.m)&&u.push("#",rs(V,$d)),u.join("")};function Wr(u){return new On(u)}function zs(u,S,V){u.j=V?an(S,!0):S,u.j&&(u.j=u.j.replace(/:$/,""))}function fi(u,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);u.s=S}else u.s=null}function Zl(u,S,V){S instanceof ns?(u.i=S,Wd(u.i,u.h)):(V||(S=rs(S,tu)),u.i=new ns(S,u.h))}function lt(u,S,V){u.i.set(S,V)}function qs(u){return lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function an(u,S){return u?S?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function rs(u,S,V){return typeof u=="string"?(u=encodeURI(u).replace(S,Bd),V&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bd(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var eu=/[#\/\?@]/g,zd=/[#\?:]/g,qd=/[#\?]/g,tu=/[#\?@]/g,$d=/#/g;function ns(u,S){this.h=this.g=null,this.i=u||null,this.j=!!S}function ln(u){u.g||(u.g=new Map,u.h=0,u.i&&Jl(u.i,function(S,V){u.add(decodeURIComponent(S.replace(/\+/g," ")),V)}))}t=ns.prototype,t.add=function(u,S){ln(this),this.i=null,u=pi(this,u);var V=this.g.get(u);return V||this.g.set(u,V=[]),V.push(S),this.h+=1,this};function ru(u,S){ln(u),S=pi(u,S),u.g.has(S)&&(u.i=null,u.h-=u.g.get(S).length,u.g.delete(S))}function nu(u,S){return ln(u),S=pi(u,S),u.g.has(S)}t.forEach=function(u,S){ln(this),this.g.forEach(function(V,K){V.forEach(function(he){u.call(S,he,K,this)},this)},this)},t.na=function(){ln(this);const u=Array.from(this.g.values()),S=Array.from(this.g.keys()),V=[];for(let K=0;K<S.length;K++){const he=u[K];for(let ge=0;ge<he.length;ge++)V.push(S[K])}return V},t.V=function(u){ln(this);let S=[];if(typeof u=="string")nu(this,u)&&(S=S.concat(this.g.get(pi(this,u))));else{u=Array.from(this.g.values());for(let V=0;V<u.length;V++)S=S.concat(u[V])}return S},t.set=function(u,S){return ln(this),this.i=null,u=pi(this,u),nu(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[S]),this.h+=1,this},t.get=function(u,S){return u?(u=this.V(u),0<u.length?String(u[0]):S):S};function aa(u,S,V){ru(u,S),0<V.length&&(u.i=null,u.g.set(pi(u,S),x(V)),u.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],S=Array.from(this.g.keys());for(var V=0;V<S.length;V++){var K=S[V];const ge=encodeURIComponent(String(K)),Ie=this.V(K);for(K=0;K<Ie.length;K++){var he=ge;Ie[K]!==""&&(he+="="+encodeURIComponent(String(Ie[K]))),u.push(he)}}return this.i=u.join("&")};function pi(u,S){return S=String(S),u.j&&(S=S.toLowerCase()),S}function Wd(u,S){S&&!u.j&&(ln(u),u.i=null,u.g.forEach(function(V,K){var he=K.toLowerCase();K!=he&&(ru(this,K),aa(this,he,V))},u)),u.j=S}function $s(u,S){const V=new ci;if(a.Image){const K=new Image;K.onload=_(z,V,"TestLoadImage: loaded",!0,S,K),K.onerror=_(z,V,"TestLoadImage: error",!1,S,K),K.onabort=_(z,V,"TestLoadImage: abort",!1,S,K),K.ontimeout=_(z,V,"TestLoadImage: timeout",!1,S,K),a.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=u}else S(!1)}function O(u,S){const V=new ci,K=new AbortController,he=setTimeout(()=>{K.abort(),z(V,"TestPingServer: timeout",!1,S)},1e4);fetch(u,{signal:K.signal}).then(ge=>{clearTimeout(he),ge.ok?z(V,"TestPingServer: ok",!0,S):z(V,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(he),z(V,"TestPingServer: error",!1,S)})}function z(u,S,V,K,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),K(V)}catch{}}function ae(){this.g=new Cn}function be(u,S,V){const K=V||"";try{oa(u,function(he,ge){let Ie=he;c(he)&&(Ie=Cr(he)),S.push(K+ge+"="+encodeURIComponent(Ie))})}catch(he){throw S.push(K+"type="+encodeURIComponent("_badmap")),he}}function _e(u){this.l=u.Ub||null,this.j=u.eb||!1}T(_e,nn),_e.prototype.g=function(){return new Pe(this.l,this.j)},_e.prototype.i=function(u){return function(){return u}}({});function Pe(u,S){Te.call(this),this.D=u,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Pe,Te),t=Pe.prototype,t.open=function(u,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=S,this.readyState=1,Ve(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(S.body=u),(this.D||a).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ne(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ve(this)),this.g&&(this.readyState=3,Ve(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ce(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ce(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var S=u.value?u.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!u.done}))&&(this.response=this.responseText+=S)}u.done?Ne(this):Ve(this),this.readyState==3&&Ce(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ne(this))},t.Qa=function(u){this.g&&(this.response=u,Ne(this))},t.ga=function(){this.g&&Ne(this)};function Ne(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ve(u)}t.setRequestHeader=function(u,S){this.u.append(u,S)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],S=this.h.entries();for(var V=S.next();!V.done;)V=V.value,u.push(V[0]+": "+V[1]),V=S.next();return u.join(`\r
`)};function Ve(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pe.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Bt(u){let S="";return B(u,function(V,K){S+=K,S+=":",S+=V,S+=`\r
`}),S}function gt(u,S,V){e:{for(K in V){var K=!1;break e}K=!0}K||(V=Bt(V),typeof u=="string"?V!=null&&encodeURIComponent(String(V)):lt(u,S,V))}function tt(u){Te.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(tt,Te);var la=/^https?$/i,He=["POST","PUT"];t=tt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,S,V,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);S=S?S.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dt.g(),this.v=this.o?li(this.o):li(Dt),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(S,String(u),!0),this.B=!1}catch(ge){un(this,ge);return}if(u=V||"",V=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var he in K)V.set(he,K[he]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ge of K.keys())V.set(ge,K.get(ge));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(V.keys()).find(ge=>ge.toLowerCase()=="content-type"),he=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(He,S,void 0))||K||he||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Ie]of V)this.g.setRequestHeader(ge,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{is(this),this.u=!0,this.g.send(u),this.u=!1}catch(ge){un(this,ge)}};function un(u,S){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=S,u.m=5,Ws(u),Hs(u)}function Ws(u){u.A||(u.A=!0,Ae(u,"complete"),Ae(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ae(this,"complete"),Ae(this,"abort"),Hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?iu(this):this.bb())},t.bb=function(){iu(this)};function iu(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Hr(u)!=4||u.Z()!=2)){if(u.u&&Hr(u)==4)Be(u.Ea,0,u);else if(Ae(u,"readystatechange"),Hr(u)==4){u.h=!1;try{const Ie=u.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var V;if(!(V=S)){var K;if(K=Ie===0){var he=String(u.D).match(Yl)[1]||null;!he&&a.self&&a.self.location&&(he=a.self.location.protocol.slice(0,-1)),K=!la.test(he?he.toLowerCase():"")}V=K}if(V)Ae(u,"complete"),Ae(u,"success");else{u.m=6;try{var ge=2<Hr(u)?u.g.statusText:""}catch{ge=""}u.l=ge+" ["+u.Z()+"]",Ws(u)}}finally{Hs(u)}}}}function Hs(u,S){if(u.g){is(u);const V=u.g,K=u.v[0]?()=>{}:null;u.g=null,u.v=null,S||Ae(u,"ready");try{V.onreadystatechange=K}catch{}}}function is(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Hr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var S=this.g.responseText;return u&&S.indexOf(u)==0&&(S=S.substring(u.length)),Yt(S)}};function z0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function WS(u){const S={};u=(u.g&&2<=Hr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<u.length;K++){if(y(u[K]))continue;var V=W(u[K]);const he=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const ge=S[he]||[];S[he]=ge,ge.push(V)}k(S,function(K){return K.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(u,S,V){return V&&V.internalChannelParams&&V.internalChannelParams[u]||S}function q0(u){this.Aa=0,this.i=[],this.j=new ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,u),this.cb=ua("retryDelaySeedMs",1e4,u),this.Wa=ua("forwardChannelMaxRetries",2,u),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Rr(u&&u.concurrentRequestLimit),this.Da=new ae,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=q0.prototype,t.la=8,t.G=1,t.connect=function(u,S,V,K){Ut(0),this.W=u,this.H=S||{},V&&K!==void 0&&(this.H.OSID=V,this.H.OAID=K),this.F=this.X,this.I=J0(this,null,this.W),ou(this)};function Hd(u){if($0(u),u.G==3){var S=u.U++,V=Wr(u.I);if(lt(V,"SID",u.K),lt(V,"RID",S),lt(V,"TYPE","terminate"),ca(u,V),S=new sn(u,u.j,S),S.L=2,S.v=qs(Wr(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(S.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=S.v,V=!0),V||(S.g=Z0(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Dn(S)}Y0(u)}function su(u){u.g&&(Gd(u),u.g.cancel(),u.g=null)}function $0(u){su(u),u.u&&(a.clearTimeout(u.u),u.u=null),au(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ou(u){if(!sa(u.h)&&!u.s){u.s=!0;var S=u.Ga;J||me(),ie||(J(),ie=!0),se.add(S,u),u.B=0}}function HS(u,S){return $r(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=S.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=es(w(u.Ga,u,S),X0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const he=new sn(this,this.j,u);let ge=this.o;if(this.S&&(ge?(ge=R(ge),U(ge,this.S)):ge=this.S),this.m!==null||this.O||(he.H=ge,ge=null),this.P)e:{for(var S=0,V=0;V<this.i.length;V++){t:{var K=this.i[V];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(S+=K,4096<S){S=V;break e}if(S===4096||V===this.i.length-1){S=V+1;break e}}S=1e3}else S=1e3;S=H0(this,he,S),V=Wr(this.I),lt(V,"RID",u),lt(V,"CVER",22),this.D&&lt(V,"X-HTTP-Session-Id",this.D),ca(this,V),ge&&(this.O?S="headers="+encodeURIComponent(String(Bt(ge)))+"&"+S:this.m&&gt(V,this.m,ge)),Bs(this.h,he),this.Ua&&lt(V,"TYPE","init"),this.P?(lt(V,"$req",S),lt(V,"SID","null"),he.T=!0,Fs(he,V,null)):Fs(he,V,S),this.G=2}}else this.G==3&&(u?W0(this,u):this.i.length==0||sa(this.h)||W0(this))};function W0(u,S){var V;S?V=S.l:V=u.U++;const K=Wr(u.I);lt(K,"SID",u.K),lt(K,"RID",V),lt(K,"AID",u.T),ca(u,K),u.m&&u.o&&gt(K,u.m,u.o),V=new sn(u,u.j,V,u.B+1),u.m===null&&(V.H=u.o),S&&(u.i=S.D.concat(u.i)),S=H0(u,V,1e3),V.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Bs(u.h,V),Fs(V,K,S)}function ca(u,S){u.H&&B(u.H,function(V,K){lt(S,K,V)}),u.l&&oa({},function(V,K){lt(S,K,V)})}function H0(u,S,V){V=Math.min(u.i.length,V);var K=u.l?w(u.l.Na,u.l,u):null;e:{var he=u.i;let ge=-1;for(;;){const Ie=["count="+V];ge==-1?0<V?(ge=he[0].g,Ie.push("ofs="+ge)):ge=0:Ie.push("ofs="+ge);let ut=!0;for(let zt=0;zt<V;zt++){let Ze=he[zt].g;const Jt=he[zt].map;if(Ze-=ge,0>Ze)ge=Math.max(0,he[zt].g-100),ut=!1;else try{be(Jt,Ie,"req"+Ze+"_")}catch{K&&K(Jt)}}if(ut){K=Ie.join("&");break e}}}return u=u.i.splice(0,V),S.D=u,K}function K0(u){if(!u.g&&!u.u){u.Y=1;var S=u.Fa;J||me(),ie||(J(),ie=!0),se.add(S,u),u.v=0}}function Kd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=es(w(u.Fa,u),X0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,G0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=es(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),su(this),G0(this))};function Gd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function G0(u){u.g=new sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var S=Wr(u.qa);lt(S,"RID","rpc"),lt(S,"SID",u.K),lt(S,"AID",u.T),lt(S,"CI",u.F?"0":"1"),!u.F&&u.ja&&lt(S,"TO",u.ja),lt(S,"TYPE","xmlhttp"),ca(u,S),u.m&&u.o&&gt(S,u.m,u.o),u.L&&(u.g.I=u.L);var V=u.g;u=u.ia,V.L=1,V.v=qs(Wr(S)),V.m=null,V.P=!0,Hl(V,u)}t.Za=function(){this.C!=null&&(this.C=null,su(this),Kd(this),Ut(19))};function au(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Q0(u,S){var V=null;if(u.g==S){au(u),Gd(u),u.g=null;var K=2}else if(Pr(u.h,S))V=S.D,hi(u.h,S),K=1;else return;if(u.G!=0){if(S.o)if(K==1){V=S.m?S.m.length:0,S=Date.now()-S.F;var he=u.B;K=qr(),Ae(K,new Os(K,V)),ou(u)}else K0(u);else if(he=S.s,he==3||he==0&&0<S.X||!(K==1&&HS(u,S)||K==2&&Kd(u)))switch(V&&0<V.length&&(S=u.h,S.i=S.i.concat(V)),he){case 1:ss(u,5);break;case 4:ss(u,10);break;case 3:ss(u,6);break;default:ss(u,2)}}}function X0(u,S){let V=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(V*=2),V*S}function ss(u,S){if(u.j.info("Error code "+S),S==2){var V=w(u.fb,u),K=u.Xa;const he=!K;K=new On(K||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zs(K,"https"),qs(K),he?$s(K.toString(),V):O(K.toString(),V)}else Ut(2);u.G=0,u.l&&u.l.sa(S),Y0(u),$0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Y0(u){if(u.G=0,u.ka=[],u.l){const S=Ql(u.h);(S.length!=0||u.i.length!=0)&&(j(u.ka,S),j(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function J0(u,S,V){var K=V instanceof On?Wr(V):new On(V);if(K.g!="")S&&(K.g=S+"."+K.g),fi(K,K.s);else{var he=a.location;K=he.protocol,S=S?S+"."+he.hostname:he.hostname,he=+he.port;var ge=new On(null);K&&zs(ge,K),S&&(ge.g=S),he&&fi(ge,he),V&&(ge.l=V),K=ge}return V=u.D,S=u.ya,V&&S&&lt(K,V,S),lt(K,"VER",u.la),ca(u,K),K}function Z0(u,S,V){if(S&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=u.Ca&&!u.pa?new tt(new _e({eb:V})):new tt(u.pa),S.Ha(u.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ey(){}t=ey.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lu(){}lu.prototype.g=function(u,S){return new xr(u,S)};function xr(u,S){Te.call(this),this.g=new q0(S),this.l=u,this.h=S&&S.messageUrlParams||null,u=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(u?u["X-WebChannel-Content-Type"]=S.messageContentType:u={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(u?u["X-WebChannel-Client-Profile"]=S.va:u={"X-WebChannel-Client-Profile":S.va}),this.g.S=u,(u=S&&S.Sb)&&!y(u)&&(this.g.m=u),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!y(S)&&(this.g.D=S,u=this.h,u!==null&&S in u&&(u=this.h,S in u&&delete u[S])),this.j=new Ks(this)}T(xr,Te),xr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){Hd(this.g)},xr.prototype.o=function(u){var S=this.g;if(typeof u=="string"){var V={};V.__data__=u,u=V}else this.u&&(V={},V.__data__=Cr(u),u=V);S.i.push(new Us(S.Ya++,u)),S.G==3&&ou(S)},xr.prototype.N=function(){this.g.l=null,delete this.j,Hd(this.g),delete this.g,xr.aa.N.call(this)};function ty(u){De.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var S=u.__sm__;if(S){e:{for(const V in S){u=V;break e}u=void 0}(this.i=u)&&(u=this.i,S=S!==null&&u in S?S[u]:void 0),this.data=S}else this.data=u}T(ty,De);function ry(){ze.call(this),this.status=1}T(ry,ze);function Ks(u){this.g=u}T(Ks,ey),Ks.prototype.ua=function(){Ae(this.g,"a")},Ks.prototype.ta=function(u){Ae(this.g,new ty(u))},Ks.prototype.sa=function(u){Ae(this.g,new ry)},Ks.prototype.ra=function(){Ae(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,KE=function(){return new lu},HE=function(){return qr()},WE=ft,wm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ts.NO_ERROR=0,ts.TIMEOUT=8,ts.HTTP_ERROR=6,ec=ts,rt.COMPLETE="complete",$E=rt,ui.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",Te.prototype.listen=Te.prototype.K,Ca=ui,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,qE=tt}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const $v="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Vg("@firebase/firestore");function wa(){return As.logLevel}function je(t,...e){if(As.logLevel<=Xe.DEBUG){const r=e.map(Yg);As.debug(`Firestore (${Jo}): ${t}`,...r)}}function ti(t,...e){if(As.logLevel<=Xe.ERROR){const r=e.map(Yg);As.error(`Firestore (${Jo}): ${t}`,...r)}}function Vo(t,...e){if(As.logLevel<=Xe.WARN){const r=e.map(Yg);As.warn(`Firestore (${Jo}): ${t}`,...r)}}function Yg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t="Unexpected state"){const e=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: `+t;throw ti(e),new Error(e)}function st(t,e){t||Ue()}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends si{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(nr.UNAUTHENTICATED))}shutdown(){}}class gR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class yR{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){st(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kn)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(st(typeof n.accessToken=="string"),new GE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string"),new nr(e)}}class vR{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _R{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new vR(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){st(this.o===void 0);const n=s=>{s.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,je("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(st(typeof r.token=="string"),this.R=r.token,new wR(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=xR(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function et(t,e){return t<e?-1:t>e?1:0}function Uo(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Oe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Oe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Oe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new jt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qe(e)}static min(){return new qe(new jt(0,0))}static max(){return new qe(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ue(),n===void 0?n=e.length-r:n>e.length-r&&Ue(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),o=r.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class mt extends ml{construct(e,r,n){return new mt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Oe(xe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new mt(r)}static emptyPath(){return new mt([])}}const ER=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends ml{construct(e,r,n){return new Wt(e,r,n)}static isValidIdentifier(e){return ER.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Oe(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Oe(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Oe(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(n+=a,i++):(s(),i++)}if(s(),o)throw new Oe(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(r)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(mt.fromString(e))}static fromName(e){return new Me(mt.fromString(e).popFirst(5))}static empty(){return new Me(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return mt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new mt(e.slice()))}}function TR(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=qe.fromTimestamp(n===1e9?new jt(r+1,0):new jt(r,n));return new qi(i,Me.empty(),e)}function SR(t){return new qi(t.readTime,t.key,-1)}class qi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new qi(qe.min(),Me.empty(),-1)}static max(){return new qi(qe.max(),Me.empty(),-1)}}function AR(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Me.comparator(t.documentKey,e.documentKey),r!==0?r:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==IR)throw t;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ee((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ee?r:Ee.resolve(r)}catch(r){return Ee.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ee.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ee.reject(r)}static resolve(e){return new Ee((r,n)=>{r(e)})}static reject(e){return new Ee((r,n)=>{n(e)})}static waitFor(e){return new Ee((r,n)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&r()},l=>n(l))}),o=!0,s===i&&r()})}static or(e){let r=Ee.resolve(!1);for(const n of e)r=r.next(i=>i?Ee.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(e,r){return new Ee((n,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;r(e[c]).next(h=>{o[c]=h,++a,a===s&&n(o)},h=>i(h))}})}static doWhile(e,r){return new Ee((n,i)=>{const s=()=>{e()===!0?r().next(()=>{s()},i):n()};s()})}}function kR(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jg.oe=-1;function yd(t){return t==null}function Vc(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!Vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ps(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function XE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,r){this.comparator=e,this.root=r||$t.EMPTY}insert(e,r){return new wt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??$t.RED,this.left=i??$t.EMPTY,this.right=s??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new $t(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return $t.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,r,n,i,s){return this}insert(e,r,n){return new $t(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Hv(this.data.getIterator())}getIteratorFrom(e){return new Hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Kt(this.comparator);return r.data=e,r}}class Hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Sr([])}unionWith(e){let r=new Kt(Wt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Sr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new YE("Invalid base64 string: "+s):s}}(e);return new Qt(r)}static fromUint8Array(e){const r=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(st(!!t),typeof t=="string"){let e=0;const r=RR.exec(t);if(st(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Is(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function e0(t){const e=t.mapValue.fields.__previous_value__;return Zg(e)?e0(e):e}function gl(t){const e=$i(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,r,n,i,s,o,a,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class yl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu={mapValue:{}};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zg(t)?4:DR(t)?9007199254740991:jR(t)?10:11:Ue()}function An(t,e){if(t===e)return!0;const r=Ns(t);if(r!==Ns(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=$i(i.timestampValue),a=$i(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Is(i.bytesValue).isEqual(Is(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Tt(i.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tt(i.integerValue)===Tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Tt(i.doubleValue),a=Tt(s.doubleValue);return o===a?Vc(o)===Vc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Wv(o)!==Wv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!An(o[l],a[l])))return!1;return!0}(t,e);default:return Ue()}}function vl(t,e){return(t.values||[]).find(r=>An(r,e))!==void 0}function Bo(t,e){if(t===e)return 0;const r=Ns(t),n=Ns(e);if(r!==n)return et(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Tt(s.integerValue||s.doubleValue),l=Tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Kv(t.timestampValue,e.timestampValue);case 4:return Kv(gl(t),gl(e));case 5:return et(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Is(s),l=Is(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=et(a[c],l[c]);if(h!==0)return h}return et(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=et(Tt(s.latitude),Tt(o.latitude));return a!==0?a:et(Tt(s.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const g=s.fields||{},w=o.fields||{},_=(a=g.value)===null||a===void 0?void 0:a.arrayValue,T=(l=w.value)===null||l===void 0?void 0:l.arrayValue,x=et(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:Gv(_,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Cu.mapValue&&o===Cu.mapValue)return 0;if(s===Cu.mapValue)return 1;if(o===Cu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){const w=et(l[g],h[g]);if(w!==0)return w;const _=Bo(a[l[g]],c[h[g]]);if(_!==0)return _}return et(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Ue()}}function Kv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const r=$i(t),n=$i(e),i=et(r.seconds,n.seconds);return i!==0?i:et(r.nanos,n.nanos)}function Gv(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=Bo(r[i],n[i]);if(s)return s}return et(r.length,n.length)}function zo(t){return bm(t)}function bm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=$i(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Is(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Me.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=bm(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const o of n)s?s=!1:i+=",",i+=`${o}:${bm(r.fields[o])}`;return i+"}"}(t.mapValue):Ue()}function xm(t){return!!t&&"integerValue"in t}function t0(t){return!!t&&"arrayValue"in t}function Qv(t){return!!t&&"nullValue"in t}function Xv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tc(t){return!!t&&"mapValue"in t}function jR(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Wa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ps(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Wa(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Wa(t.arrayValue.values[r]);return e}return Object.assign({},t)}function DR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!tc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wa(r)}setAll(e){let r=Wt.emptyPath(),n={},i=[];e.forEach((o,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=a.popLast()}o?n[a.lastSegment()]=Wa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());tc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Ps(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new gr(Wa(this.value))}}function JE(t){const e=[];return Ps(t.fields,(r,n)=>{const i=new Wt([r]);if(tc(n)){const s=JE(n.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,r,n,i,s,o,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sr(e,0,qe.min(),qe.min(),qe.min(),gr.empty(),0)}static newFoundDocument(e,r,n,i){return new sr(e,1,r,qe.min(),n,i,0)}static newNoDocument(e,r){return new sr(e,2,r,qe.min(),qe.min(),gr.empty(),0)}static newUnknownDocument(e,r){return new sr(e,3,r,qe.min(),qe.min(),gr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,r){this.position=e,this.inclusive=r}}function Yv(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?n=Me.comparator(Me.fromName(o.referenceValue),r.key):n=Bo(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Jv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!An(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,r="asc"){this.field=e,this.dir=r}}function OR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZE=class{};class Rt extends ZE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new MR(e,r,n):r==="array-contains"?new UR(e,n):r==="in"?new BR(e,n):r==="not-in"?new zR(e,n):r==="array-contains-any"?new qR(e,n):new Rt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new FR(e,n):new VR(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Bo(r,this.value)):r!==null&&Ns(this.value)===Ns(r)&&this.matchesComparison(Bo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends ZE{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new In(e,r)}matches(e){return eT(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eT(t){return t.op==="and"}function tT(t){return LR(t)&&eT(t)}function LR(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function Em(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+zo(t.value);if(tT(t))return t.filters.map(e=>Em(e)).join(",");{const e=t.filters.map(r=>Em(r)).join(",");return`${t.op}(${e})`}}function rT(t,e){return t instanceof Rt?function(n,i){return i instanceof Rt&&n.op===i.op&&n.field.isEqual(i.field)&&An(n.value,i.value)}(t,e):t instanceof In?function(n,i){return i instanceof In&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,o,a)=>s&&rT(o,i.filters[a]),!0):!1}(t,e):void Ue()}function nT(t){return t instanceof Rt?function(r){return`${r.field.canonicalString()} ${r.op} ${zo(r.value)}`}(t):t instanceof In?function(r){return r.op.toString()+" {"+r.getFilters().map(nT).join(" ,")+"}"}(t):"Filter"}class MR extends Rt{constructor(e,r,n){super(e,r,n),this.key=Me.fromName(n.referenceValue)}matches(e){const r=Me.comparator(e.key,this.key);return this.matchesComparison(r)}}class FR extends Rt{constructor(e,r){super(e,"in",r),this.keys=iT("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class VR extends Rt{constructor(e,r){super(e,"not-in",r),this.keys=iT("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function iT(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Me.fromName(n.referenceValue))}class UR extends Rt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return t0(r)&&vl(r.arrayValue,this.value)}}class BR extends Rt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&vl(this.value.arrayValue,r)}}class zR extends Rt{constructor(e,r){super(e,"not-in",r)}matches(e){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!vl(this.value.arrayValue,r)}}class qR extends Rt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!t0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>vl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,r=null,n=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Zv(t,e=null,r=[],n=[],i=null,s=null,o=null){return new $R(t,e,r,n,i,s,o)}function r0(t){const e=$e(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Em(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),yd(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>zo(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>zo(n)).join(",")),e.ue=r}return e.ue}function n0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!OR(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!rT(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jv(t.startAt,e.startAt)&&Jv(t.endAt,e.endAt)}function Tm(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,r=null,n=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WR(t,e,r,n,i,s,o,a){return new vd(t,e,r,n,i,s,o,a)}function _d(t){return new vd(t)}function e_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HR(t){return t.collectionGroup!==null}function Ha(t){const e=$e(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kt(Wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Bc(s,n))}),r.has(Wt.keyField().canonicalString())||e.ce.push(new Bc(Wt.keyField(),n))}return e.ce}function Tn(t){const e=$e(t);return e.le||(e.le=KR(e,Ha(t))),e.le}function KR(t,e){if(t.limitType==="F")return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Bc(i.field,s)});const r=t.endAt?new Uc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Uc(t.startAt.position,t.startAt.inclusive):null;return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Sm(t,e,r){return new vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function wd(t,e){return n0(Tn(t),Tn(e))&&t.limitType===e.limitType}function sT(t){return`${r0(Tn(t))}|lt:${t.limitType}`}function Js(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>nT(i)).join(", ")}]`),yd(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>zo(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>zo(i)).join(",")),`Target(${n})`}(Tn(t))}; limitType=${t.limitType})`}function bd(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Me.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of Ha(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,a,l){const c=Yv(o,a,l);return o.inclusive?c<=0:c<0}(n.startAt,Ha(n),i)||n.endAt&&!function(o,a,l){const c=Yv(o,a,l);return o.inclusive?c>=0:c>0}(n.endAt,Ha(n),i))}(t,e)}function GR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oT(t){return(e,r)=>{let n=!1;for(const i of Ha(t)){const s=QR(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function QR(t,e,r){const n=t.field.isKeyField()?Me.comparator(e.key,r.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Bo(l,c):Ue()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return XE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new wt(Me.comparator);function ri(){return XR}const aT=new wt(Me.comparator);function Ra(...t){let e=aT;for(const r of t)e=e.insert(r.key,r);return e}function lT(t){let e=aT;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function fs(){return Ka()}function uT(){return Ka()}function Ka(){return new Zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const YR=new wt(Me.comparator),JR=new Kt(Me.comparator);function Qe(...t){let e=JR;for(const r of t)e=e.add(r);return e}const ZR=new Kt(et);function e4(){return ZR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function cT(t){return{integerValue:""+t}}function t4(t,e){return CR(e)?cT(e):i0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this._=void 0}}function r4(t,e,r){return t instanceof zc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zg(s)&&(s=e0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,e):t instanceof _l?hT(t,e):t instanceof wl?fT(t,e):function(i,s){const o=dT(i,s),a=t_(o)+t_(i.Pe);return xm(o)&&xm(i.Pe)?cT(a):i0(i.serializer,a)}(t,e)}function n4(t,e,r){return t instanceof _l?hT(t,e):t instanceof wl?fT(t,e):r}function dT(t,e){return t instanceof qc?function(n){return xm(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class zc extends xd{}class _l extends xd{constructor(e){super(),this.elements=e}}function hT(t,e){const r=pT(e);for(const n of t.elements)r.some(i=>An(i,n))||r.push(n);return{arrayValue:{values:r}}}class wl extends xd{constructor(e){super(),this.elements=e}}function fT(t,e){let r=pT(e);for(const n of t.elements)r=r.filter(i=>!An(i,n));return{arrayValue:{values:r}}}class qc extends xd{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function t_(t){return Tt(t.integerValue||t.doubleValue)}function pT(t){return t0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function i4(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof _l&&i instanceof _l||n instanceof wl&&i instanceof wl?Uo(n.elements,i.elements,An):n instanceof qc&&i instanceof qc?An(n.Pe,i.Pe):n instanceof zc&&i instanceof zc}(t.transform,e.transform)}class s4{constructor(e,r){this.version=e,this.transformResults=r}}class Vr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Vr}static exists(e){return new Vr(void 0,e)}static updateTime(e){return new Vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ed{}function mT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new s0(t.key,Vr.none()):new Ol(t.key,t.data,Vr.none());{const r=t.data,n=gr.empty();let i=new Kt(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),i=i.add(s)}return new Yi(t.key,n,new Sr(i.toArray()),Vr.none())}}function o4(t,e,r){t instanceof Ol?function(i,s,o){const a=i.value.clone(),l=n_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Yi?function(i,s,o){if(!rc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=n_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(gT(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Ga(t,e,r,n){return t instanceof Ol?function(s,o,a,l){if(!rc(s.precondition,o))return a;const c=s.value.clone(),h=i_(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Yi?function(s,o,a,l){if(!rc(s.precondition,o))return a;const c=i_(s.fieldTransforms,l,o),h=o.data;return h.setAll(gT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,r,n):function(s,o,a){return rc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,r)}function a4(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=dT(n.transform,i||null);s!=null&&(r===null&&(r=gr.empty()),r.set(n.field,s))}return r||null}function r_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Uo(n,i,(s,o)=>i4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ol extends Ed{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yi extends Ed{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gT(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function n_(t,e,r){const n=new Map;st(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);n.set(s.field,n4(o,a,r[i]))}return n}function i_(t,e,r){const n=new Map;for(const i of t){const s=i.transform,o=r.data.field(i.field);n.set(i.field,r4(s,o,e))}return n}class s0 extends Ed{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l4 extends Ed{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&o4(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Ga(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Ga(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=uT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=r.has(i.key)?null:a;const l=mT(o,a);l!==null&&n.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(qe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(r,n)=>r_(r,n))&&Uo(this.baseMutations,e.baseMutations,(r,n)=>r_(r,n))}}class o0{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){st(e.mutations.length===n.length);let i=function(){return YR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,n[o].version);return new o0(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Ye;function h4(t){switch(t){default:return Ue();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function yT(t){if(t===void 0)return ti("GRPC error has no .code"),xe.UNKNOWN;switch(t){case It.OK:return xe.OK;case It.CANCELLED:return xe.CANCELLED;case It.UNKNOWN:return xe.UNKNOWN;case It.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case It.INTERNAL:return xe.INTERNAL;case It.UNAVAILABLE:return xe.UNAVAILABLE;case It.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case It.NOT_FOUND:return xe.NOT_FOUND;case It.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case It.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case It.ABORTED:return xe.ABORTED;case It.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case It.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case It.DATA_LOSS:return xe.DATA_LOSS;default:return Ue()}}(Ye=It||(It={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=new ys([4294967295,4294967295],0);function s_(t){const e=f4().encode(t),r=new zE;return r.update(e),new Uint8Array(r.digest())}function o_(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ys([r,n],0),new ys([i,s],0)]}class a0{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Pa(`Invalid padding: ${r}`);if(n<0)throw new Pa(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Pa(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Pa(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=ys.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(ys.fromNumber(n)));return i.compare(p4)===1&&(i=new ys([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=s_(e),[n,i]=o_(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,i,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new a0(s,i,r);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const r=s_(e),[n,i]=o_(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,i,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Td(qe.min(),i,new wt(et),ri(),Qe())}}class Ll{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Ll(n,r,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class vT{constructor(e,r){this.targetId=e,this.me=r}}class _T{constructor(e,r,n=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class a_{constructor(){this.fe=0,this.ge=u_(),this.pe=Qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qe(),r=Qe(),n=Qe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Ue()}}),new Ll(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=u_()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,st(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class m4{constructor(e){this.Le=e,this.Be=new Map,this.ke=ri(),this.qe=l_(),this.Qe=new wt(et)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ue()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const s=i.target;if(Tm(s))if(n===0){const o=new Me(s.path);this.Ue(r,o,sr.newNoDocument(o,qe.min()))}else st(n===1);else{const o=this.Ye(r);if(o!==n){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let o,a;try{o=Is(n).toUint8Array()}catch(l){if(l instanceof YE)return Vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new a0(o,i,s)}catch(l){return Vo(l instanceof Pa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,s,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tm(a.target)){const l=new Me(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,sr.newNoDocument(l,e))}s.be&&(r.set(o,s.ve()),s.Ce())}});let n=Qe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Td(e,r,this.Qe,this.ke,n);return this.ke=ri(),this.qe=l_(),this.Qe=new wt(et),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new a_,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Kt(et),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||je("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new a_),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function l_(){return new wt(Me.comparator)}function u_(){return new wt(Me.comparator)}const g4={asc:"ASCENDING",desc:"DESCENDING"},y4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v4={and:"AND",or:"OR"};class _4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Am(t,e){return t.useProto3Json||yd(e)?e:{value:e}}function $c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w4(t,e){return $c(t,e.toTimestamp())}function Sn(t){return st(!!t),qe.fromTimestamp(function(r){const n=$i(r);return new jt(n.seconds,n.nanos)}(t))}function l0(t,e){return Im(t,e).canonicalString()}function Im(t,e){const r=function(i){return new mt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function bT(t){const e=mt.fromString(t);return st(AT(e)),e}function Nm(t,e){return l0(t.databaseId,e.path)}function kh(t,e){const r=bT(e);if(r.get(1)!==t.databaseId.projectId)throw new Oe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Oe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Me(ET(r))}function xT(t,e){return l0(t.databaseId,e)}function b4(t){const e=bT(t);return e.length===4?mt.emptyPath():ET(e)}function km(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ET(t){return st(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function c_(t,e,r){return{name:Nm(t,e),fields:r.value.mapValue.fields}}function x4(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(st(h===void 0||typeof h=="string"),Qt.fromBase64String(h||"")):(st(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?xe.UNKNOWN:yT(c.code);return new Oe(h,c.message||"")}(o);r=new _T(n,i,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=kh(t,n.document.name),s=Sn(n.document.updateTime),o=n.document.createTime?Sn(n.document.createTime):qe.min(),a=new gr({mapValue:{fields:n.document.fields}}),l=sr.newFoundDocument(i,s,o,a),c=n.targetIds||[],h=n.removedTargetIds||[];r=new nc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=kh(t,n.document),s=n.readTime?Sn(n.readTime):qe.min(),o=sr.newNoDocument(i,s),a=n.removedTargetIds||[];r=new nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=kh(t,n.document),s=n.removedTargetIds||[];r=new nc([],s,i,null)}else{if(!("filter"in e))return Ue();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,o=new d4(i,s),a=n.targetId;r=new vT(a,o)}}return r}function E4(t,e){let r;if(e instanceof Ol)r={update:c_(t,e.key,e.value)};else if(e instanceof s0)r={delete:Nm(t,e.key)};else if(e instanceof Yi)r={update:c_(t,e.key,e.data),updateMask:P4(e.fieldMask)};else{if(!(e instanceof l4))return Ue();r={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const a=o.transform;if(a instanceof zc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ue()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:w4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ue()}(t,e.precondition)),r}function T4(t,e){return t&&t.length>0?(st(e!==void 0),t.map(r=>function(i,s){let o=i.updateTime?Sn(i.updateTime):Sn(s);return o.isEqual(qe.min())&&(o=Sn(s)),new s4(o,i.transformResults||[])}(r,e))):[]}function S4(t,e){return{documents:[xT(t,e.path)]}}function A4(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=xT(t,i);const s=function(c){if(c.length!==0)return ST(In.create(c,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(w){return{field:Zs(w.field),direction:k4(w.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const a=Am(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:i}}function I4(t){let e=b4(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){st(n===1);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=function(g){const w=TT(g);return w instanceof In&&tT(w)?w.getFilters():[w]}(r.where));let o=[];r.orderBy&&(o=function(g){return g.map(w=>function(T){return new Bc(eo(T.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(w))}(r.orderBy));let a=null;r.limit&&(a=function(g){let w;return w=typeof g=="object"?g.value:g,yd(w)?null:w}(r.limit));let l=null;r.startAt&&(l=function(g){const w=!!g.before,_=g.values||[];return new Uc(_,w)}(r.startAt));let c=null;return r.endAt&&(c=function(g){const w=!g.before,_=g.values||[];return new Uc(_,w)}(r.endAt)),WR(e,i,o,s,a,"F",l,c)}function N4(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function TT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=eo(r.unaryFilter.field);return Rt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=eo(r.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=eo(r.unaryFilter.field);return Rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eo(r.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(t):t.fieldFilter!==void 0?function(r){return Rt.create(eo(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return In.create(r.compositeFilter.filters.map(n=>TT(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ue()}}(r.compositeFilter.op))}(t):Ue()}function k4(t){return g4[t]}function C4(t){return y4[t]}function R4(t){return v4[t]}function Zs(t){return{fieldPath:t.canonicalString()}}function eo(t){return Wt.fromServerFormat(t.fieldPath)}function ST(t){return t instanceof Rt?function(r){if(r.op==="=="){if(Xv(r.value))return{unaryFilter:{field:Zs(r.field),op:"IS_NAN"}};if(Qv(r.value))return{unaryFilter:{field:Zs(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Xv(r.value))return{unaryFilter:{field:Zs(r.field),op:"IS_NOT_NAN"}};if(Qv(r.value))return{unaryFilter:{field:Zs(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(r.field),op:C4(r.op),value:r.value}}}(t):t instanceof In?function(r){const n=r.getFilters().map(i=>ST(i));return n.length===1?n[0]:{compositeFilter:{op:R4(r.op),filters:n}}}(t):Ue()}function P4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function AT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,r,n,i,s=qe.min(),o=qe.min(),a=Qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.ct=e}}function D4(t){const e=I4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.un=new L4}addToCollectionParentIndex(e,r){return this.un.add(r),Ee.resolve()}getCollectionParents(e,r){return Ee.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ee.resolve()}deleteFieldIndex(e,r){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,r){return Ee.resolve()}getDocumentsMatchingTarget(e,r){return Ee.resolve(null)}getIndexType(e,r){return Ee.resolve(0)}getFieldIndexes(e,r){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,r){return Ee.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,r){return Ee.resolve(qi.min())}updateCollectionGroup(e,r,n){return Ee.resolve()}updateIndexEntries(e,r){return Ee.resolve()}}class L4{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Kt(mt.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Kt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qo(0)}static kn(){return new qo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.changes=new Zo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ee.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Ga(n.mutation,i,Sr.empty(),jt.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Qe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Qe()){const i=fs();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(s=>{let o=Ra();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=fs();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Qe()))}populateOverlays(e,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{r.set(o,a)})})}computeViews(e,r,n,i){let s=ri();const o=Ka(),a=function(){return Ka()}();return r.forEach((l,c)=>{const h=n.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Yi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ga(h.mutation,c,h.mutation.getFieldMask(),jt.now())):o.set(c.key,Sr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),r.forEach((c,h)=>{var g;return a.set(c,new F4(h,(g=o.get(c))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,r){const n=Ka();let i=new wt((o,a)=>o-a),s=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let h=n.get(l)||Sr.empty();h=a.applyToLocalView(c,h),n.set(l,h);const g=(i.get(a.batchId)||Qe()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,g=uT();h.forEach(w=>{if(!s.has(w)){const _=mT(r.get(w),n.get(w));_!==null&&g.set(w,_),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,g))}return Ee.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):HR(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):Ee.resolve(fs());let a=-1,l=s;return o.next(c=>Ee.forEach(c,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?Ee.resolve():this.remoteDocumentCache.getEntry(e,h).next(w=>{l=l.insert(h,w)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Qe())).next(h=>({batchId:a,changes:lT(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Me(r)).next(n=>{let i=Ra();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let o=Ra();return this.indexManager.getCollectionParents(e,s).next(a=>Ee.forEach(a,l=>{const c=function(g,w){return new vd(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(h=>{h.forEach((g,w)=>{o=o.insert(g,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,sr.newInvalidDocument(h)))});let a=Ra();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Ga(h.mutation,c,Sr.empty(),jt.now()),bd(r,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ee.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Sn(i.createTime)}}(r)),Ee.resolve()}getNamedQuery(e,r){return Ee.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:D4(i.bundledQuery),readTime:Sn(i.readTime)}}(r)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.overlays=new wt(Me.comparator),this.Ir=new Map}getOverlay(e,r){return Ee.resolve(this.overlays.get(r))}getOverlays(e,r){const n=fs();return Ee.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.ht(e,r,s)}),Ee.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Ee.resolve()}getOverlaysForCollection(e,r,n){const i=fs(),s=r.length+1,o=new Me(r.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new wt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=fs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=fs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Ee.resolve(a)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new c4(r,n));let s=this.Ir.get(r);s===void 0&&(s=Qe(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.Tr=new Kt(Lt.Er),this.dr=new Kt(Lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Lt(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Lt(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Me(new mt([])),n=new Lt(r,e),i=new Lt(r,e+1),s=[];return this.dr.forEachInRange([n,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Me(new mt([])),n=new Lt(r,e),i=new Lt(r,e+1);let s=Qe();return this.dr.forEachInRange([n,i],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new Lt(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Lt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Me.comparator(e.key,r.key)||et(e.wr,r.wr)}static Ar(e,r){return et(e.wr,r.wr)||Me.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Kt(Lt.Er)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u4(s,r,n,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ee.resolve(o)}lookupMutationBatch(e,r){return Ee.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),s=i<0?0:i;return Ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Lt(r,0),i=new Lt(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Kt(et);return r.forEach(i=>{const s=new Lt(i,0),o=new Lt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{n=n.add(a.wr)})}),Ee.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;Me.isDocumentKey(s)||(s=s.child(""));const o=new Lt(new Me(s),0);let a=new Kt(et);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),Ee.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){st(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ee.forEach(r.mutations,i=>{const s=new Lt(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Lt(r,0),i=this.br.firstAfterOrEqual(n);return Ee.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.Mr=e,this.docs=function(){return new wt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ee.resolve(n?n.document.mutableCopy():sr.newInvalidDocument(r))}getEntries(e,r){let n=ri();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():sr.newInvalidDocument(i))}),Ee.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=ri();const o=r.path,a=new Me(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||AR(SR(h),n)<=0||(i.has(h.key)||bd(r,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Ee.resolve(s)}getAllFromCollectionGroup(e,r,n,i){Ue()}Or(e,r){return Ee.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new W4(this)}getSize(e){return Ee.resolve(this.size)}}class W4 extends M4{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),Ee.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.persistence=e,this.Nr=new Zo(r=>r0(r),n0),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new u0,this.targetCount=0,this.kr=qo.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ee.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new qo(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ee.resolve()}updateTargetData(e,r){return this.Kn(r),Ee.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ee.waitFor(s).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ee.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ee.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ee.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ee.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ee.resolve(n)}containsKey(e,r){return Ee.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Jg(0),this.Kr=!1,this.Kr=!0,this.$r=new z4,this.referenceDelegate=e(this),this.Ur=new H4(this),this.indexManager=new O4,this.remoteDocumentCache=function(i){return new $4(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new j4(r),this.Gr=new U4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new B4,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new q4(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){je("MemoryPersistence","Starting transaction:",e);const i=new G4(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,r){return Ee.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class G4 extends NR{constructor(e){super(),this.currentSequenceNumber=e}}class c0{constructor(e){this.persistence=e,this.Jr=new u0,this.Yr=null}static Zr(e){return new c0(e)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ee.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ee.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ee.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Xr,n=>{const i=Me.fromPath(n);return this.ei(e,i).next(s=>{s||r.removeEntry(i,qe.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ee.or([()=>Ee.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=Qe(),i=Qe();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new d0(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return LI()?8:kR(ar())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.Yi(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,r,i,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Q4;return this.Xi(e,r,o).next(a=>{if(s.result=a,this.zi)return this.es(e,r,o,a.size)})}).next(()=>s.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(wa()<=Xe.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",Js(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ee.resolve()):(wa()<=Xe.DEBUG&&je("QueryEngine","Query:",Js(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(wa()<=Xe.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",Js(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(r))):Ee.resolve())}Yi(e,r){if(e_(r))return Ee.resolve(null);let n=Tn(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Sm(r,null,"F"),n=Tn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Qe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,a);return this.ns(r,c,o,l.readTime)?this.Yi(e,Sm(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,i){return e_(r)||i.isEqual(qe.min())?Ee.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const o=this.ts(r,s);return this.ns(r,o,n,i)?Ee.resolve(null):(wa()<=Xe.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Js(r)),this.rs(e,o,r,TR(i,-1)).next(a=>a))})}ts(e,r){let n=new Kt(oT(e));return r.forEach((i,s)=>{bd(e,s)&&(n=n.add(s))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,r,n){return wa()<=Xe.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Js(r)),this.Ji.getDocumentsMatchingQuery(e,r,qi.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new wt(et),this._s=new Zo(s=>r0(s),n0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function J4(t,e,r,n){return new Y4(t,e,r,n)}async function IT(t,e){const r=$e(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],a=[];let l=Qe();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Z4(t,e){const r=$e(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const g=c.batch,w=g.keys();let _=Ee.resolve();return w.forEach(T=>{_=_.next(()=>h.getEntry(l,T)).next(x=>{const j=c.docVersions.get(T);st(j!==null),x.version.compareTo(j)<0&&(g.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=Qe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function NT(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function eP(t,e){const r=$e(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const a=[];e.targetChanges.forEach((h,g)=>{const w=i.get(g);if(!w)return;a.push(r.Ur.removeMatchingKeys(s,h.removedDocuments,g).next(()=>r.Ur.addMatchingKeys(s,h.addedDocuments,g)));let _=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(Qt.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,n)),i=i.insert(g,_),function(x,j,f){return x.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size>0}(w,_,h)&&a.push(r.Ur.updateTargetData(s,_))});let l=ri(),c=Qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(tP(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!n.isEqual(qe.min())){const h=r.Ur.getLastRemoteSnapshotVersion(s).next(g=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(h)}return Ee.waitFor(a).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(r.os=i,s))}function tP(t,e,r){let n=Qe(),i=Qe();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=ri();return r.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(qe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):je("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function rP(t,e){const r=$e(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function nP(t,e){const r=$e(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(s=>s?(i=s,Ee.resolve(i)):r.Ur.allocateTargetId(n).next(o=>(i=new Ni(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Cm(t,e,r){const n=$e(t),i=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Dl(o))throw o;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function d_(t,e,r){const n=$e(t);let i=qe.min(),s=Qe();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const g=$e(l),w=g._s.get(h);return w!==void 0?Ee.resolve(g.os.get(w)):g.Ur.getTargetData(c,h)}(n,o,Tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?i:qe.min(),r?s:Qe())).next(a=>(iP(n,GR(e),a),{documents:a,Ts:s})))}function iP(t,e,r){let n=t.us.get(e)||qe.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class h_{constructor(){this.activeTargetIds=e4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sP{constructor(){this.so=new h_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new h_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=null;function Ch(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="WebChannelConnection";class uP extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(r,n,i,s,o){const a=Ch(),l=this.xo(r,n.toUriEncodedString());je("RestConnection",`Sending RPC '${r}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(r,l,c,i).then(h=>(je("RestConnection",`Received RPC '${r}' ${a}: `,h),h),h=>{throw Vo("RestConnection",`RPC '${r}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(r,n,i,s,o,a){return this.Mo(r,n,i,s,o)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),i&&i.headers.forEach((s,o)=>r[o]=s)}xo(r,n){const i=aP[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const s=Ch();return new Promise((o,a)=>{const l=new qE;l.setWithCredentials(!0),l.listenOnce($E.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ec.NO_ERROR:const h=l.getResponseJson();je(rr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ec.TIMEOUT:je(rr,`RPC '${e}' ${s} timed out`),a(new Oe(xe.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const g=l.getStatus();if(je(rr,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);const _=w==null?void 0:w.error;if(_&&_.status&&_.message){const T=function(j){const f=j.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(f)>=0?f:xe.UNKNOWN}(_.status);a(new Oe(T,_.message))}else a(new Oe(xe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Oe(xe.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{je(rr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);je(rr,`RPC '${e}' ${s} sending request:`,i),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const i=Ch(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KE(),a=HE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const h=s.join("");je(rr,`Creating RPC '${e}' stream ${i}: ${h}`,l);const g=o.createWebChannel(h,l);let w=!1,_=!1;const T=new lP({Io:j=>{_?je(rr,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(w||(je(rr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),je(rr,`RPC '${e}' stream ${i} sending:`,j),g.send(j))},To:()=>g.close()}),x=(j,f,y)=>{j.listen(f,v=>{try{y(v)}catch(b){setTimeout(()=>{throw b},0)}})};return x(g,Ca.EventType.OPEN,()=>{_||(je(rr,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),x(g,Ca.EventType.CLOSE,()=>{_||(_=!0,je(rr,`RPC '${e}' stream ${i} transport closed`),T.So())}),x(g,Ca.EventType.ERROR,j=>{_||(_=!0,Vo(rr,`RPC '${e}' stream ${i} transport errored:`,j),T.So(new Oe(xe.UNAVAILABLE,"The operation could not be completed")))}),x(g,Ca.EventType.MESSAGE,j=>{var f;if(!_){const y=j.data[0];st(!!y);const v=y,b=v.error||((f=v[0])===null||f===void 0?void 0:f.error);if(b){je(rr,`RPC '${e}' stream ${i} received error:`,b);const I=b.status;let B=function(E){const U=It[E];if(U!==void 0)return yT(U)}(I),k=b.message;B===void 0&&(B=xe.INTERNAL,k="Unknown error status: "+I+" with message "+b.message),_=!0,T.So(new Oe(B,k)),g.close()}else je(rr,`RPC '${e}' stream ${i} received:`,y),T.bo(y)}}),x(a,WE.STAT_EVENT,j=>{j.stat===wm.PROXY?je(rr,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===wm.NOPROXY&&je(rr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Rh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){return new _4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,r,n=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,r,n,i,s,o,a,l){this.ui=e,this.Ho=n,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kT(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===xe.RESOURCE_EXHAUSTED?(ti(r.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new Oe(xe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cP extends CT{constructor(e,r,n,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=x4(this.serializer,e),n=function(s){if(!("targetChange"in s))return qe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?qe.min():o.readTime?Sn(o.readTime):qe.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=km(this.serializer),r.addTarget=function(s,o){let a;const l=o.target;if(a=Tm(l)?{documents:S4(s,l)}:{query:A4(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wT(s,o.resumeToken);const c=Am(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(qe.min())>0){a.readTime=$c(s,o.snapshotVersion.toTimestamp());const c=Am(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=N4(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=km(this.serializer),r.removeTarget=e,this.a_(r)}}class dP extends CT{constructor(e,r,n,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return st(!!e.streamToken),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=T4(e.writeResults,e.commitTime),n=Sn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=km(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>E4(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Oe(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Im(r,n),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Oe(xe.UNKNOWN,s.toString())})}Lo(e,r,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Im(r,n),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(xe.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fP{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ti(r),this.D_=!1):je("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(async()=>{js(this)&&(je("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=$e(l);c.L_.add(4),await Ml(c),c.q_.set("Unknown"),c.L_.delete(4),await Ad(c)}(this))})}),this.q_=new fP(n,i)}}async function Ad(t){if(js(t))for(const e of t.B_)await e(!0)}async function Ml(t){for(const e of t.B_)await e(!1)}function RT(t,e){const r=$e(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),m0(r)?p0(r):ea(r).r_()&&f0(r,e))}function h0(t,e){const r=$e(t),n=ea(r);r.N_.delete(e),n.r_()&&PT(r,e),r.N_.size===0&&(n.r_()?n.o_():js(r)&&r.q_.set("Unknown"))}function f0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ea(t).A_(e)}function PT(t,e){t.Q_.xe(e),ea(t).R_(e)}function p0(t){t.Q_=new m4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ea(t).start(),t.q_.v_()}function m0(t){return js(t)&&!ea(t).n_()&&t.N_.size>0}function js(t){return $e(t).L_.size===0}function jT(t){t.Q_=void 0}async function mP(t){t.q_.set("Online")}async function gP(t){t.N_.forEach((e,r)=>{f0(t,e)})}async function yP(t,e){jT(t),m0(t)?(t.q_.M_(e),p0(t)):t.q_.set("Unknown")}async function vP(t,e,r){if(t.q_.set("Online"),e instanceof _T&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(n){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wc(t,n)}else if(e instanceof nc?t.Q_.Ke(e):e instanceof vT?t.Q_.He(e):t.Q_.We(e),!r.isEqual(qe.min()))try{const n=await NT(t.localStore);r.compareTo(n)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Qt.EMPTY_BYTE_STRING,h.snapshotVersion)),PT(s,l);const g=new Ni(h.target,l,c,h.sequenceNumber);f0(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){je("RemoteStore","Failed to raise snapshot:",n),await Wc(t,n)}}async function Wc(t,e,r){if(!Dl(e))throw e;t.L_.add(1),await Ml(t),t.q_.set("Offline"),r||(r=()=>NT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{je("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Ad(t)})}function DT(t,e){return e().catch(r=>Wc(t,r,e))}async function Id(t){const e=$e(t),r=Wi(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_P(e);)try{const i=await rP(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,wP(e,i)}catch(i){await Wc(e,i)}OT(e)&&LT(e)}function _P(t){return js(t)&&t.O_.length<10}function wP(t,e){t.O_.push(e);const r=Wi(t);r.r_()&&r.V_&&r.m_(e.mutations)}function OT(t){return js(t)&&!Wi(t).n_()&&t.O_.length>0}function LT(t){Wi(t).start()}async function bP(t){Wi(t).p_()}async function xP(t){const e=Wi(t);for(const r of t.O_)e.m_(r.mutations)}async function EP(t,e,r){const n=t.O_.shift(),i=o0.from(n,e,r);await DT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Id(t)}async function TP(t,e){e&&Wi(t).V_&&await async function(n,i){if(function(o){return h4(o)&&o!==xe.ABORTED}(i.code)){const s=n.O_.shift();Wi(n).s_(),await DT(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Id(n)}}(t,e),OT(t)&&LT(t)}async function p_(t,e){const r=$e(t);r.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const n=js(r);r.L_.add(3),await Ml(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Ad(r)}async function SP(t,e){const r=$e(t);e?(r.L_.delete(2),await Ad(r)):e||(r.L_.add(2),await Ml(r),r.q_.set("Unknown"))}function ea(t){return t.K_||(t.K_=function(r,n,i){const s=$e(r);return s.w_(),new cP(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:mP.bind(null,t),Ro:gP.bind(null,t),mo:yP.bind(null,t),d_:vP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),m0(t)?p0(t):t.q_.set("Unknown")):(await t.K_.stop(),jT(t))})),t.K_}function Wi(t){return t.U_||(t.U_=function(r,n,i){const s=$e(r);return s.w_(),new dP(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bP.bind(null,t),mo:TP.bind(null,t),f_:xP.bind(null,t),g_:EP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Id(t)):(await t.U_.stop(),t.O_.length>0&&(je("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const o=Date.now()+n,a=new g0(e,r,o,i,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y0(t,e){if(ti("AsyncQueue",`${e}: ${t}`),Dl(t))return new Oe(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Me.comparator(r.key,n.key):(r,n)=>Me.comparator(r.key,n.key),this.keyedMap=Ra(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new No(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new No;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.W_=new wt(Me.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ue():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class $o{constructor(e,r,n,i,s,o,a,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,s){const o=[];return r.forEach(a=>{o.push({type:0,doc:a})}),new $o(e,r,No.emptySet(r),o,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IP{constructor(){this.queries=g_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=$e(r),s=i.queries;i.queries=g_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(n)})})(this,new Oe(xe.ABORTED,"Firestore shutting down"))}}function g_(){return new Zo(t=>sT(t),wd)}async function v0(t,e){const r=$e(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.H_()&&e.J_()&&(n=2):(s=new AP,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(i,!0);break;case 1:s.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const a=y0(o,`Initialization of query '${Js(e.query)}' failed`);return void e.onError(a)}r.queries.set(i,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&w0(r)}async function _0(t,e){const r=$e(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function NP(t,e){const r=$e(t);let n=!1;for(const i of e){const s=i.query,o=r.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(n=!0);o.z_=i}}n&&w0(r)}function kP(t,e,r){const n=$e(t),i=n.queries.get(e);if(i)for(const s of i.j_)s.onError(r);n.queries.delete(e)}function w0(t){t.Y_.forEach(e=>{e.next()})}var Rm,y_;(y_=Rm||(Rm={})).ea="default",y_.Cache="cache";class b0{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new $o(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class CP{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qe(),this.mutatedKeys=Qe(),this.Aa=oT(e),this.Ra=new No(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new m_,i=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const w=i.get(h),_=bd(this.query,g)?g:null,T=!!w&&this.mutatedKeys.has(w.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let j=!1;w&&_?w.data.isEqual(_.data)?T!==x&&(n.track({type:3,doc:_}),j=!0):this.ga(w,_)||(n.track({type:2,doc:_}),j=!0,(l&&this.Aa(_,l)>0||c&&this.Aa(_,c)<0)&&(a=!0)):!w&&_?(n.track({type:0,doc:_}),j=!0):w&&!_&&(n.track({type:1,doc:w}),j=!0,(l||c)&&(a=!0)),j&&(_?(o=o.add(_),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:a,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(_,T){const x=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return x(_)-x(T)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(n),i=i!=null&&i;const a=r&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new $o(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new m_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qe(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new FT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new MT(n))}),r}ba(e){this.Ta=e.Ts,this.da=Qe();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return $o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class PP{constructor(e){this.key=e,this.va=!1}}class jP{constructor(e,r,n,i,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zo(a=>sT(a),wd),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(Me.comparator),this.Na=new Map,this.La=new u0,this.Ba={},this.ka=new Map,this.qa=qo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DP(t,e,r=!0){const n=$T(t);let i;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await VT(n,e,r,!0),i}async function OP(t,e){const r=$T(t);await VT(r,e,!0,!1)}async function VT(t,e,r,n){const i=await nP(t.localStore,Tn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let a;return n&&(a=await LP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&RT(t.remoteStore,i),a}async function LP(t,e,r,n,i){t.Ka=(g,w,_)=>async function(x,j,f,y){let v=j.view.ma(f);v.ns&&(v=await d_(x.localStore,j.query,!1).then(({documents:k})=>j.view.ma(k,v)));const b=y&&y.targetChanges.get(j.targetId),I=y&&y.targetMismatches.get(j.targetId)!=null,B=j.view.applyChanges(v,x.isPrimaryClient,b,I);return __(x,j.targetId,B.wa),B.snapshot}(t,g,w,_);const s=await d_(t.localStore,e,!0),o=new CP(e,s.Ts),a=o.ma(s.documents),l=Ll.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);__(t,r,c.wa);const h=new RP(e,r,o);return t.Fa.set(e,h),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function MP(t,e,r){const n=$e(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);if(s.length>1)return n.Ma.set(i.targetId,s.filter(o=>!wd(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Cm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&h0(n.remoteStore,i.targetId),Pm(n,i.targetId)}).catch(jl)):(Pm(n,i.targetId),await Cm(n.localStore,i.targetId,!0))}async function FP(t,e){const r=$e(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),h0(r.remoteStore,n.targetId))}async function VP(t,e,r){const n=HP(t);try{const i=await function(o,a){const l=$e(o),c=jt.now(),h=a.reduce((_,T)=>_.add(T.key),Qe());let g,w;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let T=ri(),x=Qe();return l.cs.getEntries(_,h).next(j=>{T=j,T.forEach((f,y)=>{y.isValidDocument()||(x=x.add(f))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,T)).next(j=>{g=j;const f=[];for(const y of a){const v=a4(y,g.get(y.key).overlayedDocument);v!=null&&f.push(new Yi(y.key,v,JE(v.value.mapValue),Vr.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,f,a)}).next(j=>{w=j;const f=j.applyToLocalDocumentSet(g,x);return l.documentOverlayCache.saveOverlays(_,j.batchId,f)})}).then(()=>({batchId:w.batchId,changes:lT(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new wt(et)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(n,i.batchId,r),await Fl(n,i.changes),await Id(n.remoteStore)}catch(i){const s=y0(i,"Failed to persist write");r.reject(s)}}async function UT(t,e){const r=$e(t);try{const n=await eP(r.localStore,e);e.targetChanges.forEach((i,s)=>{const o=r.Na.get(s);o&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?st(o.va):i.removedDocuments.size>0&&(st(o.va),o.va=!1))}),await Fl(r,n,e)}catch(n){await jl(n)}}function v_(t,e,r){const n=$e(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=$e(o);l.onlineState=a;let c=!1;l.queries.forEach((h,g)=>{for(const w of g.j_)w.Z_(a)&&(c=!0)}),c&&w0(l)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function UP(t,e,r){const n=$e(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),s=i&&i.key;if(s){let o=new wt(Me.comparator);o=o.insert(s,sr.newNoDocument(s,qe.min()));const a=Qe().add(s),l=new Td(qe.min(),new Map,new wt(et),o,a);await UT(n,l),n.Oa=n.Oa.remove(s),n.Na.delete(e),x0(n)}else await Cm(n.localStore,e,!1).then(()=>Pm(n,e,r)).catch(jl)}async function BP(t,e){const r=$e(t),n=e.batch.batchId;try{const i=await Z4(r.localStore,e);zT(r,n,null),BT(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Fl(r,i)}catch(i){await jl(i)}}async function zP(t,e,r){const n=$e(t);try{const i=await function(o,a){const l=$e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(g=>(st(g!==null),h=g.keys(),l.mutationQueue.removeMutationBatch(c,g))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(n.localStore,e);zT(n,e,r),BT(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Fl(n,i)}catch(i){await jl(i)}}function BT(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function zT(t,e,r){const n=$e(t);let i=n.Ba[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Pm(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||qT(t,n)})}function qT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(h0(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),x0(t))}function __(t,e,r){for(const n of r)n instanceof MT?(t.La.addReference(n.key,e),qP(t,n)):n instanceof FT?(je("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||qT(t,n.key)):Ue()}function qP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(je("SyncEngine","New document in limbo: "+r),t.xa.add(n),x0(t))}function x0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Me(mt.fromString(e)),n=t.qa.next();t.Na.set(n,new PP(r)),t.Oa=t.Oa.insert(r,n),RT(t.remoteStore,new Ni(Tn(_d(r.path)),n,"TargetPurposeLimboResolution",Jg.oe))}}async function Fl(t,e,r){const n=$e(t),i=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((a,l)=>{o.push(n.Ka(l,e,r).then(c=>{var h;if((c||r)&&n.isPrimaryClient){const g=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(c){i.push(c);const g=d0.Wi(l.targetId,c);s.push(g)}}))}),await Promise.all(o),n.Ca.d_(i),await async function(l,c){const h=$e(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Ee.forEach(c,w=>Ee.forEach(w.$i,_=>h.persistence.referenceDelegate.addReference(g,w.targetId,_)).next(()=>Ee.forEach(w.Ui,_=>h.persistence.referenceDelegate.removeReference(g,w.targetId,_)))))}catch(g){if(!Dl(g))throw g;je("LocalStore","Failed to update sequence numbers: "+g)}for(const g of c){const w=g.targetId;if(!g.fromCache){const _=h.os.get(w),T=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(w,x)}}}(n.localStore,s))}async function $P(t,e){const r=$e(t);if(!r.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const n=await IT(r.localStore,e);r.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Oe(xe.CANCELLED,o))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Fl(r,n.hs)}}function WP(t,e){const r=$e(t),n=r.Na.get(e);if(n&&n.va)return Qe().add(n.key);{let i=Qe();const s=r.Ma.get(e);if(!s)return i;for(const o of s){const a=r.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function $T(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UP.bind(null,e),e.Ca.d_=NP.bind(null,e.eventManager),e.Ca.$a=kP.bind(null,e.eventManager),e}function HP(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zP.bind(null,e),e}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return J4(this.persistence,new X4,e.initialUser,this.serializer)}Ga(e){return new K4(c0.Zr,this.serializer)}Wa(e){return new sP}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class jm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>v_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=$P.bind(null,this.syncEngine),await SP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IP}()}createDatastore(e){const r=Sd(e.databaseInfo.databaseId),n=function(s){return new uP(s)}(e.databaseInfo);return function(s,o,a,l){return new hP(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,s,o,a){return new pP(n,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,r=>v_(this.syncEngine,r,0),function(){return f_.D()?new f_:new oP}())}createSyncEngine(e,r){return function(i,s,o,a,l,c,h){const g=new jP(i,s,o,a,l,c);return h&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const s=$e(i);je("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ml(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}jm.provider={build:()=>new jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=nr.UNAUTHENTICATED,this.clientId=QE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{je("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(je("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=y0(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ph(t,e){t.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await IT(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function w_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await GP(t);je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>p_(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>p_(e.remoteStore,i)),t._onlineComponents=e}async function GP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){je("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===xe.FAILED_PRECONDITION||i.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Vo("Error using user provided cache. Falling back to memory cache: "+r),await Ph(t,new Hc)}}else je("FirestoreClient","Using default OfflineComponentProvider"),await Ph(t,new Hc);return t._offlineComponents}async function WT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(je("FirestoreClient","Using user provided OnlineComponentProvider"),await w_(t,t._uninitializedComponentsProvider._online)):(je("FirestoreClient","Using default OnlineComponentProvider"),await w_(t,new jm))),t._onlineComponents}function QP(t){return WT(t).then(e=>e.syncEngine)}async function Kc(t){const e=await WT(t),r=e.eventManager;return r.onListen=DP.bind(null,e.syncEngine),r.onUnlisten=MP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=OP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=FP.bind(null,e.syncEngine),r}function XP(t,e,r={}){const n=new Kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new E0({next:w=>{h.Za(),o.enqueueAndForget(()=>_0(s,g));const _=w.docs.has(a);!_&&w.fromCache?c.reject(new Oe(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&w.fromCache&&l&&l.source==="server"?c.reject(new Oe(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(w)},error:w=>c.reject(w)}),g=new b0(_d(a.path),h,{includeMetadataChanges:!0,_a:!0});return v0(s,g)}(await Kc(t),t.asyncQueue,e,r,n)),n.promise}function YP(t,e,r={}){const n=new Kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new E0({next:w=>{h.Za(),o.enqueueAndForget(()=>_0(s,g)),w.fromCache&&l.source==="server"?c.reject(new Oe(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(w)},error:w=>c.reject(w)}),g=new b0(a,h,{includeMetadataChanges:!0,_a:!0});return v0(s,g)}(await Kc(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e,r){if(!r)throw new Oe(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JP(t,e,r,n){if(e===!0&&n===!0)throw new Oe(xe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function x_(t){if(!Me.isDocumentKey(t))throw new Oe(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function E_(t){if(Me.isDocumentKey(t))throw new Oe(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function T0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue()}function br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=T0(t);throw new Oe(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Oe(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Oe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Oe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Oe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nd{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new mR;switch(n.type){case"firstParty":return new _R(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Oe(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=b_.get(r);n&&(je("ComponentProvider","Removing Datastore"),b_.delete(r),n.terminate())}(this),Promise.resolve()}}function ZP(t,e,r,n={}){var i;const s=(t=br(t,Nd))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=nr.MOCK_USER;else{a=kI(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Oe(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new nr(c)}t._authCredentials=new gR(new GE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vl(this.firestore,e,this._query)}}class dr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class Ui extends Vl{constructor(e,r,n){super(e,r,_d(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new Me(e))}withConverter(e){return new Ui(this.firestore,e,this._path)}}function ja(t,e,...r){if(t=kt(t),KT("collection","path",e),t instanceof Nd){const n=mt.fromString(e,...r);return E_(n),new Ui(t,null,n)}{if(!(t instanceof dr||t instanceof Ui))throw new Oe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return E_(n),new Ui(t.firestore,null,n)}}function pr(t,e,...r){if(t=kt(t),arguments.length===1&&(e=QE.newId()),KT("doc","path",e),t instanceof Nd){const n=mt.fromString(e,...r);return x_(n),new dr(t,null,new Me(n))}{if(!(t instanceof dr||t instanceof Ui))throw new Oe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return x_(n),new dr(t.firestore,t instanceof Ui?t.converter:null,new Me(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kT(this,"async_queue_retry"),this.Vu=()=>{const n=Rh();n&&je("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Rh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Rh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Dl(e))throw e;je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw ti("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=g0.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function A_(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ni extends Nd{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new S_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S_(e),this._firestoreClient=void 0,await e}}}function e5(t,e){const r=typeof t=="object"?t:iE(),n=typeof t=="string"?t:"(default)",i=Bg(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=II("firestore");s&&ZP(i,...s)}return i}function kd(t){if(t._terminated)throw new Oe(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||t5(t),t._firestoreClient}function t5(t){var e,r,n;const i=t._freezeSettings(),s=function(a,l,c,h){return new PR(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,HT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new KP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(Qt.fromBase64String(e))}catch(r){throw new Oe(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Wo(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Oe(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Oe(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Oe(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=/^__.*__$/;class n5{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ol(e,this.data,r,this.fieldTransforms)}}class GT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Yi(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function QT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class N0{constructor(e,r,n,i,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new N0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QT(this.Cu)&&r5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class i5{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Sd(e)}Qu(e,r,n,i=!1){return new N0({Cu:e,methodName:r,qu:n,path:Wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function k0(t){const e=t._freezeSettings(),r=Sd(t._databaseId);return new i5(t._databaseId,!!e.ignoreUndefinedProperties,r)}function XT(t,e,r,n,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,i);C0("Data must be an object, but it was:",o,n);const a=YT(n,o);let l,c;if(s.merge)l=new Sr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const w=Dm(e,g,r);if(!o.contains(w))throw new Oe(xe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ZT(h,w)||h.push(w)}l=new Sr(h),c=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,c=o.fieldTransforms;return new n5(new gr(a),l,c)}class Rd extends S0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rd}}function s5(t,e,r,n){const i=t.Qu(1,e,r);C0("Data must be an object, but it was:",i,n);const s=[],o=gr.empty();Ps(n,(l,c)=>{const h=R0(e,l,r);c=kt(c);const g=i.Nu(h);if(c instanceof Rd)s.push(h);else{const w=Pd(c,g);w!=null&&(s.push(h),o.set(h,w))}});const a=new Sr(s);return new GT(o,a,i.fieldTransforms)}function o5(t,e,r,n,i,s){const o=t.Qu(1,e,r),a=[Dm(e,n,r)],l=[i];if(s.length%2!=0)throw new Oe(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)a.push(Dm(e,s[w])),l.push(s[w+1]);const c=[],h=gr.empty();for(let w=a.length-1;w>=0;--w)if(!ZT(c,a[w])){const _=a[w];let T=l[w];T=kt(T);const x=o.Nu(_);if(T instanceof Rd)c.push(_);else{const j=Pd(T,x);j!=null&&(c.push(_),h.set(_,j))}}const g=new Sr(c);return new GT(h,g,o.fieldTransforms)}function Pd(t,e){if(JT(t=kt(t)))return C0("Unsupported field value:",e,t),YT(t,e);if(t instanceof S0)return function(n,i){if(!QT(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const s=[];let o=0;for(const a of n){let l=Pd(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=kt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return t4(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=jt.fromDate(n);return{timestampValue:$c(i.serializer,s)}}if(n instanceof jt){const s=new jt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$c(i.serializer,s)}}if(n instanceof A0)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Wo)return{bytesValue:wT(i.serializer,n._byteString)};if(n instanceof dr){const s=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:l0(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof I0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return i0(a.serializer,l)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${T0(n)}`)}(t,e)}function YT(t,e){const r={};return XE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(t,(n,i)=>{const s=Pd(i,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function JT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof A0||t instanceof Wo||t instanceof dr||t instanceof S0||t instanceof I0)}function C0(t,e,r){if(!JT(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=T0(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Dm(t,e,r){if((e=kt(e))instanceof Cd)return e._internalPath;if(typeof e=="string")return R0(t,e);throw Gc("Field path arguments must be of type string or ",t,!1,void 0,r)}const a5=new RegExp("[~\\*/\\[\\]]");function R0(t,e,r){if(e.search(a5)>=0)throw Gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Cd(...e.split("."))._internalPath}catch{throw Gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Gc(t,e,r,n,i){const s=n&&!n.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new Oe(xe.INVALID_ARGUMENT,a+t+l)}function ZT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(tS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class l5 extends eS{data(){return super.data()}}function tS(t,e){return typeof e=="string"?R0(t,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Oe(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u5{convertValue(e,r="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ps(e,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,i;const s=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>Tt(o.doubleValue));return new I0(s)}convertGeoPoint(e){return new A0(Tt(e.latitude),Tt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=e0(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const r=$i(e);return new jt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=mt.fromString(e);st(AT(n));const i=new yl(n.get(1),n.get(3)),s=new Me(n.popFirst(5));return i.isEqual(r)||ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e,r){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iS extends eS{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(tS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ic extends iS{data(e={}){return super.data(e)}}class sS{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Da(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ic(this._firestore,this._userDataWriter,n.key,n,new Da(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Oe(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Da(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Da(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:c5(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function c5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){t=br(t,dr);const e=br(t.firestore,ni);return XP(kd(e),t._key).then(r=>aS(e,t,r))}class P0 extends u5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,r)}}function d5(t){t=br(t,Vl);const e=br(t.firestore,ni),r=kd(e),n=new P0(e);return rS(t._query),YP(r,t._query).then(i=>new sS(e,n,t,i))}function Om(t,e,r){t=br(t,dr);const n=br(t.firestore,ni),i=nS(t.converter,e);return jd(n,[XT(k0(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Vr.none())])}function yo(t,e,r,...n){t=br(t,dr);const i=br(t.firestore,ni),s=k0(i);let o;return o=typeof(e=kt(e))=="string"||e instanceof Cd?o5(s,"updateDoc",t._key,e,r,n):s5(s,"updateDoc",t._key,e),jd(i,[o.toMutation(t._key,Vr.exists(!0))])}function oS(t){return jd(br(t.firestore,ni),[new s0(t._key,Vr.none())])}function N_(t,e){const r=br(t.firestore,ni),n=pr(t),i=nS(t.converter,e);return jd(r,[XT(k0(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Vr.exists(!1))]).then(()=>n)}function k_(t,...e){var r,n,i;t=kt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||A_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(A_(e[o])){const g=e[o];e[o]=(r=g.next)===null||r===void 0?void 0:r.bind(g),e[o+1]=(n=g.error)===null||n===void 0?void 0:n.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,c,h;if(t instanceof dr)c=br(t.firestore,ni),h=_d(t._key.path),l={next:g=>{e[o]&&e[o](aS(c,t,g))},error:e[o+1],complete:e[o+2]};else{const g=br(t,Vl);c=br(g.firestore,ni),h=g._query;const w=new P0(c);l={next:_=>{e[o]&&e[o](new sS(c,w,g,_))},error:e[o+1],complete:e[o+2]},rS(t._query)}return function(w,_,T,x){const j=new E0(x),f=new b0(_,j,T);return w.asyncQueue.enqueueAndForget(async()=>v0(await Kc(w),f)),()=>{j.Za(),w.asyncQueue.enqueueAndForget(async()=>_0(await Kc(w),f))}}(kd(c),h,a,l)}function jd(t,e){return function(n,i){const s=new Kn;return n.asyncQueue.enqueueAndForget(async()=>VP(await QP(n),i,s)),s.promise}(kd(t),e)}function aS(t,e,r){const n=r.docs.get(e._key),i=new P0(t);return new iS(t,i,e._key,n,new Da(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(i){Jo=i})(Yo),Mo(new Es("firestore",(n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),a=new ni(new yR(n.getProvider("auth-internal")),new bR(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Oe(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:r},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Vi($v,"4.7.3",e),Vi($v,"4.7.3","esm2017")})();var h5="firebase",f5="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi(h5,f5,"app");const p5={apiKey:"AIzaSyCfoxtQy_MCf5_fqKFq4OsXYvvyhkmwEYo",authDomain:"alfa-app-b4052.firebaseapp.com",projectId:"alfa-app-b4052",storageBucket:"alfa-app-b4052.firebasestorage.app",messagingSenderId:"644138783201",appId:"1:644138783201:web:16308247c9ef93f1d242a0"},lS=nE(p5),yi=fR(lS),Ot=e5(lS),uS=we.createContext();function ta(){return we.useContext(uS)}function cS({children:t}){const[e,r]=we.useState(null),[n,i]=we.useState(null),[s,o]=we.useState(!0),[a,l]=we.useState(!1),c=I=>{const B={admin:{canViewOS:!0,canEditOS:!0,canDeleteOS:!0,canViewFinancial:!0,canEditFinancial:!0,canViewContracts:!0,canEditContracts:!0,canManageUsers:!0,canViewAllClients:!0,canViewOnlyOwnClient:!1,canPrint:!0,canExport:!0},client:{canViewOS:!0,canEditOS:!1,canDeleteOS:!1,canViewFinancial:!1,canEditFinancial:!1,canViewContracts:!1,canEditContracts:!1,canManageUsers:!1,canViewAllClients:!1,canViewOnlyOwnClient:!0,canPrint:!1,canExport:!1}};return B[I]||B.client};async function h(I,B,k,R="client",E=null){console.log(" Iniciando criao de usurio:",{email:I,displayName:k,role:R});try{const U=yi.currentUser,W=U==null?void 0:U.email;if(console.log(" Usurio atual antes da criao:",W),E&&U){console.log(" Reautenticando admin...");try{const te=Rs.credential(W,E);await Qk(U,te),console.log(" Admin reautenticado com sucesso")}catch(te){throw console.error(" Erro na reautenticao:",te),new Error("Senha do admin incorreta. Por favor, verifique sua senha.")}}const A=await Yk(yi,I,B);console.log(" Usurio criado no Firebase Auth:",A.user.email),k&&(await Zk(A.user,{displayName:k}),console.log(" Perfil atualizado no Auth"));const M=c(R),P={uid:A.user.uid,email:I,displayName:k||I.split("@")[0],role:R,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),permissions:M,status:"active",emailVerified:!1,createdBy:W||"system"};if(console.log(" Salvando dados no Firestore..."),await Om(pr(Ot,"users",A.user.uid),P),console.log(" Dados salvos no Firestore"),console.log(" Fazendo logout do novo usurio..."),await jv(yi),console.log(" Logout do novo usurio realizado"),U&&E){console.log(" Tentando restaurar sesso do admin...");try{await Pv(yi,W,E),console.log(" Admin restaurado com sucesso!")}catch(te){console.error(" Erro ao restaurar admin:",te)}}return console.log(" Usurio criado com sucesso em ambos os sistemas!"),{success:!0,userId:A.user.uid,adminRestored:!!E}}catch(U){console.error(" Erro ao criar usurio:",U);let W=U.message;switch(U.code){case"auth/email-already-in-use":W="Este email j est em uso por outra conta.";break;case"auth/invalid-email":W="Email invlido.";break;case"auth/operation-not-allowed":W="Operao no permitida. Contate o administrador.";break;case"auth/weak-password":W="A senha  muito fraca. Use pelo menos 6 caracteres.";break;case"auth/wrong-password":W="Senha do admin incorreta.";break;default:W="Erro ao criar usurio: "+U.message}throw new Error(W)}}async function g(I,B){console.log("Tentando login para:",I);try{const k=await Pv(yi,I,B);return console.log(" Login bem-sucedido:",k.user.email),k}catch(k){throw console.error(" Erro no login:",k),k}}async function w(){if(a){console.log("Logout j em andamento...");return}l(!0);try{return console.log("Iniciando logout..."),r(null),i(null),await jv(yi),console.log(" Logout realizado com sucesso"),!0}catch(I){throw console.error(" Erro ao fazer logout:",I),I}finally{l(!1)}}function _(I){return console.log("Solicitando redefinio de senha para:",I),Xk(yi,I)}async function T(I,B){console.log("Atualizando dados do usurio:",I),await yo(pr(Ot,"users",I),{...B,updatedAt:new Date().toISOString()}),I===(e==null?void 0:e.uid)&&(console.log("Recarregando dados do usurio atual..."),await x(I))}async function x(I){console.log("Carregando dados do usurio do Firestore:",I);try{const B=await I_(pr(Ot,"users",I));if(B.exists()){const k=B.data(),R={...c(k.role||"client"),...k.permissions||{}},E={...k,permissions:R};return i(E),E}else return console.log("Usurio no encontrado no Firestore"),i(null),null}catch(B){return console.error("Erro ao carregar dados do usurio:",B),i(null),null}}const j=async(I,B)=>{if(!e||(n==null?void 0:n.role)!=="admin")throw console.warn("Tentativa no autorizada de atualizar cargo"),new Error("Sem permisso para atualizar cargos");console.log("Atualizando cargo do usurio:",I,"para",B);const k=c(B),R={role:B,permissions:k,updatedAt:new Date().toISOString()};return await yo(pr(Ot,"users",I),R),R},f=async I=>{if(!e||(n==null?void 0:n.role)!=="admin")throw console.warn("Tentativa no autorizada de deletar usurio"),new Error("Sem permisso para deletar usurios");console.log("Deletando conta do usurio:",I);try{return await oS(pr(Ot,"users",I)),console.log(" Usurio deletado do Firestore"),{success:!0}}catch(B){throw console.error(" Erro ao deletar usurio:",B),B}};function y(I){var B;return n?n.role==="admin"?!0:((B=n.permissions)==null?void 0:B[I])||!1:!1}const v=async()=>{try{const I=ja(Ot,"users"),k=(await d5(I)).docs.map(R=>({id:R.id,...R.data()}));if(console.log("Total de usurios encontrados:",k.length),(n==null?void 0:n.role)!=="admin"&&!y("canViewAllClients")){const R=k.filter(E=>E.createdBy===(e==null?void 0:e.email)||E.id===(e==null?void 0:e.uid));return console.log("Usurios filtrados para visualizao:",R.length),R.sort((E,U)=>{const W=new Date(E.createdAt||0);return new Date(U.createdAt||0)-W}),R}return k.sort((R,E)=>{const U=new Date(R.createdAt||0);return new Date(E.createdAt||0)-U}),k}catch(I){throw console.error("Erro ao buscar todos os usurios:",I),I}};we.useEffect(()=>(console.log(" Configurando listener onAuthStateChanged..."),rC(yi,async B=>{var k,R;if(console.log(" onAuthStateChanged disparado!"),console.log(" Usurio do Firebase:",B?`${B.email} (${B.uid})`:"Nenhum"),B&&!a){console.log(" Processando usurio autenticado...");try{const E=await I_(pr(Ot,"users",B.uid));if(E.exists()){const U=E.data();console.log(" Dados do Firestore encontrados para:",B.email);const W={...c(U.role||"client"),...U.permissions||{}},A={...U,permissions:W};i(A),console.log(" Dados do usurio carregados com sucesso")}else{console.log(" Usurio no encontrado no Firestore - criando...");const U={uid:B.uid,email:B.email,displayName:B.displayName||((k=B.email)==null?void 0:k.split("@")[0])||"Usurio",role:"client",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),permissions:c("client"),status:"active",emailVerified:B.emailVerified,createdBy:"system"};await Om(pr(Ot,"users",B.uid),U),i(U),console.log(" Registro criado no Firestore")}r(B),l(!1),console.log(" Estado atualizado com sucesso")}catch(E){console.error(" Erro ao carregar dados do usurio:",E),r(B);const U=c("client"),W={uid:B.uid,email:B.email,displayName:B.displayName||((R=B.email)==null?void 0:R.split("@")[0])||"Usurio",role:"client",permissions:U};i(W),l(!1)}}else console.log(a?" Logout confirmado - limpando estado":" Nenhum usurio autenticado"),r(null),i(null);o(!1)})),[a]);const b={user:e,userData:n,loading:s,isLoggingOut:a,signup:h,login:g,logout:w,resetPassword:_,updateUserRole:j,updateUserData:T,loadUserData:x,deleteUserAccount:f,getAllUsers:v,hasPermission:y,getDefaultPermissions:c};return d.jsx(uS.Provider,{value:b,children:!s&&t})}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Le=(t,e)=>{const r=we.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>we.createElement("svg",{ref:h,...m5,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${g5(t)}`,a].join(" "),...c},[...e.map(([g,w])=>we.createElement(g,w)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=Le("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=Le("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=Le("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=Le("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=Le("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Le("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=Le("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=Le("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=Le("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Le("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=Le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=Le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=Le("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=Le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=Le("FileSignature",[["path",{d:"M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5",key:"kd5d3"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=Le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=Le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=Le("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=Le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=Le("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=Le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=Le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Le("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=Le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=Le("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=Le("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=Le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=Le("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=Le("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Le("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=Le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=Le("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Le("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=Le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Le("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=Le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=Le("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=Le("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),B_={admin:"bg-red-100 text-red-800",client:"bg-purple-100 text-purple-800"},Xc={admin:"Administrador",client:"Cliente"},V5=({onClose:t,onSuccess:e})=>{const{signup:r,user:n}=ta(),[i,s]=we.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"client"}),[o,a]=we.useState(!1),[l,c]=we.useState(""),[h,g]=we.useState(!1),[w,_]=we.useState(!1),[T,x]=we.useState(!1),j=async f=>{if(f.preventDefault(),c(""),g(!1),i.password!==i.confirmPassword){c("As senhas no conferem");return}if(i.password.length<6){c("A senha deve ter pelo menos 6 caracteres");return}a(!0);try{console.log("Criando usurio:",{email:i.email,displayName:i.displayName,role:i.role});const y=await r(i.email,i.password,i.displayName,i.role);y.success&&(console.log("Usurio criado com sucesso!",y),g(!0),s({email:"",password:"",confirmPassword:"",displayName:"",role:"client"}),setTimeout(()=>{e==null||e(),t()},2e3))}catch(y){switch(console.error("Erro ao criar usurio:",y),y.message){case"Senha do admin incorreta.":c("Sua senha de administrador est incorreta. Por favor, verifique e tente novamente.");break;case"Este email j est em uso por outra conta.":c("Este email j est em uso por outra conta.");break;case"Email invlido.":c("Email invlido.");break;case"A senha  muito fraca. Use pelo menos 6 caracteres.":c("A senha  muito fraca. Use pelo menos 6 caracteres.");break;default:c(y.message||"Erro ao criar usurio. Verifique os dados e tente novamente.")}}finally{a(!1)}};return d.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:t}),d.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all duration-300 scale-100",children:[d.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:d.jsx(Fn,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Criar Novo Usurio"}),d.jsx("p",{className:"text-slate-500 text-sm",children:"Adicione um novo usurio ao sistema"})]})]}),d.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",disabled:o,children:d.jsx(Xr,{size:20})})]}),d.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[l&&d.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Hi,{size:16}),d.jsx("span",{className:"font-bold",children:"Erro"})]}),l]}),h&&d.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Ho,{size:16}),d.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),"Usurio criado com sucesso! O usurio foi registrado no Authentication e no Firestore.",d.jsx("div",{className:"mt-2 text-xs",children:"Fechando o modal em instantes..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome *"}),d.jsxs("div",{className:"relative",children:[d.jsx(Qc,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:"text",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:i.displayName,onChange:f=>s({...i,displayName:f.target.value}),placeholder:"Joo Silva",disabled:o||h})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email *"}),d.jsxs("div",{className:"relative",children:[d.jsx(j0,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:"email",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:i.email,onChange:f=>s({...i,email:f.target.value}),placeholder:"usuario@exemplo.com",disabled:o||h})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Senha *"}),d.jsxs("div",{className:"relative",children:[d.jsx(O_,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:w?"text":"password",required:!0,className:"w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:i.password,onChange:f=>s({...i,password:f.target.value}),placeholder:"",disabled:o||h,minLength:"6"}),d.jsx("button",{type:"button",onClick:()=>_(!w),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",disabled:o||h,children:w?d.jsx(P_,{size:18}):d.jsx(j_,{size:18})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirmar Senha *"}),d.jsxs("div",{className:"relative",children:[d.jsx(O_,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:T?"text":"password",required:!0,className:"w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:i.confirmPassword,onChange:f=>s({...i,confirmPassword:f.target.value}),placeholder:"",disabled:o||h,minLength:"6"}),d.jsx("button",{type:"button",onClick:()=>x(!T),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",disabled:o||h,children:T?d.jsx(P_,{size:18}):d.jsx(j_,{size:18})})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cargo *"}),d.jsxs("div",{className:"relative",children:[d.jsx(Dd,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("select",{className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all bg-white",value:i.role,onChange:f=>s({...i,role:f.target.value}),disabled:o||h,children:Object.entries(Xc).map(([f,y])=>d.jsx("option",{value:f,children:y},f))})]})]}),d.jsxs("div",{className:"pt-4 flex gap-3",children:[d.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors disabled:opacity-50",disabled:o,children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:o||h,className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:o?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando..."]}):h?d.jsxs(d.Fragment,{children:[d.jsx(Ho,{size:18}),"Usurio Criado!"]}):d.jsxs(d.Fragment,{children:[d.jsx(Fn,{size:18}),"Criar Usurio"]})})]})]})]})]})},U5=({user:t,onClose:e,onSuccess:r})=>{const{updateUserData:n}=ta(),[i,s]=we.useState({displayName:t.displayName||"",role:t.role||"client",newPassword:"",confirmNewPassword:""}),[o,a]=we.useState(!1),[l,c]=we.useState(""),[h,g]=we.useState(""),[w,_]=we.useState(!1),[T,x]=we.useState(!1),j=async()=>{if(a(!0),c(""),g(""),i.newPassword||i.confirmNewPassword){if(i.newPassword!==i.confirmNewPassword){c("As novas senhas no conferem"),a(!1);return}if(i.newPassword.length<6){c("A nova senha deve ter pelo menos 6 caracteres"),a(!1);return}}try{const f={displayName:i.displayName,role:i.role,updatedAt:new Date().toISOString()};i.newPassword&&console.log("Nova senha definida (necessitaria Admin SDK para atualizar no Authentication)"),await n(t.id,f),g("Dados do usurio atualizados com sucesso!"),setTimeout(()=>{r==null||r(),e()},2e3)}catch(f){console.error("Erro ao atualizar usurio:",f),c("Erro ao atualizar usurio: "+f.message)}finally{a(!1)}};return d.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:e}),d.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all duration-300 scale-100",children:[d.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:d.jsx(D5,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Editar Usurio"}),d.jsx("p",{className:"text-slate-500 text-sm",children:"Atualize os dados do usurio"})]})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",disabled:o,children:d.jsx(Xr,{size:20})})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[l&&d.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Hi,{size:16}),d.jsx("span",{className:"font-bold",children:"Erro"})]}),l]}),h&&d.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Ho,{size:16}),d.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),h]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome"}),d.jsxs("div",{className:"relative",children:[d.jsx(Qc,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:i.displayName,onChange:f=>s({...i,displayName:f.target.value}),placeholder:"Joo Silva",disabled:o})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(j0,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:"email",className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed",value:t.email,disabled:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cargo"}),d.jsxs("div",{className:"relative",children:[d.jsx(Dd,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("select",{className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:i.role,onChange:f=>s({...i,role:f.target.value}),disabled:o,children:Object.entries(Xc).map(([f,y])=>d.jsx("option",{value:f,children:y},f))})]})]}),d.jsxs("div",{className:"pt-4 flex gap-3",children:[d.jsx("button",{onClick:e,disabled:o,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Cancelar"}),d.jsx("button",{onClick:j,disabled:o,className:"flex-1 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:o?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Fm,{size:16}),"Salvar Alteraes"]})})]})]})]})]})},B5=({user:t,onClose:e,onSuccess:r})=>{const{deleteUserAccount:n}=ta(),[i,s]=we.useState(!1),[o,a]=we.useState(""),[l,c]=we.useState(""),h=async()=>{s(!0),a("");try{await n(t.id),c("Usurio deletado com sucesso!"),setTimeout(()=>{r==null||r(),e()},2e3)}catch(g){console.error("Erro ao deletar usurio:",g),a("Erro ao deletar usurio: "+g.message)}finally{s(!1)}};return d.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-5",children:[d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md",onClick:e}),d.jsxs("div",{className:"relative z-50 bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[d.jsx("div",{className:"p-6 border-b",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-red-100 p-2 rounded-lg text-red-600",children:d.jsx(bl,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Deletar Usurio"}),d.jsx("p",{className:"text-slate-500 text-sm",children:"Esta ao no pode ser desfeita"})]})]})}),d.jsxs("div",{className:"p-6 space-y-4",children:[o&&d.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Hi,{size:16}),d.jsx("span",{className:"font-bold",children:"Erro"})]}),o]}),l&&d.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm border border-green-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Ho,{size:16}),d.jsx("span",{className:"font-bold",children:"Sucesso!"})]}),l]}),d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[d.jsx("p",{className:"text-red-800 font-bold mb-2",children:" Ateno!"}),d.jsxs("p",{className:"text-red-700 text-sm",children:["Voc est prestes a deletar o usurio ",d.jsx("span",{className:"font-bold",children:t.displayName})," (",t.email,"). Esta ao remover permanentemente o usurio do sistema."]}),d.jsxs("p",{className:"text-red-700 text-sm mt-2",children:[d.jsx("span",{className:"font-bold",children:"Nota:"})," A conta do Firebase Authentication no ser deletada automaticamente. O usurio ainda poder fazer login, mas no ter acesso ao sistema."]})]}),d.jsxs("div",{className:"pt-4 flex gap-3",children:[d.jsx("button",{onClick:e,disabled:i,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Cancelar"}),d.jsx("button",{onClick:h,disabled:i||l,className:"flex-1 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:i?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deletando..."]}):l?d.jsxs(d.Fragment,{children:[d.jsx(Ho,{size:16}),"Deletado!"]}):d.jsxs(d.Fragment,{children:[d.jsx(bl,{size:16}),"Deletar Usurio"]})})]})]})]})]})};function z5(){const{userData:t,hasPermission:e,getAllUsers:r}=ta(),[n,i]=we.useState([]),[s,o]=we.useState(!0),[a,l]=we.useState(null),[c,h]=we.useState(""),[g,w]=we.useState({}),[_,T]=we.useState(!1),[x,j]=we.useState(!1),[f,y]=we.useState(!1),[v,b]=we.useState(null),[I,B]=we.useState(0);we.useEffect(()=>{e("canManageUsers")&&k()},[e,I]);const k=async()=>{o(!0),l(null);try{const A=await r();i(A)}catch(A){console.error("Erro ao carregar usurios:",A),l("Falha ao carregar a lista de usurios. Verifique a conexo e tente novamente.")}finally{o(!1)}},R=A=>{b(A),j(!0)},E=A=>{b(A),y(!0)},U=A=>{w(M=>({...M,[A]:!M[A]}))},W=n.filter(A=>{var M,P,te;return((M=A.email)==null?void 0:M.toLowerCase().includes(c.toLowerCase()))||((P=A.displayName)==null?void 0:P.toLowerCase().includes(c.toLowerCase()))||((te=A.role)==null?void 0:te.toLowerCase().includes(c.toLowerCase()))});return e("canManageUsers")?d.jsxs("div",{className:"p-6 space-y-6 relative",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-black text-slate-900",children:"Gerenciamento de Usurios"}),d.jsx("p",{className:"text-slate-500",children:"Controle de cargos e permisses do sistema"})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Vm,{className:"absolute left-4 top-3.5 text-slate-400",size:18}),d.jsx("input",{type:"text",placeholder:"Buscar usurios...",className:"pl-11 pr-4 py-3 rounded-xl border border-slate-200 w-64 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",value:c,onChange:A=>h(A.target.value)})]}),d.jsxs("button",{onClick:()=>B(A=>A+1),className:"bg-slate-200 text-slate-700 px-4 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-300 transition-colors",children:[d.jsx(pS,{size:18}),"Atualizar"]}),d.jsxs("button",{onClick:()=>T(!0),className:"bg-green-600 text-white px-4 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-green-700 transition-colors",children:[d.jsx(Fn,{size:18}),"Novo Usurio"]})]})]}),a&&d.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-4 border border-red-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(Hi,{size:20}),d.jsx("span",{className:"font-bold",children:"Erro"})]}),a,d.jsx("button",{onClick:k,className:"mt-2 text-sm underline font-bold",children:"Tentar novamente"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[d.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Total"}),d.jsx("div",{className:"text-2xl font-black text-slate-900",children:n.length})]}),d.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[d.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Administradores"}),d.jsx("div",{className:"text-2xl font-black text-red-600",children:n.filter(A=>A.role==="admin").length})]}),d.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[d.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase mb-1",children:"Clientes"}),d.jsx("div",{className:"text-2xl font-black text-purple-600",children:n.filter(A=>A.role==="client").length})]})]}),d.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-slate-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Usurio"}),d.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Cargo"}),d.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Permisses"}),d.jsx("th",{className:"text-left p-4 text-sm font-bold text-slate-400 uppercase",children:"Aes"})]})}),d.jsx("tbody",{children:s?d.jsx("tr",{children:d.jsx("td",{colSpan:"4",className:"p-8 text-center",children:d.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"})})}):W.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"4",className:"p-8 text-center text-slate-400",children:"Nenhum usurio encontrado"})}):W.map(A=>d.jsxs(Hw.Fragment,{children:[d.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[d.jsxs("td",{className:"p-4",children:[d.jsx("div",{className:"font-bold text-slate-800",children:A.displayName}),d.jsx("div",{className:"text-sm text-slate-500",children:A.email})]}),d.jsx("td",{className:"p-4",children:d.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${B_[A.role]||"bg-gray-100 text-gray-800"}`,children:Xc[A.role]||A.role})}),d.jsx("td",{className:"p-4",children:d.jsxs("button",{onClick:()=>U(A.id),className:"text-blue-600 hover:text-blue-800 text-sm font-bold flex items-center gap-1 transition-colors",children:[g[A.id]?"Ocultar":"Ver"," Permisses",g[A.id]?d.jsx(fS,{size:14}):d.jsx(hS,{size:14})]})}),d.jsx("td",{className:"p-4",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>R(A),className:"bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-blue-700 transition-colors",children:d.jsx(P5,{size:14})}),d.jsx("button",{onClick:()=>E(A),className:"bg-red-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1 hover:bg-red-700 transition-colors",disabled:A.id===(t==null?void 0:t.uid),children:d.jsx(bl,{size:14})})]})})]}),g[A.id]&&d.jsx("tr",{className:"bg-slate-50",children:d.jsx("td",{colSpan:"4",className:"p-4",children:d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:A.permissions&&Object.entries(A.permissions).map(([M,P])=>d.jsxs("div",{className:"flex items-center gap-2",children:[P?d.jsx(Ho,{size:16,className:"text-green-500"}):d.jsx(F5,{size:16,className:"text-red-300"}),d.jsx("span",{className:"text-sm text-slate-700 capitalize",children:M.replace(/([A-Z])/g," $1").toLowerCase()})]},M))})})})]},A.id))})]})})}),d.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 shadow-sm",children:[d.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2",children:[d.jsx(Dd,{size:20})," Legenda de Cargos"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(Xc).map(([A,M])=>d.jsxs("div",{className:"bg-white p-4 rounded-xl border",children:[d.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold inline-block mb-2 ${B_[A]}`,children:M}),d.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[A==="admin"&&d.jsx("li",{children:" Acesso total ao sistema"}),A==="client"&&d.jsx("li",{children:" Dados prprios apenas"})]})]},A))})]}),_&&d.jsx(V5,{onClose:()=>T(!1),onSuccess:()=>{k(),B(A=>A+1)}}),x&&v&&d.jsx(U5,{user:v,onClose:()=>{j(!1),b(null)},onSuccess:()=>{k(),B(A=>A+1)}}),f&&v&&d.jsx(B5,{user:v,onClose:()=>{y(!1),b(null)},onSuccess:()=>{k(),B(A=>A+1)}})]}):d.jsxs("div",{className:"p-8 text-center",children:[d.jsx(Hi,{className:"mx-auto text-amber-500 mb-4",size:48}),d.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Acesso Restrito"}),d.jsx("p",{className:"text-slate-600 mt-2",children:"Voc no tem permisso para gerenciar usurios."})]})}function q5(){const{login:t}=ta(),[e,r]=we.useState(""),[n,i]=we.useState(""),[s,o]=we.useState(""),[a,l]=we.useState(!1),c=async h=>{h.preventDefault(),o(""),l(!0);try{await t(e,n)}catch(g){switch(console.error("Erro de login:",g),g.code){case"auth/user-not-found":case"auth/wrong-password":o("Email ou senha incorretos.");break;case"auth/invalid-email":o("Email invlido.");break;case"auth/too-many-requests":o("Muitas tentativas. Tente novamente mais tarde.");break;case"auth/user-disabled":o("Esta conta foi desativada.");break;default:o("Erro ao fazer login. Tente novamente.")}}finally{l(!1)}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-4",children:d.jsx(M_,{className:"text-white",size:28})}),d.jsx("h1",{className:"text-2xl font-black text-slate-900",children:"ALFA"}),d.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Tecnologia Hospitalar"})]}),d.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s&&d.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[d.jsx(Hi,{size:18}),d.jsx("span",{className:"text-sm font-medium",children:s})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(j0,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:"email",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"seu@email.com",value:e,onChange:h=>r(h.target.value),disabled:a})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Senha"}),d.jsxs("div",{className:"relative",children:[d.jsx(M_,{className:"absolute left-3 top-3 text-slate-400",size:18}),d.jsx("input",{type:"password",required:!0,className:"w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all",placeholder:"",value:n,onChange:h=>i(h.target.value),disabled:a})]})]}),d.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?d.jsxs(d.Fragment,{children:[d.jsx(to,{className:"animate-spin",size:18}),"Entrando..."]}):d.jsxs(d.Fragment,{children:[d.jsx(k5,{size:18}),"Entrar no Sistema"]})})]}),d.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:d.jsx("p",{className:"text-slate-500 text-sm",children:"Entre em contato com o administrador para criar uma conta."})})]})})}const z_="/alfa-app/assets/logo-CJe1SxB-.png";var $5=Object.defineProperty,W5=Object.defineProperties,H5=Object.getOwnPropertyDescriptors,q_=Object.getOwnPropertySymbols,K5=Object.prototype.hasOwnProperty,G5=Object.prototype.propertyIsEnumerable,Um=(t,e,r)=>e in t?$5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q5=(t,e)=>{for(var r in e||(e={}))K5.call(e,r)&&Um(t,r,e[r]);if(q_)for(var r of q_(e))G5.call(e,r)&&Um(t,r,e[r]);return t},X5=(t,e)=>W5(t,H5(e)),Gn=(t,e,r)=>Um(t,typeof e!="symbol"?e+"":e,r),Y5=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(c){i(c)}},o=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(t,e)).next())});class Bm{constructor(e){Gn(this,"rootKey"),this.rootKey=e}}const J5=Object.seal({});class mS extends Bm{constructor(e){super(e),Gn(this,"root"),this.root=new Array}prepForXml(e){var r;e.stack.push(this);const n=this.root.map(i=>i instanceof Bm?i.prepForXml(e):i).filter(i=>i!==void 0);return e.stack.pop(),{[this.rootKey]:n.length?n.length===1&&((r=n[0])!=null&&r._attr)?n[0]:n:J5}}addChildElement(e){return this.root.push(e),this}}class Z5 extends Bm{constructor(e){super("_attr"),Gn(this,"xmlKeys"),this.root=e}prepForXml(e){const r={};return Object.entries(this.root).forEach(([n,i])=>{if(i!==void 0){const s=this.xmlKeys&&this.xmlKeys[n]||n;r[s]=i}}),{_attr:r}}}var _n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lh={},ju={exports:{}},$_;function D0(){if($_)return ju.exports;$_=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(I,B,k){return Function.prototype.apply.call(I,B,k)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:r=function(I){return Object.getOwnPropertyNames(I)};function n(b){console&&console.warn&&console.warn(b)}var i=Number.isNaN||function(I){return I!==I};function s(){s.init.call(this)}ju.exports=s,ju.exports.once=f,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(b){if(typeof b!="number"||b<0||i(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");o=b}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function l(b){return b._maxListeners===void 0?s.defaultMaxListeners:b._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(I){for(var B=[],k=1;k<arguments.length;k++)B.push(arguments[k]);var R=I==="error",E=this._events;if(E!==void 0)R=R&&E.error===void 0;else if(!R)return!1;if(R){var U;if(B.length>0&&(U=B[0]),U instanceof Error)throw U;var W=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw W.context=U,W}var A=E[I];if(A===void 0)return!1;if(typeof A=="function")e(A,this,B);else for(var M=A.length,P=T(A,M),k=0;k<M;++k)e(P[k],this,B);return!0};function c(b,I,B,k){var R,E,U;if(a(B),E=b._events,E===void 0?(E=b._events=Object.create(null),b._eventsCount=0):(E.newListener!==void 0&&(b.emit("newListener",I,B.listener?B.listener:B),E=b._events),U=E[I]),U===void 0)U=E[I]=B,++b._eventsCount;else if(typeof U=="function"?U=E[I]=k?[B,U]:[U,B]:k?U.unshift(B):U.push(B),R=l(b),R>0&&U.length>R&&!U.warned){U.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=b,W.type=I,W.count=U.length,n(W)}return b}s.prototype.addListener=function(I,B){return c(this,I,B,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(I,B){return c(this,I,B,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(b,I,B){var k={fired:!1,wrapFn:void 0,target:b,type:I,listener:B},R=h.bind(k);return R.listener=B,k.wrapFn=R,R}s.prototype.once=function(I,B){return a(B),this.on(I,g(this,I,B)),this},s.prototype.prependOnceListener=function(I,B){return a(B),this.prependListener(I,g(this,I,B)),this},s.prototype.removeListener=function(I,B){var k,R,E,U,W;if(a(B),R=this._events,R===void 0)return this;if(k=R[I],k===void 0)return this;if(k===B||k.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete R[I],R.removeListener&&this.emit("removeListener",I,k.listener||B));else if(typeof k!="function"){for(E=-1,U=k.length-1;U>=0;U--)if(k[U]===B||k[U].listener===B){W=k[U].listener,E=U;break}if(E<0)return this;E===0?k.shift():x(k,E),k.length===1&&(R[I]=k[0]),R.removeListener!==void 0&&this.emit("removeListener",I,W||B)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(I){var B,k,R;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[I]),this;if(arguments.length===0){var E=Object.keys(k),U;for(R=0;R<E.length;++R)U=E[R],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=k[I],typeof B=="function")this.removeListener(I,B);else if(B!==void 0)for(R=B.length-1;R>=0;R--)this.removeListener(I,B[R]);return this};function w(b,I,B){var k=b._events;if(k===void 0)return[];var R=k[I];return R===void 0?[]:typeof R=="function"?B?[R.listener||R]:[R]:B?j(R):T(R,R.length)}s.prototype.listeners=function(I){return w(this,I,!0)},s.prototype.rawListeners=function(I){return w(this,I,!1)},s.listenerCount=function(b,I){return typeof b.listenerCount=="function"?b.listenerCount(I):_.call(b,I)},s.prototype.listenerCount=_;function _(b){var I=this._events;if(I!==void 0){var B=I[b];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function T(b,I){for(var B=new Array(I),k=0;k<I;++k)B[k]=b[k];return B}function x(b,I){for(;I+1<b.length;I++)b[I]=b[I+1];b.pop()}function j(b){for(var I=new Array(b.length),B=0;B<I.length;++B)I[B]=b[B].listener||b[B];return I}function f(b,I){return new Promise(function(B,k){function R(U){b.removeListener(I,E),k(U)}function E(){typeof b.removeListener=="function"&&b.removeListener("error",R),B([].slice.call(arguments))}v(b,I,E,{once:!0}),I!=="error"&&y(b,R,{once:!0})})}function y(b,I,B){typeof b.on=="function"&&v(b,"error",I,B)}function v(b,I,B,k){if(typeof b.on=="function")k.once?b.once(I,B):b.on(I,B);else if(typeof b.addEventListener=="function")b.addEventListener(I,function R(E){k.once&&b.removeEventListener(I,R),B(E)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return ju.exports}var Du={exports:{}},W_;function Ji(){return W_||(W_=1,typeof Object.create=="function"?Du.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Du.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),Du.exports}function e6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yS={exports:{}},At=yS.exports={},mn,gn;function zm(){throw new Error("setTimeout has not been defined")}function qm(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?mn=setTimeout:mn=zm}catch{mn=zm}try{typeof clearTimeout=="function"?gn=clearTimeout:gn=qm}catch{gn=qm}})();function vS(t){if(mn===setTimeout)return setTimeout(t,0);if((mn===zm||!mn)&&setTimeout)return mn=setTimeout,setTimeout(t,0);try{return mn(t,0)}catch{try{return mn.call(null,t,0)}catch{return mn.call(this,t,0)}}}function t6(t){if(gn===clearTimeout)return clearTimeout(t);if((gn===qm||!gn)&&clearTimeout)return gn=clearTimeout,clearTimeout(t);try{return gn(t)}catch{try{return gn.call(null,t)}catch{return gn.call(this,t)}}}var $n=[],ko=!1,ps,sc=-1;function r6(){!ko||!ps||(ko=!1,ps.length?$n=ps.concat($n):sc=-1,$n.length&&_S())}function _S(){if(!ko){var t=vS(r6);ko=!0;for(var e=$n.length;e;){for(ps=$n,$n=[];++sc<e;)ps&&ps[sc].run();sc=-1,e=$n.length}ps=null,ko=!1,t6(t)}}At.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];$n.push(new wS(t,e)),$n.length===1&&!ko&&vS(_S)};function wS(t,e){this.fun=t,this.array=e}wS.prototype.run=function(){this.fun.apply(null,this.array)};At.title="browser";At.browser=!0;At.env={};At.argv=[];At.version="";At.versions={};function ai(){}At.on=ai;At.addListener=ai;At.once=ai;At.off=ai;At.removeListener=ai;At.removeAllListeners=ai;At.emit=ai;At.prependListener=ai;At.prependOnceListener=ai;At.listeners=function(t){return[]};At.binding=function(t){throw new Error("process.binding is not supported")};At.cwd=function(){return"/"};At.chdir=function(t){throw new Error("process.chdir is not supported")};At.umask=function(){return 0};var n6=yS.exports;const We=e6(n6);var Mh,H_;function bS(){return H_||(H_=1,Mh=D0().EventEmitter),Mh}var Fh={},ba={},K_;function i6(){if(K_)return ba;K_=1,ba.byteLength=a,ba.toByteArray=c,ba.fromByteArray=w;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)t[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(_){var T=_.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=_.indexOf("=");x===-1&&(x=T);var j=x===T?0:4-x%4;return[x,j]}function a(_){var T=o(_),x=T[0],j=T[1];return(x+j)*3/4-j}function l(_,T,x){return(T+x)*3/4-x}function c(_){var T,x=o(_),j=x[0],f=x[1],y=new r(l(_,j,f)),v=0,b=f>0?j-4:j,I;for(I=0;I<b;I+=4)T=e[_.charCodeAt(I)]<<18|e[_.charCodeAt(I+1)]<<12|e[_.charCodeAt(I+2)]<<6|e[_.charCodeAt(I+3)],y[v++]=T>>16&255,y[v++]=T>>8&255,y[v++]=T&255;return f===2&&(T=e[_.charCodeAt(I)]<<2|e[_.charCodeAt(I+1)]>>4,y[v++]=T&255),f===1&&(T=e[_.charCodeAt(I)]<<10|e[_.charCodeAt(I+1)]<<4|e[_.charCodeAt(I+2)]>>2,y[v++]=T>>8&255,y[v++]=T&255),y}function h(_){return t[_>>18&63]+t[_>>12&63]+t[_>>6&63]+t[_&63]}function g(_,T,x){for(var j,f=[],y=T;y<x;y+=3)j=(_[y]<<16&16711680)+(_[y+1]<<8&65280)+(_[y+2]&255),f.push(h(j));return f.join("")}function w(_){for(var T,x=_.length,j=x%3,f=[],y=16383,v=0,b=x-j;v<b;v+=y)f.push(g(_,v,v+y>b?b:v+y));return j===1?(T=_[x-1],f.push(t[T>>2]+t[T<<4&63]+"==")):j===2&&(T=(_[x-2]<<8)+_[x-1],f.push(t[T>>10]+t[T>>4&63]+t[T<<2&63]+"=")),f.join("")}return ba}var Ou={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var G_;function s6(){return G_||(G_=1,Ou.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,l=(1<<a)-1,c=l>>1,h=-7,g=r?i-1:0,w=r?-1:1,_=t[e+g];for(g+=w,s=_&(1<<-h)-1,_>>=-h,h+=a;h>0;s=s*256+t[e+g],g+=w,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=o*256+t[e+g],g+=w,h-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(_?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(_?-1:1)*o*Math.pow(2,s-n)},Ou.write=function(t,e,r,n,i,s){var o,a,l,c=s*8-i-1,h=(1<<c)-1,g=h>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:s-1,T=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+g>=1?e+=w/l:e+=w*Math.pow(2,1-g),e*l>=2&&(o++,l/=2),o+g>=h?(a=0,o=h):o+g>=1?(a=(e*l-1)*Math.pow(2,i),o=o+g):(a=e*Math.pow(2,g-1)*Math.pow(2,i),o=0));i>=8;t[r+_]=a&255,_+=T,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[r+_]=o&255,_+=T,o/=256,c-=8);t[r+_-T]|=x*128}),Ou}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Q_;function Od(){return Q_||(Q_=1,function(t){var e=i6(),r=s6(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var F=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(F,p),F.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(F){if(F>i)throw new RangeError('The value "'+F+'" is invalid for option "size"');var p=new Uint8Array(F);return Object.setPrototypeOf(p,a.prototype),p}function a(F,p,m){if(typeof F=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(F)}return l(F,p,m)}a.poolSize=8192;function l(F,p,m){if(typeof F=="string")return w(F,p);if(ArrayBuffer.isView(F))return T(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(ce(F,ArrayBuffer)||F&&ce(F.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ce(F,SharedArrayBuffer)||F&&ce(F.buffer,SharedArrayBuffer)))return x(F,p,m);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var C=F.valueOf&&F.valueOf();if(C!=null&&C!==F)return a.from(C,p,m);var G=j(F);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return a.from(F[Symbol.toPrimitive]("string"),p,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}a.from=function(F,p,m){return l(F,p,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function h(F,p,m){return c(F),F<=0?o(F):p!==void 0?typeof m=="string"?o(F).fill(p,m):o(F).fill(p):o(F)}a.alloc=function(F,p,m){return h(F,p,m)};function g(F){return c(F),o(F<0?0:f(F)|0)}a.allocUnsafe=function(F){return g(F)},a.allocUnsafeSlow=function(F){return g(F)};function w(F,p){if((typeof p!="string"||p==="")&&(p="utf8"),!a.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var m=v(F,p)|0,C=o(m),G=C.write(F,p);return G!==m&&(C=C.slice(0,G)),C}function _(F){for(var p=F.length<0?0:f(F.length)|0,m=o(p),C=0;C<p;C+=1)m[C]=F[C]&255;return m}function T(F){if(ce(F,Uint8Array)){var p=new Uint8Array(F);return x(p.buffer,p.byteOffset,p.byteLength)}return _(F)}function x(F,p,m){if(p<0||F.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<p+(m||0))throw new RangeError('"length" is outside of buffer bounds');var C;return p===void 0&&m===void 0?C=new Uint8Array(F):m===void 0?C=new Uint8Array(F,p):C=new Uint8Array(F,p,m),Object.setPrototypeOf(C,a.prototype),C}function j(F){if(a.isBuffer(F)){var p=f(F.length)|0,m=o(p);return m.length===0||F.copy(m,0,0,p),m}if(F.length!==void 0)return typeof F.length!="number"||N(F.length)?o(0):_(F);if(F.type==="Buffer"&&Array.isArray(F.data))return _(F.data)}function f(F){if(F>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return F|0}function y(F){return+F!=F&&(F=0),a.alloc(+F)}a.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==a.prototype},a.compare=function(p,m){if(ce(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),ce(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(p)||!a.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===m)return 0;for(var C=p.length,G=m.length,Z=0,X=Math.min(C,G);Z<X;++Z)if(p[Z]!==m[Z]){C=p[Z],G=m[Z];break}return C<G?-1:G<C?1:0},a.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(p,m){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return a.alloc(0);var C;if(m===void 0)for(m=0,C=0;C<p.length;++C)m+=p[C].length;var G=a.allocUnsafe(m),Z=0;for(C=0;C<p.length;++C){var X=p[C];if(ce(X,Uint8Array))Z+X.length>G.length?a.from(X).copy(G,Z):Uint8Array.prototype.set.call(G,X,Z);else if(a.isBuffer(X))X.copy(G,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=X.length}return G};function v(F,p){if(a.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||ce(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);var m=F.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&m===0)return 0;for(var G=!1;;)switch(p){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return D(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return $(F).length;default:if(G)return C?-1:D(F).length;p=(""+p).toLowerCase(),G=!0}}a.byteLength=v;function b(F,p,m){var C=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,p>>>=0,m<=p))return"";for(F||(F="utf8");;)switch(F){case"hex":return se(this,p,m);case"utf8":case"utf-8":return P(this,p,m);case"ascii":return J(this,p,m);case"latin1":case"binary":return ie(this,p,m);case"base64":return M(this,p,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,p,m);default:if(C)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),C=!0}}a.prototype._isBuffer=!0;function I(F,p,m){var C=F[p];F[p]=F[m],F[m]=C}a.prototype.swap16=function(){var p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<p;m+=2)I(this,m,m+1);return this},a.prototype.swap32=function(){var p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<p;m+=4)I(this,m,m+3),I(this,m+1,m+2);return this},a.prototype.swap64=function(){var p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<p;m+=8)I(this,m,m+7),I(this,m+1,m+6),I(this,m+2,m+5),I(this,m+3,m+4);return this},a.prototype.toString=function(){var p=this.length;return p===0?"":arguments.length===0?P(this,0,p):b.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(p){if(!a.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:a.compare(this,p)===0},a.prototype.inspect=function(){var p="",m=t.INSPECT_MAX_BYTES;return p=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(p+=" ... "),"<Buffer "+p+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(p,m,C,G,Z){if(ce(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(m===void 0&&(m=0),C===void 0&&(C=p?p.length:0),G===void 0&&(G=0),Z===void 0&&(Z=this.length),m<0||C>p.length||G<0||Z>this.length)throw new RangeError("out of range index");if(G>=Z&&m>=C)return 0;if(G>=Z)return-1;if(m>=C)return 1;if(m>>>=0,C>>>=0,G>>>=0,Z>>>=0,this===p)return 0;for(var X=Z-G,pe=C-m,ve=Math.min(X,pe),ye=this.slice(G,Z),Te=p.slice(m,C),Ae=0;Ae<ve;++Ae)if(ye[Ae]!==Te[Ae]){X=ye[Ae],pe=Te[Ae];break}return X<pe?-1:pe<X?1:0};function B(F,p,m,C,G){if(F.length===0)return-1;if(typeof m=="string"?(C=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,N(m)&&(m=G?0:F.length-1),m<0&&(m=F.length+m),m>=F.length){if(G)return-1;m=F.length-1}else if(m<0)if(G)m=0;else return-1;if(typeof p=="string"&&(p=a.from(p,C)),a.isBuffer(p))return p.length===0?-1:k(F,p,m,C,G);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(F,p,m):Uint8Array.prototype.lastIndexOf.call(F,p,m):k(F,[p],m,C,G);throw new TypeError("val must be string, number or Buffer")}function k(F,p,m,C,G){var Z=1,X=F.length,pe=p.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(F.length<2||p.length<2)return-1;Z=2,X/=2,pe/=2,m/=2}function ve(Be,bt){return Z===1?Be[bt]:Be.readUInt16BE(bt*Z)}var ye;if(G){var Te=-1;for(ye=m;ye<X;ye++)if(ve(F,ye)===ve(p,Te===-1?0:ye-Te)){if(Te===-1&&(Te=ye),ye-Te+1===pe)return Te*Z}else Te!==-1&&(ye-=ye-Te),Te=-1}else for(m+pe>X&&(m=X-pe),ye=m;ye>=0;ye--){for(var Ae=!0,Re=0;Re<pe;Re++)if(ve(F,ye+Re)!==ve(p,Re)){Ae=!1;break}if(Ae)return ye}return-1}a.prototype.includes=function(p,m,C){return this.indexOf(p,m,C)!==-1},a.prototype.indexOf=function(p,m,C){return B(this,p,m,C,!0)},a.prototype.lastIndexOf=function(p,m,C){return B(this,p,m,C,!1)};function R(F,p,m,C){m=Number(m)||0;var G=F.length-m;C?(C=Number(C),C>G&&(C=G)):C=G;var Z=p.length;C>Z/2&&(C=Z/2);for(var X=0;X<C;++X){var pe=parseInt(p.substr(X*2,2),16);if(N(pe))return X;F[m+X]=pe}return X}function E(F,p,m,C){return H(D(p,F.length-m),F,m,C)}function U(F,p,m,C){return H(Y(p),F,m,C)}function W(F,p,m,C){return H($(p),F,m,C)}function A(F,p,m,C){return H(Q(p,F.length-m),F,m,C)}a.prototype.write=function(p,m,C,G){if(m===void 0)G="utf8",C=this.length,m=0;else if(C===void 0&&typeof m=="string")G=m,C=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(C)?(C=C>>>0,G===void 0&&(G="utf8")):(G=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Z=this.length-m;if((C===void 0||C>Z)&&(C=Z),p.length>0&&(C<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var X=!1;;)switch(G){case"hex":return R(this,p,m,C);case"utf8":case"utf-8":return E(this,p,m,C);case"ascii":case"latin1":case"binary":return U(this,p,m,C);case"base64":return W(this,p,m,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,p,m,C);default:if(X)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),X=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(F,p,m){return p===0&&m===F.length?e.fromByteArray(F):e.fromByteArray(F.slice(p,m))}function P(F,p,m){m=Math.min(F.length,m);for(var C=[],G=p;G<m;){var Z=F[G],X=null,pe=Z>239?4:Z>223?3:Z>191?2:1;if(G+pe<=m){var ve,ye,Te,Ae;switch(pe){case 1:Z<128&&(X=Z);break;case 2:ve=F[G+1],(ve&192)===128&&(Ae=(Z&31)<<6|ve&63,Ae>127&&(X=Ae));break;case 3:ve=F[G+1],ye=F[G+2],(ve&192)===128&&(ye&192)===128&&(Ae=(Z&15)<<12|(ve&63)<<6|ye&63,Ae>2047&&(Ae<55296||Ae>57343)&&(X=Ae));break;case 4:ve=F[G+1],ye=F[G+2],Te=F[G+3],(ve&192)===128&&(ye&192)===128&&(Te&192)===128&&(Ae=(Z&15)<<18|(ve&63)<<12|(ye&63)<<6|Te&63,Ae>65535&&Ae<1114112&&(X=Ae))}}X===null?(X=65533,pe=1):X>65535&&(X-=65536,C.push(X>>>10&1023|55296),X=56320|X&1023),C.push(X),G+=pe}return de(C)}var te=4096;function de(F){var p=F.length;if(p<=te)return String.fromCharCode.apply(String,F);for(var m="",C=0;C<p;)m+=String.fromCharCode.apply(String,F.slice(C,C+=te));return m}function J(F,p,m){var C="";m=Math.min(F.length,m);for(var G=p;G<m;++G)C+=String.fromCharCode(F[G]&127);return C}function ie(F,p,m){var C="";m=Math.min(F.length,m);for(var G=p;G<m;++G)C+=String.fromCharCode(F[G]);return C}function se(F,p,m){var C=F.length;(!p||p<0)&&(p=0),(!m||m<0||m>C)&&(m=C);for(var G="",Z=p;Z<m;++Z)G+=ue[F[Z]];return G}function me(F,p,m){for(var C=F.slice(p,m),G="",Z=0;Z<C.length-1;Z+=2)G+=String.fromCharCode(C[Z]+C[Z+1]*256);return G}a.prototype.slice=function(p,m){var C=this.length;p=~~p,m=m===void 0?C:~~m,p<0?(p+=C,p<0&&(p=0)):p>C&&(p=C),m<0?(m+=C,m<0&&(m=0)):m>C&&(m=C),m<p&&(m=p);var G=this.subarray(p,m);return Object.setPrototypeOf(G,a.prototype),G};function ee(F,p,m){if(F%1!==0||F<0)throw new RangeError("offset is not uint");if(F+p>m)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(p,m,C){p=p>>>0,m=m>>>0,C||ee(p,m,this.length);for(var G=this[p],Z=1,X=0;++X<m&&(Z*=256);)G+=this[p+X]*Z;return G},a.prototype.readUintBE=a.prototype.readUIntBE=function(p,m,C){p=p>>>0,m=m>>>0,C||ee(p,m,this.length);for(var G=this[p+--m],Z=1;m>0&&(Z*=256);)G+=this[p+--m]*Z;return G},a.prototype.readUint8=a.prototype.readUInt8=function(p,m){return p=p>>>0,m||ee(p,1,this.length),this[p]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(p,m){return p=p>>>0,m||ee(p,2,this.length),this[p]|this[p+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(p,m){return p=p>>>0,m||ee(p,2,this.length),this[p]<<8|this[p+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(p,m){return p=p>>>0,m||ee(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(p,m){return p=p>>>0,m||ee(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},a.prototype.readIntLE=function(p,m,C){p=p>>>0,m=m>>>0,C||ee(p,m,this.length);for(var G=this[p],Z=1,X=0;++X<m&&(Z*=256);)G+=this[p+X]*Z;return Z*=128,G>=Z&&(G-=Math.pow(2,8*m)),G},a.prototype.readIntBE=function(p,m,C){p=p>>>0,m=m>>>0,C||ee(p,m,this.length);for(var G=m,Z=1,X=this[p+--G];G>0&&(Z*=256);)X+=this[p+--G]*Z;return Z*=128,X>=Z&&(X-=Math.pow(2,8*m)),X},a.prototype.readInt8=function(p,m){return p=p>>>0,m||ee(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},a.prototype.readInt16LE=function(p,m){p=p>>>0,m||ee(p,2,this.length);var C=this[p]|this[p+1]<<8;return C&32768?C|4294901760:C},a.prototype.readInt16BE=function(p,m){p=p>>>0,m||ee(p,2,this.length);var C=this[p+1]|this[p]<<8;return C&32768?C|4294901760:C},a.prototype.readInt32LE=function(p,m){return p=p>>>0,m||ee(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},a.prototype.readInt32BE=function(p,m){return p=p>>>0,m||ee(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},a.prototype.readFloatLE=function(p,m){return p=p>>>0,m||ee(p,4,this.length),r.read(this,p,!0,23,4)},a.prototype.readFloatBE=function(p,m){return p=p>>>0,m||ee(p,4,this.length),r.read(this,p,!1,23,4)},a.prototype.readDoubleLE=function(p,m){return p=p>>>0,m||ee(p,8,this.length),r.read(this,p,!0,52,8)},a.prototype.readDoubleBE=function(p,m){return p=p>>>0,m||ee(p,8,this.length),r.read(this,p,!1,52,8)};function q(F,p,m,C,G,Z){if(!a.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>G||p<Z)throw new RangeError('"value" argument is out of bounds');if(m+C>F.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(p,m,C,G){if(p=+p,m=m>>>0,C=C>>>0,!G){var Z=Math.pow(2,8*C)-1;q(this,p,m,C,Z,0)}var X=1,pe=0;for(this[m]=p&255;++pe<C&&(X*=256);)this[m+pe]=p/X&255;return m+C},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(p,m,C,G){if(p=+p,m=m>>>0,C=C>>>0,!G){var Z=Math.pow(2,8*C)-1;q(this,p,m,C,Z,0)}var X=C-1,pe=1;for(this[m+X]=p&255;--X>=0&&(pe*=256);)this[m+X]=p/pe&255;return m+C},a.prototype.writeUint8=a.prototype.writeUInt8=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,1,255,0),this[m]=p&255,m+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,2,65535,0),this[m]=p&255,this[m+1]=p>>>8,m+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,2,65535,0),this[m]=p>>>8,this[m+1]=p&255,m+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,4,4294967295,0),this[m+3]=p>>>24,this[m+2]=p>>>16,this[m+1]=p>>>8,this[m]=p&255,m+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,4,4294967295,0),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4},a.prototype.writeIntLE=function(p,m,C,G){if(p=+p,m=m>>>0,!G){var Z=Math.pow(2,8*C-1);q(this,p,m,C,Z-1,-Z)}var X=0,pe=1,ve=0;for(this[m]=p&255;++X<C&&(pe*=256);)p<0&&ve===0&&this[m+X-1]!==0&&(ve=1),this[m+X]=(p/pe>>0)-ve&255;return m+C},a.prototype.writeIntBE=function(p,m,C,G){if(p=+p,m=m>>>0,!G){var Z=Math.pow(2,8*C-1);q(this,p,m,C,Z-1,-Z)}var X=C-1,pe=1,ve=0;for(this[m+X]=p&255;--X>=0&&(pe*=256);)p<0&&ve===0&&this[m+X+1]!==0&&(ve=1),this[m+X]=(p/pe>>0)-ve&255;return m+C},a.prototype.writeInt8=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,1,127,-128),p<0&&(p=255+p+1),this[m]=p&255,m+1},a.prototype.writeInt16LE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,2,32767,-32768),this[m]=p&255,this[m+1]=p>>>8,m+2},a.prototype.writeInt16BE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,2,32767,-32768),this[m]=p>>>8,this[m+1]=p&255,m+2},a.prototype.writeInt32LE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,4,2147483647,-2147483648),this[m]=p&255,this[m+1]=p>>>8,this[m+2]=p>>>16,this[m+3]=p>>>24,m+4},a.prototype.writeInt32BE=function(p,m,C){return p=+p,m=m>>>0,C||q(this,p,m,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4};function ne(F,p,m,C,G,Z){if(m+C>F.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function oe(F,p,m,C,G){return p=+p,m=m>>>0,G||ne(F,p,m,4),r.write(F,p,m,C,23,4),m+4}a.prototype.writeFloatLE=function(p,m,C){return oe(this,p,m,!0,C)},a.prototype.writeFloatBE=function(p,m,C){return oe(this,p,m,!1,C)};function fe(F,p,m,C,G){return p=+p,m=m>>>0,G||ne(F,p,m,8),r.write(F,p,m,C,52,8),m+8}a.prototype.writeDoubleLE=function(p,m,C){return fe(this,p,m,!0,C)},a.prototype.writeDoubleBE=function(p,m,C){return fe(this,p,m,!1,C)},a.prototype.copy=function(p,m,C,G){if(!a.isBuffer(p))throw new TypeError("argument should be a Buffer");if(C||(C=0),!G&&G!==0&&(G=this.length),m>=p.length&&(m=p.length),m||(m=0),G>0&&G<C&&(G=C),G===C||p.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),p.length-m<G-C&&(G=p.length-m+C);var Z=G-C;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,C,G):Uint8Array.prototype.set.call(p,this.subarray(C,G),m),Z},a.prototype.fill=function(p,m,C,G){if(typeof p=="string"){if(typeof m=="string"?(G=m,m=0,C=this.length):typeof C=="string"&&(G=C,C=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!a.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(p.length===1){var Z=p.charCodeAt(0);(G==="utf8"&&Z<128||G==="latin1")&&(p=Z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(m<0||this.length<m||this.length<C)throw new RangeError("Out of range index");if(C<=m)return this;m=m>>>0,C=C===void 0?this.length:C>>>0,p||(p=0);var X;if(typeof p=="number")for(X=m;X<C;++X)this[X]=p;else{var pe=a.isBuffer(p)?p:a.from(p,G),ve=pe.length;if(ve===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(X=0;X<C-m;++X)this[X+m]=pe[X%ve]}return this};var re=/[^+/0-9A-Za-z-_]/g;function L(F){if(F=F.split("=")[0],F=F.trim().replace(re,""),F.length<2)return"";for(;F.length%4!==0;)F=F+"=";return F}function D(F,p){p=p||1/0;for(var m,C=F.length,G=null,Z=[],X=0;X<C;++X){if(m=F.charCodeAt(X),m>55295&&m<57344){if(!G){if(m>56319){(p-=3)>-1&&Z.push(239,191,189);continue}else if(X+1===C){(p-=3)>-1&&Z.push(239,191,189);continue}G=m;continue}if(m<56320){(p-=3)>-1&&Z.push(239,191,189),G=m;continue}m=(G-55296<<10|m-56320)+65536}else G&&(p-=3)>-1&&Z.push(239,191,189);if(G=null,m<128){if((p-=1)<0)break;Z.push(m)}else if(m<2048){if((p-=2)<0)break;Z.push(m>>6|192,m&63|128)}else if(m<65536){if((p-=3)<0)break;Z.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((p-=4)<0)break;Z.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return Z}function Y(F){for(var p=[],m=0;m<F.length;++m)p.push(F.charCodeAt(m)&255);return p}function Q(F,p){for(var m,C,G,Z=[],X=0;X<F.length&&!((p-=2)<0);++X)m=F.charCodeAt(X),C=m>>8,G=m%256,Z.push(G),Z.push(C);return Z}function $(F){return e.toByteArray(L(F))}function H(F,p,m,C){for(var G=0;G<C&&!(G+m>=p.length||G>=F.length);++G)p[G+m]=F[G];return G}function ce(F,p){return F instanceof p||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===p.name}function N(F){return F!==F}var ue=function(){for(var F="0123456789abcdef",p=new Array(256),m=0;m<16;++m)for(var C=m*16,G=0;G<16;++G)p[C+G]=F[m]+F[G];return p}()}(Fh)),Fh}var Vh={},Uh={},Bh,X_;function xS(){return X_||(X_=1,Bh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),Bh}var zh,Y_;function O0(){if(Y_)return zh;Y_=1;var t=xS();return zh=function(){return t()&&!!Symbol.toStringTag},zh}var qh,J_;function ES(){return J_||(J_=1,qh=Object),qh}var $h,Z_;function o6(){return Z_||(Z_=1,$h=Error),$h}var Wh,e1;function a6(){return e1||(e1=1,Wh=EvalError),Wh}var Hh,t1;function l6(){return t1||(t1=1,Hh=RangeError),Hh}var Kh,r1;function u6(){return r1||(r1=1,Kh=ReferenceError),Kh}var Gh,n1;function TS(){return n1||(n1=1,Gh=SyntaxError),Gh}var Qh,i1;function Ul(){return i1||(i1=1,Qh=TypeError),Qh}var Xh,s1;function c6(){return s1||(s1=1,Xh=URIError),Xh}var Yh,o1;function d6(){return o1||(o1=1,Yh=Math.abs),Yh}var Jh,a1;function h6(){return a1||(a1=1,Jh=Math.floor),Jh}var Zh,l1;function f6(){return l1||(l1=1,Zh=Math.max),Zh}var ef,u1;function p6(){return u1||(u1=1,ef=Math.min),ef}var tf,c1;function m6(){return c1||(c1=1,tf=Math.pow),tf}var rf,d1;function g6(){return d1||(d1=1,rf=Math.round),rf}var nf,h1;function y6(){return h1||(h1=1,nf=Number.isNaN||function(e){return e!==e}),nf}var sf,f1;function v6(){if(f1)return sf;f1=1;var t=y6();return sf=function(r){return t(r)||r===0?r:r<0?-1:1},sf}var of,p1;function _6(){return p1||(p1=1,of=Object.getOwnPropertyDescriptor),of}var af,m1;function Bl(){if(m1)return af;m1=1;var t=_6();if(t)try{t([],"length")}catch{t=null}return af=t,af}var lf,g1;function Ld(){if(g1)return lf;g1=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return lf=t,lf}var uf,y1;function w6(){if(y1)return uf;y1=1;var t=typeof Symbol<"u"&&Symbol,e=xS();return uf=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},uf}var cf,v1;function SS(){return v1||(v1=1,cf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),cf}var df,_1;function AS(){if(_1)return df;_1=1;var t=ES();return df=t.getPrototypeOf||null,df}var hf,w1;function b6(){if(w1)return hf;w1=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(l,c){for(var h=[],g=0;g<l.length;g+=1)h[g]=l[g];for(var w=0;w<c.length;w+=1)h[w+l.length]=c[w];return h},s=function(l,c){for(var h=[],g=c,w=0;g<l.length;g+=1,w+=1)h[w]=l[g];return h},o=function(a,l){for(var c="",h=0;h<a.length;h+=1)c+=a[h],h+1<a.length&&(c+=l);return c};return hf=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(t+c);for(var h=s(arguments,1),g,w=function(){if(this instanceof g){var f=c.apply(this,i(h,arguments));return Object(f)===f?f:this}return c.apply(l,i(h,arguments))},_=r(0,c.length-h.length),T=[],x=0;x<_;x++)T[x]="$"+x;if(g=Function("binder","return function ("+o(T,",")+"){ return binder.apply(this,arguments); }")(w),c.prototype){var j=function(){};j.prototype=c.prototype,g.prototype=new j,j.prototype=null}return g},hf}var ff,b1;function zl(){if(b1)return ff;b1=1;var t=b6();return ff=Function.prototype.bind||t,ff}var pf,x1;function L0(){return x1||(x1=1,pf=Function.prototype.call),pf}var mf,E1;function IS(){return E1||(E1=1,mf=Function.prototype.apply),mf}var gf,T1;function x6(){return T1||(T1=1,gf=typeof Reflect<"u"&&Reflect&&Reflect.apply),gf}var yf,S1;function E6(){if(S1)return yf;S1=1;var t=zl(),e=IS(),r=L0(),n=x6();return yf=n||t.call(r,e),yf}var vf,A1;function T6(){if(A1)return vf;A1=1;var t=zl(),e=Ul(),r=L0(),n=E6();return vf=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(t,r,s)},vf}var _f,I1;function S6(){if(I1)return _f;I1=1;var t=T6(),e=Bl(),r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!r&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return _f=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,_f}var wf,N1;function A6(){if(N1)return wf;N1=1;var t=SS(),e=AS(),r=S6();return wf=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:r?function(i){return r(i)}:null,wf}var bf,k1;function I6(){if(k1)return bf;k1=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=zl();return bf=r.call(t,e),bf}var xf,C1;function M0(){if(C1)return xf;C1=1;var t,e=ES(),r=o6(),n=a6(),i=l6(),s=u6(),o=TS(),a=Ul(),l=c6(),c=d6(),h=h6(),g=f6(),w=p6(),_=m6(),T=g6(),x=v6(),j=Function,f=function(Y){try{return j('"use strict"; return ('+Y+").constructor;")()}catch{}},y=Bl(),v=Ld(),b=function(){throw new a},I=y?function(){try{return arguments.callee,b}catch{try{return y(arguments,"callee").get}catch{return b}}}():b,B=w6()(),k=A6(),R=AS(),E=SS(),U=IS(),W=L0(),A={},M=typeof Uint8Array>"u"||!k?t:k(Uint8Array),P={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":B&&k?k([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":j,"%GeneratorFunction%":A,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":B&&k?k(k([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!B||!k?t:k(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":y,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!B||!k?t:k(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":B&&k?k(""[Symbol.iterator]()):t,"%Symbol%":B?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":I,"%TypedArray%":M,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":W,"%Function.prototype.apply%":U,"%Object.defineProperty%":v,"%Object.getPrototypeOf%":R,"%Math.abs%":c,"%Math.floor%":h,"%Math.max%":g,"%Math.min%":w,"%Math.pow%":_,"%Math.round%":T,"%Math.sign%":x,"%Reflect.getPrototypeOf%":E};if(k)try{null.error}catch(Y){var te=k(k(Y));P["%Error.prototype%"]=te}var de=function Y(Q){var $;if(Q==="%AsyncFunction%")$=f("async function () {}");else if(Q==="%GeneratorFunction%")$=f("function* () {}");else if(Q==="%AsyncGeneratorFunction%")$=f("async function* () {}");else if(Q==="%AsyncGenerator%"){var H=Y("%AsyncGeneratorFunction%");H&&($=H.prototype)}else if(Q==="%AsyncIteratorPrototype%"){var ce=Y("%AsyncGenerator%");ce&&k&&($=k(ce.prototype))}return P[Q]=$,$},J={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ie=zl(),se=I6(),me=ie.call(W,Array.prototype.concat),ee=ie.call(U,Array.prototype.splice),q=ie.call(W,String.prototype.replace),ne=ie.call(W,String.prototype.slice),oe=ie.call(W,RegExp.prototype.exec),fe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,re=/\\(\\)?/g,L=function(Q){var $=ne(Q,0,1),H=ne(Q,-1);if($==="%"&&H!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(H==="%"&&$!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ce=[];return q(Q,fe,function(N,ue,F,p){ce[ce.length]=F?q(p,re,"$1"):ue||N}),ce},D=function(Q,$){var H=Q,ce;if(se(J,H)&&(ce=J[H],H="%"+ce[0]+"%"),se(P,H)){var N=P[H];if(N===A&&(N=de(H)),typeof N>"u"&&!$)throw new a("intrinsic "+Q+" exists, but is not available. Please file an issue!");return{alias:ce,name:H,value:N}}throw new o("intrinsic "+Q+" does not exist!")};return xf=function(Q,$){if(typeof Q!="string"||Q.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $!="boolean")throw new a('"allowMissing" argument must be a boolean');if(oe(/^%?[^%]*%?$/,Q)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var H=L(Q),ce=H.length>0?H[0]:"",N=D("%"+ce+"%",$),ue=N.name,F=N.value,p=!1,m=N.alias;m&&(ce=m[0],ee(H,me([0,1],m)));for(var C=1,G=!0;C<H.length;C+=1){var Z=H[C],X=ne(Z,0,1),pe=ne(Z,-1);if((X==='"'||X==="'"||X==="`"||pe==='"'||pe==="'"||pe==="`")&&X!==pe)throw new o("property names with quotes must have matching quotes");if((Z==="constructor"||!G)&&(p=!0),ce+="."+Z,ue="%"+ce+"%",se(P,ue))F=P[ue];else if(F!=null){if(!(Z in F)){if(!$)throw new a("base intrinsic for "+Q+" exists, but the property is not available.");return}if(y&&C+1>=H.length){var ve=y(F,Z);G=!!ve,G&&"get"in ve&&!("originalValue"in ve.get)?F=ve.get:F=F[Z]}else G=se(F,Z),F=F[Z];G&&!p&&(P[ue]=F)}}return F},xf}var Ef={exports:{}},Tf,R1;function N6(){if(R1)return Tf;R1=1;var t=Ld(),e=TS(),r=Ul(),n=Bl();return Tf=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,g=arguments.length>6?arguments[6]:!1,w=!!n&&n(s,o);if(t)t(s,o,{configurable:h===null&&w?w.configurable:!h,enumerable:l===null&&w?w.enumerable:!l,value:a,writable:c===null&&w?w.writable:!c});else if(g||!l&&!c&&!h)s[o]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Tf}var Sf,P1;function k6(){if(P1)return Sf;P1=1;var t=Ld(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},Sf=e,Sf}var Af,j1;function C6(){if(j1)return Af;j1=1;var t=M0(),e=N6(),r=k6()(),n=Bl(),i=Ul(),s=t("%Math.floor%");return Af=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new i("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],h=!0,g=!0;if("length"in a&&n){var w=n(a,"length");w&&!w.configurable&&(h=!1),w&&!w.writable&&(g=!1)}return(h||g||!c)&&(r?e(a,"length",l,!0,!0):e(a,"length",l)),a},Af}var D1;function NS(){return D1||(D1=1,function(t){var e=zl(),r=M0(),n=C6(),i=Ul(),s=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(o,s),l=Ld(),c=r("%Math.max%");t.exports=function(w){if(typeof w!="function")throw new i("a function is required");var _=a(e,o,arguments);return n(_,1+c(0,w.length-(arguments.length-1)),!0)};var h=function(){return a(e,s,arguments)};l?l(t.exports,"apply",{value:h}):t.exports.apply=h}(Ef)),Ef.exports}var If,O1;function kS(){if(O1)return If;O1=1;var t=M0(),e=NS(),r=e(t("String.prototype.indexOf"));return If=function(i,s){var o=t(i,!!s);return typeof o=="function"&&r(i,".prototype.")>-1?e(o):o},If}var Nf,L1;function R6(){if(L1)return Nf;L1=1;var t=O0()(),e=kS(),r=e("Object.prototype.toString"),n=function(a){return t&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:r(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&r(a)!=="[object Array]"&&r(a.callee)==="[object Function]"},s=function(){return n(arguments)}();return n.isLegacyArguments=i,Nf=s?n:i,Nf}var kf,M1;function P6(){if(M1)return kf;M1=1;var t=Object.prototype.toString,e=Function.prototype.toString,r=/^\s*(?:function)?\*/,n=O0()(),i=Object.getPrototypeOf,s=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},o;return kf=function(l){if(typeof l!="function")return!1;if(r.test(e.call(l)))return!0;if(!n){var c=t.call(l);return c==="[object GeneratorFunction]"}if(!i)return!1;if(typeof o>"u"){var h=s();o=h?i(h):!1}return i(l)===o},kf}var Cf,F1;function j6(){if(F1)return Cf;F1=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,r)}catch(y){y!==n&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(v){try{var b=t.call(v);return i.test(b)}catch{return!1}},o=function(v){try{return s(v)?!1:(t.call(v),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",c="[object Function]",h="[object GeneratorFunction]",g="[object HTMLAllCollection]",w="[object HTML document.all class]",_="[object HTMLCollection]",T=typeof Symbol=="function"&&!!Symbol.toStringTag,x=!(0 in[,]),j=function(){return!1};if(typeof document=="object"){var f=document.all;a.call(f)===a.call(document.all)&&(j=function(v){if((x||!v)&&(typeof v>"u"||typeof v=="object"))try{var b=a.call(v);return(b===g||b===w||b===_||b===l)&&v("")==null}catch{}return!1})}return Cf=e?function(v){if(j(v))return!0;if(!v||typeof v!="function"&&typeof v!="object")return!1;try{e(v,null,r)}catch(b){if(b!==n)return!1}return!s(v)&&o(v)}:function(v){if(j(v))return!0;if(!v||typeof v!="function"&&typeof v!="object")return!1;if(T)return o(v);if(s(v))return!1;var b=a.call(v);return b!==c&&b!==h&&!/^\[object HTML/.test(b)?!1:o(v)},Cf}var Rf,V1;function D6(){if(V1)return Rf;V1=1;var t=j6(),e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(l,c,h){for(var g=0,w=l.length;g<w;g++)r.call(l,g)&&(h==null?c(l[g],g,l):c.call(h,l[g],g,l))},i=function(l,c,h){for(var g=0,w=l.length;g<w;g++)h==null?c(l.charAt(g),g,l):c.call(h,l.charAt(g),g,l)},s=function(l,c,h){for(var g in l)r.call(l,g)&&(h==null?c(l[g],g,l):c.call(h,l[g],g,l))},o=function(l,c,h){if(!t(c))throw new TypeError("iterator must be a function");var g;arguments.length>=3&&(g=h),e.call(l)==="[object Array]"?n(l,c,g):typeof l=="string"?i(l,c,g):s(l,c,g)};return Rf=o,Rf}var Pf,U1;function O6(){return U1||(U1=1,Pf=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Pf}var jf,B1;function L6(){if(B1)return jf;B1=1;var t=O6(),e=typeof globalThis>"u"?_n:globalThis;return jf=function(){for(var n=[],i=0;i<t.length;i++)typeof e[t[i]]=="function"&&(n[n.length]=t[i]);return n},jf}var Df,z1;function CS(){if(z1)return Df;z1=1;var t=D6(),e=L6(),r=NS(),n=kS(),i=Bl(),s=n("Object.prototype.toString"),o=O0()(),a=typeof globalThis>"u"?_n:globalThis,l=e(),c=n("String.prototype.slice"),h=Object.getPrototypeOf,g=n("Array.prototype.indexOf",!0)||function(j,f){for(var y=0;y<j.length;y+=1)if(j[y]===f)return y;return-1},w={__proto__:null};o&&i&&h?t(l,function(x){var j=new a[x];if(Symbol.toStringTag in j){var f=h(j),y=i(f,Symbol.toStringTag);if(!y){var v=h(f);y=i(v,Symbol.toStringTag)}w["$"+x]=r(y.get)}}):t(l,function(x){var j=new a[x],f=j.slice||j.set;f&&(w["$"+x]=r(f))});var _=function(j){var f=!1;return t(w,function(y,v){if(!f)try{"$"+y(j)===v&&(f=c(v,1))}catch{}}),f},T=function(j){var f=!1;return t(w,function(y,v){if(!f)try{y(j),f=c(v,1)}catch{}}),f};return Df=function(j){if(!j||typeof j!="object")return!1;if(!o){var f=c(s(j),8,-1);return g(l,f)>-1?f:f!=="Object"?!1:T(j)}return i?_(j):null},Df}var Of,q1;function M6(){if(q1)return Of;q1=1;var t=CS();return Of=function(r){return!!t(r)},Of}var $1;function F6(){return $1||($1=1,function(t){var e=R6(),r=P6(),n=CS(),i=M6();function s(C){return C.call.bind(C)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),c=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),g=s(Boolean.prototype.valueOf);if(o)var w=s(BigInt.prototype.valueOf);if(a)var _=s(Symbol.prototype.valueOf);function T(C,G){if(typeof C!="object")return!1;try{return G(C),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function x(C){return typeof Promise<"u"&&C instanceof Promise||C!==null&&typeof C=="object"&&typeof C.then=="function"&&typeof C.catch=="function"}t.isPromise=x;function j(C){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(C):i(C)||ne(C)}t.isArrayBufferView=j;function f(C){return n(C)==="Uint8Array"}t.isUint8Array=f;function y(C){return n(C)==="Uint8ClampedArray"}t.isUint8ClampedArray=y;function v(C){return n(C)==="Uint16Array"}t.isUint16Array=v;function b(C){return n(C)==="Uint32Array"}t.isUint32Array=b;function I(C){return n(C)==="Int8Array"}t.isInt8Array=I;function B(C){return n(C)==="Int16Array"}t.isInt16Array=B;function k(C){return n(C)==="Int32Array"}t.isInt32Array=k;function R(C){return n(C)==="Float32Array"}t.isFloat32Array=R;function E(C){return n(C)==="Float64Array"}t.isFloat64Array=E;function U(C){return n(C)==="BigInt64Array"}t.isBigInt64Array=U;function W(C){return n(C)==="BigUint64Array"}t.isBigUint64Array=W;function A(C){return l(C)==="[object Map]"}A.working=typeof Map<"u"&&A(new Map);function M(C){return typeof Map>"u"?!1:A.working?A(C):C instanceof Map}t.isMap=M;function P(C){return l(C)==="[object Set]"}P.working=typeof Set<"u"&&P(new Set);function te(C){return typeof Set>"u"?!1:P.working?P(C):C instanceof Set}t.isSet=te;function de(C){return l(C)==="[object WeakMap]"}de.working=typeof WeakMap<"u"&&de(new WeakMap);function J(C){return typeof WeakMap>"u"?!1:de.working?de(C):C instanceof WeakMap}t.isWeakMap=J;function ie(C){return l(C)==="[object WeakSet]"}ie.working=typeof WeakSet<"u"&&ie(new WeakSet);function se(C){return ie(C)}t.isWeakSet=se;function me(C){return l(C)==="[object ArrayBuffer]"}me.working=typeof ArrayBuffer<"u"&&me(new ArrayBuffer);function ee(C){return typeof ArrayBuffer>"u"?!1:me.working?me(C):C instanceof ArrayBuffer}t.isArrayBuffer=ee;function q(C){return l(C)==="[object DataView]"}q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&q(new DataView(new ArrayBuffer(1),0,1));function ne(C){return typeof DataView>"u"?!1:q.working?q(C):C instanceof DataView}t.isDataView=ne;var oe=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function fe(C){return l(C)==="[object SharedArrayBuffer]"}function re(C){return typeof oe>"u"?!1:(typeof fe.working>"u"&&(fe.working=fe(new oe)),fe.working?fe(C):C instanceof oe)}t.isSharedArrayBuffer=re;function L(C){return l(C)==="[object AsyncFunction]"}t.isAsyncFunction=L;function D(C){return l(C)==="[object Map Iterator]"}t.isMapIterator=D;function Y(C){return l(C)==="[object Set Iterator]"}t.isSetIterator=Y;function Q(C){return l(C)==="[object Generator]"}t.isGeneratorObject=Q;function $(C){return l(C)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=$;function H(C){return T(C,c)}t.isNumberObject=H;function ce(C){return T(C,h)}t.isStringObject=ce;function N(C){return T(C,g)}t.isBooleanObject=N;function ue(C){return o&&T(C,w)}t.isBigIntObject=ue;function F(C){return a&&T(C,_)}t.isSymbolObject=F;function p(C){return H(C)||ce(C)||N(C)||ue(C)||F(C)}t.isBoxedPrimitive=p;function m(C){return typeof Uint8Array<"u"&&(ee(C)||re(C))}t.isAnyArrayBuffer=m,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(C){Object.defineProperty(t,C,{enumerable:!1,value:function(){throw new Error(C+" is not supported in userland")}})})}(Uh)),Uh}var Lf,W1;function V6(){return W1||(W1=1,Lf=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),Lf}var H1;function RS(){return H1||(H1=1,function(t){var e=Object.getOwnPropertyDescriptors||function(ne){for(var oe=Object.keys(ne),fe={},re=0;re<oe.length;re++)fe[oe[re]]=Object.getOwnPropertyDescriptor(ne,oe[re]);return fe},r=/%[sdj%]/g;t.format=function(q){if(!I(q)){for(var ne=[],oe=0;oe<arguments.length;oe++)ne.push(o(arguments[oe]));return ne.join(" ")}for(var oe=1,fe=arguments,re=fe.length,L=String(q).replace(r,function(Y){if(Y==="%%")return"%";if(oe>=re)return Y;switch(Y){case"%s":return String(fe[oe++]);case"%d":return Number(fe[oe++]);case"%j":try{return JSON.stringify(fe[oe++])}catch{return"[Circular]"}default:return Y}}),D=fe[oe];oe<re;D=fe[++oe])y(D)||!E(D)?L+=" "+D:L+=" "+o(D);return L},t.deprecate=function(q,ne){if(typeof We<"u"&&We.noDeprecation===!0)return q;if(typeof We>"u")return function(){return t.deprecate(q,ne).apply(this,arguments)};var oe=!1;function fe(){if(!oe){if(We.throwDeprecation)throw new Error(ne);We.traceDeprecation?console.trace(ne):console.error(ne),oe=!0}return q.apply(this,arguments)}return fe};var n={},i=/^$/;if(We.env.NODE_DEBUG){var s=We.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}t.debuglog=function(q){if(q=q.toUpperCase(),!n[q])if(i.test(q)){var ne=We.pid;n[q]=function(){var oe=t.format.apply(t,arguments);console.error("%s %d: %s",q,ne,oe)}}else n[q]=function(){};return n[q]};function o(q,ne){var oe={seen:[],stylize:l};return arguments.length>=3&&(oe.depth=arguments[2]),arguments.length>=4&&(oe.colors=arguments[3]),f(ne)?oe.showHidden=ne:ne&&t._extend(oe,ne),k(oe.showHidden)&&(oe.showHidden=!1),k(oe.depth)&&(oe.depth=2),k(oe.colors)&&(oe.colors=!1),k(oe.customInspect)&&(oe.customInspect=!0),oe.colors&&(oe.stylize=a),h(oe,q,oe.depth)}t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(q,ne){var oe=o.styles[ne];return oe?"\x1B["+o.colors[oe][0]+"m"+q+"\x1B["+o.colors[oe][1]+"m":q}function l(q,ne){return q}function c(q){var ne={};return q.forEach(function(oe,fe){ne[oe]=!0}),ne}function h(q,ne,oe){if(q.customInspect&&ne&&A(ne.inspect)&&ne.inspect!==t.inspect&&!(ne.constructor&&ne.constructor.prototype===ne)){var fe=ne.inspect(oe,q);return I(fe)||(fe=h(q,fe,oe)),fe}var re=g(q,ne);if(re)return re;var L=Object.keys(ne),D=c(L);if(q.showHidden&&(L=Object.getOwnPropertyNames(ne)),W(ne)&&(L.indexOf("message")>=0||L.indexOf("description")>=0))return w(ne);if(L.length===0){if(A(ne)){var Y=ne.name?": "+ne.name:"";return q.stylize("[Function"+Y+"]","special")}if(R(ne))return q.stylize(RegExp.prototype.toString.call(ne),"regexp");if(U(ne))return q.stylize(Date.prototype.toString.call(ne),"date");if(W(ne))return w(ne)}var Q="",$=!1,H=["{","}"];if(j(ne)&&($=!0,H=["[","]"]),A(ne)){var ce=ne.name?": "+ne.name:"";Q=" [Function"+ce+"]"}if(R(ne)&&(Q=" "+RegExp.prototype.toString.call(ne)),U(ne)&&(Q=" "+Date.prototype.toUTCString.call(ne)),W(ne)&&(Q=" "+w(ne)),L.length===0&&(!$||ne.length==0))return H[0]+Q+H[1];if(oe<0)return R(ne)?q.stylize(RegExp.prototype.toString.call(ne),"regexp"):q.stylize("[Object]","special");q.seen.push(ne);var N;return $?N=_(q,ne,oe,D,L):N=L.map(function(ue){return T(q,ne,oe,D,ue,$)}),q.seen.pop(),x(N,Q,H)}function g(q,ne){if(k(ne))return q.stylize("undefined","undefined");if(I(ne)){var oe="'"+JSON.stringify(ne).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(oe,"string")}if(b(ne))return q.stylize(""+ne,"number");if(f(ne))return q.stylize(""+ne,"boolean");if(y(ne))return q.stylize("null","null")}function w(q){return"["+Error.prototype.toString.call(q)+"]"}function _(q,ne,oe,fe,re){for(var L=[],D=0,Y=ne.length;D<Y;++D)ie(ne,String(D))?L.push(T(q,ne,oe,fe,String(D),!0)):L.push("");return re.forEach(function(Q){Q.match(/^\d+$/)||L.push(T(q,ne,oe,fe,Q,!0))}),L}function T(q,ne,oe,fe,re,L){var D,Y,Q;if(Q=Object.getOwnPropertyDescriptor(ne,re)||{value:ne[re]},Q.get?Q.set?Y=q.stylize("[Getter/Setter]","special"):Y=q.stylize("[Getter]","special"):Q.set&&(Y=q.stylize("[Setter]","special")),ie(fe,re)||(D="["+re+"]"),Y||(q.seen.indexOf(Q.value)<0?(y(oe)?Y=h(q,Q.value,null):Y=h(q,Q.value,oe-1),Y.indexOf(`
`)>-1&&(L?Y=Y.split(`
`).map(function($){return"  "+$}).join(`
`).slice(2):Y=`
`+Y.split(`
`).map(function($){return"   "+$}).join(`
`))):Y=q.stylize("[Circular]","special")),k(D)){if(L&&re.match(/^\d+$/))return Y;D=JSON.stringify(""+re),D.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(D=D.slice(1,-1),D=q.stylize(D,"name")):(D=D.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),D=q.stylize(D,"string"))}return D+": "+Y}function x(q,ne,oe){var fe=q.reduce(function(re,L){return L.indexOf(`
`)>=0,re+L.replace(/\u001b\[\d\d?m/g,"").length+1},0);return fe>60?oe[0]+(ne===""?"":ne+`
 `)+" "+q.join(`,
  `)+" "+oe[1]:oe[0]+ne+" "+q.join(", ")+" "+oe[1]}t.types=F6();function j(q){return Array.isArray(q)}t.isArray=j;function f(q){return typeof q=="boolean"}t.isBoolean=f;function y(q){return q===null}t.isNull=y;function v(q){return q==null}t.isNullOrUndefined=v;function b(q){return typeof q=="number"}t.isNumber=b;function I(q){return typeof q=="string"}t.isString=I;function B(q){return typeof q=="symbol"}t.isSymbol=B;function k(q){return q===void 0}t.isUndefined=k;function R(q){return E(q)&&P(q)==="[object RegExp]"}t.isRegExp=R,t.types.isRegExp=R;function E(q){return typeof q=="object"&&q!==null}t.isObject=E;function U(q){return E(q)&&P(q)==="[object Date]"}t.isDate=U,t.types.isDate=U;function W(q){return E(q)&&(P(q)==="[object Error]"||q instanceof Error)}t.isError=W,t.types.isNativeError=W;function A(q){return typeof q=="function"}t.isFunction=A;function M(q){return q===null||typeof q=="boolean"||typeof q=="number"||typeof q=="string"||typeof q=="symbol"||typeof q>"u"}t.isPrimitive=M,t.isBuffer=V6();function P(q){return Object.prototype.toString.call(q)}function te(q){return q<10?"0"+q.toString(10):q.toString(10)}var de=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function J(){var q=new Date,ne=[te(q.getHours()),te(q.getMinutes()),te(q.getSeconds())].join(":");return[q.getDate(),de[q.getMonth()],ne].join(" ")}t.log=function(){console.log("%s - %s",J(),t.format.apply(t,arguments))},t.inherits=Ji(),t._extend=function(q,ne){if(!ne||!E(ne))return q;for(var oe=Object.keys(ne),fe=oe.length;fe--;)q[oe[fe]]=ne[oe[fe]];return q};function ie(q,ne){return Object.prototype.hasOwnProperty.call(q,ne)}var se=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(ne){if(typeof ne!="function")throw new TypeError('The "original" argument must be of type Function');if(se&&ne[se]){var oe=ne[se];if(typeof oe!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(oe,se,{value:oe,enumerable:!1,writable:!1,configurable:!0}),oe}function oe(){for(var fe,re,L=new Promise(function(Q,$){fe=Q,re=$}),D=[],Y=0;Y<arguments.length;Y++)D.push(arguments[Y]);D.push(function(Q,$){Q?re(Q):fe($)});try{ne.apply(this,D)}catch(Q){re(Q)}return L}return Object.setPrototypeOf(oe,Object.getPrototypeOf(ne)),se&&Object.defineProperty(oe,se,{value:oe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(oe,e(ne))},t.promisify.custom=se;function me(q,ne){if(!q){var oe=new Error("Promise was rejected with a falsy value");oe.reason=q,q=oe}return ne(q)}function ee(q){if(typeof q!="function")throw new TypeError('The "original" argument must be of type Function');function ne(){for(var oe=[],fe=0;fe<arguments.length;fe++)oe.push(arguments[fe]);var re=oe.pop();if(typeof re!="function")throw new TypeError("The last argument must be of type Function");var L=this,D=function(){return re.apply(L,arguments)};q.apply(this,oe).then(function(Y){We.nextTick(D.bind(null,null,Y))},function(Y){We.nextTick(me.bind(null,Y,D))})}return Object.setPrototypeOf(ne,Object.getPrototypeOf(q)),Object.defineProperties(ne,e(q)),ne}t.callbackify=ee}(Vh)),Vh}var Mf,K1;function U6(){if(K1)return Mf;K1=1;function t(w,_){var T=Object.keys(w);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(w);_&&(x=x.filter(function(j){return Object.getOwnPropertyDescriptor(w,j).enumerable})),T.push.apply(T,x)}return T}function e(w){for(var _=1;_<arguments.length;_++){var T=arguments[_]!=null?arguments[_]:{};_%2?t(Object(T),!0).forEach(function(x){r(w,x,T[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(T)):t(Object(T)).forEach(function(x){Object.defineProperty(w,x,Object.getOwnPropertyDescriptor(T,x))})}return w}function r(w,_,T){return _ in w?Object.defineProperty(w,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):w[_]=T,w}function n(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function i(w,_){for(var T=0;T<_.length;T++){var x=_[T];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(w,x.key,x)}}function s(w,_,T){return _&&i(w.prototype,_),w}var o=Od(),a=o.Buffer,l=RS(),c=l.inspect,h=c&&c.custom||"inspect";function g(w,_,T){a.prototype.copy.call(w,_,T)}return Mf=function(){function w(){n(this,w),this.head=null,this.tail=null,this.length=0}return s(w,[{key:"push",value:function(T){var x={data:T,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(T){var x={data:T,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(this.length!==0){var T=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(this.length===0)return"";for(var x=this.head,j=""+x.data;x=x.next;)j+=T+x.data;return j}},{key:"concat",value:function(T){if(this.length===0)return a.alloc(0);for(var x=a.allocUnsafe(T>>>0),j=this.head,f=0;j;)g(j.data,x,f),f+=j.data.length,j=j.next;return x}},{key:"consume",value:function(T,x){var j;return T<this.head.data.length?(j=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):T===this.head.data.length?j=this.shift():j=x?this._getString(T):this._getBuffer(T),j}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var x=this.head,j=1,f=x.data;for(T-=f.length;x=x.next;){var y=x.data,v=T>y.length?y.length:T;if(v===y.length?f+=y:f+=y.slice(0,T),T-=v,T===0){v===y.length?(++j,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=y.slice(v));break}++j}return this.length-=j,f}},{key:"_getBuffer",value:function(T){var x=a.allocUnsafe(T),j=this.head,f=1;for(j.data.copy(x),T-=j.data.length;j=j.next;){var y=j.data,v=T>y.length?y.length:T;if(y.copy(x,x.length-T,0,v),T-=v,T===0){v===y.length?(++f,j.next?this.head=j.next:this.head=this.tail=null):(this.head=j,j.data=y.slice(v));break}++f}return this.length-=f,x}},{key:h,value:function(T,x){return c(this,e({},x,{depth:0,customInspect:!1}))}}]),w}(),Mf}var Ff,G1;function PS(){if(G1)return Ff;G1=1;function t(o,a){var l=this,c=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return c||h?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,We.nextTick(i,this,o)):We.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(g){!a&&g?l._writableState?l._writableState.errorEmitted?We.nextTick(r,l):(l._writableState.errorEmitted=!0,We.nextTick(e,l,g)):We.nextTick(e,l,g):a?(We.nextTick(r,l),a(g)):We.nextTick(r,l)}),this)}function e(o,a){i(o,a),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,a){o.emit("error",a)}function s(o,a){var l=o._readableState,c=o._writableState;l&&l.autoDestroy||c&&c.autoDestroy?o.destroy(a):o.emit("error",a)}return Ff={destroy:t,undestroy:n,errorOrDestroy:s},Ff}var Vf={},Q1;function ra(){if(Q1)return Vf;Q1=1;function t(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var e={};function r(a,l,c){c||(c=Error);function h(w,_,T){return typeof l=="string"?l:l(w,_,T)}var g=function(w){t(_,w);function _(T,x,j){return w.call(this,h(T,x,j))||this}return _}(c);g.prototype.name=c.name,g.prototype.code=a,e[a]=g}function n(a,l){if(Array.isArray(a)){var c=a.length;return a=a.map(function(h){return String(h)}),c>2?"one of ".concat(l," ").concat(a.slice(0,c-1).join(", "),", or ")+a[c-1]:c===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function i(a,l,c){return a.substr(0,l.length)===l}function s(a,l,c){return(c===void 0||c>a.length)&&(c=a.length),a.substring(c-l.length,c)===l}function o(a,l,c){return typeof c!="number"&&(c=0),c+l.length>a.length?!1:a.indexOf(l,c)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,l,c){var h;typeof l=="string"&&i(l,"not ")?(h="must not be",l=l.replace(/^not /,"")):h="must be";var g;if(s(a," argument"))g="The ".concat(a," ").concat(h," ").concat(n(l,"type"));else{var w=o(a,".")?"property":"argument";g='The "'.concat(a,'" ').concat(w," ").concat(h," ").concat(n(l,"type"))}return g+=". Received type ".concat(typeof c),g},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Vf.codes=e,Vf}var Uf,X1;function jS(){if(X1)return Uf;X1=1;var t=ra().codes.ERR_INVALID_OPT_VALUE;function e(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function r(n,i,s,o){var a=e(i,o,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=o?s:"highWaterMark";throw new t(l,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return Uf={getHighWaterMark:r},Uf}var Bf,Y1;function B6(){if(Y1)return Bf;Y1=1,Bf=t;function t(r,n){if(e("noDeprecation"))return r;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function e(r){try{if(!_n.localStorage)return!1}catch{return!1}var n=_n.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return Bf}var zf,J1;function DS(){if(J1)return zf;J1=1,zf=R;function t(re){var L=this;this.next=null,this.entry=null,this.finish=function(){fe(L,re)}}var e;R.WritableState=B;var r={deprecate:B6()},n=bS(),i=Od().Buffer,s=_n.Uint8Array||function(){};function o(re){return i.from(re)}function a(re){return i.isBuffer(re)||re instanceof s}var l=PS(),c=jS(),h=c.getHighWaterMark,g=ra().codes,w=g.ERR_INVALID_ARG_TYPE,_=g.ERR_METHOD_NOT_IMPLEMENTED,T=g.ERR_MULTIPLE_CALLBACK,x=g.ERR_STREAM_CANNOT_PIPE,j=g.ERR_STREAM_DESTROYED,f=g.ERR_STREAM_NULL_VALUES,y=g.ERR_STREAM_WRITE_AFTER_END,v=g.ERR_UNKNOWN_ENCODING,b=l.errorOrDestroy;Ji()(R,n);function I(){}function B(re,L,D){e=e||Ko(),re=re||{},typeof D!="boolean"&&(D=L instanceof e),this.objectMode=!!re.objectMode,D&&(this.objectMode=this.objectMode||!!re.writableObjectMode),this.highWaterMark=h(this,re,"writableHighWaterMark",D),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Y=re.decodeStrings===!1;this.decodeStrings=!Y,this.defaultEncoding=re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){de(L,Q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=re.emitClose!==!1,this.autoDestroy=!!re.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}B.prototype.getBuffer=function(){for(var L=this.bufferedRequest,D=[];L;)D.push(L),L=L.next;return D},function(){try{Object.defineProperty(B.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(L){return k.call(this,L)?!0:this!==R?!1:L&&L._writableState instanceof B}})):k=function(L){return L instanceof this};function R(re){e=e||Ko();var L=this instanceof e;if(!L&&!k.call(R,this))return new R(re);this._writableState=new B(re,this,L),this.writable=!0,re&&(typeof re.write=="function"&&(this._write=re.write),typeof re.writev=="function"&&(this._writev=re.writev),typeof re.destroy=="function"&&(this._destroy=re.destroy),typeof re.final=="function"&&(this._final=re.final)),n.call(this)}R.prototype.pipe=function(){b(this,new x)};function E(re,L){var D=new y;b(re,D),We.nextTick(L,D)}function U(re,L,D,Y){var Q;return D===null?Q=new f:typeof D!="string"&&!L.objectMode&&(Q=new w("chunk",["string","Buffer"],D)),Q?(b(re,Q),We.nextTick(Y,Q),!1):!0}R.prototype.write=function(re,L,D){var Y=this._writableState,Q=!1,$=!Y.objectMode&&a(re);return $&&!i.isBuffer(re)&&(re=o(re)),typeof L=="function"&&(D=L,L=null),$?L="buffer":L||(L=Y.defaultEncoding),typeof D!="function"&&(D=I),Y.ending?E(this,D):($||U(this,Y,re,D))&&(Y.pendingcb++,Q=A(this,Y,$,re,L,D)),Q},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var re=this._writableState;re.corked&&(re.corked--,!re.writing&&!re.corked&&!re.bufferProcessing&&re.bufferedRequest&&se(this,re))},R.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=L.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((L+"").toLowerCase())>-1))throw new v(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function W(re,L,D){return!re.objectMode&&re.decodeStrings!==!1&&typeof L=="string"&&(L=i.from(L,D)),L}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function A(re,L,D,Y,Q,$){if(!D){var H=W(L,Y,Q);Y!==H&&(D=!0,Q="buffer",Y=H)}var ce=L.objectMode?1:Y.length;L.length+=ce;var N=L.length<L.highWaterMark;if(N||(L.needDrain=!0),L.writing||L.corked){var ue=L.lastBufferedRequest;L.lastBufferedRequest={chunk:Y,encoding:Q,isBuf:D,callback:$,next:null},ue?ue.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else M(re,L,!1,ce,Y,Q,$);return N}function M(re,L,D,Y,Q,$,H){L.writelen=Y,L.writecb=H,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new j("write")):D?re._writev(Q,L.onwrite):re._write(Q,$,L.onwrite),L.sync=!1}function P(re,L,D,Y,Q){--L.pendingcb,D?(We.nextTick(Q,Y),We.nextTick(ne,re,L),re._writableState.errorEmitted=!0,b(re,Y)):(Q(Y),re._writableState.errorEmitted=!0,b(re,Y),ne(re,L))}function te(re){re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0}function de(re,L){var D=re._writableState,Y=D.sync,Q=D.writecb;if(typeof Q!="function")throw new T;if(te(D),L)P(re,D,Y,L,Q);else{var $=me(D)||re.destroyed;!$&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&se(re,D),Y?We.nextTick(J,re,D,$,Q):J(re,D,$,Q)}}function J(re,L,D,Y){D||ie(re,L),L.pendingcb--,Y(),ne(re,L)}function ie(re,L){L.length===0&&L.needDrain&&(L.needDrain=!1,re.emit("drain"))}function se(re,L){L.bufferProcessing=!0;var D=L.bufferedRequest;if(re._writev&&D&&D.next){var Y=L.bufferedRequestCount,Q=new Array(Y),$=L.corkedRequestsFree;$.entry=D;for(var H=0,ce=!0;D;)Q[H]=D,D.isBuf||(ce=!1),D=D.next,H+=1;Q.allBuffers=ce,M(re,L,!0,L.length,Q,"",$.finish),L.pendingcb++,L.lastBufferedRequest=null,$.next?(L.corkedRequestsFree=$.next,$.next=null):L.corkedRequestsFree=new t(L),L.bufferedRequestCount=0}else{for(;D;){var N=D.chunk,ue=D.encoding,F=D.callback,p=L.objectMode?1:N.length;if(M(re,L,!1,p,N,ue,F),D=D.next,L.bufferedRequestCount--,L.writing)break}D===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=D,L.bufferProcessing=!1}R.prototype._write=function(re,L,D){D(new _("_write()"))},R.prototype._writev=null,R.prototype.end=function(re,L,D){var Y=this._writableState;return typeof re=="function"?(D=re,re=null,L=null):typeof L=="function"&&(D=L,L=null),re!=null&&this.write(re,L),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||oe(this,Y,D),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function me(re){return re.ending&&re.length===0&&re.bufferedRequest===null&&!re.finished&&!re.writing}function ee(re,L){re._final(function(D){L.pendingcb--,D&&b(re,D),L.prefinished=!0,re.emit("prefinish"),ne(re,L)})}function q(re,L){!L.prefinished&&!L.finalCalled&&(typeof re._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,We.nextTick(ee,re,L)):(L.prefinished=!0,re.emit("prefinish")))}function ne(re,L){var D=me(L);if(D&&(q(re,L),L.pendingcb===0&&(L.finished=!0,re.emit("finish"),L.autoDestroy))){var Y=re._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&re.destroy()}return D}function oe(re,L,D){L.ending=!0,ne(re,L),D&&(L.finished?We.nextTick(D):re.once("finish",D)),L.ended=!0,re.writable=!1}function fe(re,L,D){var Y=re.entry;for(re.entry=null;Y;){var Q=Y.callback;L.pendingcb--,Q(D),Y=Y.next}L.corkedRequestsFree.next=re}return Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),R.prototype.destroy=l.destroy,R.prototype._undestroy=l.undestroy,R.prototype._destroy=function(re,L){L(re)},zf}var qf,Z1;function Ko(){if(Z1)return qf;Z1=1;var t=Object.keys||function(c){var h=[];for(var g in c)h.push(g);return h};qf=o;var e=OS(),r=DS();Ji()(o,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(c){if(!(this instanceof o))return new o(c);e.call(this,c),r.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||We.nextTick(l,this)}function l(c){c.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),qf}var $f={},Lu={exports:{}},ew;function z6(){return ew||(ew=1,function(t,e){var r=Od(),n=r.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,l){return n(o,a,l)}i(n,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=n(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(Lu,Lu.exports)),Lu.exports}var tw;function $m(){if(tw)return $f;tw=1;var t=z6().Buffer,e=t.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(f){if(!f)return"utf8";for(var y;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(y)return;f=(""+f).toLowerCase(),y=!0}}function n(f){var y=r(f);if(typeof y!="string"&&(t.isEncoding===e||!e(f)))throw new Error("Unknown encoding: "+f);return y||f}$f.StringDecoder=i;function i(f){this.encoding=n(f);var y;switch(this.encoding){case"utf16le":this.text=g,this.end=w,y=4;break;case"utf8":this.fillLast=l,y=4;break;case"base64":this.text=_,this.end=T,y=3;break;default:this.write=x,this.end=j;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(y)}i.prototype.write=function(f){if(f.length===0)return"";var y,v;if(this.lastNeed){if(y=this.fillLast(f),y===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<f.length?y?y+this.text(f,v):this.text(f,v):y||""},i.prototype.end=h,i.prototype.text=c,i.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function s(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function o(f,y,v){var b=y.length-1;if(b<v)return 0;var I=s(y[b]);return I>=0?(I>0&&(f.lastNeed=I-1),I):--b<v||I===-2?0:(I=s(y[b]),I>=0?(I>0&&(f.lastNeed=I-2),I):--b<v||I===-2?0:(I=s(y[b]),I>=0?(I>0&&(I===2?I=0:f.lastNeed=I-3),I):0))}function a(f,y,v){if((y[0]&192)!==128)return f.lastNeed=0,"";if(f.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return f.lastNeed=1,"";if(f.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return f.lastNeed=2,""}}function l(f){var y=this.lastTotal-this.lastNeed,v=a(this,f);if(v!==void 0)return v;if(this.lastNeed<=f.length)return f.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,y,0,f.length),this.lastNeed-=f.length}function c(f,y){var v=o(this,f,y);if(!this.lastNeed)return f.toString("utf8",y);this.lastTotal=v;var b=f.length-(v-this.lastNeed);return f.copy(this.lastChar,0,b),f.toString("utf8",y,b)}function h(f){var y=f&&f.length?this.write(f):"";return this.lastNeed?y+"":y}function g(f,y){if((f.length-y)%2===0){var v=f.toString("utf16le",y);if(v){var b=v.charCodeAt(v.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",y,f.length-1)}function w(f){var y=f&&f.length?this.write(f):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,v)}return y}function _(f,y){var v=(f.length-y)%3;return v===0?f.toString("base64",y):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",y,f.length-v))}function T(f){var y=f&&f.length?this.write(f):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function x(f){return f.toString(this.encoding)}function j(f){return f&&f.length?this.write(f):""}return $f}var Wf,rw;function F0(){if(rw)return Wf;rw=1;var t=ra().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];s.apply(this,l)}}}function r(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,o,a){if(typeof o=="function")return i(s,null,o);o||(o={}),a=e(a||r);var l=o.readable||o.readable!==!1&&s.readable,c=o.writable||o.writable!==!1&&s.writable,h=function(){s.writable||w()},g=s._writableState&&s._writableState.finished,w=function(){c=!1,g=!0,l||a.call(s)},_=s._readableState&&s._readableState.endEmitted,T=function(){l=!1,_=!0,c||a.call(s)},x=function(v){a.call(s,v)},j=function(){var v;if(l&&!_)return(!s._readableState||!s._readableState.ended)&&(v=new t),a.call(s,v);if(c&&!g)return(!s._writableState||!s._writableState.ended)&&(v=new t),a.call(s,v)},f=function(){s.req.on("finish",w)};return n(s)?(s.on("complete",w),s.on("abort",j),s.req?f():s.on("request",f)):c&&!s._writableState&&(s.on("end",h),s.on("close",h)),s.on("end",T),s.on("finish",w),o.error!==!1&&s.on("error",x),s.on("close",j),function(){s.removeListener("complete",w),s.removeListener("abort",j),s.removeListener("request",f),s.req&&s.req.removeListener("finish",w),s.removeListener("end",h),s.removeListener("close",h),s.removeListener("finish",w),s.removeListener("end",T),s.removeListener("error",x),s.removeListener("close",j)}}return Wf=i,Wf}var Hf,nw;function q6(){if(nw)return Hf;nw=1;var t;function e(f,y,v){return y in f?Object.defineProperty(f,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):f[y]=v,f}var r=F0(),n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function h(f,y){return{value:f,done:y}}function g(f){var y=f[n];if(y!==null){var v=f[c].read();v!==null&&(f[a]=null,f[n]=null,f[i]=null,y(h(v,!1)))}}function w(f){We.nextTick(g,f)}function _(f,y){return function(v,b){f.then(function(){if(y[o]){v(h(void 0,!0));return}y[l](v,b)},b)}}var T=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((t={get stream(){return this[c]},next:function(){var y=this,v=this[s];if(v!==null)return Promise.reject(v);if(this[o])return Promise.resolve(h(void 0,!0));if(this[c].destroyed)return new Promise(function(k,R){We.nextTick(function(){y[s]?R(y[s]):k(h(void 0,!0))})});var b=this[a],I;if(b)I=new Promise(_(b,this));else{var B=this[c].read();if(B!==null)return Promise.resolve(h(B,!1));I=new Promise(this[l])}return this[a]=I,I}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var y=this;return new Promise(function(v,b){y[c].destroy(null,function(I){if(I){b(I);return}v(h(void 0,!0))})})}),t),T),j=function(y){var v,b=Object.create(x,(v={},e(v,c,{value:y,writable:!0}),e(v,n,{value:null,writable:!0}),e(v,i,{value:null,writable:!0}),e(v,s,{value:null,writable:!0}),e(v,o,{value:y._readableState.endEmitted,writable:!0}),e(v,l,{value:function(B,k){var R=b[c].read();R?(b[a]=null,b[n]=null,b[i]=null,B(h(R,!1))):(b[n]=B,b[i]=k)},writable:!0}),v));return b[a]=null,r(y,function(I){if(I&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"){var B=b[i];B!==null&&(b[a]=null,b[n]=null,b[i]=null,B(I)),b[s]=I;return}var k=b[n];k!==null&&(b[a]=null,b[n]=null,b[i]=null,k(h(void 0,!0))),b[o]=!0}),y.on("readable",w.bind(null,b)),b};return Hf=j,Hf}var Kf,iw;function $6(){return iw||(iw=1,Kf=function(){throw new Error("Readable.from is not available in the browser")}),Kf}var Gf,sw;function OS(){if(sw)return Gf;sw=1,Gf=E;var t;E.ReadableState=R,D0().EventEmitter;var e=function(H,ce){return H.listeners(ce).length},r=bS(),n=Od().Buffer,i=_n.Uint8Array||function(){};function s($){return n.from($)}function o($){return n.isBuffer($)||$ instanceof i}var a=RS(),l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var c=U6(),h=PS(),g=jS(),w=g.getHighWaterMark,_=ra().codes,T=_.ERR_INVALID_ARG_TYPE,x=_.ERR_STREAM_PUSH_AFTER_EOF,j=_.ERR_METHOD_NOT_IMPLEMENTED,f=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y,v,b;Ji()(E,r);var I=h.errorOrDestroy,B=["error","close","destroy","pause","resume"];function k($,H,ce){if(typeof $.prependListener=="function")return $.prependListener(H,ce);!$._events||!$._events[H]?$.on(H,ce):Array.isArray($._events[H])?$._events[H].unshift(ce):$._events[H]=[ce,$._events[H]]}function R($,H,ce){t=t||Ko(),$=$||{},typeof ce!="boolean"&&(ce=H instanceof t),this.objectMode=!!$.objectMode,ce&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=w(this,$,"readableHighWaterMark",ce),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(y||(y=$m().StringDecoder),this.decoder=new y($.encoding),this.encoding=$.encoding)}function E($){if(t=t||Ko(),!(this instanceof E))return new E($);var H=this instanceof t;this._readableState=new R($,this,H),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),r.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function($,H){H($)},E.prototype.push=function($,H){var ce=this._readableState,N;return ce.objectMode?N=!0:typeof $=="string"&&(H=H||ce.defaultEncoding,H!==ce.encoding&&($=n.from($,H),H=""),N=!0),U(this,$,H,!1,N)},E.prototype.unshift=function($){return U(this,$,null,!0,!1)};function U($,H,ce,N,ue){l("readableAddChunk",H);var F=$._readableState;if(H===null)F.reading=!1,de($,F);else{var p;if(ue||(p=A(F,H)),p)I($,p);else if(F.objectMode||H&&H.length>0)if(typeof H!="string"&&!F.objectMode&&Object.getPrototypeOf(H)!==n.prototype&&(H=s(H)),N)F.endEmitted?I($,new f):W($,F,H,!0);else if(F.ended)I($,new x);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!ce?(H=F.decoder.write(H),F.objectMode||H.length!==0?W($,F,H,!1):se($,F)):W($,F,H,!1)}else N||(F.reading=!1,se($,F))}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function W($,H,ce,N){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,$.emit("data",ce)):(H.length+=H.objectMode?1:ce.length,N?H.buffer.unshift(ce):H.buffer.push(ce),H.needReadable&&J($)),se($,H)}function A($,H){var ce;return!o(H)&&typeof H!="string"&&H!==void 0&&!$.objectMode&&(ce=new T("chunk",["string","Buffer","Uint8Array"],H)),ce}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function($){y||(y=$m().StringDecoder);var H=new y($);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var ce=this._readableState.buffer.head,N="";ce!==null;)N+=H.write(ce.data),ce=ce.next;return this._readableState.buffer.clear(),N!==""&&this._readableState.buffer.push(N),this._readableState.length=N.length,this};var M=1073741824;function P($){return $>=M?$=M:($--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++),$}function te($,H){return $<=0||H.length===0&&H.ended?0:H.objectMode?1:$!==$?H.flowing&&H.length?H.buffer.head.data.length:H.length:($>H.highWaterMark&&(H.highWaterMark=P($)),$<=H.length?$:H.ended?H.length:(H.needReadable=!0,0))}E.prototype.read=function($){l("read",$),$=parseInt($,10);var H=this._readableState,ce=$;if($!==0&&(H.emittedReadable=!1),$===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return l("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?D(this):J(this),null;if($=te($,H),$===0&&H.ended)return H.length===0&&D(this),null;var N=H.needReadable;l("need readable",N),(H.length===0||H.length-$<H.highWaterMark)&&(N=!0,l("length less than watermark",N)),H.ended||H.reading?(N=!1,l("reading or ended",N)):N&&(l("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||($=te(ce,H)));var ue;return $>0?ue=L($,H):ue=null,ue===null?(H.needReadable=H.length<=H.highWaterMark,$=0):(H.length-=$,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),ce!==$&&H.ended&&D(this)),ue!==null&&this.emit("data",ue),ue};function de($,H){if(l("onEofChunk"),!H.ended){if(H.decoder){var ce=H.decoder.end();ce&&ce.length&&(H.buffer.push(ce),H.length+=H.objectMode?1:ce.length)}H.ended=!0,H.sync?J($):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,ie($)))}}function J($){var H=$._readableState;l("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(l("emitReadable",H.flowing),H.emittedReadable=!0,We.nextTick(ie,$))}function ie($){var H=$._readableState;l("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&($.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,re($)}function se($,H){H.readingMore||(H.readingMore=!0,We.nextTick(me,$,H))}function me($,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var ce=H.length;if(l("maybeReadMore read 0"),$.read(0),ce===H.length)break}H.readingMore=!1}E.prototype._read=function($){I(this,new j("_read()"))},E.prototype.pipe=function($,H){var ce=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=$;break;case 1:N.pipes=[N.pipes,$];break;default:N.pipes.push($);break}N.pipesCount+=1,l("pipe count=%d opts=%j",N.pipesCount,H);var ue=(!H||H.end!==!1)&&$!==We.stdout&&$!==We.stderr,F=ue?m:Te;N.endEmitted?We.nextTick(F):ce.once("end",F),$.on("unpipe",p);function p(Ae,Re){l("onunpipe"),Ae===ce&&Re&&Re.hasUnpiped===!1&&(Re.hasUnpiped=!0,Z())}function m(){l("onend"),$.end()}var C=ee(ce);$.on("drain",C);var G=!1;function Z(){l("cleanup"),$.removeListener("close",ve),$.removeListener("finish",ye),$.removeListener("drain",C),$.removeListener("error",pe),$.removeListener("unpipe",p),ce.removeListener("end",m),ce.removeListener("end",Te),ce.removeListener("data",X),G=!0,N.awaitDrain&&(!$._writableState||$._writableState.needDrain)&&C()}ce.on("data",X);function X(Ae){l("ondata");var Re=$.write(Ae);l("dest.write",Re),Re===!1&&((N.pipesCount===1&&N.pipes===$||N.pipesCount>1&&Q(N.pipes,$)!==-1)&&!G&&(l("false write response, pause",N.awaitDrain),N.awaitDrain++),ce.pause())}function pe(Ae){l("onerror",Ae),Te(),$.removeListener("error",pe),e($,"error")===0&&I($,Ae)}k($,"error",pe);function ve(){$.removeListener("finish",ye),Te()}$.once("close",ve);function ye(){l("onfinish"),$.removeListener("close",ve),Te()}$.once("finish",ye);function Te(){l("unpipe"),ce.unpipe($)}return $.emit("pipe",ce),N.flowing||(l("pipe resume"),ce.resume()),$};function ee($){return function(){var ce=$._readableState;l("pipeOnDrain",ce.awaitDrain),ce.awaitDrain&&ce.awaitDrain--,ce.awaitDrain===0&&e($,"data")&&(ce.flowing=!0,re($))}}E.prototype.unpipe=function($){var H=this._readableState,ce={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return $&&$!==H.pipes?this:($||($=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,$&&$.emit("unpipe",this,ce),this);if(!$){var N=H.pipes,ue=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var F=0;F<ue;F++)N[F].emit("unpipe",this,{hasUnpiped:!1});return this}var p=Q(H.pipes,$);return p===-1?this:(H.pipes.splice(p,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),$.emit("unpipe",this,ce),this)},E.prototype.on=function($,H){var ce=r.prototype.on.call(this,$,H),N=this._readableState;return $==="data"?(N.readableListening=this.listenerCount("readable")>0,N.flowing!==!1&&this.resume()):$==="readable"&&!N.endEmitted&&!N.readableListening&&(N.readableListening=N.needReadable=!0,N.flowing=!1,N.emittedReadable=!1,l("on readable",N.length,N.reading),N.length?J(this):N.reading||We.nextTick(ne,this)),ce},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function($,H){var ce=r.prototype.removeListener.call(this,$,H);return $==="readable"&&We.nextTick(q,this),ce},E.prototype.removeAllListeners=function($){var H=r.prototype.removeAllListeners.apply(this,arguments);return($==="readable"||$===void 0)&&We.nextTick(q,this),H};function q($){var H=$._readableState;H.readableListening=$.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:$.listenerCount("data")>0&&$.resume()}function ne($){l("readable nexttick read 0"),$.read(0)}E.prototype.resume=function(){var $=this._readableState;return $.flowing||(l("resume"),$.flowing=!$.readableListening,oe(this,$)),$.paused=!1,this};function oe($,H){H.resumeScheduled||(H.resumeScheduled=!0,We.nextTick(fe,$,H))}function fe($,H){l("resume",H.reading),H.reading||$.read(0),H.resumeScheduled=!1,$.emit("resume"),re($),H.flowing&&!H.reading&&$.read(0)}E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function re($){var H=$._readableState;for(l("flow",H.flowing);H.flowing&&$.read()!==null;);}E.prototype.wrap=function($){var H=this,ce=this._readableState,N=!1;$.on("end",function(){if(l("wrapped end"),ce.decoder&&!ce.ended){var p=ce.decoder.end();p&&p.length&&H.push(p)}H.push(null)}),$.on("data",function(p){if(l("wrapped data"),ce.decoder&&(p=ce.decoder.write(p)),!(ce.objectMode&&p==null)&&!(!ce.objectMode&&(!p||!p.length))){var m=H.push(p);m||(N=!0,$.pause())}});for(var ue in $)this[ue]===void 0&&typeof $[ue]=="function"&&(this[ue]=function(m){return function(){return $[m].apply($,arguments)}}(ue));for(var F=0;F<B.length;F++)$.on(B[F],this.emit.bind(this,B[F]));return this._read=function(p){l("wrapped _read",p),N&&(N=!1,$.resume())},this},typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return v===void 0&&(v=q6()),v(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),E._fromList=L,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L($,H){if(H.length===0)return null;var ce;return H.objectMode?ce=H.buffer.shift():!$||$>=H.length?(H.decoder?ce=H.buffer.join(""):H.buffer.length===1?ce=H.buffer.first():ce=H.buffer.concat(H.length),H.buffer.clear()):ce=H.buffer.consume($,H.decoder),ce}function D($){var H=$._readableState;l("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,We.nextTick(Y,H,$))}function Y($,H){if(l("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,H.readable=!1,H.emit("end"),$.autoDestroy)){var ce=H._writableState;(!ce||ce.autoDestroy&&ce.finished)&&H.destroy()}}typeof Symbol=="function"&&(E.from=function($,H){return b===void 0&&(b=$6()),b(E,$,H)});function Q($,H){for(var ce=0,N=$.length;ce<N;ce++)if($[ce]===H)return ce;return-1}return Gf}var Qf,ow;function LS(){if(ow)return Qf;ow=1,Qf=a;var t=ra().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,r=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,s=Ko();Ji()(a,s);function o(h,g){var w=this._transformState;w.transforming=!1;var _=w.writecb;if(_===null)return this.emit("error",new r);w.writechunk=null,w.writecb=null,g!=null&&this.push(g),_(h);var T=this._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}function a(h){if(!(this instanceof a))return new a(h);s.call(this,h),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",l)}function l(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(g,w){c(h,g,w)}):c(this,null,null)}a.prototype.push=function(h,g){return this._transformState.needTransform=!1,s.prototype.push.call(this,h,g)},a.prototype._transform=function(h,g,w){w(new e("_transform()"))},a.prototype._write=function(h,g,w){var _=this._transformState;if(_.writecb=w,_.writechunk=h,_.writeencoding=g,!_.transforming){var T=this._readableState;(_.needTransform||T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}},a.prototype._read=function(h){var g=this._transformState;g.writechunk!==null&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},a.prototype._destroy=function(h,g){s.prototype._destroy.call(this,h,function(w){g(w)})};function c(h,g,w){if(g)return h.emit("error",g);if(w!=null&&h.push(w),h._writableState.length)throw new i;if(h._transformState.transforming)throw new n;return h.push(null)}return Qf}var Xf,aw;function W6(){if(aw)return Xf;aw=1,Xf=e;var t=LS();Ji()(e,t);function e(r){if(!(this instanceof e))return new e(r);t.call(this,r)}return e.prototype._transform=function(r,n,i){i(null,r)},Xf}var Yf,lw;function H6(){if(lw)return Yf;lw=1;var t;function e(w){var _=!1;return function(){_||(_=!0,w.apply(void 0,arguments))}}var r=ra().codes,n=r.ERR_MISSING_ARGS,i=r.ERR_STREAM_DESTROYED;function s(w){if(w)throw w}function o(w){return w.setHeader&&typeof w.abort=="function"}function a(w,_,T,x){x=e(x);var j=!1;w.on("close",function(){j=!0}),t===void 0&&(t=F0()),t(w,{readable:_,writable:T},function(y){if(y)return x(y);j=!0,x()});var f=!1;return function(y){if(!j&&!f){if(f=!0,o(w))return w.abort();if(typeof w.destroy=="function")return w.destroy();x(y||new i("pipe"))}}}function l(w){w()}function c(w,_){return w.pipe(_)}function h(w){return!w.length||typeof w[w.length-1]!="function"?s:w.pop()}function g(){for(var w=arguments.length,_=new Array(w),T=0;T<w;T++)_[T]=arguments[T];var x=h(_);if(Array.isArray(_[0])&&(_=_[0]),_.length<2)throw new n("streams");var j,f=_.map(function(y,v){var b=v<_.length-1,I=v>0;return a(y,b,I,function(B){j||(j=B),B&&f.forEach(l),!b&&(f.forEach(l),x(j))})});return _.reduce(c)}return Yf=g,Yf}var Jf,uw;function V0(){if(uw)return Jf;uw=1,Jf=r;var t=D0().EventEmitter,e=Ji();e(r,t),r.Readable=OS(),r.Writable=DS(),r.Duplex=Ko(),r.Transform=LS(),r.PassThrough=W6(),r.finished=F0(),r.pipeline=H6(),r.Stream=r;function r(){t.call(this)}return r.prototype.pipe=function(n,i){var s=this;function o(_){n.writable&&n.write(_)===!1&&s.pause&&s.pause()}s.on("data",o);function a(){s.readable&&s.resume&&s.resume()}n.on("drain",a),!n._isStdio&&(!i||i.end!==!1)&&(s.on("end",c),s.on("close",h));var l=!1;function c(){l||(l=!0,n.end())}function h(){l||(l=!0,typeof n.destroy=="function"&&n.destroy())}function g(_){if(w(),t.listenerCount(this,"error")===0)throw _}s.on("error",g),n.on("error",g);function w(){s.removeListener("data",o),n.removeListener("drain",a),s.removeListener("end",c),s.removeListener("close",h),s.removeListener("error",g),n.removeListener("error",g),s.removeListener("end",w),s.removeListener("close",w),n.removeListener("close",w)}return s.on("end",w),s.on("close",w),n.on("close",w),n.emit("pipe",s),n},Jf}var cw;function K6(){return cw||(cw=1,function(t){(function(e){e.parser=function(L,D){return new n(L,D)},e.SAXParser=n,e.SAXStream=h,e.createStream=c,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(L,D){if(!(this instanceof n))return new n(L,D);var Y=this;s(Y),Y.q=Y.c="",Y.bufferCheckPosition=e.MAX_BUFFER_LENGTH,Y.opt=D||{},Y.opt.lowercase=Y.opt.lowercase||Y.opt.lowercasetags,Y.looseCase=Y.opt.lowercase?"toLowerCase":"toUpperCase",Y.tags=[],Y.closed=Y.closedRoot=Y.sawRoot=!1,Y.tag=Y.error=null,Y.strict=!!L,Y.noscript=!!(L||Y.opt.noscript),Y.state=E.BEGIN,Y.strictEntities=Y.opt.strictEntities,Y.ENTITIES=Y.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),Y.attribList=[],Y.opt.xmlns&&(Y.ns=Object.create(x)),Y.trackPosition=Y.opt.position!==!1,Y.trackPosition&&(Y.position=Y.line=Y.column=0),W(Y,"onready")}Object.create||(Object.create=function(L){function D(){}D.prototype=L;var Y=new D;return Y}),Object.keys||(Object.keys=function(L){var D=[];for(var Y in L)L.hasOwnProperty(Y)&&D.push(Y);return D});function i(L){for(var D=Math.max(e.MAX_BUFFER_LENGTH,10),Y=0,Q=0,$=r.length;Q<$;Q++){var H=L[r[Q]].length;if(H>D)switch(r[Q]){case"textNode":M(L);break;case"cdata":A(L,"oncdata",L.cdata),L.cdata="";break;case"script":A(L,"onscript",L.script),L.script="";break;default:te(L,"Max buffer length exceeded: "+r[Q])}Y=Math.max(Y,H)}var ce=e.MAX_BUFFER_LENGTH-Y;L.bufferCheckPosition=ce+L.position}function s(L){for(var D=0,Y=r.length;D<Y;D++)L[r[D]]=""}function o(L){M(L),L.cdata!==""&&(A(L,"oncdata",L.cdata),L.cdata=""),L.script!==""&&(A(L,"onscript",L.script),L.script="")}n.prototype={end:function(){de(this)},write:re,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=V0().Stream}catch{a=function(){}}var l=e.EVENTS.filter(function(L){return L!=="error"&&L!=="end"});function c(L,D){return new h(L,D)}function h(L,D){if(!(this instanceof h))return new h(L,D);a.apply(this),this._parser=new n(L,D),this.writable=!0,this.readable=!0;var Y=this;this._parser.onend=function(){Y.emit("end")},this._parser.onerror=function(Q){Y.emit("error",Q),Y._parser.error=null},this._decoder=null,l.forEach(function(Q){Object.defineProperty(Y,"on"+Q,{get:function(){return Y._parser["on"+Q]},set:function($){if(!$)return Y.removeAllListeners(Q),Y._parser["on"+Q]=$,$;Y.on(Q,$)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(a.prototype,{constructor:{value:h}}),h.prototype.write=function(L){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(L)){if(!this._decoder){var D=$m().StringDecoder;this._decoder=new D("utf8")}L=this._decoder.write(L)}return this._parser.write(L.toString()),this.emit("data",L),!0},h.prototype.end=function(L){return L&&L.length&&this.write(L),this._parser.end(),!0},h.prototype.on=function(L,D){var Y=this;return!Y._parser["on"+L]&&l.indexOf(L)!==-1&&(Y._parser["on"+L]=function(){var Q=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Q.splice(0,0,L),Y.emit.apply(Y,Q)}),a.prototype.on.call(Y,L,D)};var g="[CDATA[",w="DOCTYPE",_="http://www.w3.org/XML/1998/namespace",T="http://www.w3.org/2000/xmlns/",x={xml:_,xmlns:T},j=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function b(L){return L===" "||L===`
`||L==="\r"||L==="	"}function I(L){return L==='"'||L==="'"}function B(L){return L===">"||b(L)}function k(L,D){return L.test(D)}function R(L,D){return!k(L,D)}var E=0;e.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(L){var D=e.ENTITIES[L],Y=typeof D=="number"?String.fromCharCode(D):D;e.ENTITIES[L]=Y});for(var U in e.STATE)e.STATE[e.STATE[U]]=U;E=e.STATE;function W(L,D,Y){L[D]&&L[D](Y)}function A(L,D,Y){L.textNode&&M(L),W(L,D,Y)}function M(L){L.textNode=P(L.opt,L.textNode),L.textNode&&W(L,"ontext",L.textNode),L.textNode=""}function P(L,D){return L.trim&&(D=D.trim()),L.normalize&&(D=D.replace(/\s+/g," ")),D}function te(L,D){return M(L),L.trackPosition&&(D+=`
Line: `+L.line+`
Column: `+L.column+`
Char: `+L.c),D=new Error(D),L.error=D,W(L,"onerror",D),L}function de(L){return L.sawRoot&&!L.closedRoot&&J(L,"Unclosed root tag"),L.state!==E.BEGIN&&L.state!==E.BEGIN_WHITESPACE&&L.state!==E.TEXT&&te(L,"Unexpected end"),M(L),L.c="",L.closed=!0,W(L,"onend"),n.call(L,L.strict,L.opt),L}function J(L,D){if(typeof L!="object"||!(L instanceof n))throw new Error("bad call to strictFail");L.strict&&te(L,D)}function ie(L){L.strict||(L.tagName=L.tagName[L.looseCase]());var D=L.tags[L.tags.length-1]||L,Y=L.tag={name:L.tagName,attributes:{}};L.opt.xmlns&&(Y.ns=D.ns),L.attribList.length=0,A(L,"onopentagstart",Y)}function se(L,D){var Y=L.indexOf(":"),Q=Y<0?["",L]:L.split(":"),$=Q[0],H=Q[1];return D&&L==="xmlns"&&($="xmlns",H=""),{prefix:$,local:H}}function me(L){if(L.strict||(L.attribName=L.attribName[L.looseCase]()),L.attribList.indexOf(L.attribName)!==-1||L.tag.attributes.hasOwnProperty(L.attribName)){L.attribName=L.attribValue="";return}if(L.opt.xmlns){var D=se(L.attribName,!0),Y=D.prefix,Q=D.local;if(Y==="xmlns")if(Q==="xml"&&L.attribValue!==_)J(L,"xml: prefix must be bound to "+_+`
Actual: `+L.attribValue);else if(Q==="xmlns"&&L.attribValue!==T)J(L,"xmlns: prefix must be bound to "+T+`
Actual: `+L.attribValue);else{var $=L.tag,H=L.tags[L.tags.length-1]||L;$.ns===H.ns&&($.ns=Object.create(H.ns)),$.ns[Q]=L.attribValue}L.attribList.push([L.attribName,L.attribValue])}else L.tag.attributes[L.attribName]=L.attribValue,A(L,"onattribute",{name:L.attribName,value:L.attribValue});L.attribName=L.attribValue=""}function ee(L,D){if(L.opt.xmlns){var Y=L.tag,Q=se(L.tagName);Y.prefix=Q.prefix,Y.local=Q.local,Y.uri=Y.ns[Q.prefix]||"",Y.prefix&&!Y.uri&&(J(L,"Unbound namespace prefix: "+JSON.stringify(L.tagName)),Y.uri=Q.prefix);var $=L.tags[L.tags.length-1]||L;Y.ns&&$.ns!==Y.ns&&Object.keys(Y.ns).forEach(function(X){A(L,"onopennamespace",{prefix:X,uri:Y.ns[X]})});for(var H=0,ce=L.attribList.length;H<ce;H++){var N=L.attribList[H],ue=N[0],F=N[1],p=se(ue,!0),m=p.prefix,C=p.local,G=m===""?"":Y.ns[m]||"",Z={name:ue,value:F,prefix:m,local:C,uri:G};m&&m!=="xmlns"&&!G&&(J(L,"Unbound namespace prefix: "+JSON.stringify(m)),Z.uri=m),L.tag.attributes[ue]=Z,A(L,"onattribute",Z)}L.attribList.length=0}L.tag.isSelfClosing=!!D,L.sawRoot=!0,L.tags.push(L.tag),A(L,"onopentag",L.tag),D||(!L.noscript&&L.tagName.toLowerCase()==="script"?L.state=E.SCRIPT:L.state=E.TEXT,L.tag=null,L.tagName=""),L.attribName=L.attribValue="",L.attribList.length=0}function q(L){if(!L.tagName){J(L,"Weird empty close tag."),L.textNode+="</>",L.state=E.TEXT;return}if(L.script){if(L.tagName!=="script"){L.script+="</"+L.tagName+">",L.tagName="",L.state=E.SCRIPT;return}A(L,"onscript",L.script),L.script=""}var D=L.tags.length,Y=L.tagName;L.strict||(Y=Y[L.looseCase]());for(var Q=Y;D--;){var $=L.tags[D];if($.name!==Q)J(L,"Unexpected close tag");else break}if(D<0){J(L,"Unmatched closing tag: "+L.tagName),L.textNode+="</"+L.tagName+">",L.state=E.TEXT;return}L.tagName=Y;for(var H=L.tags.length;H-- >D;){var ce=L.tag=L.tags.pop();L.tagName=L.tag.name,A(L,"onclosetag",L.tagName);var N={};for(var ue in ce.ns)N[ue]=ce.ns[ue];var F=L.tags[L.tags.length-1]||L;L.opt.xmlns&&ce.ns!==F.ns&&Object.keys(ce.ns).forEach(function(p){var m=ce.ns[p];A(L,"onclosenamespace",{prefix:p,uri:m})})}D===0&&(L.closedRoot=!0),L.tagName=L.attribValue=L.attribName="",L.attribList.length=0,L.state=E.TEXT}function ne(L){var D=L.entity,Y=D.toLowerCase(),Q,$="";return L.ENTITIES[D]?L.ENTITIES[D]:L.ENTITIES[Y]?L.ENTITIES[Y]:(D=Y,D.charAt(0)==="#"&&(D.charAt(1)==="x"?(D=D.slice(2),Q=parseInt(D,16),$=Q.toString(16)):(D=D.slice(1),Q=parseInt(D,10),$=Q.toString(10))),D=D.replace(/^0+/,""),isNaN(Q)||$.toLowerCase()!==D?(J(L,"Invalid character entity"),"&"+L.entity+";"):String.fromCodePoint(Q))}function oe(L,D){D==="<"?(L.state=E.OPEN_WAKA,L.startTagPosition=L.position):b(D)||(J(L,"Non-whitespace before first tag."),L.textNode=D,L.state=E.TEXT)}function fe(L,D){var Y="";return D<L.length&&(Y=L.charAt(D)),Y}function re(L){var D=this;if(this.error)throw this.error;if(D.closed)return te(D,"Cannot write after close. Assign an onready handler.");if(L===null)return de(D);typeof L=="object"&&(L=L.toString());for(var Y=0,Q="";Q=fe(L,Y++),D.c=Q,!!Q;)switch(D.trackPosition&&(D.position++,Q===`
`?(D.line++,D.column=0):D.column++),D.state){case E.BEGIN:if(D.state=E.BEGIN_WHITESPACE,Q==="\uFEFF")continue;oe(D,Q);continue;case E.BEGIN_WHITESPACE:oe(D,Q);continue;case E.TEXT:if(D.sawRoot&&!D.closedRoot){for(var $=Y-1;Q&&Q!=="<"&&Q!=="&";)Q=fe(L,Y++),Q&&D.trackPosition&&(D.position++,Q===`
`?(D.line++,D.column=0):D.column++);D.textNode+=L.substring($,Y-1)}Q==="<"&&!(D.sawRoot&&D.closedRoot&&!D.strict)?(D.state=E.OPEN_WAKA,D.startTagPosition=D.position):(!b(Q)&&(!D.sawRoot||D.closedRoot)&&J(D,"Text data outside of root node."),Q==="&"?D.state=E.TEXT_ENTITY:D.textNode+=Q);continue;case E.SCRIPT:Q==="<"?D.state=E.SCRIPT_ENDING:D.script+=Q;continue;case E.SCRIPT_ENDING:Q==="/"?D.state=E.CLOSE_TAG:(D.script+="<"+Q,D.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(Q==="!")D.state=E.SGML_DECL,D.sgmlDecl="";else if(!b(Q))if(k(j,Q))D.state=E.OPEN_TAG,D.tagName=Q;else if(Q==="/")D.state=E.CLOSE_TAG,D.tagName="";else if(Q==="?")D.state=E.PROC_INST,D.procInstName=D.procInstBody="";else{if(J(D,"Unencoded <"),D.startTagPosition+1<D.position){var H=D.position-D.startTagPosition;Q=new Array(H).join(" ")+Q}D.textNode+="<"+Q,D.state=E.TEXT}continue;case E.SGML_DECL:(D.sgmlDecl+Q).toUpperCase()===g?(A(D,"onopencdata"),D.state=E.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+Q==="--"?(D.state=E.COMMENT,D.comment="",D.sgmlDecl=""):(D.sgmlDecl+Q).toUpperCase()===w?(D.state=E.DOCTYPE,(D.doctype||D.sawRoot)&&J(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):Q===">"?(A(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=E.TEXT):(I(Q)&&(D.state=E.SGML_DECL_QUOTED),D.sgmlDecl+=Q);continue;case E.SGML_DECL_QUOTED:Q===D.q&&(D.state=E.SGML_DECL,D.q=""),D.sgmlDecl+=Q;continue;case E.DOCTYPE:Q===">"?(D.state=E.TEXT,A(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=Q,Q==="["?D.state=E.DOCTYPE_DTD:I(Q)&&(D.state=E.DOCTYPE_QUOTED,D.q=Q));continue;case E.DOCTYPE_QUOTED:D.doctype+=Q,Q===D.q&&(D.q="",D.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:D.doctype+=Q,Q==="]"?D.state=E.DOCTYPE:I(Q)&&(D.state=E.DOCTYPE_DTD_QUOTED,D.q=Q);continue;case E.DOCTYPE_DTD_QUOTED:D.doctype+=Q,Q===D.q&&(D.state=E.DOCTYPE_DTD,D.q="");continue;case E.COMMENT:Q==="-"?D.state=E.COMMENT_ENDING:D.comment+=Q;continue;case E.COMMENT_ENDING:Q==="-"?(D.state=E.COMMENT_ENDED,D.comment=P(D.opt,D.comment),D.comment&&A(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+Q,D.state=E.COMMENT);continue;case E.COMMENT_ENDED:Q!==">"?(J(D,"Malformed comment"),D.comment+="--"+Q,D.state=E.COMMENT):D.state=E.TEXT;continue;case E.CDATA:Q==="]"?D.state=E.CDATA_ENDING:D.cdata+=Q;continue;case E.CDATA_ENDING:Q==="]"?D.state=E.CDATA_ENDING_2:(D.cdata+="]"+Q,D.state=E.CDATA);continue;case E.CDATA_ENDING_2:Q===">"?(D.cdata&&A(D,"oncdata",D.cdata),A(D,"onclosecdata"),D.cdata="",D.state=E.TEXT):Q==="]"?D.cdata+="]":(D.cdata+="]]"+Q,D.state=E.CDATA);continue;case E.PROC_INST:Q==="?"?D.state=E.PROC_INST_ENDING:b(Q)?D.state=E.PROC_INST_BODY:D.procInstName+=Q;continue;case E.PROC_INST_BODY:if(!D.procInstBody&&b(Q))continue;Q==="?"?D.state=E.PROC_INST_ENDING:D.procInstBody+=Q;continue;case E.PROC_INST_ENDING:Q===">"?(A(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=E.TEXT):(D.procInstBody+="?"+Q,D.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:k(f,Q)?D.tagName+=Q:(ie(D),Q===">"?ee(D):Q==="/"?D.state=E.OPEN_TAG_SLASH:(b(Q)||J(D,"Invalid character in tag name"),D.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:Q===">"?(ee(D,!0),q(D)):(J(D,"Forward-slash in opening tag not followed by >"),D.state=E.ATTRIB);continue;case E.ATTRIB:if(b(Q))continue;Q===">"?ee(D):Q==="/"?D.state=E.OPEN_TAG_SLASH:k(j,Q)?(D.attribName=Q,D.attribValue="",D.state=E.ATTRIB_NAME):J(D,"Invalid attribute name");continue;case E.ATTRIB_NAME:Q==="="?D.state=E.ATTRIB_VALUE:Q===">"?(J(D,"Attribute without value"),D.attribValue=D.attribName,me(D),ee(D)):b(Q)?D.state=E.ATTRIB_NAME_SAW_WHITE:k(f,Q)?D.attribName+=Q:J(D,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(Q==="=")D.state=E.ATTRIB_VALUE;else{if(b(Q))continue;J(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",A(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",Q===">"?ee(D):k(j,Q)?(D.attribName=Q,D.state=E.ATTRIB_NAME):(J(D,"Invalid attribute name"),D.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(b(Q))continue;I(Q)?(D.q=Q,D.state=E.ATTRIB_VALUE_QUOTED):(J(D,"Unquoted attribute value"),D.state=E.ATTRIB_VALUE_UNQUOTED,D.attribValue=Q);continue;case E.ATTRIB_VALUE_QUOTED:if(Q!==D.q){Q==="&"?D.state=E.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=Q;continue}me(D),D.q="",D.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:b(Q)?D.state=E.ATTRIB:Q===">"?ee(D):Q==="/"?D.state=E.OPEN_TAG_SLASH:k(j,Q)?(J(D,"No whitespace between attributes"),D.attribName=Q,D.attribValue="",D.state=E.ATTRIB_NAME):J(D,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!B(Q)){Q==="&"?D.state=E.ATTRIB_VALUE_ENTITY_U:D.attribValue+=Q;continue}me(D),Q===">"?ee(D):D.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(D.tagName)Q===">"?q(D):k(f,Q)?D.tagName+=Q:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=E.SCRIPT):(b(Q)||J(D,"Invalid tagname in closing tag"),D.state=E.CLOSE_TAG_SAW_WHITE);else{if(b(Q))continue;R(j,Q)?D.script?(D.script+="</"+Q,D.state=E.SCRIPT):J(D,"Invalid tagname in closing tag."):D.tagName=Q}continue;case E.CLOSE_TAG_SAW_WHITE:if(b(Q))continue;Q===">"?q(D):J(D,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var ce,N;switch(D.state){case E.TEXT_ENTITY:ce=E.TEXT,N="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:ce=E.ATTRIB_VALUE_QUOTED,N="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:ce=E.ATTRIB_VALUE_UNQUOTED,N="attribValue";break}Q===";"?(D[N]+=ne(D),D.entity="",D.state=ce):k(D.entity.length?v:y,Q)?D.entity+=Q:(J(D,"Invalid character in entity name"),D[N]+="&"+D.entity+Q,D.entity="",D.state=ce);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&i(D),D}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var L=String.fromCharCode,D=Math.floor,Y=function(){var Q=16384,$=[],H,ce,N=-1,ue=arguments.length;if(!ue)return"";for(var F="";++N<ue;){var p=Number(arguments[N]);if(!isFinite(p)||p<0||p>1114111||D(p)!==p)throw RangeError("Invalid code point: "+p);p<=65535?$.push(p):(p-=65536,H=(p>>10)+55296,ce=p%1024+56320,$.push(H,ce)),(N+1===ue||$.length>Q)&&(F+=L.apply(null,$),$.length=0)}return F};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Y,configurable:!0,writable:!0}):String.fromCodePoint=Y}()})(t)}(Lh)),Lh}var Zf,dw;function U0(){return dw||(dw=1,Zf={isArray:function(t){return Array.isArray?Array.isArray(t):Object.prototype.toString.call(t)==="[object Array]"}}),Zf}var ep,hw;function B0(){if(hw)return ep;hw=1;var t=U0().isArray;return ep={copyOptions:function(e){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n},ensureFlagExists:function(e,r){(!(e in r)||typeof r[e]!="boolean")&&(r[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!t(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,r){(!(e+"Key"in r)||typeof r[e+"Key"]!="string")&&(r[e+"Key"]=r.compact?"_"+e:e)},checkFnExists:function(e,r){return e+"Fn"in r}},ep}var tp,fw;function MS(){if(fw)return tp;fw=1;var t=K6(),e=B0(),r=U0().isArray,n,i;function s(f){return n=e.copyOptions(f),e.ensureFlagExists("ignoreDeclaration",n),e.ensureFlagExists("ignoreInstruction",n),e.ensureFlagExists("ignoreAttributes",n),e.ensureFlagExists("ignoreText",n),e.ensureFlagExists("ignoreComment",n),e.ensureFlagExists("ignoreCdata",n),e.ensureFlagExists("ignoreDoctype",n),e.ensureFlagExists("compact",n),e.ensureFlagExists("alwaysChildren",n),e.ensureFlagExists("addParent",n),e.ensureFlagExists("trim",n),e.ensureFlagExists("nativeType",n),e.ensureFlagExists("nativeTypeAttributes",n),e.ensureFlagExists("sanitize",n),e.ensureFlagExists("instructionHasAttributes",n),e.ensureFlagExists("captureSpacesBetweenElements",n),e.ensureAlwaysArrayExists(n),e.ensureKeyExists("declaration",n),e.ensureKeyExists("instruction",n),e.ensureKeyExists("attributes",n),e.ensureKeyExists("text",n),e.ensureKeyExists("comment",n),e.ensureKeyExists("cdata",n),e.ensureKeyExists("doctype",n),e.ensureKeyExists("type",n),e.ensureKeyExists("name",n),e.ensureKeyExists("elements",n),e.ensureKeyExists("parent",n),e.checkFnExists("doctype",n),e.checkFnExists("instruction",n),e.checkFnExists("cdata",n),e.checkFnExists("comment",n),e.checkFnExists("text",n),e.checkFnExists("instructionName",n),e.checkFnExists("elementName",n),e.checkFnExists("attributeName",n),e.checkFnExists("attributeValue",n),e.checkFnExists("attributes",n),n}function o(f){var y=Number(f);if(!isNaN(y))return y;var v=f.toLowerCase();return v==="true"?!0:v==="false"?!1:f}function a(f,y){var v;if(n.compact){if(!i[n[f+"Key"]]&&(r(n.alwaysArray)?n.alwaysArray.indexOf(n[f+"Key"])!==-1:n.alwaysArray)&&(i[n[f+"Key"]]=[]),i[n[f+"Key"]]&&!r(i[n[f+"Key"]])&&(i[n[f+"Key"]]=[i[n[f+"Key"]]]),f+"Fn"in n&&typeof y=="string"&&(y=n[f+"Fn"](y,i)),f==="instruction"&&("instructionFn"in n||"instructionNameFn"in n)){for(v in y)if(y.hasOwnProperty(v))if("instructionFn"in n)y[v]=n.instructionFn(y[v],v,i);else{var b=y[v];delete y[v],y[n.instructionNameFn(v,b,i)]=b}}r(i[n[f+"Key"]])?i[n[f+"Key"]].push(y):i[n[f+"Key"]]=y}else{i[n.elementsKey]||(i[n.elementsKey]=[]);var I={};if(I[n.typeKey]=f,f==="instruction"){for(v in y)if(y.hasOwnProperty(v))break;I[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(v,y,i):v,n.instructionHasAttributes?(I[n.attributesKey]=y[v][n.attributesKey],"instructionFn"in n&&(I[n.attributesKey]=n.instructionFn(I[n.attributesKey],v,i))):("instructionFn"in n&&(y[v]=n.instructionFn(y[v],v,i)),I[n.instructionKey]=y[v])}else f+"Fn"in n&&(y=n[f+"Fn"](y,i)),I[n[f+"Key"]]=y;n.addParent&&(I[n.parentKey]=i),i[n.elementsKey].push(I)}}function l(f){if("attributesFn"in n&&f&&(f=n.attributesFn(f,i)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&f){var y;for(y in f)if(f.hasOwnProperty(y)&&(n.trim&&(f[y]=f[y].trim()),n.nativeTypeAttributes&&(f[y]=o(f[y])),"attributeValueFn"in n&&(f[y]=n.attributeValueFn(f[y],y,i)),"attributeNameFn"in n)){var v=f[y];delete f[y],f[n.attributeNameFn(y,f[y],i)]=v}}return f}function c(f){var y={};if(f.body&&(f.name.toLowerCase()==="xml"||n.instructionHasAttributes)){for(var v=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,b;(b=v.exec(f.body))!==null;)y[b[1]]=b[2]||b[3]||b[4];y=l(y)}if(f.name.toLowerCase()==="xml"){if(n.ignoreDeclaration)return;i[n.declarationKey]={},Object.keys(y).length&&(i[n.declarationKey][n.attributesKey]=y),n.addParent&&(i[n.declarationKey][n.parentKey]=i)}else{if(n.ignoreInstruction)return;n.trim&&(f.body=f.body.trim());var I={};n.instructionHasAttributes&&Object.keys(y).length?(I[f.name]={},I[f.name][n.attributesKey]=y):I[f.name]=f.body,a("instruction",I)}}function h(f,y){var v;if(typeof f=="object"&&(y=f.attributes,f=f.name),y=l(y),"elementNameFn"in n&&(f=n.elementNameFn(f,i)),n.compact){if(v={},!n.ignoreAttributes&&y&&Object.keys(y).length){v[n.attributesKey]={};var b;for(b in y)y.hasOwnProperty(b)&&(v[n.attributesKey][b]=y[b])}!(f in i)&&(r(n.alwaysArray)?n.alwaysArray.indexOf(f)!==-1:n.alwaysArray)&&(i[f]=[]),i[f]&&!r(i[f])&&(i[f]=[i[f]]),r(i[f])?i[f].push(v):i[f]=v}else i[n.elementsKey]||(i[n.elementsKey]=[]),v={},v[n.typeKey]="element",v[n.nameKey]=f,!n.ignoreAttributes&&y&&Object.keys(y).length&&(v[n.attributesKey]=y),n.alwaysChildren&&(v[n.elementsKey]=[]),i[n.elementsKey].push(v);v[n.parentKey]=i,i=v}function g(f){n.ignoreText||!f.trim()&&!n.captureSpacesBetweenElements||(n.trim&&(f=f.trim()),n.nativeType&&(f=o(f)),n.sanitize&&(f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a("text",f))}function w(f){n.ignoreComment||(n.trim&&(f=f.trim()),a("comment",f))}function _(f){var y=i[n.parentKey];n.addParent||delete i[n.parentKey],i=y}function T(f){n.ignoreCdata||(n.trim&&(f=f.trim()),a("cdata",f))}function x(f){n.ignoreDoctype||(f=f.replace(/^ /,""),n.trim&&(f=f.trim()),a("doctype",f))}function j(f){f.note=f}return tp=function(f,y){var v=t.parser(!0,{}),b={};if(i=b,n=s(y),v.opt={strictEntities:!0},v.onopentag=h,v.ontext=g,v.oncomment=w,v.onclosetag=_,v.onerror=j,v.oncdata=T,v.ondoctype=x,v.onprocessinginstruction=c,v.write(f).close(),b[n.elementsKey]){var I=b[n.elementsKey];delete b[n.elementsKey],b[n.elementsKey]=I,delete b.text}return b},tp}var rp,pw;function G6(){if(pw)return rp;pw=1;var t=B0(),e=MS();function r(n){var i=t.copyOptions(n);return t.ensureSpacesExists(i),i}return rp=function(n,i){var s,o,a,l;return s=r(i),o=e(n,s),l="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?a=JSON.stringify(o,function(c,h){return c===l?"_":h},s.spaces):a=JSON.stringify(o,null,s.spaces),a.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},rp}var np,mw;function FS(){if(mw)return np;mw=1;var t=B0(),e=U0().isArray,r,n;function i(v){var b=t.copyOptions(v);return t.ensureFlagExists("ignoreDeclaration",b),t.ensureFlagExists("ignoreInstruction",b),t.ensureFlagExists("ignoreAttributes",b),t.ensureFlagExists("ignoreText",b),t.ensureFlagExists("ignoreComment",b),t.ensureFlagExists("ignoreCdata",b),t.ensureFlagExists("ignoreDoctype",b),t.ensureFlagExists("compact",b),t.ensureFlagExists("indentText",b),t.ensureFlagExists("indentCdata",b),t.ensureFlagExists("indentAttributes",b),t.ensureFlagExists("indentInstruction",b),t.ensureFlagExists("fullTagEmptyElement",b),t.ensureFlagExists("noQuotesForNativeAttributes",b),t.ensureSpacesExists(b),typeof b.spaces=="number"&&(b.spaces=Array(b.spaces+1).join(" ")),t.ensureKeyExists("declaration",b),t.ensureKeyExists("instruction",b),t.ensureKeyExists("attributes",b),t.ensureKeyExists("text",b),t.ensureKeyExists("comment",b),t.ensureKeyExists("cdata",b),t.ensureKeyExists("doctype",b),t.ensureKeyExists("type",b),t.ensureKeyExists("name",b),t.ensureKeyExists("elements",b),t.checkFnExists("doctype",b),t.checkFnExists("instruction",b),t.checkFnExists("cdata",b),t.checkFnExists("comment",b),t.checkFnExists("text",b),t.checkFnExists("instructionName",b),t.checkFnExists("elementName",b),t.checkFnExists("attributeName",b),t.checkFnExists("attributeValue",b),t.checkFnExists("attributes",b),t.checkFnExists("fullTagEmptyElement",b),b}function s(v,b,I){return(!I&&v.spaces?`
`:"")+Array(b+1).join(v.spaces)}function o(v,b,I){if(b.ignoreAttributes)return"";"attributesFn"in b&&(v=b.attributesFn(v,n,r));var B,k,R,E,U=[];for(B in v)v.hasOwnProperty(B)&&v[B]!==null&&v[B]!==void 0&&(E=b.noQuotesForNativeAttributes&&typeof v[B]!="string"?"":'"',k=""+v[B],k=k.replace(/"/g,"&quot;"),R="attributeNameFn"in b?b.attributeNameFn(B,k,n,r):B,U.push(b.spaces&&b.indentAttributes?s(b,I+1,!1):" "),U.push(R+"="+E+("attributeValueFn"in b?b.attributeValueFn(k,B,n,r):k)+E));return v&&Object.keys(v).length&&b.spaces&&b.indentAttributes&&U.push(s(b,I,!1)),U.join("")}function a(v,b,I){return r=v,n="xml",b.ignoreDeclaration?"":"<?xml"+o(v[b.attributesKey],b,I)+"?>"}function l(v,b,I){if(b.ignoreInstruction)return"";var B;for(B in v)if(v.hasOwnProperty(B))break;var k="instructionNameFn"in b?b.instructionNameFn(B,v[B],n,r):B;if(typeof v[B]=="object")return r=v,n=k,"<?"+k+o(v[B][b.attributesKey],b,I)+"?>";var R=v[B]?v[B]:"";return"instructionFn"in b&&(R=b.instructionFn(R,B,n,r)),"<?"+k+(R?" "+R:"")+"?>"}function c(v,b){return b.ignoreComment?"":"<!--"+("commentFn"in b?b.commentFn(v,n,r):v)+"-->"}function h(v,b){return b.ignoreCdata?"":"<![CDATA["+("cdataFn"in b?b.cdataFn(v,n,r):v.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function g(v,b){return b.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in b?b.doctypeFn(v,n,r):v)+">"}function w(v,b){return b.ignoreText?"":(v=""+v,v=v.replace(/&amp;/g,"&"),v=v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in b?b.textFn(v,n,r):v)}function _(v,b){var I;if(v.elements&&v.elements.length)for(I=0;I<v.elements.length;++I)switch(v.elements[I][b.typeKey]){case"text":if(b.indentText)return!0;break;case"cdata":if(b.indentCdata)return!0;break;case"instruction":if(b.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function T(v,b,I){r=v,n=v.name;var B=[],k="elementNameFn"in b?b.elementNameFn(v.name,v):v.name;B.push("<"+k),v[b.attributesKey]&&B.push(o(v[b.attributesKey],b,I));var R=v[b.elementsKey]&&v[b.elementsKey].length||v[b.attributesKey]&&v[b.attributesKey]["xml:space"]==="preserve";return R||("fullTagEmptyElementFn"in b?R=b.fullTagEmptyElementFn(v.name,v):R=b.fullTagEmptyElement),R?(B.push(">"),v[b.elementsKey]&&v[b.elementsKey].length&&(B.push(x(v[b.elementsKey],b,I+1)),r=v,n=v.name),B.push(b.spaces&&_(v,b)?`
`+Array(I+1).join(b.spaces):""),B.push("</"+k+">")):B.push("/>"),B.join("")}function x(v,b,I,B){return v.reduce(function(k,R){var E=s(b,I,B&&!k);switch(R.type){case"element":return k+E+T(R,b,I);case"comment":return k+E+c(R[b.commentKey],b);case"doctype":return k+E+g(R[b.doctypeKey],b);case"cdata":return k+(b.indentCdata?E:"")+h(R[b.cdataKey],b);case"text":return k+(b.indentText?E:"")+w(R[b.textKey],b);case"instruction":var U={};return U[R[b.nameKey]]=R[b.attributesKey]?R:R[b.instructionKey],k+(b.indentInstruction?E:"")+l(U,b,I)}},"")}function j(v,b,I){var B;for(B in v)if(v.hasOwnProperty(B))switch(B){case b.parentKey:case b.attributesKey:break;case b.textKey:if(b.indentText||I)return!0;break;case b.cdataKey:if(b.indentCdata||I)return!0;break;case b.instructionKey:if(b.indentInstruction||I)return!0;break;case b.doctypeKey:case b.commentKey:return!0;default:return!0}return!1}function f(v,b,I,B,k){r=v,n=b;var R="elementNameFn"in I?I.elementNameFn(b,v):b;if(typeof v>"u"||v===null||v==="")return"fullTagEmptyElementFn"in I&&I.fullTagEmptyElementFn(b,v)||I.fullTagEmptyElement?"<"+R+"></"+R+">":"<"+R+"/>";var E=[];if(b){if(E.push("<"+R),typeof v!="object")return E.push(">"+w(v,I)+"</"+R+">"),E.join("");v[I.attributesKey]&&E.push(o(v[I.attributesKey],I,B));var U=j(v,I,!0)||v[I.attributesKey]&&v[I.attributesKey]["xml:space"]==="preserve";if(U||("fullTagEmptyElementFn"in I?U=I.fullTagEmptyElementFn(b,v):U=I.fullTagEmptyElement),U)E.push(">");else return E.push("/>"),E.join("")}return E.push(y(v,I,B+1,!1)),r=v,n=b,b&&E.push((k?s(I,B,!1):"")+"</"+R+">"),E.join("")}function y(v,b,I,B){var k,R,E,U=[];for(R in v)if(v.hasOwnProperty(R))for(E=e(v[R])?v[R]:[v[R]],k=0;k<E.length;++k){switch(R){case b.declarationKey:U.push(a(E[k],b,I));break;case b.instructionKey:U.push((b.indentInstruction?s(b,I,B):"")+l(E[k],b,I));break;case b.attributesKey:case b.parentKey:break;case b.textKey:U.push((b.indentText?s(b,I,B):"")+w(E[k],b));break;case b.cdataKey:U.push((b.indentCdata?s(b,I,B):"")+h(E[k],b));break;case b.doctypeKey:U.push(s(b,I,B)+g(E[k],b));break;case b.commentKey:U.push(s(b,I,B)+c(E[k],b));break;default:U.push(s(b,I,B)+f(E[k],R,b,I,j(E[k],b)))}B=B&&!U.length}return U.join("")}return np=function(v,b){b=i(b);var I=[];return r=v,n="_root_",b.compact?I.push(y(v,b,0,!0)):(v[b.declarationKey]&&I.push(a(v[b.declarationKey],b,0)),v[b.elementsKey]&&v[b.elementsKey].length&&I.push(x(v[b.elementsKey],b,0,!I.length))),I.join("")},np}var ip,gw;function Q6(){if(gw)return ip;gw=1;var t=FS();return ip=function(e,r){e instanceof Buffer&&(e=e.toString());var n=null;if(typeof e=="string")try{n=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else n=e;return t(n,r)},ip}var sp,yw;function X6(){if(yw)return sp;yw=1;var t=MS(),e=G6(),r=FS(),n=Q6();return sp={xml2js:t,xml2json:e,js2xml:r,json2xml:n},sp}X6();const Y6=t=>{if(isNaN(t))throw new Error(`Invalid value '${t}' specified. Must be an integer.`);return Math.floor(t)},VS=t=>{const e=Y6(t);if(e<0)throw new Error(`Invalid value '${t}' specified. Must be a positive integer.`);return e},J6=(t,e)=>{const r=e*2;if(t.length!==r||isNaN(+`0x${t}`))throw new Error(`Invalid hex value '${t}'. Expected ${r} digit hex value`);return t},Z6=t=>{if(t==="auto")return t;const e=t.charAt(0)==="#"?t.substring(1):t;return J6(e,3)},e3=VS,t3=VS;class jr extends mS{constructor(e,{color:r,size:n,space:i,style:s}){super(e),this.root.push(new r3({style:s,color:r===void 0?void 0:Z6(r),size:n===void 0?void 0:e3(n),space:i===void 0?void 0:t3(i)}))}}class r3 extends Z5{constructor(){super(...arguments),Gn(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const US={SINGLE:"single",NONE:"none"};var op={},ot={},ap,vw;function ql(){if(vw)return ap;vw=1,ap=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},ap}var _w;function kn(){if(_w)return ot;_w=1;var t=ql(),e=Ji();ot.inherits=e;function r(A,M){return(A.charCodeAt(M)&64512)!==55296||M<0||M+1>=A.length?!1:(A.charCodeAt(M+1)&64512)===56320}function n(A,M){if(Array.isArray(A))return A.slice();if(!A)return[];var P=[];if(typeof A=="string")if(M){if(M==="hex")for(A=A.replace(/[^a-z0-9]+/ig,""),A.length%2!==0&&(A="0"+A),de=0;de<A.length;de+=2)P.push(parseInt(A[de]+A[de+1],16))}else for(var te=0,de=0;de<A.length;de++){var J=A.charCodeAt(de);J<128?P[te++]=J:J<2048?(P[te++]=J>>6|192,P[te++]=J&63|128):r(A,de)?(J=65536+((J&1023)<<10)+(A.charCodeAt(++de)&1023),P[te++]=J>>18|240,P[te++]=J>>12&63|128,P[te++]=J>>6&63|128,P[te++]=J&63|128):(P[te++]=J>>12|224,P[te++]=J>>6&63|128,P[te++]=J&63|128)}else for(de=0;de<A.length;de++)P[de]=A[de]|0;return P}ot.toArray=n;function i(A){for(var M="",P=0;P<A.length;P++)M+=a(A[P].toString(16));return M}ot.toHex=i;function s(A){var M=A>>>24|A>>>8&65280|A<<8&16711680|(A&255)<<24;return M>>>0}ot.htonl=s;function o(A,M){for(var P="",te=0;te<A.length;te++){var de=A[te];M==="little"&&(de=s(de)),P+=l(de.toString(16))}return P}ot.toHex32=o;function a(A){return A.length===1?"0"+A:A}ot.zero2=a;function l(A){return A.length===7?"0"+A:A.length===6?"00"+A:A.length===5?"000"+A:A.length===4?"0000"+A:A.length===3?"00000"+A:A.length===2?"000000"+A:A.length===1?"0000000"+A:A}ot.zero8=l;function c(A,M,P,te){var de=P-M;t(de%4===0);for(var J=new Array(de/4),ie=0,se=M;ie<J.length;ie++,se+=4){var me;te==="big"?me=A[se]<<24|A[se+1]<<16|A[se+2]<<8|A[se+3]:me=A[se+3]<<24|A[se+2]<<16|A[se+1]<<8|A[se],J[ie]=me>>>0}return J}ot.join32=c;function h(A,M){for(var P=new Array(A.length*4),te=0,de=0;te<A.length;te++,de+=4){var J=A[te];M==="big"?(P[de]=J>>>24,P[de+1]=J>>>16&255,P[de+2]=J>>>8&255,P[de+3]=J&255):(P[de+3]=J>>>24,P[de+2]=J>>>16&255,P[de+1]=J>>>8&255,P[de]=J&255)}return P}ot.split32=h;function g(A,M){return A>>>M|A<<32-M}ot.rotr32=g;function w(A,M){return A<<M|A>>>32-M}ot.rotl32=w;function _(A,M){return A+M>>>0}ot.sum32=_;function T(A,M,P){return A+M+P>>>0}ot.sum32_3=T;function x(A,M,P,te){return A+M+P+te>>>0}ot.sum32_4=x;function j(A,M,P,te,de){return A+M+P+te+de>>>0}ot.sum32_5=j;function f(A,M,P,te){var de=A[M],J=A[M+1],ie=te+J>>>0,se=(ie<te?1:0)+P+de;A[M]=se>>>0,A[M+1]=ie}ot.sum64=f;function y(A,M,P,te){var de=M+te>>>0,J=(de<M?1:0)+A+P;return J>>>0}ot.sum64_hi=y;function v(A,M,P,te){var de=M+te;return de>>>0}ot.sum64_lo=v;function b(A,M,P,te,de,J,ie,se){var me=0,ee=M;ee=ee+te>>>0,me+=ee<M?1:0,ee=ee+J>>>0,me+=ee<J?1:0,ee=ee+se>>>0,me+=ee<se?1:0;var q=A+P+de+ie+me;return q>>>0}ot.sum64_4_hi=b;function I(A,M,P,te,de,J,ie,se){var me=M+te+J+se;return me>>>0}ot.sum64_4_lo=I;function B(A,M,P,te,de,J,ie,se,me,ee){var q=0,ne=M;ne=ne+te>>>0,q+=ne<M?1:0,ne=ne+J>>>0,q+=ne<J?1:0,ne=ne+se>>>0,q+=ne<se?1:0,ne=ne+ee>>>0,q+=ne<ee?1:0;var oe=A+P+de+ie+me+q;return oe>>>0}ot.sum64_5_hi=B;function k(A,M,P,te,de,J,ie,se,me,ee){var q=M+te+J+se+ee;return q>>>0}ot.sum64_5_lo=k;function R(A,M,P){var te=M<<32-P|A>>>P;return te>>>0}ot.rotr64_hi=R;function E(A,M,P){var te=A<<32-P|M>>>P;return te>>>0}ot.rotr64_lo=E;function U(A,M,P){return A>>>P}ot.shr64_hi=U;function W(A,M,P){var te=A<<32-P|M>>>P;return te>>>0}return ot.shr64_lo=W,ot}var lp={},ww;function $l(){if(ww)return lp;ww=1;var t=kn(),e=ql();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return lp.BlockHash=r,r.prototype.update=function(i,s){if(i=t.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var o=i.length%this._delta8;this.pending=i.slice(i.length-o,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-o,this.endian);for(var a=0;a<i.length;a+=this._delta32)this._update(i,a,a+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,o=s-(i+this.padLength)%s,a=new Array(o+this.padLength);a[0]=128;for(var l=1;l<o;l++)a[l]=0;if(i<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)a[l++]=0;a[l++]=0,a[l++]=0,a[l++]=0,a[l++]=0,a[l++]=i>>>24&255,a[l++]=i>>>16&255,a[l++]=i>>>8&255,a[l++]=i&255}else for(a[l++]=i&255,a[l++]=i>>>8&255,a[l++]=i>>>16&255,a[l++]=i>>>24&255,a[l++]=0,a[l++]=0,a[l++]=0,a[l++]=0,c=8;c<this.padLength;c++)a[l++]=0;return a},lp}var os={},dn={},bw;function BS(){if(bw)return dn;bw=1;var t=kn(),e=t.rotr32;function r(h,g,w,_){if(h===0)return n(g,w,_);if(h===1||h===3)return s(g,w,_);if(h===2)return i(g,w,_)}dn.ft_1=r;function n(h,g,w){return h&g^~h&w}dn.ch32=n;function i(h,g,w){return h&g^h&w^g&w}dn.maj32=i;function s(h,g,w){return h^g^w}dn.p32=s;function o(h){return e(h,2)^e(h,13)^e(h,22)}dn.s0_256=o;function a(h){return e(h,6)^e(h,11)^e(h,25)}dn.s1_256=a;function l(h){return e(h,7)^e(h,18)^h>>>3}dn.g0_256=l;function c(h){return e(h,17)^e(h,19)^h>>>10}return dn.g1_256=c,dn}var up,xw;function n3(){if(xw)return up;xw=1;var t=kn(),e=$l(),r=BS(),n=t.rotl32,i=t.sum32,s=t.sum32_5,o=r.ft_1,a=e.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(c,a),up=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(g,w){for(var _=this.W,T=0;T<16;T++)_[T]=g[w+T];for(;T<_.length;T++)_[T]=n(_[T-3]^_[T-8]^_[T-14]^_[T-16],1);var x=this.h[0],j=this.h[1],f=this.h[2],y=this.h[3],v=this.h[4];for(T=0;T<_.length;T++){var b=~~(T/20),I=s(n(x,5),o(b,j,f,y),v,_[T],l[b]);v=y,y=f,f=n(j,30),j=x,x=I}this.h[0]=i(this.h[0],x),this.h[1]=i(this.h[1],j),this.h[2]=i(this.h[2],f),this.h[3]=i(this.h[3],y),this.h[4]=i(this.h[4],v)},c.prototype._digest=function(g){return g==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},up}var cp,Ew;function zS(){if(Ew)return cp;Ew=1;var t=kn(),e=$l(),r=BS(),n=ql(),i=t.sum32,s=t.sum32_4,o=t.sum32_5,a=r.ch32,l=r.maj32,c=r.s0_256,h=r.s1_256,g=r.g0_256,w=r.g1_256,_=e.BlockHash,T=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function x(){if(!(this instanceof x))return new x;_.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=T,this.W=new Array(64)}return t.inherits(x,_),cp=x,x.blockSize=512,x.outSize=256,x.hmacStrength=192,x.padLength=64,x.prototype._update=function(f,y){for(var v=this.W,b=0;b<16;b++)v[b]=f[y+b];for(;b<v.length;b++)v[b]=s(w(v[b-2]),v[b-7],g(v[b-15]),v[b-16]);var I=this.h[0],B=this.h[1],k=this.h[2],R=this.h[3],E=this.h[4],U=this.h[5],W=this.h[6],A=this.h[7];for(n(this.k.length===v.length),b=0;b<v.length;b++){var M=o(A,h(E),a(E,U,W),this.k[b],v[b]),P=i(c(I),l(I,B,k));A=W,W=U,U=E,E=i(R,M),R=k,k=B,B=I,I=i(M,P)}this.h[0]=i(this.h[0],I),this.h[1]=i(this.h[1],B),this.h[2]=i(this.h[2],k),this.h[3]=i(this.h[3],R),this.h[4]=i(this.h[4],E),this.h[5]=i(this.h[5],U),this.h[6]=i(this.h[6],W),this.h[7]=i(this.h[7],A)},x.prototype._digest=function(f){return f==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},cp}var dp,Tw;function i3(){if(Tw)return dp;Tw=1;var t=kn(),e=zS();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),dp=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},dp}var hp,Sw;function qS(){if(Sw)return hp;Sw=1;var t=kn(),e=$l(),r=ql(),n=t.rotr64_hi,i=t.rotr64_lo,s=t.shr64_hi,o=t.shr64_lo,a=t.sum64,l=t.sum64_hi,c=t.sum64_lo,h=t.sum64_4_hi,g=t.sum64_4_lo,w=t.sum64_5_hi,_=t.sum64_5_lo,T=e.BlockHash,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function j(){if(!(this instanceof j))return new j;T.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=x,this.W=new Array(160)}t.inherits(j,T),hp=j,j.blockSize=1024,j.outSize=512,j.hmacStrength=192,j.padLength=128,j.prototype._prepareBlock=function(P,te){for(var de=this.W,J=0;J<32;J++)de[J]=P[te+J];for(;J<de.length;J+=2){var ie=W(de[J-4],de[J-3]),se=A(de[J-4],de[J-3]),me=de[J-14],ee=de[J-13],q=E(de[J-30],de[J-29]),ne=U(de[J-30],de[J-29]),oe=de[J-32],fe=de[J-31];de[J]=h(ie,se,me,ee,q,ne,oe,fe),de[J+1]=g(ie,se,me,ee,q,ne,oe,fe)}},j.prototype._update=function(P,te){this._prepareBlock(P,te);var de=this.W,J=this.h[0],ie=this.h[1],se=this.h[2],me=this.h[3],ee=this.h[4],q=this.h[5],ne=this.h[6],oe=this.h[7],fe=this.h[8],re=this.h[9],L=this.h[10],D=this.h[11],Y=this.h[12],Q=this.h[13],$=this.h[14],H=this.h[15];r(this.k.length===de.length);for(var ce=0;ce<de.length;ce+=2){var N=$,ue=H,F=k(fe,re),p=R(fe,re),m=f(fe,re,L,D,Y),C=y(fe,re,L,D,Y,Q),G=this.k[ce],Z=this.k[ce+1],X=de[ce],pe=de[ce+1],ve=w(N,ue,F,p,m,C,G,Z,X,pe),ye=_(N,ue,F,p,m,C,G,Z,X,pe);N=I(J,ie),ue=B(J,ie),F=v(J,ie,se,me,ee),p=b(J,ie,se,me,ee,q);var Te=l(N,ue,F,p),Ae=c(N,ue,F,p);$=Y,H=Q,Y=L,Q=D,L=fe,D=re,fe=l(ne,oe,ve,ye),re=c(oe,oe,ve,ye),ne=ee,oe=q,ee=se,q=me,se=J,me=ie,J=l(ve,ye,Te,Ae),ie=c(ve,ye,Te,Ae)}a(this.h,0,J,ie),a(this.h,2,se,me),a(this.h,4,ee,q),a(this.h,6,ne,oe),a(this.h,8,fe,re),a(this.h,10,L,D),a(this.h,12,Y,Q),a(this.h,14,$,H)},j.prototype._digest=function(P){return P==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function f(M,P,te,de,J){var ie=M&te^~M&J;return ie<0&&(ie+=4294967296),ie}function y(M,P,te,de,J,ie){var se=P&de^~P&ie;return se<0&&(se+=4294967296),se}function v(M,P,te,de,J){var ie=M&te^M&J^te&J;return ie<0&&(ie+=4294967296),ie}function b(M,P,te,de,J,ie){var se=P&de^P&ie^de&ie;return se<0&&(se+=4294967296),se}function I(M,P){var te=n(M,P,28),de=n(P,M,2),J=n(P,M,7),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}function B(M,P){var te=i(M,P,28),de=i(P,M,2),J=i(P,M,7),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}function k(M,P){var te=n(M,P,14),de=n(M,P,18),J=n(P,M,9),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}function R(M,P){var te=i(M,P,14),de=i(M,P,18),J=i(P,M,9),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}function E(M,P){var te=n(M,P,1),de=n(M,P,8),J=s(M,P,7),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}function U(M,P){var te=i(M,P,1),de=i(M,P,8),J=o(M,P,7),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}function W(M,P){var te=n(M,P,19),de=n(P,M,29),J=s(M,P,6),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}function A(M,P){var te=i(M,P,19),de=i(P,M,29),J=o(M,P,6),ie=te^de^J;return ie<0&&(ie+=4294967296),ie}return hp}var fp,Aw;function s3(){if(Aw)return fp;Aw=1;var t=kn(),e=qS();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),fp=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},fp}var Iw;function o3(){return Iw||(Iw=1,os.sha1=n3(),os.sha224=i3(),os.sha256=zS(),os.sha384=s3(),os.sha512=qS()),os}var pp={},Nw;function a3(){if(Nw)return pp;Nw=1;var t=kn(),e=$l(),r=t.rotl32,n=t.sum32,i=t.sum32_3,s=t.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(a,o),pp.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(j,f){for(var y=this.h[0],v=this.h[1],b=this.h[2],I=this.h[3],B=this.h[4],k=y,R=v,E=b,U=I,W=B,A=0;A<80;A++){var M=n(r(s(y,l(A,v,b,I),j[g[A]+f],c(A)),_[A]),B);y=B,B=I,I=r(b,10),b=v,v=M,M=n(r(s(k,l(79-A,R,E,U),j[w[A]+f],h(A)),T[A]),W),k=W,W=U,U=r(E,10),E=R,R=M}M=i(this.h[1],b,U),this.h[1]=i(this.h[2],I,W),this.h[2]=i(this.h[3],B,k),this.h[3]=i(this.h[4],y,R),this.h[4]=i(this.h[0],v,E),this.h[0]=M},a.prototype._digest=function(j){return j==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function l(x,j,f,y){return x<=15?j^f^y:x<=31?j&f|~j&y:x<=47?(j|~f)^y:x<=63?j&y|f&~y:j^(f|~y)}function c(x){return x<=15?0:x<=31?1518500249:x<=47?1859775393:x<=63?2400959708:2840853838}function h(x){return x<=15?1352829926:x<=31?1548603684:x<=47?1836072691:x<=63?2053994217:0}var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],w=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],T=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return pp}var mp,kw;function l3(){if(kw)return mp;kw=1;var t=kn(),e=ql();function r(n,i,s){if(!(this instanceof r))return new r(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,s))}return mp=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},mp}var Cw;function u3(){return Cw||(Cw=1,function(t){var e=t;e.utils=kn(),e.common=$l(),e.sha=o3(),e.ripemd=a3(),e.hmac=l3(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(op)),op}u3();const c3={TOP:"top",CENTER:"center",BOTTOM:"bottom"};X5(Q5({},c3),{BOTH:"both"});const Xs={style:US.NONE,size:0,color:"auto"},Ys={style:US.SINGLE,size:4,color:"auto"};class d3 extends mS{constructor(e){super("w:tblBorders"),e.top?this.root.push(new jr("w:top",e.top)):this.root.push(new jr("w:top",Ys)),e.left?this.root.push(new jr("w:left",e.left)):this.root.push(new jr("w:left",Ys)),e.bottom?this.root.push(new jr("w:bottom",e.bottom)):this.root.push(new jr("w:bottom",Ys)),e.right?this.root.push(new jr("w:right",e.right)):this.root.push(new jr("w:right",Ys)),e.insideHorizontal?this.root.push(new jr("w:insideH",e.insideHorizontal)):this.root.push(new jr("w:insideH",Ys)),e.insideVertical?this.root.push(new jr("w:insideV",e.insideVertical)):this.root.push(new jr("w:insideV",Ys))}}Gn(d3,"NONE",{top:Xs,bottom:Xs,left:Xs,right:Xs,insideHorizontal:Xs,insideVertical:Xs});var h3=V0();function Mu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gp={exports:{}},Rw;function f3(){return Rw||(Rw=1,function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function o(c,h){if(!i[c]){if(!n[c]){var g=typeof Mu=="function"&&Mu;if(!h&&g)return g(c,!0);if(a)return a(c,!0);var w=new Error("Cannot find module '"+c+"'");throw w.code="MODULE_NOT_FOUND",w}var _=i[c]={exports:{}};n[c][0].call(_.exports,function(T){var x=n[c][1][T];return o(x||T)},_,_.exports,r,n,i,s)}return i[c].exports}for(var a=typeof Mu=="function"&&Mu,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(r,n,i){var s=r("./utils"),o=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,h,g,w,_,T,x,j=[],f=0,y=l.length,v=y,b=s.getTypeOf(l)!=="string";f<l.length;)v=y-f,g=b?(c=l[f++],h=f<y?l[f++]:0,f<y?l[f++]:0):(c=l.charCodeAt(f++),h=f<y?l.charCodeAt(f++):0,f<y?l.charCodeAt(f++):0),w=c>>2,_=(3&c)<<4|h>>4,T=1<v?(15&h)<<2|g>>6:64,x=2<v?63&g:64,j.push(a.charAt(w)+a.charAt(_)+a.charAt(T)+a.charAt(x));return j.join("")},i.decode=function(l){var c,h,g,w,_,T,x=0,j=0,f="data:";if(l.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var y,v=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&v--,l.charAt(l.length-2)===a.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|v):new Array(0|v);x<l.length;)c=a.indexOf(l.charAt(x++))<<2|(w=a.indexOf(l.charAt(x++)))>>4,h=(15&w)<<4|(_=a.indexOf(l.charAt(x++)))>>2,g=(3&_)<<6|(T=a.indexOf(l.charAt(x++))),y[j++]=c,_!==64&&(y[j++]=h),T!==64&&(y[j++]=g);return y}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),o=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function c(h,g,w,_,T){this.compressedSize=h,this.uncompressedSize=g,this.crc32=w,this.compression=_,this.compressedContent=T}c.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),g=this;return h.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(h,g,w){return h.pipe(new a).pipe(new l("uncompressedSize")).pipe(g.compressWorker(w)).pipe(new l("compressedSize")).withStreamInfo("compression",g)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,h,g,w){var _=o,T=w+g;c^=-1;for(var x=w;x<T;x++)c=c>>>8^_[255&(c^h[x])];return-1^c}(0|l,a,a.length,0):function(c,h,g,w){var _=o,T=w+g;c^=-1;for(var x=w;x<T;x++)c=c>>>8^_[255&(c^h.charCodeAt(x))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),a=r("./utils"),l=r("./stream/GenericWorker"),c=s?"uint8array":"array";function h(g,w){l.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=w,this.meta={}}i.magic="\b\0",a.inherits(h,l),h.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,g.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(w){g.push({data:w,meta:g.meta})}},i.compressWorker=function(g){return new h("Deflate",g)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(_,T){var x,j="";for(x=0;x<T;x++)j+=String.fromCharCode(255&_),_>>>=8;return j}function o(_,T,x,j,f,y){var v,b,I=_.file,B=_.compression,k=y!==c.utf8encode,R=a.transformTo("string",y(I.name)),E=a.transformTo("string",c.utf8encode(I.name)),U=I.comment,W=a.transformTo("string",y(U)),A=a.transformTo("string",c.utf8encode(U)),M=E.length!==I.name.length,P=A.length!==U.length,te="",de="",J="",ie=I.dir,se=I.date,me={crc32:0,compressedSize:0,uncompressedSize:0};T&&!x||(me.crc32=_.crc32,me.compressedSize=_.compressedSize,me.uncompressedSize=_.uncompressedSize);var ee=0;T&&(ee|=8),k||!M&&!P||(ee|=2048);var q=0,ne=0;ie&&(q|=16),f==="UNIX"?(ne=798,q|=function(fe,re){var L=fe;return fe||(L=re?16893:33204),(65535&L)<<16}(I.unixPermissions,ie)):(ne=20,q|=function(fe){return 63&(fe||0)}(I.dosPermissions)),v=se.getUTCHours(),v<<=6,v|=se.getUTCMinutes(),v<<=5,v|=se.getUTCSeconds()/2,b=se.getUTCFullYear()-1980,b<<=4,b|=se.getUTCMonth()+1,b<<=5,b|=se.getUTCDate(),M&&(de=s(1,1)+s(h(R),4)+E,te+="up"+s(de.length,2)+de),P&&(J=s(1,1)+s(h(W),4)+A,te+="uc"+s(J.length,2)+J);var oe="";return oe+=`
\0`,oe+=s(ee,2),oe+=B.magic,oe+=s(v,2),oe+=s(b,2),oe+=s(me.crc32,4),oe+=s(me.compressedSize,4),oe+=s(me.uncompressedSize,4),oe+=s(R.length,2),oe+=s(te.length,2),{fileRecord:g.LOCAL_FILE_HEADER+oe+R+te,dirRecord:g.CENTRAL_FILE_HEADER+s(ne,2)+oe+s(W.length,2)+"\0\0\0\0"+s(q,4)+s(j,4)+R+te+W}}var a=r("../utils"),l=r("../stream/GenericWorker"),c=r("../utf8"),h=r("../crc32"),g=r("../signature");function w(_,T,x,j){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=T,this.zipPlatform=x,this.encodeFileName=j,this.streamFiles=_,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(w,l),w.prototype.push=function(_){var T=_.meta.percent||0,x=this.entriesCount,j=this._sources.length;this.accumulate?this.contentBuffer.push(_):(this.bytesWritten+=_.data.length,l.prototype.push.call(this,{data:_.data,meta:{currentFile:this.currentFile,percent:x?(T+100*(x-j-1))/x:100}}))},w.prototype.openedSource=function(_){this.currentSourceOffset=this.bytesWritten,this.currentFile=_.file.name;var T=this.streamFiles&&!_.file.dir;if(T){var x=o(_,T,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(_){this.accumulate=!1;var T=this.streamFiles&&!_.file.dir,x=o(_,T,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),T)this.push({data:function(j){return g.DATA_DESCRIPTOR+s(j.crc32,4)+s(j.compressedSize,4)+s(j.uncompressedSize,4)}(_),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var _=this.bytesWritten,T=0;T<this.dirRecords.length;T++)this.push({data:this.dirRecords[T],meta:{percent:100}});var x=this.bytesWritten-_,j=function(f,y,v,b,I){var B=a.transformTo("string",I(b));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(f,2)+s(f,2)+s(y,4)+s(v,4)+s(B.length,2)+B}(this.dirRecords.length,x,_,this.zipComment,this.encodeFileName);this.push({data:j,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(_){this._sources.push(_);var T=this;return _.on("data",function(x){T.processChunk(x)}),_.on("end",function(){T.closedSource(T.previous.streamInfo),T._sources.length?T.prepareNextSource():T.end()}),_.on("error",function(x){T.error(x)}),this},w.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(_){var T=this._sources;if(!l.prototype.error.call(this,_))return!1;for(var x=0;x<T.length;x++)try{T[x].error(_)}catch{}return!0},w.prototype.lock=function(){l.prototype.lock.call(this);for(var _=this._sources,T=0;T<_.length;T++)_[T].lock()},n.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),o=r("./ZipFileWorker");i.generateWorker=function(a,l,c){var h=new o(l.streamFiles,c,l.platform,l.encodeFileName),g=0;try{a.forEach(function(w,_){g++;var T=function(y,v){var b=y||v,I=s[b];if(!I)throw new Error(b+" is not a valid compression method !");return I}(_.options.compression,l.compression),x=_.options.compressionOptions||l.compressionOptions||{},j=_.dir,f=_.date;_._compressWorker(T,x).withStreamInfo("file",{name:w,dir:j,date:f,comment:_.comment||"",unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions}).pipe(h)}),h.entriesCount=g}catch(w){h.error(w)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),o=r("./external"),a=r("./utf8"),l=r("./zipEntries"),c=r("./stream/Crc32Probe"),h=r("./nodejsUtils");function g(w){return new o.Promise(function(_,T){var x=w.decompressed.getContentWorker().pipe(new c);x.on("error",function(j){T(j)}).on("end",function(){x.streamInfo.crc32!==w.decompressed.crc32?T(new Error("Corrupted zip : CRC32 mismatch")):_()}).resume()})}n.exports=function(w,_){var T=this;return _=s.extend(_||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(w)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",w,!0,_.optimizedBinaryString,_.base64).then(function(x){var j=new l(_);return j.load(x),j}).then(function(x){var j=[o.Promise.resolve(x)],f=x.files;if(_.checkCRC32)for(var y=0;y<f.length;y++)j.push(g(f[y]));return o.Promise.all(j)}).then(function(x){for(var j=x.shift(),f=j.files,y=0;y<f.length;y++){var v=f[y],b=v.fileNameStr,I=s.resolve(v.fileNameStr);T.file(I,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:_.createFolders}),v.dir||(T.file(I).unsafeOriginalName=b)}return j.zipComment.length&&(T.comment=j.zipComment),T})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),o=r("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(h){c.push({data:h,meta:{percent:0}})}).on("error",function(h){c.isPaused?this.generatedError=h:c.error(h)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var h=this;a.on("data",function(g,w){h.push(g)||h._helper.pause(),c&&c(w)}).on("error",function(g){h.emit("error",g)}).on("end",function(){h.push(null)})}r("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(I,B,k){var R,E=a.getTypeOf(B),U=a.extend(k||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(I=f(I)),U.createFolders&&(R=j(I))&&y.call(this,R,!0);var W=E==="string"&&U.binary===!1&&U.base64===!1;k&&k.binary!==void 0||(U.binary=!W),(B instanceof g&&B.uncompressedSize===0||U.dir||!B||B.length===0)&&(U.base64=!1,U.binary=!0,B="",U.compression="STORE",E="string");var A=null;A=B instanceof g||B instanceof l?B:T.isNode&&T.isStream(B)?new x(I,B):a.prepareContent(I,B,U.binary,U.optimizedBinaryString,U.base64);var M=new w(I,A,U);this.files[I]=M}var o=r("./utf8"),a=r("./utils"),l=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),h=r("./defaults"),g=r("./compressedObject"),w=r("./zipObject"),_=r("./generate"),T=r("./nodejsUtils"),x=r("./nodejs/NodejsStreamInputAdapter"),j=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var B=I.lastIndexOf("/");return 0<B?I.substring(0,B):""},f=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},y=function(I,B){return B=B!==void 0?B:h.createFolders,I=f(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:B}),this.files[I]};function v(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var B,k,R;for(B in this.files)R=this.files[B],(k=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&I(k,R)},filter:function(I){var B=[];return this.forEach(function(k,R){I(k,R)&&B.push(R)}),B},file:function(I,B,k){if(arguments.length!==1)return I=this.root+I,s.call(this,I,B,k),this;if(v(I)){var R=I;return this.filter(function(U,W){return!W.dir&&R.test(U)})}var E=this.files[this.root+I];return E&&!E.dir?E:null},folder:function(I){if(!I)return this;if(v(I))return this.filter(function(E,U){return U.dir&&I.test(E)});var B=this.root+I,k=y.call(this,B),R=this.clone();return R.root=k.name,R},remove:function(I){I=this.root+I;var B=this.files[I];if(B||(I.slice(-1)!=="/"&&(I+="/"),B=this.files[I]),B&&!B.dir)delete this.files[I];else for(var k=this.filter(function(E,U){return U.name.slice(0,I.length)===I}),R=0;R<k.length;R++)delete this.files[k[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var B,k={};try{if((k=a.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var R=k.comment||this.comment||"";B=_.generateWorker(this,k,R)}catch(E){(B=new l("error")).error(E)}return new c(B,k.type||"string",k.mimeType)},generateAsync:function(I,B){return this.generateInternalStream(I).accumulate(B)},generateNodeStream:function(I,B){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(B)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),h=a.charCodeAt(2),g=a.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===l&&this.data[w+1]===c&&this.data[w+2]===h&&this.data[w+3]===g)return w-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),h=a.charCodeAt(2),g=a.charCodeAt(3),w=this.readData(4);return l===w[0]&&c===w[1]&&h===w[2]&&g===w[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),o=r("../support"),a=r("./ArrayReader"),l=r("./StringReader"),c=r("./NodeBufferReader"),h=r("./Uint8ArrayReader");n.exports=function(g){var w=s.getTypeOf(g);return s.checkSupport(w),w!=="string"||o.uint8array?w==="nodebuffer"?new c(g):o.uint8array?new h(s.transformTo("uint8array",g)):new a(s.transformTo("array",g)):new l(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),o=r("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),o=r("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){c.dataIsReady=!0,c.data=h,c.max=h&&h.length||0,c.type=s.getTypeOf(h),c.isPaused||c._tickAndRepeat()},function(h){c.error(h)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),o=r("./ConvertWorker"),a=r("./GenericWorker"),l=r("../base64"),c=r("../support"),h=r("../external"),g=null;if(c.nodestream)try{g=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(T,x){return new h.Promise(function(j,f){var y=[],v=T._internalType,b=T._outputType,I=T._mimeType;T.on("data",function(B,k){y.push(B),x&&x(k)}).on("error",function(B){y=[],f(B)}).on("end",function(){try{var B=function(k,R,E){switch(k){case"blob":return s.newBlob(s.transformTo("arraybuffer",R),E);case"base64":return l.encode(R);default:return s.transformTo(k,R)}}(b,function(k,R){var E,U=0,W=null,A=0;for(E=0;E<R.length;E++)A+=R[E].length;switch(k){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(W=new Uint8Array(A),E=0;E<R.length;E++)W.set(R[E],U),U+=R[E].length;return W;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+k+"'")}}(v,y),I);j(B)}catch(k){f(k)}y=[]}).resume()})}function _(T,x,j){var f=x;switch(x){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=x,this._mimeType=j,s.checkSupport(f),this._worker=T.pipe(new o(f)),T.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}_.prototype={accumulate:function(T){return w(this,T)},on:function(T,x){var j=this;return T==="data"?this._worker.on(T,function(f){x.call(j,f.data,f.meta)}):this._worker.on(T,function(){s.delay(x,arguments,j)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(T){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},T)}},n.exports=_},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),o=r("./support"),a=r("./nodejsUtils"),l=r("./stream/GenericWorker"),c=new Array(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;c[254]=c[254]=1;function g(){l.call(this,"utf-8 decode"),this.leftOver=null}function w(){l.call(this,"utf-8 encode")}i.utf8encode=function(_){return o.nodebuffer?a.newBufferFrom(_,"utf-8"):function(T){var x,j,f,y,v,b=T.length,I=0;for(y=0;y<b;y++)(64512&(j=T.charCodeAt(y)))==55296&&y+1<b&&(64512&(f=T.charCodeAt(y+1)))==56320&&(j=65536+(j-55296<<10)+(f-56320),y++),I+=j<128?1:j<2048?2:j<65536?3:4;for(x=o.uint8array?new Uint8Array(I):new Array(I),y=v=0;v<I;y++)(64512&(j=T.charCodeAt(y)))==55296&&y+1<b&&(64512&(f=T.charCodeAt(y+1)))==56320&&(j=65536+(j-55296<<10)+(f-56320),y++),j<128?x[v++]=j:(j<2048?x[v++]=192|j>>>6:(j<65536?x[v++]=224|j>>>12:(x[v++]=240|j>>>18,x[v++]=128|j>>>12&63),x[v++]=128|j>>>6&63),x[v++]=128|63&j);return x}(_)},i.utf8decode=function(_){return o.nodebuffer?s.transformTo("nodebuffer",_).toString("utf-8"):function(T){var x,j,f,y,v=T.length,b=new Array(2*v);for(x=j=0;x<v;)if((f=T[x++])<128)b[j++]=f;else if(4<(y=c[f]))b[j++]=65533,x+=y-1;else{for(f&=y===2?31:y===3?15:7;1<y&&x<v;)f=f<<6|63&T[x++],y--;1<y?b[j++]=65533:f<65536?b[j++]=f:(f-=65536,b[j++]=55296|f>>10&1023,b[j++]=56320|1023&f)}return b.length!==j&&(b.subarray?b=b.subarray(0,j):b.length=j),s.applyFromCharCode(b)}(_=s.transformTo(o.uint8array?"uint8array":"array",_))},s.inherits(g,l),g.prototype.processChunk=function(_){var T=s.transformTo(o.uint8array?"uint8array":"array",_.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=T;(T=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),T.set(x,this.leftOver.length)}else T=this.leftOver.concat(T);this.leftOver=null}var j=function(y,v){var b;for((v=v||y.length)>y.length&&(v=y.length),b=v-1;0<=b&&(192&y[b])==128;)b--;return b<0||b===0?v:b+c[y[b]]>v?b:v}(T),f=T;j!==T.length&&(o.uint8array?(f=T.subarray(0,j),this.leftOver=T.subarray(j,T.length)):(f=T.slice(0,j),this.leftOver=T.slice(j,T.length))),this.push({data:i.utf8decode(f),meta:_.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,s.inherits(w,l),w.prototype.processChunk=function(_){this.push({data:i.utf8encode(_.data),meta:_.meta})},i.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),o=r("./base64"),a=r("./nodejsUtils"),l=r("./external");function c(x){return x}function h(x,j){for(var f=0;f<x.length;++f)j[f]=255&x.charCodeAt(f);return j}r("setimmediate"),i.newBlob=function(x,j){i.checkSupport("blob");try{return new Blob([x],{type:j})}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(x),f.getBlob(j)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(x,j,f){var y=[],v=0,b=x.length;if(b<=f)return String.fromCharCode.apply(null,x);for(;v<b;)j==="array"||j==="nodebuffer"?y.push(String.fromCharCode.apply(null,x.slice(v,Math.min(v+f,b)))):y.push(String.fromCharCode.apply(null,x.subarray(v,Math.min(v+f,b)))),v+=f;return y.join("")},stringifyByChar:function(x){for(var j="",f=0;f<x.length;f++)j+=String.fromCharCode(x[f]);return j},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function w(x){var j=65536,f=i.getTypeOf(x),y=!0;if(f==="uint8array"?y=g.applyCanBeUsed.uint8array:f==="nodebuffer"&&(y=g.applyCanBeUsed.nodebuffer),y)for(;1<j;)try{return g.stringifyByChunk(x,f,j)}catch{j=Math.floor(j/2)}return g.stringifyByChar(x)}function _(x,j){for(var f=0;f<x.length;f++)j[f]=x[f];return j}i.applyFromCharCode=w;var T={};T.string={string:c,array:function(x){return h(x,new Array(x.length))},arraybuffer:function(x){return T.string.uint8array(x).buffer},uint8array:function(x){return h(x,new Uint8Array(x.length))},nodebuffer:function(x){return h(x,a.allocBuffer(x.length))}},T.array={string:w,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(x)}},T.arraybuffer={string:function(x){return w(new Uint8Array(x))},array:function(x){return _(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(new Uint8Array(x))}},T.uint8array={string:w,array:function(x){return _(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return a.newBufferFrom(x)}},T.nodebuffer={string:w,array:function(x){return _(x,new Array(x.length))},arraybuffer:function(x){return T.nodebuffer.uint8array(x).buffer},uint8array:function(x){return _(x,new Uint8Array(x.length))},nodebuffer:c},i.transformTo=function(x,j){if(j=j||"",!x)return j;i.checkSupport(x);var f=i.getTypeOf(j);return T[f][x](j)},i.resolve=function(x){for(var j=x.split("/"),f=[],y=0;y<j.length;y++){var v=j[y];v==="."||v===""&&y!==0&&y!==j.length-1||(v===".."?f.pop():f.push(v))}return f.join("/")},i.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(x)?"nodebuffer":s.uint8array&&x instanceof Uint8Array?"uint8array":s.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(x){if(!s[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(x){var j,f,y="";for(f=0;f<(x||"").length;f++)y+="\\x"+((j=x.charCodeAt(f))<16?"0":"")+j.toString(16).toUpperCase();return y},i.delay=function(x,j,f){setImmediate(function(){x.apply(f||null,j||[])})},i.inherits=function(x,j){function f(){}f.prototype=j.prototype,x.prototype=new f},i.extend=function(){var x,j,f={};for(x=0;x<arguments.length;x++)for(j in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],j)&&f[j]===void 0&&(f[j]=arguments[x][j]);return f},i.prepareContent=function(x,j,f,y,v){return l.Promise.resolve(j).then(function(b){return s.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new l.Promise(function(I,B){var k=new FileReader;k.onload=function(R){I(R.target.result)},k.onerror=function(R){B(R.target.error)},k.readAsArrayBuffer(b)}):b}).then(function(b){var I=i.getTypeOf(b);return I?(I==="arraybuffer"?b=i.transformTo("uint8array",b):I==="string"&&(v?b=o.decode(b):f&&y!==!0&&(b=function(B){return h(B,s.uint8array?new Uint8Array(B.length):new Array(B.length))}(b))),b):l.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./signature"),l=r("./zipEntry"),c=r("./support");function h(g){this.files=[],this.loadOptions=g}h.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(w)+", expected "+o.pretty(g)+")")}},isSignature:function(g,w){var _=this.reader.index;this.reader.setIndex(g);var T=this.reader.readString(4)===w;return this.reader.setIndex(_),T},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),w=c.uint8array?"uint8array":"array",_=o.transformTo(w,g);this.zipComment=this.loadOptions.decodeFileName(_)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,w,_,T=this.zip64EndOfCentralSize-44;0<T;)g=this.reader.readInt(2),w=this.reader.readInt(4),_=this.reader.readData(w),this.zip64ExtensibleData[g]={id:g,length:w,value:_}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,w;for(g=0;g<this.files.length;g++)w=this.files[g],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(g=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var w=g;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var _=this.centralDirOffset+this.centralDirSize;this.zip64&&(_+=20,_+=12+this.zip64EndOfCentralSize);var T=w-_;if(0<T)this.isSignature(w,a.CENTRAL_FILE_HEADER)||(this.reader.zero=T);else if(T<0)throw new Error("Corrupted zip: missing "+Math.abs(T)+" bytes.")},prepareReader:function(g){this.reader=s(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./compressedObject"),l=r("./crc32"),c=r("./utf8"),h=r("./compressions"),g=r("./support");function w(_,T){this.options=_,this.loadOptions=T}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(_){var T,x;if(_.skip(22),this.fileNameLength=_.readInt(2),x=_.readInt(2),this.fileName=_.readData(this.fileNameLength),_.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((T=function(j){for(var f in h)if(Object.prototype.hasOwnProperty.call(h,f)&&h[f].magic===j)return h[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,T,_.readData(this.compressedSize))},readCentralPart:function(_){this.versionMadeBy=_.readInt(2),_.skip(2),this.bitFlag=_.readInt(2),this.compressionMethod=_.readString(2),this.date=_.readDate(),this.crc32=_.readInt(4),this.compressedSize=_.readInt(4),this.uncompressedSize=_.readInt(4);var T=_.readInt(2);if(this.extraFieldsLength=_.readInt(2),this.fileCommentLength=_.readInt(2),this.diskNumberStart=_.readInt(2),this.internalFileAttributes=_.readInt(2),this.externalFileAttributes=_.readInt(4),this.localHeaderOffset=_.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");_.skip(T),this.readExtraFields(_),this.parseZIP64ExtraField(_),this.fileComment=_.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var _=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),_==0&&(this.dosPermissions=63&this.externalFileAttributes),_==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var _=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=_.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=_.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=_.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=_.readInt(4))}},readExtraFields:function(_){var T,x,j,f=_.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});_.index+4<f;)T=_.readInt(2),x=_.readInt(2),j=_.readData(x),this.extraFields[T]={id:T,length:x,value:j};_.setIndex(f)},handleUTF8:function(){var _=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var T=this.findExtraFieldUnicodePath();if(T!==null)this.fileNameStr=T;else{var x=o.transformTo(_,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var j=this.findExtraFieldUnicodeComment();if(j!==null)this.fileCommentStr=j;else{var f=o.transformTo(_,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var _=this.extraFields[28789];if(_){var T=s(_.value);return T.readInt(1)!==1||l(this.fileName)!==T.readInt(4)?null:c.utf8decode(T.readData(_.length-5))}return null},findExtraFieldUnicodeComment:function(){var _=this.extraFields[25461];if(_){var T=s(_.value);return T.readInt(1)!==1||l(this.fileComment)!==T.readInt(4)?null:c.utf8decode(T.readData(_.length-5))}return null}},n.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(T,x,j){this.name=T,this.dir=j.dir,this.date=j.date,this.comment=j.comment,this.unixPermissions=j.unixPermissions,this.dosPermissions=j.dosPermissions,this._data=x,this._dataBinary=j.binary,this.options={compression:j.compression,compressionOptions:j.compressionOptions}}var o=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),l=r("./utf8"),c=r("./compressedObject"),h=r("./stream/GenericWorker");s.prototype={internalStream:function(T){var x=null,j="string";try{if(!T)throw new Error("No output type specified.");var f=(j=T.toLowerCase())==="string"||j==="text";j!=="binarystring"&&j!=="text"||(j="string"),x=this._decompressWorker();var y=!this._dataBinary;y&&!f&&(x=x.pipe(new l.Utf8EncodeWorker)),!y&&f&&(x=x.pipe(new l.Utf8DecodeWorker))}catch(v){(x=new h("error")).error(v)}return new o(x,j,"")},async:function(T,x){return this.internalStream(T).accumulate(x)},nodeStream:function(T,x){return this.internalStream(T||"nodebuffer").toNodejsStream(x)},_compressWorker:function(T,x){if(this._data instanceof c&&this._data.compression.magic===T.magic)return this._data.getCompressedWorker();var j=this._decompressWorker();return this._dataBinary||(j=j.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(j,T,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},_=0;_<g.length;_++)s.prototype[g[_]]=w;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,h=new l(T),g=s.document.createTextNode("");h.observe(g,{characterData:!0}),o=function(){g.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var x=s.document.createElement("script");x.onreadystatechange=function(){T(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:function(){setTimeout(T,0)};else{var w=new s.MessageChannel;w.port1.onmessage=T,o=function(){w.port2.postMessage(0)}}var _=[];function T(){var x,j;a=!0;for(var f=_.length;f;){for(j=_,_=[],x=-1;++x<f;)j[x]();f=_.length}a=!1}n.exports=function(x){_.push(x)!==1||a||o()}}).call(this,typeof _n<"u"?_n:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],h=["PENDING"];function g(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,f!==o&&x(this,f)}function w(f,y,v){this.promise=f,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function _(f,y,v){s(function(){var b;try{b=y(v)}catch(I){return a.reject(f,I)}b===f?a.reject(f,new TypeError("Cannot resolve promise with itself")):a.resolve(f,b)})}function T(f){var y=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof y=="function")return function(){y.apply(f,arguments)}}function x(f,y){var v=!1;function b(k){v||(v=!0,a.reject(f,k))}function I(k){v||(v=!0,a.resolve(f,k))}var B=j(function(){y(I,b)});B.status==="error"&&b(B.value)}function j(f,y){var v={};try{v.value=f(y),v.status="success"}catch(b){v.status="error",v.value=b}return v}(n.exports=g).prototype.finally=function(f){if(typeof f!="function")return this;var y=this.constructor;return this.then(function(v){return y.resolve(f()).then(function(){return v})},function(v){return y.resolve(f()).then(function(){throw v})})},g.prototype.catch=function(f){return this.then(null,f)},g.prototype.then=function(f,y){if(typeof f!="function"&&this.state===c||typeof y!="function"&&this.state===l)return this;var v=new this.constructor(o);return this.state!==h?_(v,this.state===c?f:y,this.outcome):this.queue.push(new w(v,f,y)),v},w.prototype.callFulfilled=function(f){a.resolve(this.promise,f)},w.prototype.otherCallFulfilled=function(f){_(this.promise,this.onFulfilled,f)},w.prototype.callRejected=function(f){a.reject(this.promise,f)},w.prototype.otherCallRejected=function(f){_(this.promise,this.onRejected,f)},a.resolve=function(f,y){var v=j(T,y);if(v.status==="error")return a.reject(f,v.value);var b=v.value;if(b)x(f,b);else{f.state=c,f.outcome=y;for(var I=-1,B=f.queue.length;++I<B;)f.queue[I].callFulfilled(y)}return f},a.reject=function(f,y){f.state=l,f.outcome=y;for(var v=-1,b=f.queue.length;++v<b;)f.queue[v].callRejected(y);return f},g.resolve=function(f){return f instanceof this?f:a.resolve(new this(o),f)},g.reject=function(f){var y=new this(o);return a.reject(y,f)},g.all=function(f){var y=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=f.length,b=!1;if(!v)return this.resolve([]);for(var I=new Array(v),B=0,k=-1,R=new this(o);++k<v;)E(f[k],k);return R;function E(U,W){y.resolve(U).then(function(A){I[W]=A,++B!==v||b||(b=!0,a.resolve(R,I))},function(A){b||(b=!0,a.reject(R,A))})}},g.race=function(f){var y=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=f.length,b=!1;if(!v)return this.resolve([]);for(var I=-1,B=new this(o);++I<v;)k=f[I],y.resolve(k).then(function(R){b||(b=!0,a.resolve(B,R))},function(R){b||(b=!0,a.reject(B,R))});var k;return B}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/messages"),c=r("./zlib/zstream"),h=Object.prototype.toString,g=0,w=-1,_=0,T=8;function x(f){if(!(this instanceof x))return new x(f);this.options=o.assign({level:w,method:T,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},f||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var v=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(v!==g)throw new Error(l[v]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var b;if(b=typeof y.dictionary=="string"?a.string2buf(y.dictionary):h.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(v=s.deflateSetDictionary(this.strm,b))!==g)throw new Error(l[v]);this._dict_set=!0}}function j(f,y){var v=new x(y);if(v.push(f,!0),v.err)throw v.msg||l[v.err];return v.result}x.prototype.push=function(f,y){var v,b,I=this.strm,B=this.options.chunkSize;if(this.ended)return!1;b=y===~~y?y:y===!0?4:0,typeof f=="string"?I.input=a.string2buf(f):h.call(f)==="[object ArrayBuffer]"?I.input=new Uint8Array(f):I.input=f,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(B),I.next_out=0,I.avail_out=B),(v=s.deflate(I,b))!==1&&v!==g)return this.onEnd(v),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(I.output,I.next_out))):this.onData(o.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&v!==1);return b===4?(v=s.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===g):b!==2||(this.onEnd(g),!(I.avail_out=0))},x.prototype.onData=function(f){this.chunks.push(f)},x.prototype.onEnd=function(f){f===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},i.Deflate=x,i.deflate=j,i.deflateRaw=function(f,y){return(y=y||{}).raw=!0,j(f,y)},i.gzip=function(f,y){return(y=y||{}).gzip=!0,j(f,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/constants"),c=r("./zlib/messages"),h=r("./zlib/zstream"),g=r("./zlib/gzheader"),w=Object.prototype.toString;function _(x){if(!(this instanceof _))return new _(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var j=this.options;j.raw&&0<=j.windowBits&&j.windowBits<16&&(j.windowBits=-j.windowBits,j.windowBits===0&&(j.windowBits=-15)),!(0<=j.windowBits&&j.windowBits<16)||x&&x.windowBits||(j.windowBits+=32),15<j.windowBits&&j.windowBits<48&&!(15&j.windowBits)&&(j.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var f=s.inflateInit2(this.strm,j.windowBits);if(f!==l.Z_OK)throw new Error(c[f]);this.header=new g,s.inflateGetHeader(this.strm,this.header)}function T(x,j){var f=new _(j);if(f.push(x,!0),f.err)throw f.msg||c[f.err];return f.result}_.prototype.push=function(x,j){var f,y,v,b,I,B,k=this.strm,R=this.options.chunkSize,E=this.options.dictionary,U=!1;if(this.ended)return!1;y=j===~~j?j:j===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof x=="string"?k.input=a.binstring2buf(x):w.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(R),k.next_out=0,k.avail_out=R),(f=s.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&E&&(B=typeof E=="string"?a.string2buf(E):w.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,f=s.inflateSetDictionary(this.strm,B)),f===l.Z_BUF_ERROR&&U===!0&&(f=l.Z_OK,U=!1),f!==l.Z_STREAM_END&&f!==l.Z_OK)return this.onEnd(f),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&f!==l.Z_STREAM_END&&(k.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=a.utf8border(k.output,k.next_out),b=k.next_out-v,I=a.buf2string(k.output,v),k.next_out=b,k.avail_out=R-b,b&&o.arraySet(k.output,k.output,v,b,0),this.onData(I)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(U=!0)}while((0<k.avail_in||k.avail_out===0)&&f!==l.Z_STREAM_END);return f===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(f=s.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},_.prototype.onData=function(x){this.chunks.push(x)},_.prototype.onEnd=function(x){x===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Inflate=_,i.inflate=T,i.inflateRaw=function(x,j){return(j=j||{}).raw=!0,T(x,j)},i.ungzip=T},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var h=c.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var g in h)h.hasOwnProperty(g)&&(l[g]=h[g])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,h,g,w){if(c.subarray&&l.subarray)l.set(c.subarray(h,h+g),w);else for(var _=0;_<g;_++)l[w+_]=c[h+_]},flattenChunks:function(l){var c,h,g,w,_,T;for(c=g=0,h=l.length;c<h;c++)g+=l[c].length;for(T=new Uint8Array(g),c=w=0,h=l.length;c<h;c++)_=l[c],T.set(_,w),w+=_.length;return T}},a={arraySet:function(l,c,h,g,w){for(var _=0;_<g;_++)l[w+_]=c[h+_]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function h(g,w){if(w<65537&&(g.subarray&&a||!g.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(g,w));for(var _="",T=0;T<w;T++)_+=String.fromCharCode(g[T]);return _}l[254]=l[254]=1,i.string2buf=function(g){var w,_,T,x,j,f=g.length,y=0;for(x=0;x<f;x++)(64512&(_=g.charCodeAt(x)))==55296&&x+1<f&&(64512&(T=g.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(T-56320),x++),y+=_<128?1:_<2048?2:_<65536?3:4;for(w=new s.Buf8(y),x=j=0;j<y;x++)(64512&(_=g.charCodeAt(x)))==55296&&x+1<f&&(64512&(T=g.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(T-56320),x++),_<128?w[j++]=_:(_<2048?w[j++]=192|_>>>6:(_<65536?w[j++]=224|_>>>12:(w[j++]=240|_>>>18,w[j++]=128|_>>>12&63),w[j++]=128|_>>>6&63),w[j++]=128|63&_);return w},i.buf2binstring=function(g){return h(g,g.length)},i.binstring2buf=function(g){for(var w=new s.Buf8(g.length),_=0,T=w.length;_<T;_++)w[_]=g.charCodeAt(_);return w},i.buf2string=function(g,w){var _,T,x,j,f=w||g.length,y=new Array(2*f);for(_=T=0;_<f;)if((x=g[_++])<128)y[T++]=x;else if(4<(j=l[x]))y[T++]=65533,_+=j-1;else{for(x&=j===2?31:j===3?15:7;1<j&&_<f;)x=x<<6|63&g[_++],j--;1<j?y[T++]=65533:x<65536?y[T++]=x:(x-=65536,y[T++]=55296|x>>10&1023,y[T++]=56320|1023&x)}return h(y,T)},i.utf8border=function(g,w){var _;for((w=w||g.length)>g.length&&(w=g.length),_=w-1;0<=_&&(192&g[_])==128;)_--;return _<0||_===0?w:_+l[g[_]]>w?_:w}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,o,a,l){for(var c=65535&s|0,h=s>>>16&65535|0,g=0;a!==0;){for(a-=g=2e3<a?2e3:a;h=h+(c=c+o[l++]|0)|0,--g;);c%=65521,h%=65521}return c|h<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();n.exports=function(o,a,l,c){var h=s,g=c+l;o^=-1;for(var w=c;w<g;w++)o=o>>>8^h[255&(o^a[w])];return-1^o}},{}],46:[function(r,n,i){var s,o=r("../utils/common"),a=r("./trees"),l=r("./adler32"),c=r("./crc32"),h=r("./messages"),g=0,w=4,_=0,T=-2,x=-1,j=4,f=2,y=8,v=9,b=286,I=30,B=19,k=2*b+1,R=15,E=3,U=258,W=U+E+1,A=42,M=113,P=1,te=2,de=3,J=4;function ie(N,ue){return N.msg=h[ue],ue}function se(N){return(N<<1)-(4<N?9:0)}function me(N){for(var ue=N.length;0<=--ue;)N[ue]=0}function ee(N){var ue=N.state,F=ue.pending;F>N.avail_out&&(F=N.avail_out),F!==0&&(o.arraySet(N.output,ue.pending_buf,ue.pending_out,F,N.next_out),N.next_out+=F,ue.pending_out+=F,N.total_out+=F,N.avail_out-=F,ue.pending-=F,ue.pending===0&&(ue.pending_out=0))}function q(N,ue){a._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,ue),N.block_start=N.strstart,ee(N.strm)}function ne(N,ue){N.pending_buf[N.pending++]=ue}function oe(N,ue){N.pending_buf[N.pending++]=ue>>>8&255,N.pending_buf[N.pending++]=255&ue}function fe(N,ue){var F,p,m=N.max_chain_length,C=N.strstart,G=N.prev_length,Z=N.nice_match,X=N.strstart>N.w_size-W?N.strstart-(N.w_size-W):0,pe=N.window,ve=N.w_mask,ye=N.prev,Te=N.strstart+U,Ae=pe[C+G-1],Re=pe[C+G];N.prev_length>=N.good_match&&(m>>=2),Z>N.lookahead&&(Z=N.lookahead);do if(pe[(F=ue)+G]===Re&&pe[F+G-1]===Ae&&pe[F]===pe[C]&&pe[++F]===pe[C+1]){C+=2,F++;do;while(pe[++C]===pe[++F]&&pe[++C]===pe[++F]&&pe[++C]===pe[++F]&&pe[++C]===pe[++F]&&pe[++C]===pe[++F]&&pe[++C]===pe[++F]&&pe[++C]===pe[++F]&&pe[++C]===pe[++F]&&C<Te);if(p=U-(Te-C),C=Te-U,G<p){if(N.match_start=ue,Z<=(G=p))break;Ae=pe[C+G-1],Re=pe[C+G]}}while((ue=ye[ue&ve])>X&&--m!=0);return G<=N.lookahead?G:N.lookahead}function re(N){var ue,F,p,m,C,G,Z,X,pe,ve,ye=N.w_size;do{if(m=N.window_size-N.lookahead-N.strstart,N.strstart>=ye+(ye-W)){for(o.arraySet(N.window,N.window,ye,ye,0),N.match_start-=ye,N.strstart-=ye,N.block_start-=ye,ue=F=N.hash_size;p=N.head[--ue],N.head[ue]=ye<=p?p-ye:0,--F;);for(ue=F=ye;p=N.prev[--ue],N.prev[ue]=ye<=p?p-ye:0,--F;);m+=ye}if(N.strm.avail_in===0)break;if(G=N.strm,Z=N.window,X=N.strstart+N.lookahead,pe=m,ve=void 0,ve=G.avail_in,pe<ve&&(ve=pe),F=ve===0?0:(G.avail_in-=ve,o.arraySet(Z,G.input,G.next_in,ve,X),G.state.wrap===1?G.adler=l(G.adler,Z,ve,X):G.state.wrap===2&&(G.adler=c(G.adler,Z,ve,X)),G.next_in+=ve,G.total_in+=ve,ve),N.lookahead+=F,N.lookahead+N.insert>=E)for(C=N.strstart-N.insert,N.ins_h=N.window[C],N.ins_h=(N.ins_h<<N.hash_shift^N.window[C+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[C+E-1])&N.hash_mask,N.prev[C&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=C,C++,N.insert--,!(N.lookahead+N.insert<E)););}while(N.lookahead<W&&N.strm.avail_in!==0)}function L(N,ue){for(var F,p;;){if(N.lookahead<W){if(re(N),N.lookahead<W&&ue===g)return P;if(N.lookahead===0)break}if(F=0,N.lookahead>=E&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,F=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),F!==0&&N.strstart-F<=N.w_size-W&&(N.match_length=fe(N,F)),N.match_length>=E)if(p=a._tr_tally(N,N.strstart-N.match_start,N.match_length-E),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=E){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,F=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else p=a._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(p&&(q(N,!1),N.strm.avail_out===0))return P}return N.insert=N.strstart<E-1?N.strstart:E-1,ue===w?(q(N,!0),N.strm.avail_out===0?de:J):N.last_lit&&(q(N,!1),N.strm.avail_out===0)?P:te}function D(N,ue){for(var F,p,m;;){if(N.lookahead<W){if(re(N),N.lookahead<W&&ue===g)return P;if(N.lookahead===0)break}if(F=0,N.lookahead>=E&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,F=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=E-1,F!==0&&N.prev_length<N.max_lazy_match&&N.strstart-F<=N.w_size-W&&(N.match_length=fe(N,F),N.match_length<=5&&(N.strategy===1||N.match_length===E&&4096<N.strstart-N.match_start)&&(N.match_length=E-1)),N.prev_length>=E&&N.match_length<=N.prev_length){for(m=N.strstart+N.lookahead-E,p=a._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-E),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=m&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,F=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=E-1,N.strstart++,p&&(q(N,!1),N.strm.avail_out===0))return P}else if(N.match_available){if((p=a._tr_tally(N,0,N.window[N.strstart-1]))&&q(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return P}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(p=a._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<E-1?N.strstart:E-1,ue===w?(q(N,!0),N.strm.avail_out===0?de:J):N.last_lit&&(q(N,!1),N.strm.avail_out===0)?P:te}function Y(N,ue,F,p,m){this.good_length=N,this.max_lazy=ue,this.nice_length=F,this.max_chain=p,this.func=m}function Q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*I+1)),this.bl_tree=new o.Buf16(2*(2*B+1)),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(R+1),this.heap=new o.Buf16(2*b+1),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function $(N){var ue;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=f,(ue=N.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?A:M,N.adler=ue.wrap===2?0:1,ue.last_flush=g,a._tr_init(ue),_):ie(N,T)}function H(N){var ue=$(N);return ue===_&&function(F){F.window_size=2*F.w_size,me(F.head),F.max_lazy_match=s[F.level].max_lazy,F.good_match=s[F.level].good_length,F.nice_match=s[F.level].nice_length,F.max_chain_length=s[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=E-1,F.match_available=0,F.ins_h=0}(N.state),ue}function ce(N,ue,F,p,m,C){if(!N)return T;var G=1;if(ue===x&&(ue=6),p<0?(G=0,p=-p):15<p&&(G=2,p-=16),m<1||v<m||F!==y||p<8||15<p||ue<0||9<ue||C<0||j<C)return ie(N,T);p===8&&(p=9);var Z=new Q;return(N.state=Z).strm=N,Z.wrap=G,Z.gzhead=null,Z.w_bits=p,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=m+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+E-1)/E),Z.window=new o.Buf8(2*Z.w_size),Z.head=new o.Buf16(Z.hash_size),Z.prev=new o.Buf16(Z.w_size),Z.lit_bufsize=1<<m+6,Z.pending_buf_size=4*Z.lit_bufsize,Z.pending_buf=new o.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=ue,Z.strategy=C,Z.method=F,H(N)}s=[new Y(0,0,0,0,function(N,ue){var F=65535;for(F>N.pending_buf_size-5&&(F=N.pending_buf_size-5);;){if(N.lookahead<=1){if(re(N),N.lookahead===0&&ue===g)return P;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var p=N.block_start+F;if((N.strstart===0||N.strstart>=p)&&(N.lookahead=N.strstart-p,N.strstart=p,q(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-W&&(q(N,!1),N.strm.avail_out===0))return P}return N.insert=0,ue===w?(q(N,!0),N.strm.avail_out===0?de:J):(N.strstart>N.block_start&&(q(N,!1),N.strm.avail_out),P)}),new Y(4,4,8,4,L),new Y(4,5,16,8,L),new Y(4,6,32,32,L),new Y(4,4,16,16,D),new Y(8,16,32,32,D),new Y(8,16,128,128,D),new Y(8,32,128,256,D),new Y(32,128,258,1024,D),new Y(32,258,258,4096,D)],i.deflateInit=function(N,ue){return ce(N,ue,y,15,8,0)},i.deflateInit2=ce,i.deflateReset=H,i.deflateResetKeep=$,i.deflateSetHeader=function(N,ue){return N&&N.state?N.state.wrap!==2?T:(N.state.gzhead=ue,_):T},i.deflate=function(N,ue){var F,p,m,C;if(!N||!N.state||5<ue||ue<0)return N?ie(N,T):T;if(p=N.state,!N.output||!N.input&&N.avail_in!==0||p.status===666&&ue!==w)return ie(N,N.avail_out===0?-5:T);if(p.strm=N,F=p.last_flush,p.last_flush=ue,p.status===A)if(p.wrap===2)N.adler=0,ne(p,31),ne(p,139),ne(p,8),p.gzhead?(ne(p,(p.gzhead.text?1:0)+(p.gzhead.hcrc?2:0)+(p.gzhead.extra?4:0)+(p.gzhead.name?8:0)+(p.gzhead.comment?16:0)),ne(p,255&p.gzhead.time),ne(p,p.gzhead.time>>8&255),ne(p,p.gzhead.time>>16&255),ne(p,p.gzhead.time>>24&255),ne(p,p.level===9?2:2<=p.strategy||p.level<2?4:0),ne(p,255&p.gzhead.os),p.gzhead.extra&&p.gzhead.extra.length&&(ne(p,255&p.gzhead.extra.length),ne(p,p.gzhead.extra.length>>8&255)),p.gzhead.hcrc&&(N.adler=c(N.adler,p.pending_buf,p.pending,0)),p.gzindex=0,p.status=69):(ne(p,0),ne(p,0),ne(p,0),ne(p,0),ne(p,0),ne(p,p.level===9?2:2<=p.strategy||p.level<2?4:0),ne(p,3),p.status=M);else{var G=y+(p.w_bits-8<<4)<<8;G|=(2<=p.strategy||p.level<2?0:p.level<6?1:p.level===6?2:3)<<6,p.strstart!==0&&(G|=32),G+=31-G%31,p.status=M,oe(p,G),p.strstart!==0&&(oe(p,N.adler>>>16),oe(p,65535&N.adler)),N.adler=1}if(p.status===69)if(p.gzhead.extra){for(m=p.pending;p.gzindex<(65535&p.gzhead.extra.length)&&(p.pending!==p.pending_buf_size||(p.gzhead.hcrc&&p.pending>m&&(N.adler=c(N.adler,p.pending_buf,p.pending-m,m)),ee(N),m=p.pending,p.pending!==p.pending_buf_size));)ne(p,255&p.gzhead.extra[p.gzindex]),p.gzindex++;p.gzhead.hcrc&&p.pending>m&&(N.adler=c(N.adler,p.pending_buf,p.pending-m,m)),p.gzindex===p.gzhead.extra.length&&(p.gzindex=0,p.status=73)}else p.status=73;if(p.status===73)if(p.gzhead.name){m=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>m&&(N.adler=c(N.adler,p.pending_buf,p.pending-m,m)),ee(N),m=p.pending,p.pending===p.pending_buf_size)){C=1;break}C=p.gzindex<p.gzhead.name.length?255&p.gzhead.name.charCodeAt(p.gzindex++):0,ne(p,C)}while(C!==0);p.gzhead.hcrc&&p.pending>m&&(N.adler=c(N.adler,p.pending_buf,p.pending-m,m)),C===0&&(p.gzindex=0,p.status=91)}else p.status=91;if(p.status===91)if(p.gzhead.comment){m=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>m&&(N.adler=c(N.adler,p.pending_buf,p.pending-m,m)),ee(N),m=p.pending,p.pending===p.pending_buf_size)){C=1;break}C=p.gzindex<p.gzhead.comment.length?255&p.gzhead.comment.charCodeAt(p.gzindex++):0,ne(p,C)}while(C!==0);p.gzhead.hcrc&&p.pending>m&&(N.adler=c(N.adler,p.pending_buf,p.pending-m,m)),C===0&&(p.status=103)}else p.status=103;if(p.status===103&&(p.gzhead.hcrc?(p.pending+2>p.pending_buf_size&&ee(N),p.pending+2<=p.pending_buf_size&&(ne(p,255&N.adler),ne(p,N.adler>>8&255),N.adler=0,p.status=M)):p.status=M),p.pending!==0){if(ee(N),N.avail_out===0)return p.last_flush=-1,_}else if(N.avail_in===0&&se(ue)<=se(F)&&ue!==w)return ie(N,-5);if(p.status===666&&N.avail_in!==0)return ie(N,-5);if(N.avail_in!==0||p.lookahead!==0||ue!==g&&p.status!==666){var Z=p.strategy===2?function(X,pe){for(var ve;;){if(X.lookahead===0&&(re(X),X.lookahead===0)){if(pe===g)return P;break}if(X.match_length=0,ve=a._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++,ve&&(q(X,!1),X.strm.avail_out===0))return P}return X.insert=0,pe===w?(q(X,!0),X.strm.avail_out===0?de:J):X.last_lit&&(q(X,!1),X.strm.avail_out===0)?P:te}(p,ue):p.strategy===3?function(X,pe){for(var ve,ye,Te,Ae,Re=X.window;;){if(X.lookahead<=U){if(re(X),X.lookahead<=U&&pe===g)return P;if(X.lookahead===0)break}if(X.match_length=0,X.lookahead>=E&&0<X.strstart&&(ye=Re[Te=X.strstart-1])===Re[++Te]&&ye===Re[++Te]&&ye===Re[++Te]){Ae=X.strstart+U;do;while(ye===Re[++Te]&&ye===Re[++Te]&&ye===Re[++Te]&&ye===Re[++Te]&&ye===Re[++Te]&&ye===Re[++Te]&&ye===Re[++Te]&&ye===Re[++Te]&&Te<Ae);X.match_length=U-(Ae-Te),X.match_length>X.lookahead&&(X.match_length=X.lookahead)}if(X.match_length>=E?(ve=a._tr_tally(X,1,X.match_length-E),X.lookahead-=X.match_length,X.strstart+=X.match_length,X.match_length=0):(ve=a._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++),ve&&(q(X,!1),X.strm.avail_out===0))return P}return X.insert=0,pe===w?(q(X,!0),X.strm.avail_out===0?de:J):X.last_lit&&(q(X,!1),X.strm.avail_out===0)?P:te}(p,ue):s[p.level].func(p,ue);if(Z!==de&&Z!==J||(p.status=666),Z===P||Z===de)return N.avail_out===0&&(p.last_flush=-1),_;if(Z===te&&(ue===1?a._tr_align(p):ue!==5&&(a._tr_stored_block(p,0,0,!1),ue===3&&(me(p.head),p.lookahead===0&&(p.strstart=0,p.block_start=0,p.insert=0))),ee(N),N.avail_out===0))return p.last_flush=-1,_}return ue!==w?_:p.wrap<=0?1:(p.wrap===2?(ne(p,255&N.adler),ne(p,N.adler>>8&255),ne(p,N.adler>>16&255),ne(p,N.adler>>24&255),ne(p,255&N.total_in),ne(p,N.total_in>>8&255),ne(p,N.total_in>>16&255),ne(p,N.total_in>>24&255)):(oe(p,N.adler>>>16),oe(p,65535&N.adler)),ee(N),0<p.wrap&&(p.wrap=-p.wrap),p.pending!==0?_:1)},i.deflateEnd=function(N){var ue;return N&&N.state?(ue=N.state.status)!==A&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==M&&ue!==666?ie(N,T):(N.state=null,ue===M?ie(N,-3):_):T},i.deflateSetDictionary=function(N,ue){var F,p,m,C,G,Z,X,pe,ve=ue.length;if(!N||!N.state||(C=(F=N.state).wrap)===2||C===1&&F.status!==A||F.lookahead)return T;for(C===1&&(N.adler=l(N.adler,ue,ve,0)),F.wrap=0,ve>=F.w_size&&(C===0&&(me(F.head),F.strstart=0,F.block_start=0,F.insert=0),pe=new o.Buf8(F.w_size),o.arraySet(pe,ue,ve-F.w_size,F.w_size,0),ue=pe,ve=F.w_size),G=N.avail_in,Z=N.next_in,X=N.input,N.avail_in=ve,N.next_in=0,N.input=ue,re(F);F.lookahead>=E;){for(p=F.strstart,m=F.lookahead-(E-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[p+E-1])&F.hash_mask,F.prev[p&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=p,p++,--m;);F.strstart=p,F.lookahead=E-1,re(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=E-1,F.match_available=0,N.next_in=Z,N.input=X,N.avail_in=G,F.wrap=C,_},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,o){var a,l,c,h,g,w,_,T,x,j,f,y,v,b,I,B,k,R,E,U,W,A,M,P,te;a=s.state,l=s.next_in,P=s.input,c=l+(s.avail_in-5),h=s.next_out,te=s.output,g=h-(o-s.avail_out),w=h+(s.avail_out-257),_=a.dmax,T=a.wsize,x=a.whave,j=a.wnext,f=a.window,y=a.hold,v=a.bits,b=a.lencode,I=a.distcode,B=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{v<15&&(y+=P[l++]<<v,v+=8,y+=P[l++]<<v,v+=8),R=b[y&B];t:for(;;){if(y>>>=E=R>>>24,v-=E,(E=R>>>16&255)===0)te[h++]=65535&R;else{if(!(16&E)){if(!(64&E)){R=b[(65535&R)+(y&(1<<E)-1)];continue t}if(32&E){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}U=65535&R,(E&=15)&&(v<E&&(y+=P[l++]<<v,v+=8),U+=y&(1<<E)-1,y>>>=E,v-=E),v<15&&(y+=P[l++]<<v,v+=8,y+=P[l++]<<v,v+=8),R=I[y&k];r:for(;;){if(y>>>=E=R>>>24,v-=E,!(16&(E=R>>>16&255))){if(!(64&E)){R=I[(65535&R)+(y&(1<<E)-1)];continue r}s.msg="invalid distance code",a.mode=30;break e}if(W=65535&R,v<(E&=15)&&(y+=P[l++]<<v,(v+=8)<E&&(y+=P[l++]<<v,v+=8)),_<(W+=y&(1<<E)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=E,v-=E,(E=h-g)<W){if(x<(E=W-E)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(M=f,(A=0)===j){if(A+=T-E,E<U){for(U-=E;te[h++]=f[A++],--E;);A=h-W,M=te}}else if(j<E){if(A+=T+j-E,(E-=j)<U){for(U-=E;te[h++]=f[A++],--E;);if(A=0,j<U){for(U-=E=j;te[h++]=f[A++],--E;);A=h-W,M=te}}}else if(A+=j-E,E<U){for(U-=E;te[h++]=f[A++],--E;);A=h-W,M=te}for(;2<U;)te[h++]=M[A++],te[h++]=M[A++],te[h++]=M[A++],U-=3;U&&(te[h++]=M[A++],1<U&&(te[h++]=M[A++]))}else{for(A=h-W;te[h++]=te[A++],te[h++]=te[A++],te[h++]=te[A++],2<(U-=3););U&&(te[h++]=te[A++],1<U&&(te[h++]=te[A++]))}break}}break}}while(l<c&&h<w);l-=U=v>>3,y&=(1<<(v-=U<<3))-1,s.next_in=l,s.next_out=h,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=h<w?w-h+257:257-(h-w),a.hold=y,a.bits=v}},{}],49:[function(r,n,i){var s=r("../utils/common"),o=r("./adler32"),a=r("./crc32"),l=r("./inffast"),c=r("./inftrees"),h=1,g=2,w=0,_=-2,T=1,x=852,j=592;function f(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(A){var M;return A&&A.state?(M=A.state,A.total_in=A.total_out=M.total=0,A.msg="",M.wrap&&(A.adler=1&M.wrap),M.mode=T,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new s.Buf32(x),M.distcode=M.distdyn=new s.Buf32(j),M.sane=1,M.back=-1,w):_}function b(A){var M;return A&&A.state?((M=A.state).wsize=0,M.whave=0,M.wnext=0,v(A)):_}function I(A,M){var P,te;return A&&A.state?(te=A.state,M<0?(P=0,M=-M):(P=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?_:(te.window!==null&&te.wbits!==M&&(te.window=null),te.wrap=P,te.wbits=M,b(A))):_}function B(A,M){var P,te;return A?(te=new y,(A.state=te).window=null,(P=I(A,M))!==w&&(A.state=null),P):_}var k,R,E=!0;function U(A){if(E){var M;for(k=new s.Buf32(512),R=new s.Buf32(32),M=0;M<144;)A.lens[M++]=8;for(;M<256;)A.lens[M++]=9;for(;M<280;)A.lens[M++]=7;for(;M<288;)A.lens[M++]=8;for(c(h,A.lens,0,288,k,0,A.work,{bits:9}),M=0;M<32;)A.lens[M++]=5;c(g,A.lens,0,32,R,0,A.work,{bits:5}),E=!1}A.lencode=k,A.lenbits=9,A.distcode=R,A.distbits=5}function W(A,M,P,te){var de,J=A.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new s.Buf8(J.wsize)),te>=J.wsize?(s.arraySet(J.window,M,P-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(te<(de=J.wsize-J.wnext)&&(de=te),s.arraySet(J.window,M,P-te,de,J.wnext),(te-=de)?(s.arraySet(J.window,M,P-te,te,0),J.wnext=te,J.whave=J.wsize):(J.wnext+=de,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=de))),0}i.inflateReset=b,i.inflateReset2=I,i.inflateResetKeep=v,i.inflateInit=function(A){return B(A,15)},i.inflateInit2=B,i.inflate=function(A,M){var P,te,de,J,ie,se,me,ee,q,ne,oe,fe,re,L,D,Y,Q,$,H,ce,N,ue,F,p,m=0,C=new s.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return _;(P=A.state).mode===12&&(P.mode=13),ie=A.next_out,de=A.output,me=A.avail_out,J=A.next_in,te=A.input,se=A.avail_in,ee=P.hold,q=P.bits,ne=se,oe=me,ue=w;e:for(;;)switch(P.mode){case T:if(P.wrap===0){P.mode=13;break}for(;q<16;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(2&P.wrap&&ee===35615){C[P.check=0]=255&ee,C[1]=ee>>>8&255,P.check=a(P.check,C,2,0),q=ee=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&ee)<<8)+(ee>>8))%31){A.msg="incorrect header check",P.mode=30;break}if((15&ee)!=8){A.msg="unknown compression method",P.mode=30;break}if(q-=4,N=8+(15&(ee>>>=4)),P.wbits===0)P.wbits=N;else if(N>P.wbits){A.msg="invalid window size",P.mode=30;break}P.dmax=1<<N,A.adler=P.check=1,P.mode=512&ee?10:12,q=ee=0;break;case 2:for(;q<16;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(P.flags=ee,(255&P.flags)!=8){A.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){A.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=ee>>8&1),512&P.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,P.check=a(P.check,C,2,0)),q=ee=0,P.mode=3;case 3:for(;q<32;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}P.head&&(P.head.time=ee),512&P.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,C[2]=ee>>>16&255,C[3]=ee>>>24&255,P.check=a(P.check,C,4,0)),q=ee=0,P.mode=4;case 4:for(;q<16;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}P.head&&(P.head.xflags=255&ee,P.head.os=ee>>8),512&P.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,P.check=a(P.check,C,2,0)),q=ee=0,P.mode=5;case 5:if(1024&P.flags){for(;q<16;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}P.length=ee,P.head&&(P.head.extra_len=ee),512&P.flags&&(C[0]=255&ee,C[1]=ee>>>8&255,P.check=a(P.check,C,2,0)),q=ee=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(se<(fe=P.length)&&(fe=se),fe&&(P.head&&(N=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),s.arraySet(P.head.extra,te,J,fe,N)),512&P.flags&&(P.check=a(P.check,te,fe,J)),se-=fe,J+=fe,P.length-=fe),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(se===0)break e;for(fe=0;N=te[J+fe++],P.head&&N&&P.length<65536&&(P.head.name+=String.fromCharCode(N)),N&&fe<se;);if(512&P.flags&&(P.check=a(P.check,te,fe,J)),se-=fe,J+=fe,N)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(se===0)break e;for(fe=0;N=te[J+fe++],P.head&&N&&P.length<65536&&(P.head.comment+=String.fromCharCode(N)),N&&fe<se;);if(512&P.flags&&(P.check=a(P.check,te,fe,J)),se-=fe,J+=fe,N)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;q<16;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(ee!==(65535&P.check)){A.msg="header crc mismatch",P.mode=30;break}q=ee=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),A.adler=P.check=0,P.mode=12;break;case 10:for(;q<32;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}A.adler=P.check=f(ee),q=ee=0,P.mode=11;case 11:if(P.havedict===0)return A.next_out=ie,A.avail_out=me,A.next_in=J,A.avail_in=se,P.hold=ee,P.bits=q,2;A.adler=P.check=1,P.mode=12;case 12:if(M===5||M===6)break e;case 13:if(P.last){ee>>>=7&q,q-=7&q,P.mode=27;break}for(;q<3;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}switch(P.last=1&ee,q-=1,3&(ee>>>=1)){case 0:P.mode=14;break;case 1:if(U(P),P.mode=20,M!==6)break;ee>>>=2,q-=2;break e;case 2:P.mode=17;break;case 3:A.msg="invalid block type",P.mode=30}ee>>>=2,q-=2;break;case 14:for(ee>>>=7&q,q-=7&q;q<32;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if((65535&ee)!=(ee>>>16^65535)){A.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&ee,q=ee=0,P.mode=15,M===6)break e;case 15:P.mode=16;case 16:if(fe=P.length){if(se<fe&&(fe=se),me<fe&&(fe=me),fe===0)break e;s.arraySet(de,te,J,fe,ie),se-=fe,J+=fe,me-=fe,ie+=fe,P.length-=fe;break}P.mode=12;break;case 17:for(;q<14;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(P.nlen=257+(31&ee),ee>>>=5,q-=5,P.ndist=1+(31&ee),ee>>>=5,q-=5,P.ncode=4+(15&ee),ee>>>=4,q-=4,286<P.nlen||30<P.ndist){A.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;q<3;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}P.lens[G[P.have++]]=7&ee,ee>>>=3,q-=3}for(;P.have<19;)P.lens[G[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,F={bits:P.lenbits},ue=c(0,P.lens,0,19,P.lencode,0,P.work,F),P.lenbits=F.bits,ue){A.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;Y=(m=P.lencode[ee&(1<<P.lenbits)-1])>>>16&255,Q=65535&m,!((D=m>>>24)<=q);){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(Q<16)ee>>>=D,q-=D,P.lens[P.have++]=Q;else{if(Q===16){for(p=D+2;q<p;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(ee>>>=D,q-=D,P.have===0){A.msg="invalid bit length repeat",P.mode=30;break}N=P.lens[P.have-1],fe=3+(3&ee),ee>>>=2,q-=2}else if(Q===17){for(p=D+3;q<p;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}q-=D,N=0,fe=3+(7&(ee>>>=D)),ee>>>=3,q-=3}else{for(p=D+7;q<p;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}q-=D,N=0,fe=11+(127&(ee>>>=D)),ee>>>=7,q-=7}if(P.have+fe>P.nlen+P.ndist){A.msg="invalid bit length repeat",P.mode=30;break}for(;fe--;)P.lens[P.have++]=N}}if(P.mode===30)break;if(P.lens[256]===0){A.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,F={bits:P.lenbits},ue=c(h,P.lens,0,P.nlen,P.lencode,0,P.work,F),P.lenbits=F.bits,ue){A.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,F={bits:P.distbits},ue=c(g,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,F),P.distbits=F.bits,ue){A.msg="invalid distances set",P.mode=30;break}if(P.mode=20,M===6)break e;case 20:P.mode=21;case 21:if(6<=se&&258<=me){A.next_out=ie,A.avail_out=me,A.next_in=J,A.avail_in=se,P.hold=ee,P.bits=q,l(A,oe),ie=A.next_out,de=A.output,me=A.avail_out,J=A.next_in,te=A.input,se=A.avail_in,ee=P.hold,q=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;Y=(m=P.lencode[ee&(1<<P.lenbits)-1])>>>16&255,Q=65535&m,!((D=m>>>24)<=q);){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(Y&&!(240&Y)){for($=D,H=Y,ce=Q;Y=(m=P.lencode[ce+((ee&(1<<$+H)-1)>>$)])>>>16&255,Q=65535&m,!($+(D=m>>>24)<=q);){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}ee>>>=$,q-=$,P.back+=$}if(ee>>>=D,q-=D,P.back+=D,P.length=Q,Y===0){P.mode=26;break}if(32&Y){P.back=-1,P.mode=12;break}if(64&Y){A.msg="invalid literal/length code",P.mode=30;break}P.extra=15&Y,P.mode=22;case 22:if(P.extra){for(p=P.extra;q<p;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}P.length+=ee&(1<<P.extra)-1,ee>>>=P.extra,q-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;Y=(m=P.distcode[ee&(1<<P.distbits)-1])>>>16&255,Q=65535&m,!((D=m>>>24)<=q);){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(!(240&Y)){for($=D,H=Y,ce=Q;Y=(m=P.distcode[ce+((ee&(1<<$+H)-1)>>$)])>>>16&255,Q=65535&m,!($+(D=m>>>24)<=q);){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}ee>>>=$,q-=$,P.back+=$}if(ee>>>=D,q-=D,P.back+=D,64&Y){A.msg="invalid distance code",P.mode=30;break}P.offset=Q,P.extra=15&Y,P.mode=24;case 24:if(P.extra){for(p=P.extra;q<p;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}P.offset+=ee&(1<<P.extra)-1,ee>>>=P.extra,q-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){A.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(me===0)break e;if(fe=oe-me,P.offset>fe){if((fe=P.offset-fe)>P.whave&&P.sane){A.msg="invalid distance too far back",P.mode=30;break}re=fe>P.wnext?(fe-=P.wnext,P.wsize-fe):P.wnext-fe,fe>P.length&&(fe=P.length),L=P.window}else L=de,re=ie-P.offset,fe=P.length;for(me<fe&&(fe=me),me-=fe,P.length-=fe;de[ie++]=L[re++],--fe;);P.length===0&&(P.mode=21);break;case 26:if(me===0)break e;de[ie++]=P.length,me--,P.mode=21;break;case 27:if(P.wrap){for(;q<32;){if(se===0)break e;se--,ee|=te[J++]<<q,q+=8}if(oe-=me,A.total_out+=oe,P.total+=oe,oe&&(A.adler=P.check=P.flags?a(P.check,de,oe,ie-oe):o(P.check,de,oe,ie-oe)),oe=me,(P.flags?ee:f(ee))!==P.check){A.msg="incorrect data check",P.mode=30;break}q=ee=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;q<32;){if(se===0)break e;se--,ee+=te[J++]<<q,q+=8}if(ee!==(4294967295&P.total)){A.msg="incorrect length check",P.mode=30;break}q=ee=0}P.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return _}return A.next_out=ie,A.avail_out=me,A.next_in=J,A.avail_in=se,P.hold=ee,P.bits=q,(P.wsize||oe!==A.avail_out&&P.mode<30&&(P.mode<27||M!==4))&&W(A,A.output,A.next_out,oe-A.avail_out)?(P.mode=31,-4):(ne-=A.avail_in,oe-=A.avail_out,A.total_in+=ne,A.total_out+=oe,P.total+=oe,P.wrap&&oe&&(A.adler=P.check=P.flags?a(P.check,de,oe,A.next_out-oe):o(P.check,de,oe,A.next_out-oe)),A.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(ne==0&&oe===0||M===4)&&ue===w&&(ue=-5),ue)},i.inflateEnd=function(A){if(!A||!A.state)return _;var M=A.state;return M.window&&(M.window=null),A.state=null,w},i.inflateGetHeader=function(A,M){var P;return A&&A.state&&2&(P=A.state).wrap?((P.head=M).done=!1,w):_},i.inflateSetDictionary=function(A,M){var P,te=M.length;return A&&A.state?(P=A.state).wrap!==0&&P.mode!==11?_:P.mode===11&&o(1,M,te,0)!==P.check?-3:W(A,M,te,te)?(P.mode=31,-4):(P.havedict=1,w):_},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(h,g,w,_,T,x,j,f){var y,v,b,I,B,k,R,E,U,W=f.bits,A=0,M=0,P=0,te=0,de=0,J=0,ie=0,se=0,me=0,ee=0,q=null,ne=0,oe=new s.Buf16(16),fe=new s.Buf16(16),re=null,L=0;for(A=0;A<=15;A++)oe[A]=0;for(M=0;M<_;M++)oe[g[w+M]]++;for(de=W,te=15;1<=te&&oe[te]===0;te--);if(te<de&&(de=te),te===0)return T[x++]=20971520,T[x++]=20971520,f.bits=1,0;for(P=1;P<te&&oe[P]===0;P++);for(de<P&&(de=P),A=se=1;A<=15;A++)if(se<<=1,(se-=oe[A])<0)return-1;if(0<se&&(h===0||te!==1))return-1;for(fe[1]=0,A=1;A<15;A++)fe[A+1]=fe[A]+oe[A];for(M=0;M<_;M++)g[w+M]!==0&&(j[fe[g[w+M]]++]=M);if(k=h===0?(q=re=j,19):h===1?(q=o,ne-=257,re=a,L-=257,256):(q=l,re=c,-1),A=P,B=x,ie=M=ee=0,b=-1,I=(me=1<<(J=de))-1,h===1&&852<me||h===2&&592<me)return 1;for(;;){for(R=A-ie,U=j[M]<k?(E=0,j[M]):j[M]>k?(E=re[L+j[M]],q[ne+j[M]]):(E=96,0),y=1<<A-ie,P=v=1<<J;T[B+(ee>>ie)+(v-=y)]=R<<24|E<<16|U|0,v!==0;);for(y=1<<A-1;ee&y;)y>>=1;if(y!==0?(ee&=y-1,ee+=y):ee=0,M++,--oe[A]==0){if(A===te)break;A=g[w+j[M]]}if(de<A&&(ee&I)!==b){for(ie===0&&(ie=de),B+=P,se=1<<(J=A-ie);J+ie<te&&!((se-=oe[J+ie])<=0);)J++,se<<=1;if(me+=1<<J,h===1&&852<me||h===2&&592<me)return 1;T[b=ee&I]=de<<24|J<<16|B-x|0}}return ee!==0&&(T[B+ee]=A-ie<<24|64<<16|0),f.bits=de,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),o=0,a=1;function l(m){for(var C=m.length;0<=--C;)m[C]=0}var c=0,h=29,g=256,w=g+1+h,_=30,T=19,x=2*w+1,j=15,f=16,y=7,v=256,b=16,I=17,B=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(w+2));l(W);var A=new Array(2*_);l(A);var M=new Array(512);l(M);var P=new Array(256);l(P);var te=new Array(h);l(te);var de,J,ie,se=new Array(_);function me(m,C,G,Z,X){this.static_tree=m,this.extra_bits=C,this.extra_base=G,this.elems=Z,this.max_length=X,this.has_stree=m&&m.length}function ee(m,C){this.dyn_tree=m,this.max_code=0,this.stat_desc=C}function q(m){return m<256?M[m]:M[256+(m>>>7)]}function ne(m,C){m.pending_buf[m.pending++]=255&C,m.pending_buf[m.pending++]=C>>>8&255}function oe(m,C,G){m.bi_valid>f-G?(m.bi_buf|=C<<m.bi_valid&65535,ne(m,m.bi_buf),m.bi_buf=C>>f-m.bi_valid,m.bi_valid+=G-f):(m.bi_buf|=C<<m.bi_valid&65535,m.bi_valid+=G)}function fe(m,C,G){oe(m,G[2*C],G[2*C+1])}function re(m,C){for(var G=0;G|=1&m,m>>>=1,G<<=1,0<--C;);return G>>>1}function L(m,C,G){var Z,X,pe=new Array(j+1),ve=0;for(Z=1;Z<=j;Z++)pe[Z]=ve=ve+G[Z-1]<<1;for(X=0;X<=C;X++){var ye=m[2*X+1];ye!==0&&(m[2*X]=re(pe[ye]++,ye))}}function D(m){var C;for(C=0;C<w;C++)m.dyn_ltree[2*C]=0;for(C=0;C<_;C++)m.dyn_dtree[2*C]=0;for(C=0;C<T;C++)m.bl_tree[2*C]=0;m.dyn_ltree[2*v]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function Y(m){8<m.bi_valid?ne(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function Q(m,C,G,Z){var X=2*C,pe=2*G;return m[X]<m[pe]||m[X]===m[pe]&&Z[C]<=Z[G]}function $(m,C,G){for(var Z=m.heap[G],X=G<<1;X<=m.heap_len&&(X<m.heap_len&&Q(C,m.heap[X+1],m.heap[X],m.depth)&&X++,!Q(C,Z,m.heap[X],m.depth));)m.heap[G]=m.heap[X],G=X,X<<=1;m.heap[G]=Z}function H(m,C,G){var Z,X,pe,ve,ye=0;if(m.last_lit!==0)for(;Z=m.pending_buf[m.d_buf+2*ye]<<8|m.pending_buf[m.d_buf+2*ye+1],X=m.pending_buf[m.l_buf+ye],ye++,Z===0?fe(m,X,C):(fe(m,(pe=P[X])+g+1,C),(ve=k[pe])!==0&&oe(m,X-=te[pe],ve),fe(m,pe=q(--Z),G),(ve=R[pe])!==0&&oe(m,Z-=se[pe],ve)),ye<m.last_lit;);fe(m,v,C)}function ce(m,C){var G,Z,X,pe=C.dyn_tree,ve=C.stat_desc.static_tree,ye=C.stat_desc.has_stree,Te=C.stat_desc.elems,Ae=-1;for(m.heap_len=0,m.heap_max=x,G=0;G<Te;G++)pe[2*G]!==0?(m.heap[++m.heap_len]=Ae=G,m.depth[G]=0):pe[2*G+1]=0;for(;m.heap_len<2;)pe[2*(X=m.heap[++m.heap_len]=Ae<2?++Ae:0)]=1,m.depth[X]=0,m.opt_len--,ye&&(m.static_len-=ve[2*X+1]);for(C.max_code=Ae,G=m.heap_len>>1;1<=G;G--)$(m,pe,G);for(X=Te;G=m.heap[1],m.heap[1]=m.heap[m.heap_len--],$(m,pe,1),Z=m.heap[1],m.heap[--m.heap_max]=G,m.heap[--m.heap_max]=Z,pe[2*X]=pe[2*G]+pe[2*Z],m.depth[X]=(m.depth[G]>=m.depth[Z]?m.depth[G]:m.depth[Z])+1,pe[2*G+1]=pe[2*Z+1]=X,m.heap[1]=X++,$(m,pe,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(Re,Be){var bt,Vt,Xt,at,zr,Cr,Yt=Be.dyn_tree,Cn=Be.max_code,nn=Be.stat_desc.static_tree,li=Be.stat_desc.has_stree,ui=Be.stat_desc.extra_bits,le=Be.stat_desc.extra_base,De=Be.stat_desc.max_length,ze=0;for(at=0;at<=j;at++)Re.bl_count[at]=0;for(Yt[2*Re.heap[Re.heap_max]+1]=0,bt=Re.heap_max+1;bt<x;bt++)De<(at=Yt[2*Yt[2*(Vt=Re.heap[bt])+1]+1]+1)&&(at=De,ze++),Yt[2*Vt+1]=at,Cn<Vt||(Re.bl_count[at]++,zr=0,le<=Vt&&(zr=ui[Vt-le]),Cr=Yt[2*Vt],Re.opt_len+=Cr*(at+zr),li&&(Re.static_len+=Cr*(nn[2*Vt+1]+zr)));if(ze!==0){do{for(at=De-1;Re.bl_count[at]===0;)at--;Re.bl_count[at]--,Re.bl_count[at+1]+=2,Re.bl_count[De]--,ze-=2}while(0<ze);for(at=De;at!==0;at--)for(Vt=Re.bl_count[at];Vt!==0;)Cn<(Xt=Re.heap[--bt])||(Yt[2*Xt+1]!==at&&(Re.opt_len+=(at-Yt[2*Xt+1])*Yt[2*Xt],Yt[2*Xt+1]=at),Vt--)}}(m,C),L(pe,Ae,m.bl_count)}function N(m,C,G){var Z,X,pe=-1,ve=C[1],ye=0,Te=7,Ae=4;for(ve===0&&(Te=138,Ae=3),C[2*(G+1)+1]=65535,Z=0;Z<=G;Z++)X=ve,ve=C[2*(Z+1)+1],++ye<Te&&X===ve||(ye<Ae?m.bl_tree[2*X]+=ye:X!==0?(X!==pe&&m.bl_tree[2*X]++,m.bl_tree[2*b]++):ye<=10?m.bl_tree[2*I]++:m.bl_tree[2*B]++,pe=X,Ae=(ye=0)===ve?(Te=138,3):X===ve?(Te=6,3):(Te=7,4))}function ue(m,C,G){var Z,X,pe=-1,ve=C[1],ye=0,Te=7,Ae=4;for(ve===0&&(Te=138,Ae=3),Z=0;Z<=G;Z++)if(X=ve,ve=C[2*(Z+1)+1],!(++ye<Te&&X===ve)){if(ye<Ae)for(;fe(m,X,m.bl_tree),--ye!=0;);else X!==0?(X!==pe&&(fe(m,X,m.bl_tree),ye--),fe(m,b,m.bl_tree),oe(m,ye-3,2)):ye<=10?(fe(m,I,m.bl_tree),oe(m,ye-3,3)):(fe(m,B,m.bl_tree),oe(m,ye-11,7));pe=X,Ae=(ye=0)===ve?(Te=138,3):X===ve?(Te=6,3):(Te=7,4)}}l(se);var F=!1;function p(m,C,G,Z){oe(m,(c<<1)+(Z?1:0),3),function(X,pe,ve,ye){Y(X),ne(X,ve),ne(X,~ve),s.arraySet(X.pending_buf,X.window,pe,ve,X.pending),X.pending+=ve}(m,C,G)}i._tr_init=function(m){F||(function(){var C,G,Z,X,pe,ve=new Array(j+1);for(X=Z=0;X<h-1;X++)for(te[X]=Z,C=0;C<1<<k[X];C++)P[Z++]=X;for(P[Z-1]=X,X=pe=0;X<16;X++)for(se[X]=pe,C=0;C<1<<R[X];C++)M[pe++]=X;for(pe>>=7;X<_;X++)for(se[X]=pe<<7,C=0;C<1<<R[X]-7;C++)M[256+pe++]=X;for(G=0;G<=j;G++)ve[G]=0;for(C=0;C<=143;)W[2*C+1]=8,C++,ve[8]++;for(;C<=255;)W[2*C+1]=9,C++,ve[9]++;for(;C<=279;)W[2*C+1]=7,C++,ve[7]++;for(;C<=287;)W[2*C+1]=8,C++,ve[8]++;for(L(W,w+1,ve),C=0;C<_;C++)A[2*C+1]=5,A[2*C]=re(C,5);de=new me(W,k,g+1,w,j),J=new me(A,R,0,_,j),ie=new me(new Array(0),E,0,T,y)}(),F=!0),m.l_desc=new ee(m.dyn_ltree,de),m.d_desc=new ee(m.dyn_dtree,J),m.bl_desc=new ee(m.bl_tree,ie),m.bi_buf=0,m.bi_valid=0,D(m)},i._tr_stored_block=p,i._tr_flush_block=function(m,C,G,Z){var X,pe,ve=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(ye){var Te,Ae=4093624447;for(Te=0;Te<=31;Te++,Ae>>>=1)if(1&Ae&&ye.dyn_ltree[2*Te]!==0)return o;if(ye.dyn_ltree[18]!==0||ye.dyn_ltree[20]!==0||ye.dyn_ltree[26]!==0)return a;for(Te=32;Te<g;Te++)if(ye.dyn_ltree[2*Te]!==0)return a;return o}(m)),ce(m,m.l_desc),ce(m,m.d_desc),ve=function(ye){var Te;for(N(ye,ye.dyn_ltree,ye.l_desc.max_code),N(ye,ye.dyn_dtree,ye.d_desc.max_code),ce(ye,ye.bl_desc),Te=T-1;3<=Te&&ye.bl_tree[2*U[Te]+1]===0;Te--);return ye.opt_len+=3*(Te+1)+5+5+4,Te}(m),X=m.opt_len+3+7>>>3,(pe=m.static_len+3+7>>>3)<=X&&(X=pe)):X=pe=G+5,G+4<=X&&C!==-1?p(m,C,G,Z):m.strategy===4||pe===X?(oe(m,2+(Z?1:0),3),H(m,W,A)):(oe(m,4+(Z?1:0),3),function(ye,Te,Ae,Re){var Be;for(oe(ye,Te-257,5),oe(ye,Ae-1,5),oe(ye,Re-4,4),Be=0;Be<Re;Be++)oe(ye,ye.bl_tree[2*U[Be]+1],3);ue(ye,ye.dyn_ltree,Te-1),ue(ye,ye.dyn_dtree,Ae-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,ve+1),H(m,m.dyn_ltree,m.dyn_dtree)),D(m),Z&&Y(m)},i._tr_tally=function(m,C,G){return m.pending_buf[m.d_buf+2*m.last_lit]=C>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&C,m.pending_buf[m.l_buf+m.last_lit]=255&G,m.last_lit++,C===0?m.dyn_ltree[2*G]++:(m.matches++,C--,m.dyn_ltree[2*(P[G]+g+1)]++,m.dyn_dtree[2*q(C)]++),m.last_lit===m.lit_bufsize-1},i._tr_align=function(m){oe(m,2,3),fe(m,v,W),function(C){C.bi_valid===16?(ne(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):8<=C.bi_valid&&(C.pending_buf[C.pending++]=255&C.bi_buf,C.bi_buf>>=8,C.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,h,g,w=1,_={},T=!1,x=o.document,j=Object.getPrototypeOf&&Object.getPrototypeOf(o);j=j&&j.setTimeout?j:o,l={}.toString.call(o.process)==="[object process]"?function(b){We.nextTick(function(){y(b)})}:function(){if(o.postMessage&&!o.importScripts){var b=!0,I=o.onmessage;return o.onmessage=function(){b=!1},o.postMessage("","*"),o.onmessage=I,b}}()?(g="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",v,!1):o.attachEvent("onmessage",v),function(b){o.postMessage(g+b,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(b){y(b.data)},function(b){h.port2.postMessage(b)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(b){var I=x.createElement("script");I.onreadystatechange=function(){y(b),I.onreadystatechange=null,c.removeChild(I),I=null},c.appendChild(I)}):function(b){setTimeout(y,0,b)},j.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var I=new Array(arguments.length-1),B=0;B<I.length;B++)I[B]=arguments[B+1];var k={callback:b,args:I};return _[w]=k,l(w),w++},j.clearImmediate=f}function f(b){delete _[b]}function y(b){if(T)setTimeout(y,0,b);else{var I=_[b];if(I){T=!0;try{(function(B){var k=B.callback,R=B.args;switch(R.length){case 0:k();break;case 1:k(R[0]);break;case 2:k(R[0],R[1]);break;case 3:k(R[0],R[1],R[2]);break;default:k.apply(a,R)}})(I)}finally{f(b),T=!1}}}}function v(b){b.source===o&&typeof b.data=="string"&&b.data.indexOf(g)===0&&y(+b.data.slice(g.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof _n<"u"?_n:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(gp)),gp.exports}var p3=f3();const m3=gS(p3);var xa={exports:{}},yp,Pw;function g3(){if(Pw)return yp;Pw=1;var t={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function e(r){return r&&r.replace?r.replace(/([&"<>'])/g,function(n,i){return t[i]}):r}return yp=e,yp}var jw;function y3(){if(jw)return xa.exports;jw=1;var t=g3(),e=V0().Stream,r="    ";function n(c,h){typeof h!="object"&&(h={indent:h});var g=h.stream?new e:null,w="",_=!1,T=h.indent?h.indent===!0?r:h.indent:"",x=!0;function j(I){x?We.nextTick(I):I()}function f(I,B){if(B!==void 0&&(w+=B),I&&!_&&(g=g||new e,_=!0),I&&_){var k=w;j(function(){g.emit("data",k)}),w=""}}function y(I,B){a(f,o(I,T,T?1:0),B)}function v(){if(g){var I=w;j(function(){g.emit("data",I),g.emit("end"),g.readable=!1,g.emit("close")})}}function b(I){var B=I.encoding||"UTF-8",k={version:"1.0",encoding:B};I.standalone&&(k.standalone=I.standalone),y({"?xml":{_attr:k}}),w=w.replace("/>","?>")}return j(function(){x=!1}),h.declaration&&b(h.declaration),c&&c.forEach?c.forEach(function(I,B){var k;B+1===c.length&&(k=v),y(I,k)}):y(c,v),g?(g.readable=!0,g):w}function i(){var c=Array.prototype.slice.call(arguments),h={_elem:o(c)};return h.push=function(g){if(!this.append)throw new Error("not assigned to a parent!");var w=this,_=this._elem.indent;a(this.append,o(g,_,this._elem.icount+(_?1:0)),function(){w.append(!0)})},h.close=function(g){g!==void 0&&this.push(g),this.end&&this.end()},h}function s(c,h){return new Array(h||0).join(c||"")}function o(c,h,g){g=g||0;var w=s(h,g),_,T=c,x=!1;if(typeof c=="object"){var j=Object.keys(c);if(_=j[0],T=c[_],T&&T._elem)return T._elem.name=_,T._elem.icount=g,T._elem.indent=h,T._elem.indents=w,T._elem.interrupt=T,T._elem}var f=[],y=[],v;function b(I){var B=Object.keys(I);B.forEach(function(k){f.push(l(k,I[k]))})}switch(typeof T){case"object":if(T===null)break;T._attr&&b(T._attr),T._cdata&&y.push(("<![CDATA["+T._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),T.forEach&&(v=!1,y.push(""),T.forEach(function(I){if(typeof I=="object"){var B=Object.keys(I)[0];B=="_attr"?b(I._attr):y.push(o(I,h,g+1))}else y.pop(),v=!0,y.push(t(I))}),v||y.push(""));break;default:y.push(t(T))}return{name:_,interrupt:x,attributes:f,content:y,icount:g,indents:w,indent:h}}function a(c,h,g){if(typeof h!="object")return c(!1,h);var w=h.interrupt?1:h.content.length;function _(){for(;h.content.length;){var x=h.content.shift();if(x!==void 0){if(T(x))return;a(c,x)}}c(!1,(w>1?h.indents:"")+(h.name?"</"+h.name+">":"")+(h.indent&&!g?`
`:"")),g&&g()}function T(x){return x.interrupt?(x.interrupt.append=c,x.interrupt.end=_,x.interrupt=!1,c(!0),!0):!1}if(c(!1,h.indents+(h.name?"<"+h.name:"")+(h.attributes.length?" "+h.attributes.join(" "):"")+(w?h.name?">":"":h.name?"/>":"")+(h.indent&&w>1?`
`:"")),!w)return c(!1,h.indent?`
`:"");T(h)||_()}function l(c,h){return c+'="'+t(h)+'"'}return xa.exports=n,xa.exports.element=xa.exports.Element=i,xa.exports}var v3=y3();const xt=gS(v3),Ea=0,vp=32,_3=32,w3=(t,e)=>{const r=e.replace(/-/g,"");if(r.length!==_3)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const i=r.replace(/(..)/g,"$1 ").trim().split(" ").map(l=>parseInt(l,16));i.reverse();const o=t.slice(Ea,vp).map((l,c)=>l^i[c%i.length]),a=new Uint8Array(Ea+o.length+Math.max(0,t.length-vp));return a.set(t.slice(0,Ea)),a.set(o,Ea),a.set(t.slice(vp),Ea+o.length),a};class b3{format(e,r={stack:[]}){const n=e.prepForXml(r);if(n)return n;throw Error("XMLComponent did not format correctly")}}class x3{replace(e,r,n){let i=e;return r.forEach((s,o)=>{i=i.replace(new RegExp(`{${s.fileName}}`,"g"),(n+o).toString())}),i}getMediaData(e,r){return r.Array.filter(n=>e.search(`{${n.fileName}}`)>0)}}class E3{replace(e,r){let n=e;for(const i of r)n=n.replace(new RegExp(`{${i.reference}-${i.instance}}`,"g"),i.numId.toString());return n}}class T3{constructor(){Gn(this,"formatter"),Gn(this,"imageReplacer"),Gn(this,"numberingReplacer"),this.formatter=new b3,this.imageReplacer=new x3,this.numberingReplacer=new E3}compile(e,r,n=[]){const i=new m3,s=this.xmlifyFile(e,r),o=new Map(Object.entries(s));for(const[,a]of o)if(Array.isArray(a))for(const l of a)i.file(l.path,l.data);else i.file(a.path,a.data);for(const a of n)i.file(a.path,a.data);for(const a of e.Media.Array)a.type!=="svg"?i.file(`word/media/${a.fileName}`,a.data):(i.file(`word/media/${a.fileName}`,a.data),i.file(`word/media/${a.fallback.fileName}`,a.fallback.data));for(const{data:a,name:l,fontKey:c}of e.FontTable.fontOptionsWithKey){const[h]=l.split(".");i.file(`word/fonts/${h}.odttf`,w3(a,c))}return i}xmlifyFile(e,r){const n=e.Document.Relationships.RelationshipCount+1,i=xt(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=e.Comments.Relationships.RelationshipCount+1,o=xt(this.formatter.format(e.Comments,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),a=this.imageReplacer.getMediaData(i,e.Media),l=this.imageReplacer.getMediaData(o,e.Media);return{Relationships:{data:(a.forEach((c,h)=>{e.Document.Relationships.createRelationship(n+h,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${c.fileName}`)}),e.Document.Relationships.createRelationship(e.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),xt(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const c=this.imageReplacer.replace(i,a,n);return this.numberingReplacer.replace(c,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const c=xt(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(c,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:xt(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:xt(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:xt(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((c,h)=>{const g=xt(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(g,e.Media).forEach((_,T)=>{c.Relationships.createRelationship(T,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${_.fileName}`)}),{data:xt(this.formatter.format(c.Relationships,{viewWrapper:c,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${h+1}.xml.rels`}}),FooterRelationships:e.Footers.map((c,h)=>{const g=xt(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(g,e.Media).forEach((_,T)=>{c.Relationships.createRelationship(T,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${_.fileName}`)}),{data:xt(this.formatter.format(c.Relationships,{viewWrapper:c,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${h+1}.xml.rels`}}),Headers:e.Headers.map((c,h)=>{const g=xt(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),w=this.imageReplacer.getMediaData(g,e.Media),_=this.imageReplacer.replace(g,w,0);return{data:this.numberingReplacer.replace(_,e.Numbering.ConcreteNumbering),path:`word/header${h+1}.xml`}}),Footers:e.Footers.map((c,h)=>{const g=xt(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),w=this.imageReplacer.getMediaData(g,e.Media),_=this.imageReplacer.replace(g,w,0);return{data:this.numberingReplacer.replace(_,e.Numbering.ConcreteNumbering),path:`word/footer${h+1}.xml`}}),ContentTypes:{data:xt(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:xt(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:xt(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:xt(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:xt(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:xt(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const c=this.imageReplacer.replace(o,l,s);return this.numberingReplacer.replace(c,e.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(l.forEach((c,h)=>{e.Comments.Relationships.createRelationship(s+h,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${c.fileName}`)}),xt(this.formatter.format(e.Comments.Relationships,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:xt(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:xt(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const S3={WITH_2_BLANKS:"  "},Dw=t=>t===!0?S3.WITH_2_BLANKS:t===!1?void 0:t,A3=class ro{static pack(e,r,n){return Y5(this,arguments,function*(i,s,o,a=[]){return this.compiler.compile(i,Dw(o),a).generateAsync({type:s,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(e,r,n=[]){return ro.pack(e,"string",r,n)}static toBuffer(e,r,n=[]){return ro.pack(e,"nodebuffer",r,n)}static toBase64String(e,r,n=[]){return ro.pack(e,"base64",r,n)}static toBlob(e,r,n=[]){return ro.pack(e,"blob",r,n)}static toArrayBuffer(e,r,n=[]){return ro.pack(e,"arraybuffer",r,n)}static toStream(e,r,n=[]){const i=new h3.Stream;return this.compiler.compile(e,Dw(r),n).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(o=>{i.emit("data",o),i.emit("end")}),i}};Gn(A3,"compiler",new T3);var $S={exports:{}};(function(t,e){(function(r,n){n()})(da,function(){function r(c,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,h,g){var w=new XMLHttpRequest;w.open("GET",c),w.responseType="blob",w.onload=function(){l(w.response,h,g)},w.onerror=function(){console.error("could not download file")},w.send()}function i(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof da=="object"&&da.global===da?da:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,h,g){var w=o.URL||o.webkitURL,_=document.createElement("a");h=h||c.name||"download",_.download=h,_.rel="noopener",typeof c=="string"?(_.href=c,_.origin===location.origin?s(_):i(_.href)?n(c,h,g):s(_,_.target="_blank")):(_.href=w.createObjectURL(c),setTimeout(function(){w.revokeObjectURL(_.href)},4e4),setTimeout(function(){s(_)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,g){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(r(c,g),h);else if(i(c))n(c,h,g);else{var w=document.createElement("a");w.href=c,w.target="_blank",setTimeout(function(){s(w)})}}:function(c,h,g,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof c=="string")return n(c,h,g);var _=c.type==="application/octet-stream",T=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||_&&T||a)&&typeof FileReader<"u"){var j=new FileReader;j.onloadend=function(){var v=j.result;v=x?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=v:location=v,w=null},j.readAsDataURL(c)}else{var f=o.URL||o.webkitURL,y=f.createObjectURL(c);w?w.location=y:location.href=y,w=null,setTimeout(function(){f.revokeObjectURL(y)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})($S);var I3=$S.exports;const hn="alfa-tecnologia-hospitalar-prod",vo=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],N3=({data:t,colors:e,onClick:r})=>{const n=t.reduce((s,o)=>s+o.value,0);let i=0;return n===0?d.jsx("div",{className:"text-gray-400 text-xs text-center py-10",children:"Sem dados"}):d.jsxs("div",{className:"relative w-48 h-48 mx-auto group cursor-pointer",children:[d.jsxs("svg",{viewBox:"0 0 100 100",className:"transform -rotate-90 w-full h-full",children:[t.map((s,o)=>{const a=s.value/n*360,l=a>180?1:0,c=50+40*Math.cos(i*Math.PI/180),h=50+40*Math.sin(i*Math.PI/180),g=50+40*Math.cos((i+a)*Math.PI/180),w=50+40*Math.sin((i+a)*Math.PI/180),_=n===s.value?"M 50 10 a 40 40 0 1 1 0 80 a 40 40 0 1 1 0 -80":`M 50 50 L ${c} ${h} A 40 40 0 ${l} 1 ${g} ${w} Z`;return i+=a,d.jsx("path",{d:_,fill:e[o%e.length],stroke:"white",strokeWidth:"2",className:"hover:opacity-80 transition-opacity",onClick:T=>{T.stopPropagation(),r(s.label)}},o)}),d.jsx("circle",{cx:"50",cy:"50",r:"25",fill:"white",className:"pointer-events-none"})]}),d.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col pointer-events-none",children:[d.jsx("span",{className:"text-3xl font-black text-slate-800",children:n}),d.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Total"})]}),d.jsx("div",{className:"absolute -bottom-6 left-0 right-0 text-center opacity-0 group-hover:opacity-100 transition-opacity text-[10px] text-blue-500 font-bold bg-white/90 py-1 rounded-full pointer-events-none",children:"Clique para filtrar"})]})},k3=t=>{we.useEffect(()=>{const e=r=>{r.key==="Escape"&&t()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t])},Ow=({data:t,maxVal:e,colorClass:r,onClick:n,showValues:i=!0})=>d.jsx("div",{className:"space-y-3",children:t.map((s,o)=>d.jsxs("div",{className:"space-y-1 cursor-pointer group hover:bg-slate-50 p-2 rounded-xl transition-colors",onClick:()=>n&&n(s.label),children:[d.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-600 group-hover:text-blue-600 transition-colors",children:[d.jsx("span",{className:"truncate pr-2",children:s.label}),d.jsx("span",{className:"whitespace-nowrap",children:i?s.valueFormatted||s.value:""})]}),d.jsx("div",{className:"h-3 w-full bg-slate-100 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full rounded-full ${r} group-hover:brightness-90 transition-all`,style:{width:`${e>0?s.value/e*100:0}%`}})})]},o))}),C3=({message:t,type:e="error",onClose:r})=>{const n={error:{bg:"bg-red-500",icon:d.jsx(Hi,{size:20}),title:"Ateno!",border:"border-l-4 border-red-600"},success:{bg:"bg-green-500",icon:d.jsx(Lm,{size:20}),title:"Sucesso!",border:"border-l-4 border-green-600"},info:{bg:"bg-blue-500",icon:d.jsx(Qa,{size:20}),title:"Informao",border:"border-l-4 border-blue-600"}},{bg:i,icon:s,title:o,border:a}=n[e];return d.jsx("div",{className:"fixed top-6 right-6 z-[100] animate-in slide-in-from-right-8 fade-in duration-300",children:d.jsxs("div",{className:`${i} ${a} text-white px-6 py-4 rounded-r-2xl shadow-2xl flex items-start gap-3 min-w-[320px] max-w-[400px]`,children:[d.jsx("div",{className:"flex-shrink-0 mt-0.5",children:s}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-bold text-sm mb-1",children:o}),d.jsx("div",{className:"text-sm opacity-90 whitespace-pre-line",children:t})]}),d.jsx("button",{onClick:r,className:"ml-2 opacity-70 hover:opacity-100 transition-opacity flex-shrink-0",children:d.jsx(Xr,{size:16})})]})})},nt=t=>t?typeof t=="number"?t:parseFloat(t.toString().replace(/\./g,"").replace(",","."))||0:0,fn=({icon:t,label:e,active:r,onClick:n,isSidebarOpen:i})=>d.jsxs("button",{onClick:n,className:`
            w-full flex items-center transition-colors rounded-xl
            ${i?"gap-4 p-3":"justify-center p-2"}
            ${r?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800"}
        `,title:i?"":e,children:[d.jsx("div",{className:`
            flex items-center justify-center
            ${i?"w-6":"w-8"}
        `,children:t}),i&&d.jsx("span",{className:"text-sm font-bold tracking-tight whitespace-nowrap",children:e})]}),Dr=({value:t,onChange:e,options:r,className:n="",disabled:i=!1,id:s,label:o,variant:a="default"})=>{const l=we.useRef(null),c=_=>{if(i)return;const T=r.findIndex(x=>x.value===t||x===t);switch(_.key){case"ArrowUp":case"ArrowLeft":if(_.preventDefault(),T>0){const x=r[T-1].value||r[T-1];e({target:{value:x}})}break;case"ArrowDown":case"ArrowRight":if(_.preventDefault(),T<r.length-1){const x=r[T+1].value||r[T+1];e({target:{value:x}})}break;case"Home":if(_.preventDefault(),r.length>0){const x=r[0].value||r[0];e({target:{value:x}})}break;case"End":if(_.preventDefault(),r.length>0){const x=r[r.length-1].value||r[r.length-1];e({target:{value:x}})}break;case" ":case"Enter":_.preventDefault(),l.current&&l.current.focus();break}},h={default:"bg-white border border-slate-200 text-slate-900",dark:"bg-slate-900 text-white border-none",light:"bg-slate-100 border-none text-slate-900",indigo:"bg-white border border-indigo-200 text-slate-900"},g="w-full p-4 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold cursor-pointer",w=h[a]||h.default;return d.jsx("select",{ref:l,id:s,value:t,onChange:e,className:`${g} ${w} ${n} ${i?"opacity-50 cursor-not-allowed":""}`,disabled:i,onKeyDown:c,"aria-label":o,tabIndex:0,children:r.map((_,T)=>typeof _=="object"?d.jsx("option",{value:_.value,tabIndex:0,className:"text-slate-900",children:_.label},_.value):d.jsx("option",{value:_,tabIndex:0,className:"text-slate-900",children:_},_))})},R3=({value:t,onChange:e,billingType:r})=>{const n=[`1 Visita de ${vo[new Date().getMonth()]}`,`2 Visita de ${vo[new Date().getMonth()]}`,`3 Visita de ${vo[new Date().getMonth()]}`,`4 Visita de ${vo[new Date().getMonth()]}`];return r!=="Contrato de manuteno"?null:d.jsx(Dr,{value:t,onChange:e,options:n,variant:"indigo",className:"animate-in slide-in-from-top-2",label:"Visita de manuteno"})},P3=({isOpen:t,onClose:e,selectedOrdersCount:r,totalValue:n,initialData:i,onConfirm:s})=>{const[o,a]=we.useState({paymentCondition:" vista",installments:"",discount5Days:!1,finalChargedAmount:n});we.useEffect(()=>{t&&a({paymentCondition:i.paymentCondition||" vista",installments:i.installments||"",discount5Days:i.discount5Days||!1,finalChargedAmount:n})},[t,i,n]),we.useEffect(()=>{if(o.discount5Days){const h=n*.05,g=n-h;a(w=>({...w,finalChargedAmount:g}))}else a(h=>({...h,finalChargedAmount:n}))},[o.discount5Days,n]);const l={Boleto:["30 / 60 dias","5 dias (5% de desconto)"],Carto:["1x (30 Dias)","2x (30/60 Dias)","3x (30/60/90 Dias)","4x (30/60/90/120 Dias)"]},c=()=>{s(o),e()};return t?d.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl border border-slate-200 space-y-6 animate-in zoom-in-95",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 p-3 rounded-full text-blue-600",children:d.jsx(Mm,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Condies de Pagamento"}),d.jsxs("p",{className:"text-slate-500 text-sm",children:["Ajuste as condies para ",r," OS(s) selecionadas"]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Valor Total"}),d.jsxs("div",{className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-black text-2xl text-slate-800 text-center",children:["R$ ",n.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Condio de Pagamento"}),d.jsx(Dr,{value:o.paymentCondition,onChange:h=>a({...o,paymentCondition:h.target.value,installments:h.target.value===" vista"?"":o.installments}),options:[" vista","Boleto","Carto"],label:"Condio de pagamento"})]}),(o.paymentCondition==="Boleto"||o.paymentCondition==="Carto")&&d.jsxs("div",{className:"space-y-2 animate-in fade-in",children:[d.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Parcelas"}),o.paymentCondition==="Boleto"?d.jsxs("div",{className:"space-y-3",children:[d.jsx(Dr,{value:o.installments,onChange:h=>{const g=h.target.value==="5 dias (5% de desconto)";a({...o,installments:h.target.value,discount5Days:g})},options:l.Boleto,label:"Parcelas boleto"}),o.discount5Days&&d.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 space-y-1",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-xs font-bold text-green-700 uppercase",children:"Desconto de 5%"}),d.jsxs("span",{className:"text-sm font-black text-green-600",children:["- R$ ",(n*.05).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-green-100",children:[d.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Valor Final"}),d.jsxs("span",{className:"text-lg font-black text-slate-800",children:["R$ ",o.finalChargedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}):d.jsx(Dr,{value:o.installments,onChange:h=>a({...o,installments:h.target.value}),options:l.Carto,label:"Parcelas carto"})]}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[d.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-2",children:[d.jsx(Qa,{size:16}),d.jsx("span",{className:"text-xs font-bold uppercase",children:"Informao"})]}),d.jsxs("p",{className:"text-xs text-blue-700",children:["Estas condies de pagamento sero aplicadas a todas as ",r," OS(s) selecionadas e salvas no sistema."]})]})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:e,className:"flex-1 py-4 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancelar"}),d.jsxs("button",{onClick:c,className:"flex-1 py-4 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-xl shadow-blue-200 transition-colors flex items-center justify-center gap-2",children:[d.jsx(dS,{size:20})," Confirmar e Imprimir"]})]})]})}):null};function j3(){const{user:t,userData:e,loading:r,hasPermission:n,logout:i}=ta(),s=we.useRef(null),o=we.useRef(null),a=we.useRef(null),l=we.useRef(null),[c,h]=we.useState(""),[g,w]=we.useState(""),[_,T]=we.useState("os"),[x,j]=we.useState(!0),[f,y]=we.useState(!0),[v,b]=we.useState([]),[I,B]=we.useState([]),[k,R]=we.useState([]),[E,U]=we.useState(!0),[W,A]=we.useState(""),[M,P]=we.useState("desc"),[te,de]=we.useState(!1),[J,ie]=we.useState(!1),[se,me]=we.useState(!1),[ee,q]=we.useState(!1),[ne,oe]=we.useState(!1),[fe,re]=we.useState(!1),[L,D]=we.useState(!1),[Y,Q]=we.useState(!1),[$,H]=we.useState(!1),[ce,N]=we.useState(!1),[ue,F]=we.useState(!1),[p,m]=we.useState(!1),[C,G]=we.useState(!1),[Z,X]=we.useState(!1),[pe,ve]=we.useState(null),[ye,Te]=we.useState(null),[Ae,Re]=we.useState(!1),[Be,bt]=we.useState([]),[Vt,Xt]=we.useState(""),[at,zr]=we.useState(""),[Cr,Yt]=we.useState(""),[Cn,nn]=we.useState(""),[li,ui]=we.useState(""),[le,De]=we.useState({client:"",cnpj:"",contactPerson:"",address:"",email:"",billingType:"Avulso",maintenanceVisit:"",item:"",manufacturer:"",model:"",serial:"",equipmentObservation:"",defect:"",defectsList:[],solutionType:"Preenchimento manual",solution:"",manualSolutionsList:[],benchRepairList:[],solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",statusDate:new Date().toISOString().split("T")[0],statusHistory:[],trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:"",osNumber:"",deliveryDeadline:"",discount5Days:!1,discountAmount:0,finalChargedAmount:0}),[ze,ft]=we.useState({clientName:"",cnpj:"",address:"",contactPerson:"",email:"",startDate:"",endDate:"",monthlyValue:"",annualValue:"",coveredItems:{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:""}),[lr,qr]=we.useState({client:!1,item:!1,defect:!1,solution:!1,notRepairableDetail:!1,solutionsList:!1,benchRepairList:!1}),[Ds,Rn]=we.useState({show:!1,message:"",type:"error"}),[Zi,Ut]=we.useState("Recebido"),[Os,es]=we.useState(new Date().toISOString().split("T")[0]),[ci,Md]=we.useState({totalValue:0,paymentCondition:" vista",installments:"",discount5Days:!1,finalChargedAmount:0}),Ls=[{value:"Recebido",label:"Recebido"},{value:"Em inspeo",label:"Inspeo"},{value:"Em oramento",label:"Oramento"},{value:"Aguardando aprovao do oramento",label:"Aprovao"},{value:"Em manuteno",label:"Manuteno"},{value:"Em rota de entrega",label:"Entrega"},{value:"Finalizado",label:"Finalizado"}],Pn=Ls.map(O=>O.value),Fd=["Avulso","Cortesia (visita sem custo)","Contrato de manuteno"];vo[new Date().getMonth()];const Vd=["Preenchimento manual","Manual com custos detalhados","Conserto em bancada","No passvel de conserto, substituir por novo equipamento / material"],ts={Boleto:["30 / 60 dias","5 dias (5% de desconto)"],Carto:["1x (30 Dias)","2x (30/60 Dias)","3x (30/60/90 Dias)","4x (30/60/90/120 Dias)"]},rt=(O,z="error")=>{Rn({show:!0,message:O,type:z}),setTimeout(()=>{Rn(ae=>({...ae,show:!1}))},5e3)},Dt=O=>f?O.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):"R$ ",Ms=()=>{const O=nt(le.costThirdPartyShipping),z=nt(le.costParts),ae=nt(le.costClientShipping),be=nt(le.chargedAmount),_e=le.solutionsList.reduce((Bt,gt)=>Bt+nt(gt.cost),0),Pe=O+z+ae,Ce=Pe*1.6,Ne=le.discount5Days&&le.finalChargedAmount||be,Ve=Ne-Pe;return{totalCost:Pe,profit:Ve,suggestedValue:Ce,solutionsTotal:_e,finalCharged:Ne}},{totalCost:sn,profit:jn,suggestedValue:Wl,solutionsTotal:na}=Ms(),Fs=()=>{const O=[],z={...lr};return Object.keys(z).forEach(ae=>z[ae]=!1),le.client.trim()||(O.push(" Cliente  obrigatrio"),z.client=!0),le.item.trim()||(O.push(" Item/Equipamento  obrigatrio"),z.item=!0),(!le.defectsList||le.defectsList.length===0)&&!le.defect.trim()&&(O.push(" Descrio do defeito  obrigatria"),z.defect=!0),le.solutionType==="Preenchimento manual"&&(!le.manualSolutionsList||le.manualSolutionsList.length===0)&&!le.solution.trim()&&(O.push(" Descrio da soluo  obrigatria no modo manual"),z.solution=!0),le.solutionType==="Conserto em bancada"&&(!le.benchRepairList||le.benchRepairList.length===0)&&(O.push(" Descreva as etapas do conserto em bancada"),z.benchRepairList=!0),le.solutionType==="No passvel de conserto, substituir por novo equipamento / material"&&!le.notRepairableDetail&&(O.push(" Detalhe a substituio por novo equipamento/material"),z.notRepairableDetail=!0),le.solutionType==="Manual com custos detalhados"&&le.solutionsList.length===0&&(O.push(" Adicione pelo menos um item na lista de solues com custo"),z.solutionsList=!0),qr(z),O.length>0?(rt(`Preencha os campos obrigatrios:
`+O.join(`
`),"error"),!0):!1},Hl=O=>{let z=!1;switch(O){case"client":z=!le.client.trim();break;case"item":z=!le.item.trim();break;case"defect":z=(!le.defectsList||le.defectsList.length===0)&&!le.defect.trim();break;case"solution":z=le.solutionType==="Preenchimento manual"&&(!le.manualSolutionsList||le.manualSolutionsList.length===0)&&!le.solution.trim();break;case"benchRepairList":z=le.solutionType==="Conserto em bancada"&&(!le.benchRepairList||le.benchRepairList.length===0);break;case"notRepairableDetail":z=le.solutionType==="No passvel de conserto, substituir por novo equipamento / material"&&!le.notRepairableDetail;break;case"solutionsList":z=le.solutionType==="Manual com custos detalhados"&&le.solutionsList.length===0;break}qr(ae=>({...ae,[O]:z}))},Kl=we.useMemo(()=>{const O=new Map;return I.forEach(z=>{z.clientName&&O.set(z.clientName.trim(),{client:z.clientName,cnpj:z.cnpj,contactPerson:z.contactPerson,email:z.email,address:z.address})}),[...v].reverse().forEach(z=>{if(z.client&&!O.has(z.client.trim()))O.set(z.client.trim(),{client:z.client,cnpj:z.cnpj||"",contactPerson:z.contactPerson||"",email:z.email||"",address:z.address||""});else if(z.client&&O.has(z.client.trim())){const ae=O.get(z.client.trim());!ae.cnpj&&z.cnpj&&(ae.cnpj=z.cnpj),!ae.address&&z.address&&(ae.address=z.address),!ae.contactPerson&&z.contactPerson&&(ae.contactPerson=z.contactPerson),!ae.email&&z.email&&(ae.email=z.email)}}),Array.from(O.values()).sort((z,ae)=>z.client.localeCompare(ae.client))},[v,I]),Gl=we.useMemo(()=>{const O=new Set;return v.forEach(z=>{z.defect&&z.defect.length>3&&O.add(z.defect),z.defectsList&&Array.isArray(z.defectsList)&&z.defectsList.forEach(ae=>{ae&&ae.length>2&&O.add(ae)})}),[...O].sort()},[v]),Dn=we.useMemo(()=>{const O=new Set;return v.forEach(z=>{z.solution&&z.solution.length>3&&O.add(z.solution),z.manualSolutionsList&&Array.isArray(z.manualSolutionsList)&&z.manualSolutionsList.forEach(ae=>{ae&&ae.length>2&&O.add(ae)}),z.solutionsList&&Array.isArray(z.solutionsList)&&z.solutionsList.forEach(ae=>{ae.text&&ae.text.length>2&&O.add(ae.text)}),z.benchRepairList&&Array.isArray(z.benchRepairList)&&z.benchRepairList.forEach(ae=>{ae&&ae.length>2&&O.add(ae)})}),[...O].sort()},[v]),ia=we.useMemo(()=>[...new Set(v.map(O=>O.item).filter(O=>O&&O.length>1))].sort(),[v]),Vs=we.useMemo(()=>[...new Set(v.map(O=>O.manufacturer).filter(O=>O&&O.length>1))].sort(),[v]),di=we.useMemo(()=>[...new Set(v.map(O=>O.model).filter(O=>O&&O.length>1))].sort(),[v]),on=we.useMemo(()=>[...new Set(v.map(O=>O.serial).filter(O=>O&&O.length>1))].sort(),[v]),Ke=we.useMemo(()=>{let O=v;return(e==null?void 0:e.role)==="client"&&e.displayName&&(O=O.filter(z=>z.client===e.displayName)),O},[v,e]),Us=we.useMemo(()=>[...Ke].sort((O,z)=>{var ae,be;return M==="desc"?(ae=z.osNumber)==null?void 0:ae.localeCompare(O.osNumber):(be=O.osNumber)==null?void 0:be.localeCompare(z.osNumber)}),[Ke,M]),Rr=we.useMemo(()=>{let O=0,z=0,ae=0,be={};Ke.forEach(Ce=>{const Ne=nt(Ce.chargedAmount),Ve=nt(Ce.costThirdPartyShipping)+nt(Ce.costParts)+nt(Ce.costClientShipping),Bt=Ne-Ve;O+=Ne,z+=Ve,ae+=Bt,Ne>0&&(be[Ce.client]=(be[Ce.client]||0)+Ne)});const _e=O>0?ae/O*100:0,Pe=Object.entries(be).map(([Ce,Ne])=>({label:Ce,value:Ne,valueFormatted:`R$ ${Ne.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`})).sort((Ce,Ne)=>Ne.value-Ce.value).slice(0,5);return{totalRevenue:O,totalCosts:z,totalProfit:ae,margin:_e,topClients:Pe}},[Ke]),sa=we.useMemo(()=>{const O=new Set(Ke.filter(be=>be.billingType==="Contrato de manuteno").map(be=>be.client)),z=new Set(I.map(be=>be.clientName));return[...new Set([...O,...z])].map(be=>{const _e=I.find(Ce=>Ce.clientName===be),Pe=Ke.find(Ce=>Ce.client===be);return{clientName:be,cnpj:(_e==null?void 0:_e.cnpj)||(Pe==null?void 0:Pe.cnpj)||"",address:(_e==null?void 0:_e.address)||(Pe==null?void 0:Pe.address)||"",contactPerson:(_e==null?void 0:_e.contactPerson)||(Pe==null?void 0:Pe.contactPerson)||"",email:(_e==null?void 0:_e.email)||(Pe==null?void 0:Pe.email)||"",startDate:(_e==null?void 0:_e.startDate)||"",endDate:(_e==null?void 0:_e.endDate)||"",monthlyValue:(_e==null?void 0:_e.monthualValue)||"",annualValue:(_e==null?void 0:_e.annualValue)||"",coveredItems:(_e==null?void 0:_e.coveredItems)||{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:(_e==null?void 0:_e.observations)||"",isConfigured:!!_e}}).sort((be,_e)=>be.clientName.localeCompare(_e.clientName))},[Ke,I]),$r=()=>{if(!e)return!1;if(e.role==="admin")return!0;if(e.role==="client")return["os","status","about"].includes(_);const z={os:"canViewOS",status:"canViewOS",financial:"canViewFinancial",contracts:"canViewContracts",inventory:"canViewOS",clients:"canViewAllClients",users:"canManageUsers",about:!0}[_];return z===!0||n(z)};we.useEffect(()=>{if(!t||r)return;const O=k_(ja(Ot,"artifacts",hn,"public","data","serviceOrders"),ae=>{const be=ae.docs.map(_e=>({firestoreId:_e.id,..._e.data()}));b(be.sort((_e,Pe)=>{var Ce;return(Ce=Pe.osNumber)==null?void 0:Ce.localeCompare(_e.osNumber)})),U(!1)},ae=>{console.error("Erro ao buscar OS:",ae),U(!1)}),z=k_(ja(Ot,"artifacts",hn,"public","data","contracts"),ae=>{B(ae.docs.map(be=>be.data()))},ae=>{console.error("Erro ao buscar contratos:",ae)});return()=>{O(),z()}},[t,r]),we.useEffect(()=>{if(le.discount5Days&&le.chargedAmount){const O=nt(le.chargedAmount),z=O*.05,ae=O-z;De(be=>({...be,discountAmount:z,finalChargedAmount:ae}))}else De(O=>({...O,discountAmount:0,finalChargedAmount:nt(O.chargedAmount)}))},[le.discount5Days,le.chargedAmount]),we.useEffect(()=>{if((le.status==="Em oramento"||le.status==="Aguardando aprovao do oramento")&&!le.deliveryDeadline){const O=v.find(z=>z.firestoreId===(pe==null?void 0:pe.firestoreId));if(O!=null&&O.deliveryDeadline){const z=O.deliveryDeadline.match(/^(\d+)/);z&&De(ae=>({...ae,deliveryDeadline:z[1]}))}}},[le.status,pe,v]),k3(()=>{Y&&Q(!1),ue&&F(!1),$&&H(!1),C&&G(!1),Z&&X(!1)}),we.useEffect(()=>{Y&&s.current&&s.current.focus(),ue&&o.current&&o.current.focus(),$&&a.current&&a.current.focus(),C&&l.current&&l.current.focus()},[Y,ue,$,C]);const Pr=we.useMemo(()=>{const O=Be.length>0?Ke.filter(Ne=>Be.includes(Ne.firestoreId)):Ke,z={};O.forEach(Ne=>{z[Ne.status]=(z[Ne.status]||0)+1,z[`${Ne.status}_date`]||(z[`${Ne.status}_date`]=Ne.statusDate||new Date().toISOString().split("T")[0])});const ae=Object.keys(z).filter(Ne=>!Ne.includes("_date")).map(Ne=>({label:Ne,value:z[Ne],date:z[`${Ne}_date`]})),be={};O.forEach(Ne=>{be[Ne.billingType]=(be[Ne.billingType]||0)+1});const _e=Object.keys(be).map(Ne=>({label:Ne,value:be[Ne]})).sort((Ne,Ve)=>Ve.value-Ne.value);let Pe=0,Ce=0;return O.forEach(Ne=>{Pe+=nt(Ne.costThirdPartyShipping)+nt(Ne.costParts),Ce+=nt(Ne.costClientShipping)}),{count:O.length,statusChartData:ae,billingChartData:_e,totalInternalCosts:Pe,totalClientFreight:Ce,isFiltered:Be.length>0}},[Ke,Be]),Bs=O=>{const z=new Date().getFullYear(),ae=O.filter(Pe=>{if(!Pe.osNumber)return!1;const[Ce,Ne]=Pe.osNumber.split("/");return Ne&&parseInt(Ne)===z});let be=0;ae.forEach(Pe=>{if(Pe.osNumber){const[Ce]=Pe.osNumber.split("/"),Ne=parseInt(Ce);Ne>be&&(be=Ne)}});let _e;return z===2026?_e=Math.max(be+1,32):_e=be+1,`${String(_e).padStart(4,"0")}/${z}`},hi=(O=null)=>{if(Xt(""),zr(""),Yt(""),nn(""),ui(""),N(!1),de(!1),ie(!1),me(!1),q(!1),oe(!1),re(!1),D(!1),qr({client:!1,item:!1,defect:!1,solution:!1,notRepairableDetail:!1,solutionsList:!1,benchRepairList:!1}),O){ve(O);let z="";if(O.deliveryDeadline){const ae=O.deliveryDeadline.match(/^(\d+)/);ae&&(z=ae[1])}De({...O,equipmentObservation:O.equipmentObservation||"",solutionsList:O.solutionsList||[],defectsList:O.defectsList||(O.defect?[O.defect]:[]),manualSolutionsList:O.manualSolutionsList||[],benchRepairList:O.benchRepairList||[],statusDate:O.statusDate||new Date().toISOString().split("T")[0],statusHistory:O.statusHistory||[],deliveryDeadline:z,discount5Days:O.discount5Days||!1,discountAmount:O.discountAmount||0,finalChargedAmount:O.finalChargedAmount||nt(O.chargedAmount)})}else ve(null),De({client:"",cnpj:"",contactPerson:"",address:"",email:"",billingType:"Avulso",maintenanceVisit:"",item:"",manufacturer:"",model:"",serial:"",equipmentObservation:"",defect:"",defectsList:[],solutionType:"Preenchimento manual",solution:"",manualSolutionsList:[],benchRepairList:[],solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",statusDate:new Date().toISOString().split("T")[0],statusHistory:[],trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:"",osNumber:Bs(Ke),deliveryDeadline:"",discount5Days:!1,discountAmount:0,finalChargedAmount:0});Q(!0)},Ql=O=>{De(z=>({...z,client:O.client,cnpj:O.cnpj,contactPerson:O.contactPerson,email:O.email,address:O.address})),de(!1)},Xl=()=>{if(!Cr.trim()){rt("Descrio do defeito  obrigatria","error");return}De(O=>({...O,defectsList:[...O.defectsList,Cr.trim()]})),Yt(""),ie(!1)},Ud=O=>{De(z=>({...z,defectsList:z.defectsList.filter((ae,be)=>be!==O)}))},oa=()=>{if(!Cn.trim()){rt("Descrio da soluo  obrigatria","error");return}De(O=>({...O,manualSolutionsList:[...O.manualSolutionsList,Cn.trim()]})),nn(""),me(!1)},Yl=O=>{De(z=>({...z,manualSolutionsList:z.manualSolutionsList.filter((ae,be)=>be!==O)}))},Jl=()=>{if(!li.trim()){rt("Descrio da etapa do conserto  obrigatria","error");return}De(O=>({...O,benchRepairList:[...O.benchRepairList,li.trim()]})),ui("")},On=O=>{De(z=>({...z,benchRepairList:z.benchRepairList.filter((ae,be)=>be!==O)}))},Wr=()=>{if(!Vt.trim()){rt("Descrio do item/servio  obrigatria","error");return}De(O=>({...O,solutionsList:[...O.solutionsList,{id:Date.now(),text:Vt,cost:at||"0,00"}]})),Xt(""),zr(""),me(!1)},zs=O=>{De(z=>({...z,solutionsList:z.solutionsList.filter(ae=>ae.id!==O)}))},fi=()=>{const{firestoreId:O,...z}=le;if(z.discount5Days&&z.chargedAmount){const Pe=nt(z.chargedAmount);z.discountAmount=Pe*.05,z.finalChargedAmount=Pe-z.discountAmount}else z.discountAmount=0,z.finalChargedAmount=nt(z.chargedAmount);if(z.defectsList&&z.defectsList.length>0?z.defect=z.defectsList.join(`
`):z.defect=z.defect||"",z.solutionType==="Preenchimento manual"&&z.manualSolutionsList&&z.manualSolutionsList.length>0&&(z.solution=z.manualSolutionsList.join(`
`)),z.solutionType==="Conserto em bancada"&&z.benchRepairList&&z.benchRepairList.length>0&&(z.solution=z.benchRepairList.join(`
`)),z.deliveryDeadline&&z.deliveryDeadline.trim()!==""){const Pe=z.deliveryDeadline.replace("dias teis","").trim();Pe&&!isNaN(Pe)&&(z.deliveryDeadline=`${Pe} dias teis`)}else z.deliveryDeadline="";let ae=z.statusHistory?[...z.statusHistory]:[];const be=z.statusDate||new Date().toISOString().split("T")[0],_e=ae.length>0?ae[ae.length-1]:null;return!_e||_e.status!==z.status?ae.push({status:z.status,date:be,timestamp:Date.now()}):ae[ae.length-1].date=be,z.statusHistory=ae,z.statusDate=be,z},Zl=async O=>{if(O&&O.preventDefault(),!Fs()){Re(!0);try{const ae=fi();pe?(await yo(pr(Ot,"artifacts",hn,"public","data","serviceOrders",pe.firestoreId),ae),rt("OS atualizada com sucesso!","success")):(await N_(ja(Ot,"artifacts",hn,"public","data","serviceOrders"),ae),rt("OS criada com sucesso!","success")),Q(!1)}catch(ae){console.error(ae),rt(`Erro ao salvar: ${ae.message}`,"error")}finally{Re(!1)}}},lt=async()=>{if(!Fs()){Re(!0);try{const z=fi();pe?await yo(pr(Ot,"artifacts",hn,"public","data","serviceOrders",pe.firestoreId),z):await N_(ja(Ot,"artifacts",hn,"public","data","serviceOrders"),z),rt("OS salva e nova em branco criada!","success"),De({...le,osNumber:Bs([...Ke,le]),item:"",manufacturer:"",model:"",serial:"",defect:"",defectsList:[],solutionType:"Preenchimento manual",solution:"",manualSolutionsList:[],benchRepairList:[],solutionsList:[],notRepairableDetail:"",costThirdPartyName:"",costThirdPartyShipping:"",costClientShipping:"",costParts:"",chargedAmount:"",paymentCondition:" vista",installments:"",status:"Recebido",statusDate:new Date().toISOString().split("T")[0],statusHistory:[],trackingCode:"",sentToThirdParty:"No",thirdPartyInfo:"",thirdPartyTracking:"",thirdPartyDate:"",deliveryDeadline:"",equipmentObservation:"",discount5Days:!1,discountAmount:0,finalChargedAmount:0}),ve(null)}catch(z){console.error(z),rt(`Erro ao salvar: ${z.message}`,"error")}finally{Re(!1)}}},qs=O=>{if(le.status===O){if(le.statusDate){const z=le.statusDate.split("-");return`${z[2]}/${z[1]}`}return"Hoje"}if(le.statusHistory&&le.statusHistory.length>0){const z=[...le.statusHistory].reverse().find(ae=>ae.status===O);if(z&&z.date){const ae=z.date.split("-");return`${ae[2]}/${ae[1]}`}}return null},an=Ls.findIndex(O=>O.value===le.status),rs=an===-1?0:an/(Ls.length-1)*100,Bd=async()=>{if(Be.length===0){rt("Selecione pelo menos uma OS para movimentar","error");return}Re(!0);try{const O=Be.map(z=>{const ae=Ke.find(_e=>_e.firestoreId===z);if(!ae)return null;let be=ae.statusHistory?[...ae.statusHistory]:[];return be.push({status:Zi,date:Os,timestamp:Date.now()}),yo(pr(Ot,"artifacts",hn,"public","data","serviceOrders",z),{status:Zi,statusDate:Os,statusHistory:be})}).filter(Boolean);await Promise.all(O),rt(`${Be.length} OS(s) movida(s) para ${Zi}`,"success"),G(!1),bt([])}catch(O){console.error(O),rt(`Erro ao movimentar OSs: ${O.message}`,"error")}finally{Re(!1)}},eu=O=>{const z=Ke.filter(Pe=>Be.includes(Pe.firestoreId));if(z.length===0){rt("Selecione pelo menos uma OS para imprimir","error");return}if((e==null?void 0:e.role)==="client"){$s(O);return}if(!z.some(Pe=>Pe.status==="Em oramento"||Pe.status==="Aguardando aprovao do oramento")&&O==="client"){$s(O);return}const be=z.reduce((Pe,Ce)=>{const Ne=Ce.finalChargedAmount?nt(Ce.finalChargedAmount):nt(Ce.chargedAmount);return Pe+Ne},0),_e=z[0];Md({totalValue:be,paymentCondition:(_e==null?void 0:_e.paymentCondition)||" vista",installments:(_e==null?void 0:_e.installments)||"",discount5Days:(_e==null?void 0:_e.discount5Days)||!1,finalChargedAmount:be}),X(!0)},zd=O=>{const ae=Ke.filter(be=>Be.includes(be.firestoreId)).map(async be=>{try{await yo(pr(Ot,"artifacts",hn,"public","data","serviceOrders",be.firestoreId),{paymentCondition:O.paymentCondition,installments:O.installments,discount5Days:O.discount5Days,finalChargedAmount:O.finalChargedAmount})}catch(_e){console.error("Erro ao atualizar condies de pagamento:",_e)}});Promise.all(ae).then(()=>{X(!1),$s("client",O)})},qd=()=>{if(Be.length===0){rt("Selecione pelo menos uma OS para exportar","error");return}if((e==null?void 0:e.role)==="client"){rt("Clientes no tm permisso para exportar documentos Word","error");return}const O=Ke.filter(z=>Be.includes(z.firestoreId));try{Re(!0);const z={};O.forEach(_e=>{const Pe=`${_e.client}-${_e.cnpj||"no-cnpj"}-${_e.billingType}-${_e.maintenanceVisit||"no-visit"}`;z[Pe]||(z[Pe]={header:{client:_e.client,cnpj:_e.cnpj,contactPerson:_e.contactPerson,email:_e.email,address:_e.address,billingType:_e.billingType,maintenanceVisit:_e.maintenanceVisit},items:[]}),z[Pe].items.push(_e)});let ae=`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Relatrio de OS - Alfa Tecnologia Hospitalar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #1a56db;
            text-align: center;
            font-size: 28px;
            margin-bottom: 10px;
        }
        h2 {
            color: #1a56db;
            text-align: center;
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 30px;
        }
        h3 {
            color: #1a56db;
            font-size: 16px;
            border-bottom: 2px solid #1a56db;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th {
            background-color: #f2f2f2;
            color: #1a56db;
            text-align: left;
            padding: 10px;
            border: 1px solid #ddd;
        }
        td {
            padding: 10px;
            border: 1px solid #ddd;
            vertical-align: top;
        }
        .client-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .info-item {
            margin-bottom: 10px;
        }
        .info-label {
            font-weight: bold;
            font-size: 12px;
            color: #666;
            margin-bottom: 3px;
        }
        .info-value {
            font-size: 14px;
            color: #333;
        }
        .os-number {
            font-weight: bold;
            color: #1a56db;
        }
        .status {
            font-size: 11px;
            background-color: #f1f5f9;
            color: #475569;
            padding: 2px 6px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 3px;
        }
        .equipment-name {
            font-weight: bold;
        }
        .equipment-details {
            font-size: 12px;
            color: #666;
            margin-top: 3px;
        }
        .serial {
            font-family: monospace;
            font-size: 11px;
            color: #999;
        }
        .footer {
            margin-top: 50px;
            text-align: center;
            font-size: 12px;
            color: #666;
            border-top: 1px solid #ddd;
            padding-top: 15px;
        }
        .page-break {
            page-break-after: always;
        }
    </style>
</head>
<body>
`;Object.values(z).forEach((_e,Pe)=>{ae+=`
    <h1>ALFA TECNOLOGIA HOSPITALAR</h1>
    <h2>Relatrio de Atendimento Tcnico</h2>
    
    <h3>DADOS DO CLIENTE</h3>
    <div class="client-info">
        <div class="info-item">
            <div class="info-label">Cliente</div>
            <div class="info-value">${_e.header.client||"---"}</div>
        </div>
        <div class="info-item">
            <div class="info-label">CNPJ</div>
            <div class="info-value">${_e.header.cnpj||"---"}</div>
        </div>
        <div class="info-item">
            <div class="info-label">Contato</div>
            <div class="info-value">${_e.header.contactPerson||"---"}</div>
        </div>
        <div class="info-item">
            <div class="info-label">E-mail</div>
            <div class="info-value">${_e.header.email||"---"}</div>
        </div>
        <div class="info-item">
            <div class="info-label">Endereo</div>
            <div class="info-value">${_e.header.address||"---"}</div>
        </div>
        <div class="info-item">
            <div class="info-label">Tipo de Atendimento</div>
            <div class="info-value">${_e.header.billingType} ${_e.header.maintenanceVisit?"- "+_e.header.maintenanceVisit:""}</div>
        </div>
    </div>
    
    <h3>LISTA DE EQUIPAMENTOS</h3>
    <table>
        <thead>
            <tr>
                <th width="15%">OS</th>
                <th width="30%">Equipamento</th>
                <th width="55%">Laudo Tcnico</th>
            </tr>
        </thead>
        <tbody>`,_e.items.forEach(Ce=>{ae+=`
            <tr>
                <td>
                    <div class="os-number">${Ce.osNumber||"---"}</div>
                    <div class="status">${Ce.status||"---"}</div>
                </td>
                <td>
                    <div class="equipment-name">${Ce.item||"---"}</div>
                    <div class="equipment-details">${Ce.manufacturer||""} ${Ce.model||""}</div>
                    <div class="serial">NS: ${Ce.serial||"N/D"}</div>
                </td>
                <td>
                    <div><strong>Defeito:</strong> ${(Ce.defect||"N/A").replace(/\n/g,"<br>")}</div>
                    <div><strong>Soluo:</strong> ${(Ce.solution||"Em anlise...").replace(/\n/g,"<br>")}</div>
                </td>
            </tr>`}),ae+=`
        </tbody>
    </table>
    
    <div class="footer">
        <p><strong>Alfa Tecnologia Hospitalar</strong> - CNPJ: 50.993.453/0001-34</p>
        <p>(55) 9 9137-9413 - alfa.manutencaosm@gmail.com</p>
        <p>Endereo: Travessa Moreira, 125 - CEP: 97070-540 - Bairro: Duque de Caxias, Santa Maria/ RS</p>
    </div>`,Pe<Object.values(z).length-1&&(ae+='<div class="page-break"></div>')}),ae+=`
</body>
</html>`;const be=new Blob([ae],{type:"application/msword;charset=utf-8"});I3.saveAs(be,`relatorio_os_${new Date().toISOString().split("T")[0]}.doc`),rt("Documento Word gerado com sucesso!","success")}catch(z){console.error("Erro ao gerar documento Word:",z),rt("Erro ao gerar documento Word: "+z.message,"error")}finally{Re(!1)}},tu=O=>{const z=fi(),ae=z.status==="Em oramento"||z.status==="Aguardando aprovao do oramento",be=O==="internal"?"Relatrio INTERNO - Alfa Tecnologia":ae?"Proposta de oramento - Alfa Tecnologia":"Relatrio de atendimento - Alfa Tecnologia",_e=`${z.paymentCondition}${z.installments?` ${z.installments}`:""}`,Pe=z.finalChargedAmount>0?nt(z.finalChargedAmount):nt(z.chargedAmount);let Ce="";if(z.discount5Days&&z.chargedAmount){const Bt=nt(z.chargedAmount),gt=Bt*.05,tt=Bt-gt;Ce=`
        <div style="margin-top: 10px; padding: 8px; background: #f0fdf4; border-radius: 6px; border: 1px solid #bbf7d0;">
            <div style="font-size: 9px; font-weight: bold; color: #166534; margin-bottom: 3px;">DESCONTO APLICADO</div>
            <div style="display: flex; justify-content: space-between; font-size: 10px;">
                <span>Valor Original:</span>
                <span>R$ ${Bt.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 10px;">
                <span>Desconto (5%):</span>
                <span style="color: #dc2626;">- R$ ${gt.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 11px; font-weight: bold; margin-top: 3px; border-top: 1px dashed #86efac; padding-top: 3px;">
                <span>VALOR FINAL:</span>
                <span style="color: #166534;">R$ ${tt.toLocaleString("pt-BR",{minimumFractionDigits:2})}</span>
            </div>
        </div>
    `}let Ne=`
<!DOCTYPE html>
<html>
<head>
    <title>${be}</title>
    <style>
        @media print {
            @page { margin: 1cm; }
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            line-height: 1.4;
            padding: 0;
            margin: 0;
            font-size: 12px;
        }
        .report-page {
            padding: 20px;
            position: relative;
            min-height: 27cm;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #1a56db;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .logo-area {
            color: #1a56db;
        }
        .logo-text {
            font-size: 28px;
            font-weight: 900;
            margin: 0;
        }
        .logo-sub {
            font-size: 10px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin: 0;
        }
        .report-info {
            text-align: right;
        }
        .report-title {
            font-size: 16px;
            font-weight: 900;
            color: #1a56db;
            text-transform: uppercase;
        }
        .internal-badge {
            background: #b91c1c;
            color: white;
            padding: 2px 6px;
            font-size: 10px;
            border-radius: 4px;
            font-weight: bold;
            margin-bottom: 4px;
            display: inline-block;
        }
        .section {
            margin-bottom: 25px;
        }
        .section-title {
            background: #f8fafc;
            padding: 6px 12px;
            font-size: 11px;
            font-weight: 900;
            text-transform: uppercase;
            border-left: 5px solid #1a56db;
            margin-bottom: 12px;
            color: #1e40af;
        }
        .client-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            font-size: 12px;
            margin-bottom: 20px;
        }
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .items-table th {
            background: #f8fafc;
            text-align: left;
            padding: 10px;
            font-size: 10px;
            text-transform: uppercase;
            color: #64748b;
            border-bottom: 2px solid #e2e8f0;
        }
        .items-table td {
            padding: 12px 10px;
            font-size: 11px;
            border-bottom: 1px solid #f1f5f9;
            vertical-align: top;
        }
        .os-tag {
            font-weight: 900;
            color: #1a56db;
            display: block;
            margin-bottom: 4px;
        }
        .signature-area {
            display: flex;
            justify-content: space-around;
            margin-top: 80px;
            page-break-inside: avoid;
        }
        .signature-box {
            border-top: 1px solid #333;
            width: 250px;
            text-align: center;
            padding-top: 8px;
            font-size: 11px;
            font-weight: 600;
        }
        .footer-notes {
            margin-top: 40px;
            font-size: 10px;
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 15px;
            line-height: 1.4;
            page-break-inside: avoid;
        }
        .footer-notes p {
            margin: 5px 0;
        }
        .footer-title {
            font-weight: bold;
            color: #1a56db;
            margin-bottom: 3px;
        }
        .company-footer {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            font-size: 9px;
            color: #666;
            text-align: center;
            border-top: 1px solid #eee;
            padding-top: 10px;
            line-height: 1.3;
        }
        .company-footer strong {
            color: #1a56db;
        }
        .observations-section {
            margin-top: 15px;
            padding: 10px;
            background: #f8fafc;
            border-left: 4px solid #94a3b8;
            border-radius: 4px;
            font-size: 11px;
            line-height: 1.4;
        }
        .valor-section {
            margin-top: 15px;
            padding: 15px;
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            border-radius: 6px;
            font-size: 11px;
            line-height: 1.4;
        }
        .valor-destaque {
            font-size: 18px;
            font-weight: 900;
            color: #166534;
            text-align: center;
            margin: 10px 0;
        }
        @media print {
            .report-page {
                page-break-after: always;
            }
            .report-page:last-child {
                page-break-after: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="report-page">
        <div class="header">
            <div class="logo-area">
                <h1 class="logo-text">ALFA</h1>
                <p class="logo-sub">TECNOLOGIA HOSPITALAR</p>
            </div>
            <div class="report-info">
                ${O==="internal"?'<div class="internal-badge">USO INTERNO - CONFIDENCIAL</div>':""}
                <div class="report-title">${be}</div>
                <div style="font-size:10px;">Data: ${new Date().toLocaleDateString("pt-BR")}</div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">Dados do Cliente</div>
            <div class="client-grid">
                <div><strong>Cliente:</strong><br>${z.client||"---"}</div>
                <div><strong>CNPJ:</strong><br>${z.cnpj||"---"}</div>
                <div><strong>Atendimento:</strong><br>${z.billingType} ${z.maintenanceVisit?"- "+z.maintenanceVisit:""}</div>
                <div><strong>Contato:</strong><br>${z.contactPerson||"---"}</div>
                <div><strong>E-mail:</strong><br>${z.email||"---"}</div>
                <div><strong>Endereo:</strong><br>${z.address||"---"}</div>
            </div>
        </div>
        
        <!-- SEO DE VALOR COBRADO PARA ORAMENTOS -->
        ${ae&&O==="client"?`
        <div class="valor-section">
            <div class="footer-title">VALOR DA PROPOSTA</div>
            <div class="valor-destaque">
                R$ ${Pe.toLocaleString("pt-BR",{minimumFractionDigits:2})}
            </div>
            <p><strong>Condies de pagamento:</strong> ${_e}</p>
            ${Ce}
        </div>
        `:""}
        
        <div class="section">
            <div class="section-title">Equipamento</div>
            <table class="items-table">
                <thead>
                    <tr>
                        <th width="15%">OS</th>
                        <th width="30%">Equipamento</th>
                        <th width="55%">Laudo Tcnico</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <span class="os-tag">${z.osNumber||"---"}</span>
                            <small>${z.status||"---"}</small>
                        </td>
                        <td>
                            <strong>${z.item||"---"}</strong><br>
                            <div style="font-size:9px;color:#666;margin-bottom:2px;">
                                ${z.manufacturer||""} ${z.model||""}
                            </div>
                            <small>NS: ${z.serial||"N/D"}</small>
                        </td>
                        <td>
                            <div><strong>Defeito:</strong> ${z.defect||"N/A"}</div>
                            <div><strong>Soluo:</strong> ${z.solutionType==="No passvel de conserto, substituir por novo equipamento / material"?`NO PASSVEL (${z.notRepairableDetail})`:z.solutionType==="Manual com custos detalhados"?"Detalhamento na lista abaixo:":z.solutionType==="Conserto em bancada"?"CONSERTO EM BANCADA: "+(z.solution||"Detalhes do conserto"):(z.solutionType==="Preenchimento manual",z.solution||"Em anlise...")}
                            </div>`;if(z.equipmentObservation&&(Ne+=`
                            <div class="observations-section">
                                <strong>Observaes:</strong> ${z.equipmentObservation}
                            </div>`),z.solutionType==="Manual com custos detalhados"&&z.solutionsList&&z.solutionsList.length>0){const Bt=z.solutionsList.reduce((gt,tt)=>gt+parseFloat(tt.cost.replace(".","").replace(",",".")||0),0);Ne+=`
                            <table style="width:100%; margin-top:8px; border:1px solid #f1f5f9; font-size:10px; border-radius:4px;">
                                <thead>
                                    <tr>
                                        <th style="text-align:left; background:#f8fafc; padding:4px 8px; font-size:9px;">Item / Servio</th>
                                        <th style="text-align:right; background:#f8fafc; padding:4px 8px; font-size:9px;">Valor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${z.solutionsList.map(gt=>`
                                        <tr>
                                            <td style="padding:4px 8px; border-bottom:1px solid #f8fafc;">${gt.text}</td>
                                            <td style="text-align:right; padding:4px 8px; border-bottom:1px solid #f8fafc;">R$ ${gt.cost}</td>
                                        </tr>
                                    `).join("")}
                                    <tr style="background:#f1f5f9; font-weight:bold;">
                                        <td style="padding:4px 8px;">TOTAL</td>
                                        <td style="text-align:right; padding:4px 8px;">R$ ${Bt.toLocaleString("pt-BR",{minimumFractionDigits:2})}</td>
                                    </tr>
                                </tbody>
                            </table>`}Ne+=`
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>`,O==="client"&&ae&&(Ne+=`
        <div class="footer-notes">
            <div class="footer-title">INFORMAES IMPORTANTES:</div>
            <p><strong> Garantia:</strong> 3 meses. No est coberto por garantia os danos causados por uso inadequado, queda ou choque mecnico, acondicionamento inadequado e/ou acondicionamento fora dos padres recomendados pelo fabricante.</p>
            <p><strong> Prazo de entrega:</strong> ${z.deliveryDeadline||"A ser definido aps aprovao do oramento"}</p>
        </div>`),Ne+=`
        <div class="signature-area">
            <div class="signature-box">Tcnico Responsvel</div>
            <div class="signature-box">Cliente / Recebedor</div>
        </div>
        
        <div class="company-footer">
            <strong>Alfa Tecnologia Hospitalar</strong> - CNPJ: 50.993.453/0001-34<br/>
            (55) 9 9137-9413 - alfa.manutencaosm@gmail.com<br/>
            Endereo: Travessa Moreira, 125 - CEP: 97070-540 - Bairro: Duque de Caxias, Santa Maria/ RS
        </div>
    </div>
</body>
</html>`;const Ve=window.open("","printWindow","width=800,height=600,scrollbars=yes");if(!Ve){rt("Permita pop-ups para imprimir o documento","error");return}Ve.document.write(Ne),Ve.document.close(),setTimeout(()=>{Ve.focus(),Ve.print()},500)},$d=()=>{ft({clientName:"",cnpj:"",address:"",contactPerson:"",email:"",startDate:"",endDate:"",monthlyValue:"",annualValue:"",coveredItems:{videoSurgeryInstruments:!1,openInstruments:!1,videoSurgeryEquipment:!1,endoscopes:!1},observations:""}),m(!0),F(!0)},ns=O=>{ft(O),m(!1),F(!0)},ln=async O=>{if(O.preventDefault(),!ze.clientName.trim()){rt("Nome do cliente  obrigatrio","error");return}Re(!0);try{const z=ze.clientName.replace(/\s+/g,"_").toLowerCase();await Om(pr(Ot,"artifacts",hn,"public","data","contracts",z),ze),rt("Contrato salvo com sucesso!","success"),F(!1)}catch(z){console.error("Erro ao salvar contrato",z),rt("Erro ao salvar contrato: "+z.message,"error")}finally{Re(!1)}},ru=O=>{Te(O),H(!0)},nu=async()=>{if(ye)try{await oS(pr(Ot,"artifacts",hn,"public","data","serviceOrders",ye.firestoreId)),rt("OS excluda com sucesso!","success"),H(!1),Te(null)}catch(O){rt("Erro ao excluir: "+O.message,"error")}},aa=O=>{bt(Ke.filter(z=>z.status===O).map(z=>z.firestoreId))},pi=O=>{bt(Ke.filter(z=>z.billingType===O).map(z=>z.firestoreId))},Wd=async()=>{try{localStorage.removeItem("adminRestoreToken"),localStorage.removeItem("adminEmail"),await i(),window.location.href="/",setTimeout(()=>{window.location.reload()},100)}catch(O){console.error("Erro ao fazer logout:",O),window.location.reload()}},$s=(O,z=null)=>{const ae=Ke.filter(Ve=>Be.includes(Ve.firestoreId));if(ae.length===0){rt("Selecione pelo menos uma OS para imprimir","error");return}const be={};ae.forEach(Ve=>{const Bt=`${Ve.client}-${Ve.cnpj||"no-cnpj"}-${Ve.billingType}-${Ve.maintenanceVisit||"no-visit"}`;be[Bt]||(be[Bt]={header:{client:Ve.client,cnpj:Ve.cnpj,contactPerson:Ve.contactPerson,email:Ve.email,address:Ve.address,billingType:Ve.billingType,maintenanceVisit:Ve.maintenanceVisit},items:[]}),be[Bt].items.push(Ve)});const _e=ae.some(Ve=>Ve.status==="Em oramento"||Ve.status==="Aguardando aprovao do oramento"),Pe=O==="internal"?"Relatrio INTERNO - Alfa Tecnologia":_e?"Proposta de oramento - Alfa Tecnologia":"Relatrio de atendimento - Alfa Tecnologia";let Ce=`
    <!DOCTYPE html>
<html>
    <head>
        <title>${Pe}</title>
        <style>
            @media print {
                @page { margin: 1cm; }
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                color: #333;
                line-height: 1.4;
                padding: 0;
                margin: 0;
                font-size: 12px;
            }
            .report-page {
                padding: 20px;
                position: relative;
                min-height: 27cm;
                page-break-after: always;
            }
            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-bottom: 2px solid #1a56db;
                padding-bottom: 15px;
                margin-bottom: 20px;
            }
            .logo-area {
                color: #1a56db;
            }
            .logo-text {
                font-size: 28px;
                font-weight: 900;
                margin: 0;
            }
            .logo-sub {
                font-size: 10px;
                letter-spacing: 2px;
                text-transform: uppercase;
                margin: 0;
            }
            .report-info {
                text-align: right;
            }
            .report-title {
                font-size: 16px;
                font-weight: 900;
                color: #1a56db;
                text-transform: uppercase;
            }
            .internal-badge {
                background: #b91c1c;
                color: white;
                padding: 2px 6px;
                font-size: 10px;
                border-radius: 4px;
                font-weight: bold;
                margin-bottom: 4px;
                display: inline-block;
            }
            .section {
                margin-bottom: 25px;
            }
            .section-title {
                background: #f8fafc;
                padding: 6px 12px;
                font-size: 11px;
                font-weight: 900;
                text-transform: uppercase;
                border-left: 5px solid #1a56db;
                margin-bottom: 12px;
                color: #1e40af;
            }
            .client-grid {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 15px;
                font-size: 12px;
                margin-bottom: 20px;
            }
            .items-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 10px;
            }
            .items-table th {
                background: #f8fafc;
                text-align: left;
                padding: 10px;
                font-size: 10px;
                text-transform: uppercase;
                color: #64748b;
                border-bottom: 2px solid #e2e8f0;
            }
            .items-table td {
                padding: 12px 10px;
                font-size: 11px;
                border-bottom: 1px solid #f1f5f9;
                vertical-align: top;
            }
            .os-tag {
                font-weight: 900;
                color: #1a56db;
                display: block;
                margin-bottom: 4px;
            }
            .signature-area {
                display: flex;
                justify-content: space-around;
                margin-top: 80px;
                page-break-inside: avoid;
            }
            .signature-box {
                border-top: 1px solid #333;
                width: 250px;
                text-align: center;
                padding-top: 8px;
                font-size: 11px;
                font-weight: 600;
            }
            .footer-notes {
                margin-top: 40px;
                font-size: 10px;
                color: #666;
                border-top: 1px solid #ccc;
                padding-top: 15px;
                line-height: 1.4;
                page-break-inside: avoid;
            }
            .footer-notes p {
                margin: 5px 0;
            }
            .footer-title {
                font-weight: bold;
                color: #1a56db;
                margin-bottom: 3px;
            }
            .company-footer {
                position: absolute;
                bottom: 20px;
                left: 20px;
                right: 20px;
                font-size: 9px;
                color: #666;
                text-align: center;
                border-top: 1px solid #eee;
                padding-top: 10px;
                line-height: 1.3;
            }
            .company-footer strong {
                color: #1a56db;
            }
            .observations-section {
                margin-top: 8px;
                padding: 6px 10px;
                background: #f8fafc;
                border-left: 3px solid #94a3b8;
                border-radius: 4px;
                font-size: 10px;
                line-height: 1.3;
            }
            .valor-section {
                margin-top: 15px;
                padding: 15px;
                background: #f0fdf4;
                border-left: 4px solid #10b981;
                border-radius: 6px;
                font-size: 11px;
                line-height: 1.4;
            }
            .valor-destaque {
                font-size: 18px;
                font-weight: 900;
                color: #166534;
                text-align: center;
                margin: 10px 0;
            }
            .valor-total-grupo {
                margin-top: 20px;
                padding: 15px;
                background: #f0f9ff;
                border-left: 4px solid #0ea5e9;
                border-radius: 6px;
                font-size: 12px;
                line-height: 1.4;
            }
            @media print {
                .report-page {
                    page-break-after: always;
                }
                .report-page:last-child {
                    page-break-after: avoid;
                }
            }
        </style>
    </head>
    <body>`;Object.values(be).forEach((Ve,Bt)=>{const gt=Ve.items.filter(He=>He.status==="Em oramento"||He.status==="Aguardando aprovao do oramento"),tt=gt.length>0;let la=0;if(tt&&gt.forEach(He=>{const un=z?z.finalChargedAmount/ae.length:He.finalChargedAmount?nt(He.finalChargedAmount):nt(He.chargedAmount);la+=un}),Ce+=`
        <div class="report-page">
            <div class="header">
                <div class="logo-area">
                    <h1 class="logo-text">ALFA</h1>
                    <p class="logo-sub">TECNOLOGIA HOSPITALAR</p>
                </div>
                <div class="report-info">
                    ${O==="internal"?'<div class="internal-badge">USO INTERNO - CONFIDENCIAL</div>':""}
                    <div class="report-title">${Pe}</div>
                    <div style="font-size:10px;">Data: ${new Date().toLocaleDateString("pt-BR")}</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">Dados do Cliente</div>
                <div class="client-grid">
                    <div><strong>Cliente:</strong><br>${Ve.header.client||"---"}</div>
                    <div><strong>CNPJ:</strong><br>${Ve.header.cnpj||"---"}</div>
                    <div><strong>Atendimento:</strong><br>${Ve.header.billingType} ${Ve.header.maintenanceVisit?"- "+Ve.header.maintenanceVisit:""}</div>
                    <div><strong>Contato:</strong><br>${Ve.header.contactPerson||"---"}</div>
                    <div><strong>E-mail:</strong><br>${Ve.header.email||"---"}</div>
                    <div><strong>Endereo:</strong><br>${Ve.header.address||"---"}</div>
                </div>
            </div>
            
            ${tt&&O==="client"?`
            <div class="valor-total-grupo">
                <div class="footer-title">VALOR TOTAL DA PROPOSTA</div>
                <div class="valor-destaque">
                    R$ ${la.toLocaleString("pt-BR",{minimumFractionDigits:2})}
                </div>
                <p><strong>Quantidade de itens em oramento:</strong> ${gt.length}</p>
                ${z?`<p><strong>Condies de pagamento:</strong> ${z.paymentCondition}${z.installments?` ${z.installments}`:""}</p>`:gt[0]&&gt[0].paymentCondition?`<p><strong>Condies de pagamento:</strong> ${gt[0].paymentCondition}${gt[0].installments?` ${gt[0].installments}`:""}</p>`:""}
            </div>
            `:""}
            
            <div class="section">
                <div class="section-title">Lista de Equipamentos</div>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th width="15%">OS</th>
                            <th width="30%">Equipamento</th>
                            <th width="55%">Laudo Tcnico</th>
                        </tr>
                    </thead>
                    <tbody>`,Ve.items.forEach(He=>{const un=He.solutionsList||[],Ws=un.reduce((is,Hr)=>is+parseFloat(Hr.cost.replace(".","").replace(",",".")||0),0),iu=He.status==="Em oramento"||He.status==="Aguardando aprovao do oramento",Hs=z?z.finalChargedAmount/ae.length:He.finalChargedAmount?nt(He.finalChargedAmount):nt(He.chargedAmount);Ce+=`
                        <tr>
                            <td>
                                <span class="os-tag">${He.osNumber||"---"}</span>
                                <small>${He.status||"---"}</small>
                                ${iu&&O==="client"?`
                                <div style="margin-top: 5px; padding: 3px; background: #f0fdf4; border-radius: 4px; text-align: center;">
                                    <div style="font-size: 9px; font-weight: bold; color: #166534;">VALOR</div>
                                    <div style="font-size: 11px; font-weight: 900; color: #166534;">
                                        R$ ${Hs.toLocaleString("pt-BR",{minimumFractionDigits:2})}
                                    </div>
                                </div>
                                `:""}
                            </td>
                            <td>
                                <strong>${He.item||"---"}</strong><br>
                                <div style="font-size:9px;color:#666;margin-bottom:2px;">
                                    ${He.manufacturer||""} ${He.model||""}
                                </div>
                                <small>NS: ${He.serial||"N/D"}</small>
                            </td>
                            <td>
                                <div><strong>Defeito:</strong> ${He.defect||"N/A"}</div>
                                <div><strong>Soluo:</strong> `,He.solutionType==="No passvel de conserto, substituir por novo equipamento / material"?Ce+=`NO PASSVEL (${He.notRepairableDetail||"Substituir por novo equipamento/material"})`:He.solutionType==="Manual com custos detalhados"?Ce+="Detalhamento na lista abaixo:":He.solutionType==="Conserto em bancada"?Ce+="CONSERTO EM BANCADA: "+(He.solution||"Detalhes do conserto"):(He.solutionType,Ce+=He.solution||"Em anlise..."),Ce+="</div>",He.equipmentObservation&&(Ce+=`
                                <div class="observations-section">
                                    <strong>Observaes:</strong> ${He.equipmentObservation}
                                </div>`),He.solutionType==="Manual com custos detalhados"&&un.length>0&&(Ce+=`
                                <table style="width:100%; margin-top:8px; border:1px solid #f1f5f9; font-size:10px; border-radius:4px;">
                                    <thead>
                                        <tr>
                                            <th style="text-align:left; background:#f8fafc; padding:4px 8px; font-size:9px;">Item / Servio</th>
                                            <th style="text-align:right; background:#f8fafc; padding:4px 8px; font-size:9px;">Valor</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${un.map(is=>`
                                            <tr>
                                                <td style="padding:4px 8px; border-bottom:1px solid #f8fafc;">${is.text}</td>
                                                <td style="text-align:right; padding:4px 8px; border-bottom:1px solid #f8fafc;">R$ ${is.cost}</td>
                                            </tr>
                                        `).join("")}
                                        <tr style="background:#f1f5f9; font-weight:bold;">
                                            <td style="padding:4px 8px;">TOTAL</td>
                                            <td style="text-align:right; padding:4px 8px;">R$ ${Ws.toLocaleString("pt-BR",{minimumFractionDigits:2})}</td>
                                        </tr>
                                    </tbody>
                                </table>`),Ce+=`
                            </td>
                        </tr>`}),Ce+=`
                    </tbody>
                </table>
            </div>`,O==="client"&&tt){const He=gt[0],un=He.deliveryDeadline||"A ser definido aps aprovao do oramento",Ws=z?`${z.paymentCondition}${z.installments?` ${z.installments}`:""}`:`${He.paymentCondition||" vista"}${He.installments?` ${He.installments}`:""}`;Ce+=`
            <div class="footer-notes">
                <div class="footer-title">INFORMAES IMPORTANTES:</div>
                <p><strong> Garantia:</strong> 3 meses. No est coberto por garantia os danos causados por uso inadequado, queda ou choque mecnico, acondicionamento inadequado e/ou acondicionamento fora dos padres recomendados pelo fabricante.</p>
                <p><strong> Prazo de entrega:</strong> ${un}</p>
                <p><strong> Valor Total da Proposta:</strong> R$ ${la.toLocaleString("pt-BR",{minimumFractionDigits:2})}</p>
                <p><strong> Condies de pagamento:</strong> ${Ws}</p>
            </div>`}Ce+=`
            <div class="signature-area">
                <div class="signature-box">Tcnico Responsvel</div>
                <div class="signature-box">Cliente / Recebedor</div>
            </div>
            
            <div class="company-footer">
                <strong>Alfa Tecnologia Hospitalar</strong> - CNPJ: 50.993.453/0001-34<br/>
                (55) 9 9137-9413 - alfa.manutencaosm@gmail.com<br/>
                Endereo: Travessa Moreira, 125 - CEP: 97070-540 - Bairro: Duque de Caxias, Santa Maria/ RS
            </div>
        </div>`}),Ce+="</body></html>";const Ne=window.open("","printWindow","width=800,height=600,scrollbars=yes");if(!Ne){rt("Permita pop-ups para imprimir o documento","error");return}Ne.document.write(Ce),Ne.document.close(),setTimeout(()=>{Ne.focus(),Ne.print()},500)};return r?d.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(to,{className:"animate-spin mx-auto text-blue-600 mb-4",size:40}),d.jsx("p",{className:"text-slate-600 font-medium",children:"Verificando autenticao..."})]})}):t?$r()?d.jsxs("div",{className:"flex min-h-screen bg-slate-50 font-sans overflow-hidden",children:[d.jsxs("aside",{className:`${x?"w-64":"w-20"} bg-slate-900 text-white transition-all duration-300 flex flex-col fixed h-full z-30 shadow-2xl`,children:[d.jsxs("div",{className:`flex items-center border-b border-slate-800 ${x?"h-32 p-4":"h-20 justify-center p-4"}`,children:[!x&&d.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-full shadow-lg flex items-center justify-center w-12 h-12",children:d.jsx("img",{src:z_,alt:"Logo Alfa",className:"w-10 h-10 object-contain"})}),x&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl flex items-center justify-center",children:d.jsx("img",{src:z_,alt:"Logo Alfa Tecnologia Hospitalar",className:"h-20 object-contain"})})})]}),d.jsx("nav",{className:"flex-1 p-3 space-y-1",children:(e==null?void 0:e.role)==="client"?d.jsxs(d.Fragment,{children:[d.jsx(fn,{icon:d.jsx(L_,{size:x?20:22}),label:"Painel de OS",active:_==="os",onClick:()=>T("os"),isSidebarOpen:x}),d.jsx(fn,{icon:d.jsx(jh,{size:x?20:22}),label:"Painel de Status",active:_==="status",onClick:()=>T("status"),isSidebarOpen:x})]}):d.jsxs(d.Fragment,{children:[d.jsx(fn,{icon:d.jsx(L_,{size:x?20:22}),label:"Painel de OS",active:_==="os",onClick:()=>T("os"),isSidebarOpen:x}),d.jsx(fn,{icon:d.jsx(jh,{size:x?20:22}),label:"Painel de Status",active:_==="status",onClick:()=>T("status"),isSidebarOpen:x}),d.jsx(fn,{icon:d.jsx(Mm,{size:x?20:22}),label:"Financeiro",active:_==="financial",onClick:()=>T("financial"),isSidebarOpen:x}),d.jsx(fn,{icon:d.jsx(D_,{size:x?20:22}),label:"Contratos",active:_==="contracts",onClick:()=>T("contracts"),isSidebarOpen:x}),d.jsx(fn,{icon:d.jsx(R_,{size:x?20:22}),label:"Inventrio",active:_==="inventory",onClick:()=>T("inventory"),isSidebarOpen:x}),d.jsx(fn,{icon:d.jsx(Oh,{size:x?20:22}),label:"Clientes",active:_==="clients",onClick:()=>T("clients"),isSidebarOpen:x}),n("canManageUsers")&&d.jsx(fn,{icon:d.jsx(Dd,{size:x?20:22}),label:"Usurios",active:_==="users",onClick:()=>T("users"),isSidebarOpen:x}),d.jsx("div",{className:"pt-2 border-t border-slate-800 mt-2",children:d.jsx(fn,{icon:d.jsx(Qa,{size:x?20:22}),label:"Sobre",active:_==="about",onClick:()=>T("about"),isSidebarOpen:x})})]})}),d.jsx("div",{className:"flex flex-col border-t border-slate-800",children:d.jsxs("div",{className:"flex items-center justify-between p-4",children:[d.jsx("button",{onClick:()=>j(!x),className:"text-slate-400 hover:text-white transition-colors p-1 rounded-lg hover:bg-slate-800",title:x?"Recolher Sidebar":"Expandir Sidebar",children:d.jsx(A5,{className:`transition-transform duration-300 ${x?"rotate-180":""}`,size:20})}),d.jsx("button",{onClick:Wd,className:"text-red-400 hover:text-red-500 transition-colors p-1 rounded-lg hover:bg-slate-800",title:"Sair",children:d.jsx(C5,{size:20})})]})})]}),d.jsxs("main",{className:`flex-1 transition-all duration-300 ${x?"ml-64":"ml-20"} p-4 md:p-8 overflow-y-auto h-screen`,children:[_==="os"&&$r()&&d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Gesto de OS"}),d.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Fluxo operacional hospitalar"})]}),Be.length>0&&d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-100 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("h3",{className:"text-lg font-black text-slate-800",children:["Aes para ",Be.length," OS(s) selecionada(s):"]}),d.jsxs("button",{onClick:()=>bt([]),className:"text-sm text-red-600 hover:text-red-700 font-bold flex items-center gap-2",children:[d.jsx(Xr,{size:16})," Limpar seleo"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(e==null?void 0:e.role)!=="client"&&d.jsxs("button",{onClick:()=>G(!0),className:"bg-green-600 text-white p-4 rounded-xl font-bold flex flex-col items-center justify-center gap-2 shadow hover:bg-green-700 transition-colors h-24",children:[d.jsx(C_,{size:20}),d.jsx("span",{className:"text-sm",children:"Movimentar OS"})]}),d.jsxs("button",{onClick:()=>eu("client"),className:"bg-indigo-600 text-white p-4 rounded-xl font-bold flex flex-col items-center justify-center gap-2 shadow hover:bg-indigo-700 transition-colors h-24",children:[d.jsx(V_,{size:20}),d.jsx("span",{className:"text-sm",children:"Imprimir Cliente"})]}),(e==null?void 0:e.role)!=="client"&&d.jsxs("button",{onClick:()=>$s("internal"),className:"bg-slate-800 text-white p-4 rounded-xl font-bold flex flex-col items-center justify-center gap-2 shadow hover:bg-slate-900 transition-colors h-24",children:[d.jsx(Dh,{size:20}),d.jsx("span",{className:"text-sm",children:"Imprimir Interno"})]}),(e==null?void 0:e.role)!=="client"&&d.jsxs("button",{onClick:qd,className:"bg-emerald-600 text-white p-4 rounded-xl font-bold flex flex-col items-center justify-center gap-2 shadow hover:bg-emerald-700 transition-colors h-24",children:[d.jsx(I5,{size:20}),d.jsx("span",{className:"text-sm",children:"Exportar para Word"})]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsxs("div",{className:"relative group z-20 flex-1",children:[d.jsx(Vm,{className:"absolute left-5 top-5 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:24}),d.jsx("input",{className:"w-full pl-14 pr-6 py-5 rounded-2xl border-none shadow-xl shadow-slate-200/50 focus:ring-4 focus:ring-blue-500/10 text-lg font-medium outline-none bg-white relative z-10",placeholder:"Pesquise por cliente, OS ou equipamento...",value:W,onChange:O=>A(O.target.value)}),W&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-top-2 z-50",children:[Ke.filter(O=>{var z,ae,be;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))||((be=O.item)==null?void 0:be.toLowerCase().includes(W.toLowerCase()))}).slice(0,5).map(O=>d.jsxs("div",{onClick:()=>{hi(O),A("")},className:"p-4 border-b border-slate-50 hover:bg-blue-50 cursor-pointer flex justify-between items-center group/item transition-colors",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"font-bold text-slate-800 flex items-center gap-2",children:[O.client,d.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 rounded-full uppercase",children:O.status})]}),d.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[d.jsx("span",{className:"font-mono text-blue-600 font-bold",children:O.osNumber})," - ",O.item]})]}),d.jsxs("div",{className:"text-xs font-bold text-blue-600 opacity-0 group-hover/item:opacity-100 flex items-center gap-1 transition-all",children:["Abrir ",d.jsx(Pu,{size:14})]})]},O.firestoreId)),Ke.filter(O=>{var z,ae,be;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))||((be=O.item)==null?void 0:be.toLowerCase().includes(W.toLowerCase()))}).length===0&&d.jsx("div",{className:"p-6 text-center text-slate-400 text-sm font-medium",children:"Nenhum resultado encontrado."})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>P(O=>"asc"),className:"bg-white p-5 rounded-2xl shadow-xl shadow-slate-200/50 border-none hover:bg-slate-50 transition-colors text-slate-600",title:M==="desc"?"Mais Recentes Primeiro":"Mais Antigos Primeiro",children:M==="desc"?d.jsx(v5,{size:24}):d.jsx(_5,{size:24})}),Be.length===0&&n("canEditOS")&&d.jsxs("button",{onClick:()=>hi(),className:"bg-blue-600 text-white px-8 py-5 rounded-2xl font-bold flex items-center justify-center gap-3 shadow-2xl shadow-blue-200 hover:bg-blue-700 transition-colors min-w-[200px]",children:[d.jsx(Fn,{size:24})," Abrir Nova OS"]})]})]}),d.jsx("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden overflow-x-auto relative z-0",children:d.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[d.jsx("thead",{className:"bg-slate-50/50 border-b text-[10px] font-black uppercase text-slate-400 tracking-widest",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-6 text-center w-12",children:d.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600",onChange:O=>{const z=Us.filter(ae=>{var be,_e;return((be=ae.client)==null?void 0:be.toLowerCase().includes(W.toLowerCase()))||((_e=ae.osNumber)==null?void 0:_e.includes(W))});if(O.target.checked)bt(z.map(ae=>ae.firestoreId));else{const ae=z.map(be=>be.firestoreId);bt(be=>be.filter(_e=>!ae.includes(_e)))}},checked:Us.filter(O=>{var z,ae;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))}).every(O=>Be.includes(O.firestoreId))&&Us.filter(O=>{var z,ae;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))}).length>0})}),d.jsx("th",{className:"px-8 py-6",children:"Identificao"}),d.jsx("th",{className:"px-8 py-6",children:"Equipamento"}),d.jsx("th",{className:"px-8 py-6",children:"Tipo"}),d.jsx("th",{className:"px-8 py-6",children:"Status"}),d.jsx("th",{className:"px-8 py-6 text-right",children:"Aes"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-50",children:E?d.jsx("tr",{children:d.jsx("td",{colSpan:"6",className:"p-20 text-center",children:d.jsx(to,{className:"animate-spin mx-auto text-blue-600",size:32})})}):Us.filter(O=>{var z,ae;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))}).map(O=>d.jsxs("tr",{className:`hover:bg-blue-50/30 transition-colors group ${Be.includes(O.firestoreId)?"bg-blue-50/50":""}`,children:[d.jsx("td",{className:"px-6 py-4 text-center",children:d.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600",checked:Be.includes(O.firestoreId),onChange:()=>{bt(z=>z.includes(O.firestoreId)?z.filter(be=>be!==O.firestoreId):[...z,O.firestoreId])}})}),d.jsxs("td",{className:"px-8 py-6",children:[d.jsx("div",{className:"font-black text-blue-700 text-lg",children:O.osNumber}),d.jsx("div",{className:"font-bold text-slate-900 text-sm",children:O.client})]}),d.jsxs("td",{className:"px-8 py-6",children:[d.jsx("div",{className:"font-bold text-slate-900 text-sm",children:O.item}),(O.manufacturer||O.model)&&d.jsxs("div",{className:"text-xs text-slate-500 font-medium mb-0.5",children:[O.manufacturer||""," ",O.model||""]}),d.jsxs("div",{className:"text-[10px] text-slate-400 font-mono",children:["NS: ",O.serial||"N/D"]})]}),d.jsx("td",{className:"px-8 py-6",children:d.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-tighter",children:O.billingType})}),d.jsxs("td",{className:"px-8 py-6",children:[d.jsx("div",{className:"px-4 py-2 rounded-xl text-[10px] font-black uppercase inline-block border bg-slate-100 text-slate-600",children:O.status}),d.jsx("div",{className:"text-[9px] text-slate-400 mt-1 font-medium",children:O.statusDate?new Date(O.statusDate).toLocaleDateString("pt-BR"):"Sem data"})]}),d.jsx("td",{className:"px-8 py-6 text-right",children:d.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(e==null?void 0:e.role)!=="client"&&d.jsx("button",{onClick:()=>hi(O),className:"p-3 bg-white border shadow-sm hover:bg-blue-600 hover:text-white rounded-xl transition-all",children:d.jsx(j5,{size:18})}),(e==null?void 0:e.role)!=="client"&&n("canDeleteOS")&&d.jsx("button",{onClick:()=>ru(O),className:"p-3 bg-white border shadow-sm hover:bg-red-600 hover:text-white rounded-xl transition-all",children:d.jsx(bl,{size:18})})]})})]},O.firestoreId))})]})})]}),_==="status"&&$r()&&d.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-7xl mx-auto h-full flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-end shrink-0",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Indicadores"}),d.jsx("p",{className:"text-slate-500 font-medium",children:Pr.isFiltered?`Visualizando mtricas de ${Pr.count} ordens selecionadas`:`Visualizando mtricas gerais de todas as ordens (${Pr.count})`})]}),Pr.isFiltered&&d.jsx("button",{onClick:()=>bt([]),className:"text-sm font-bold text-blue-600 hover:underline",children:"Limpar filtro e ver geral"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center bg-white p-4 rounded-2xl shadow-sm border border-slate-100",children:[d.jsxs("div",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[d.jsx(N5,{size:16})," Filtrar por Perodo:"]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Ms:"}),d.jsxs("select",{className:"bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",value:c,onChange:O=>h(O.target.value),children:[d.jsx("option",{value:"",children:"Todos"}),vo.map((O,z)=>d.jsx("option",{value:z+1,children:O},z))]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Ano:"}),d.jsxs("select",{className:"bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",value:g,onChange:O=>w(O.target.value),children:[d.jsx("option",{value:"",children:"Todos"}),Array.from(new Set(Ke.map(O=>(O.statusDate?new Date(O.statusDate):new Date).getFullYear()))).sort((O,z)=>z-O).map(O=>d.jsx("option",{value:O,children:O},O))]})]}),(c||g)&&d.jsxs("button",{onClick:()=>{h(""),w("")},className:"text-xs font-bold text-red-600 hover:text-red-700 flex items-center gap-1",children:[d.jsx(Xr,{size:12})," Limpar filtro"]})]})]}),d.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-6 min-h-0",children:[d.jsxs("div",{className:"lg:col-span-4 bg-white rounded-[2rem] shadow-xl border border-slate-100 flex flex-col overflow-hidden max-h-[calc(100vh-250px)]",children:[d.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:[d.jsxs("div",{className:"relative group mb-3 z-30",children:[d.jsx(Vm,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:18}),d.jsx("input",{className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 shadow-sm focus:ring-2 focus:ring-blue-500/20 text-sm font-bold outline-none bg-white relative z-20",placeholder:"Buscar OS para filtrar...",value:W,onChange:O=>A(O.target.value)}),W&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-top-2 z-50",children:[Ke.filter(O=>{var z,ae,be;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))||((be=O.item)==null?void 0:be.toLowerCase().includes(W.toLowerCase()))}).slice(0,5).map(O=>d.jsxs("div",{onClick:()=>{hi(O),A("")},className:"p-3 border-b border-slate-50 hover:bg-blue-50 cursor-pointer flex justify-between items-center group/item transition-colors",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-bold text-slate-800 text-xs flex items-center gap-2",children:O.client}),d.jsxs("div",{className:"text-[10px] text-slate-500 mt-0.5",children:[d.jsx("span",{className:"font-mono text-blue-600 font-bold",children:O.osNumber})," - ",O.item]})]}),d.jsxs("div",{className:"text-[10px] font-bold text-blue-600 opacity-0 group-hover/item:opacity-100 flex items-center gap-1 transition-all",children:["Abrir ",d.jsx(Pu,{size:12})]})]},O.firestoreId)),Ke.filter(O=>{var z,ae,be;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))||((be=O.item)==null?void 0:be.toLowerCase().includes(W.toLowerCase()))}).length===0&&d.jsx("div",{className:"p-4 text-center text-slate-400 text-[10px] font-medium",children:"Nenhum resultado."})]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 px-1",children:[d.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-0 cursor-pointer",onChange:O=>{const z=Ke.filter(ae=>{var be,_e;return((be=ae.client)==null?void 0:be.toLowerCase().includes(W.toLowerCase()))||((_e=ae.osNumber)==null?void 0:_e.includes(W))});bt(O.target.checked?z.map(ae=>ae.firestoreId):[])},checked:Be.length>0&&Ke.filter(O=>{var z,ae;return((z=O.client)==null?void 0:z.toLowerCase().includes(W.toLowerCase()))||((ae=O.osNumber)==null?void 0:ae.includes(W))}).every(O=>Be.includes(O.firestoreId))}),d.jsx("span",{children:"Selecionar Todos da Busca"})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 relative z-0",children:[Ke.filter(O=>{var be,_e;const z=((be=O.client)==null?void 0:be.toLowerCase().includes(W.toLowerCase()))||((_e=O.osNumber)==null?void 0:_e.includes(W));let ae=!0;if(c||g){const Pe=O.statusDate?new Date(O.statusDate):new Date,Ce=Pe.getMonth()+1,Ne=Pe.getFullYear();c&&g?ae=Ce===parseInt(c)&&Ne===parseInt(g):c?ae=Ce===parseInt(c):g&&(ae=Ne===parseInt(g))}return z&&ae}).map(O=>{const ae=(O.statusDate?new Date(O.statusDate):new Date).toLocaleDateString("pt-BR");return d.jsx("div",{onClick:()=>bt(be=>be.includes(O.firestoreId)?be.filter(_e=>_e!==O.firestoreId):[...be,O.firestoreId]),className:`p-3 rounded-xl border cursor-pointer transition-all hover:shadow-md select-none ${Be.includes(O.firestoreId)?"bg-blue-50 border-blue-200 ring-1 ring-blue-200":"bg-white border-slate-100 hover:bg-slate-50"}`,children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:`mt-1 w-4 h-4 rounded border flex items-center justify-center transition-colors ${Be.includes(O.firestoreId)?"bg-blue-600 border-blue-600":"border-slate-300 bg-white"}`,children:Be.includes(O.firestoreId)&&d.jsx(Lm,{size:12,className:"text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("span",{className:"font-black text-blue-700 text-xs",children:O.osNumber}),d.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded font-bold uppercase ${Be.includes(O.firestoreId)?"bg-blue-200 text-blue-800":"bg-slate-100 text-slate-500"}`,children:O.status})]}),d.jsx("div",{className:"font-bold text-slate-800 text-sm leading-tight truncate",children:O.client}),d.jsx("div",{className:"text-[10px] text-slate-400 mt-0.5 truncate",children:O.item}),d.jsxs("div",{className:"text-[9px] text-slate-500 mt-1 font-medium flex items-center gap-1",children:[d.jsx(T5,{size:10}),ae]})]}),d.jsx("button",{onClick:be=>{be.stopPropagation(),hi(O)},className:"p-2 -mr-1 mt-0.5 text-slate-400 hover:text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Abrir Detalhes da OS",children:d.jsx(Pu,{size:18})})]})},O.firestoreId)}),Ke.length===0&&d.jsx("div",{className:"text-center py-10 text-slate-400 text-xs",children:"Nenhuma OS encontrada."})]})]}),d.jsx("div",{className:"lg:col-span-8 space-y-6 overflow-y-auto pr-1 pb-10",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-4 relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(jh,{size:16})," Status Geral"]}),d.jsx(N3,{data:Pr.statusChartData,colors:["#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#f59e0b"],onClick:aa}),d.jsx("div",{className:"space-y-2 mt-4",children:Pr.statusChartData.slice(0,4).map((O,z)=>{const ae=O.date?new Date(O.date).toLocaleDateString("pt-BR"):"";return d.jsxs("div",{className:"flex justify-between text-xs text-slate-600 font-medium cursor-pointer hover:bg-slate-50 p-1 rounded transition-colors",onClick:()=>aa(O.label),children:[d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:["#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#f59e0b"][z]}}),O.label,ae&&d.jsx("span",{className:"text-[9px] text-slate-400 font-normal",children:ae})]}),d.jsx("span",{children:O.value})]},z)})}),d.jsx("div",{className:"absolute top-4 right-4 text-slate-300",children:d.jsx(F_,{size:16})})]}),d.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-4 relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(b5,{size:16})," Tipo de Faturamento"]}),d.jsx(Ow,{data:Pr.billingChartData,maxVal:Math.max(...Pr.billingChartData.map(O=>O.value),1),colorClass:"bg-emerald-500",onClick:pi,showValues:f}),d.jsx("div",{className:"absolute top-4 right-4 text-slate-300",children:d.jsx(F_,{size:16})})]})]})})]})]}),_==="financial"&&$r()&&d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto h-full",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Financeiro"}),d.jsx("p",{className:"text-slate-500 font-medium",children:"Anlise de custos e receitas acumuladas"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(L5,{size:16})," Receita Bruta"]}),d.jsxs("div",{className:"text-3xl font-black text-slate-900",children:["R$ ",Dt(Rr.totalRevenue)]}),d.jsx("div",{className:"text-xs text-slate-400",children:"Total cobrado em OS"})]}),d.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold uppercase text-xs tracking-widest",children:[d.jsx(y5,{size:16})," Custos Operacionais"]}),d.jsxs("div",{className:"text-3xl font-black text-slate-900",children:["R$ ",Dt(Rr.totalCosts)]}),d.jsx("div",{className:"text-xs text-slate-400",children:"Peas + Fretes Terceiros"})]}),d.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(w5,{size:16})," Lucro Lquido"]}),d.jsxs("div",{className:"text-3xl font-black text-green-600",children:["R$ ",Dt(Rr.totalProfit)]}),d.jsx("div",{className:"text-xs text-slate-400",children:"Receita - Custos"})]}),d.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl border border-slate-100 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-purple-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(O5,{size:16})," Margem de Lucro"]}),d.jsxs("div",{className:"text-3xl font-black text-purple-600",children:[Rr.margin.toLocaleString("pt-BR",{maximumFractionDigits:1}),"%"]}),d.jsx("div",{className:"text-xs text-slate-400",children:"Rentabilidade mdia"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl border border-slate-100",children:[d.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-bold uppercase text-xs tracking-widest mb-6",children:[d.jsx(Oh,{size:16})," Top Clientes (Receita)"]}),Rr.topClients.length>0?d.jsx(Ow,{data:Rr.topClients,maxVal:Rr.topClients[0].value,colorClass:"bg-blue-600",showValues:f}):d.jsx("div",{className:"text-center py-10 text-slate-400",children:"Sem dados financeiros"})]}),d.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-[2rem] shadow-xl text-white flex flex-col justify-center",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Status Financeiro"}),d.jsx("h3",{className:"text-2xl font-black",children:"Resumo Geral"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[d.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Total de Ordens Analisadas"}),d.jsx("span",{className:"font-bold text-xl",children:Ke.length})]}),d.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[d.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Ticket Mdio (Receita/OS)"}),d.jsxs("span",{className:"font-bold text-xl",children:["R$ ",Dt(Ke.length>0?Rr.totalRevenue/Ke.length:0)]})]}),d.jsxs("div",{className:"flex justify-between items-center pb-2",children:[d.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Lucro Mdio por OS"}),d.jsxs("span",{className:"font-bold text-xl text-green-400",children:["R$ ",Dt(Ke.length>0?Rr.totalProfit/Ke.length:0)]})]})]})]})})]})]}),_==="contracts"&&$r()&&d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Contratos de Manuteno"}),d.jsx("p",{className:"text-slate-500 font-medium",children:"Gesto de vigncias e escopo de atendimento"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("div",{className:"hidden md:flex bg-blue-50 text-blue-600 px-6 py-3 rounded-2xl font-bold text-sm border border-blue-100 items-center gap-2",children:[d.jsx(Qa,{size:18}),"Contratos ativos e manuais"]}),d.jsxs("button",{onClick:$d,className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black flex items-center gap-2 shadow-xl shadow-blue-200 hover:bg-blue-700 transition-colors",children:[d.jsx(Fn,{size:20})," Novo Contrato"]})]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:sa.length===0?d.jsx("div",{className:"col-span-3 text-center py-20 text-slate-400",children:"Nenhum contrato encontrado. Adicione um manualmente ou crie uma OS."}):sa.map((O,z)=>d.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl overflow-hidden group hover:shadow-2xl transition-all",children:[d.jsxs("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50 flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-black text-lg text-slate-800 leading-tight mb-1",children:O.clientName}),d.jsx("div",{className:"text-xs text-slate-500 font-medium truncate max-w-[200px]",children:O.cnpj||"CNPJ no informado"})]}),d.jsx("div",{className:`p-2 rounded-lg ${O.isConfigured?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"}`,children:O.isConfigured?d.jsx(Lm,{size:20}):d.jsx(Hi,{size:20})})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia Incio"}),d.jsx("div",{className:"font-bold text-slate-700",children:O.startDate?new Date(O.startDate+"T00:00:00").toLocaleDateString():"---"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia Fim"}),d.jsx("div",{className:"font-bold text-slate-700",children:O.endDate?new Date(O.endDate+"T00:00:00").toLocaleDateString():"---"})]})]}),d.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Mensal"}),d.jsxs("span",{className:"font-black text-slate-800",children:["R$ ",Dt(nt(O.monthlyValue))]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Anual"}),d.jsxs("span",{className:"font-black text-blue-600",children:["R$ ",Dt(nt(O.annualValue))]})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Escopo Contratado"}),d.jsxs("div",{className:"flex flex-wrap gap-1",children:[O.coveredItems.videoSurgeryInstruments&&d.jsx("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-2 py-1 rounded border border-indigo-100 font-bold",children:"Instr. Videocirurgia"}),O.coveredItems.openInstruments&&d.jsx("span",{className:"text-[9px] bg-purple-50 text-purple-600 px-2 py-1 rounded border border-purple-100 font-bold",children:"Instr. Abertos"}),O.coveredItems.videoSurgeryEquipment&&d.jsx("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-100 font-bold",children:"Equip. Vdeo"}),O.coveredItems.endoscopes&&d.jsx("span",{className:"text-[9px] bg-emerald-50 text-emerald-600 px-2 py-1 rounded border border-emerald-100 font-bold",children:"Endoscpios"}),!Object.values(O.coveredItems).some(Boolean)&&d.jsx("span",{className:"text-[9px] text-slate-400 italic",children:"Nenhum item selecionado"})]})]})]}),d.jsxs("button",{onClick:()=>ns(O),className:"w-full py-4 bg-slate-50 hover:bg-slate-100 border-t border-slate-100 text-slate-600 font-bold text-xs uppercase tracking-widest transition-colors flex items-center justify-center gap-2",children:[d.jsx(D_,{size:16})," ",O.isConfigured?"Editar Contrato":"Configurar Contrato"]})]},z))})]}),_==="inventory"&&$r()&&d.jsxs("div",{className:"p-20 text-center",children:[d.jsx(R_,{size:80,className:"mx-auto text-slate-200 mb-6"}),d.jsx("h3",{className:"text-2xl font-black",children:"Inventrio em breve"})]}),_==="clients"&&$r()&&d.jsxs("div",{className:"p-20 text-center",children:[d.jsx(Oh,{size:80,className:"mx-auto text-slate-200 mb-6"}),d.jsx("h3",{className:"text-2xl font-black",children:"Mdulo de Clientes em breve"})]}),_==="users"&&$r()&&d.jsx(z5,{}),_==="about"&&d.jsxs("div",{className:"p-20 text-center",children:[d.jsx(Qa,{size:80,className:"mx-auto text-slate-200 mb-6"}),d.jsx("h3",{className:"text-2xl font-black",children:"Sobre o Sistema"})]})]}),C&&d.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl border border-slate-200 space-y-6 animate-in zoom-in-95",ref:l,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-green-100 p-3 rounded-full text-green-600",children:d.jsx(U_,{size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Movimentar OSs Selecionadas"}),d.jsxs("p",{className:"text-slate-500 text-sm",children:["Alterar status de ",Be.length," OS(s)"]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Novo Status"}),d.jsx(Dr,{value:Zi,onChange:O=>Ut(O.target.value),options:Pn,label:"Novo status"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Data do Status"}),d.jsx("input",{type:"date",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:Os,onChange:O=>es(O.target.value)})]})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>G(!1),className:"flex-1 py-4 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancelar"}),d.jsxs("button",{onClick:Bd,className:"flex-1 py-4 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 shadow-xl shadow-green-200 transition-colors flex items-center justify-center gap-2",children:[d.jsx(C_,{size:20})," Atualizar"]})]})]})}),Y&&d.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-50 flex items-center justify-center p-2 sm:p-4 overflow-y-auto",children:d.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-5xl my-auto shadow-2xl border border-slate-200 animate-in zoom-in-95 duration-200",children:d.jsxs("form",{onSubmit:Zl,className:"p-6 md:p-10 space-y-10",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:["OS ",le.osNumber]}),d.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Relatrio de Atendimento Tcnico"})]}),d.jsx("button",{type:"button",onClick:()=>Q(!1),className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:d.jsx(Xr,{})})]}),d.jsxs("div",{className:"space-y-10",children:[d.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(Qc,{size:16})," Cliente"]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{placeholder:"Nome da Empresa",className:`w-full p-4 bg-white border ${lr.client?"border-red-500":"border-slate-200"} rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold`,value:le.client,onChange:O=>{De({...le,client:O.target.value}),de(!0),lr.client&&qr(z=>({...z,client:!1}))},onFocus:()=>de(!0),onBlur:()=>setTimeout(()=>de(!1),200)}),te&&le.client&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-60 overflow-y-auto animate-in slide-in-from-top-2",children:Kl.filter(O=>O.client.toLowerCase().includes(le.client.toLowerCase())).slice(0,5).map((O,z)=>d.jsxs("div",{className:"p-3 hover:bg-blue-50 cursor-pointer border-b border-slate-50 flex flex-col",onMouseDown:ae=>{ae.preventDefault(),Ql(O)},children:[d.jsx("span",{className:"font-bold text-slate-800 text-sm",children:O.client}),d.jsx("span",{className:"text-[10px] text-slate-400",children:O.cnpj||"Sem CNPJ"})]},z))}),lr.client&&d.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Cliente  obrigatrio"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx("input",{placeholder:"CNPJ",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:le.cnpj,onChange:O=>De({...le,cnpj:O.target.value})}),d.jsx("input",{placeholder:"Responsvel",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:le.contactPerson,onChange:O=>De({...le,contactPerson:O.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx("input",{placeholder:"E-mail",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:le.email,onChange:O=>De({...le,email:O.target.value})}),d.jsxs("div",{className:"space-y-1",children:[d.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 flex justify-between",children:["Endereo",le.address&&d.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(le.address)}`,target:"_blank",className:"text-blue-600 hover:underline flex items-center gap-1",children:[d.jsx(Pu,{size:10})," Ver no Maps"]})]}),d.jsx("input",{placeholder:"Endereo Completo",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-bold",value:le.address,onChange:O=>De({...le,address:O.target.value})})]})]})]}),d.jsx("hr",{className:"border-slate-200/50"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(E5,{size:16})," Atendimento"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Dr,{value:le.billingType,onChange:O=>De({...le,billingType:O.target.value,maintenanceVisit:""}),options:Fd,variant:"default",label:"Tipo de atendimento"}),d.jsx(R3,{value:le.maintenanceVisit,onChange:O=>De({...le,maintenanceVisit:O.target.value}),billingType:le.billingType})]})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-2 text-orange-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(R5,{size:16})," Equipamento"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{placeholder:"Item / Nome",className:`w-full p-4 bg-slate-50 border ${lr.item?"border-red-500":"border-slate-200"} rounded-2xl outline-none font-bold`,value:le.item,onChange:O=>{De({...le,item:O.target.value}),q(!0),lr.item&&qr(z=>({...z,item:!1}))},onFocus:()=>q(!0),onBlur:()=>setTimeout(()=>q(!1),200)}),ee&&ia.length>0&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[d.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de Itens"}),ia.filter(O=>O.toLowerCase().includes(le.item.toLowerCase())).slice(0,5).map((O,z)=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-bold",onMouseDown:ae=>{ae.preventDefault(),De({...le,item:O}),q(!1)},children:O},z))]}),lr.item&&d.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Item/Equipamento  obrigatrio"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{placeholder:"Marca",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold",value:le.manufacturer,onChange:O=>{De({...le,manufacturer:O.target.value}),oe(!0)},onFocus:()=>oe(!0),onBlur:()=>setTimeout(()=>oe(!1),200)}),ne&&Vs.length>0&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[d.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de Marcas"}),Vs.filter(O=>O.toLowerCase().includes(le.manufacturer.toLowerCase())).slice(0,5).map((O,z)=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-bold",onMouseDown:ae=>{ae.preventDefault(),De({...le,manufacturer:O}),oe(!1)},children:O},z))]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{placeholder:"Modelo",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold",value:le.model,onChange:O=>{De({...le,model:O.target.value}),re(!0)},onFocus:()=>re(!0),onBlur:()=>setTimeout(()=>re(!1),200)}),fe&&di.length>0&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[d.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de Modelos"}),di.filter(O=>O.toLowerCase().includes(le.model.toLowerCase())).slice(0,5).map((O,z)=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-bold",onMouseDown:ae=>{ae.preventDefault(),De({...le,model:O}),re(!1)},children:O},z))]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{placeholder:"Nmero de Srie",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold font-mono",value:le.serial,onChange:O=>{De({...le,serial:O.target.value}),D(!0)},onFocus:()=>D(!0),onBlur:()=>setTimeout(()=>D(!1),200)}),L&&on.length>0&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[d.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes de NS"}),on.filter(O=>O.toLowerCase().includes(le.serial.toLowerCase())).slice(0,5).map((O,z)=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700 font-mono font-bold",onMouseDown:ae=>{ae.preventDefault(),De({...le,serial:O}),D(!1)},children:O},z))]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Observaes (opcional)"}),d.jsx("textarea",{placeholder:"Observaes adicionais sobre o equipamento, como estado de conservao, acessrios, etc...",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold resize-none",value:le.equipmentObservation||"",onChange:O=>De({...le,equipmentObservation:O.target.value}),rows:3})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(M5,{size:16})," Laudo Tcnico"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Defeitos Encontrados"}),d.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 space-y-3",children:[d.jsxs("div",{className:"relative flex gap-2",children:[d.jsx("input",{placeholder:"Descreva um defeito...",className:"flex-1 p-3 bg-white border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-emerald-500/20",value:Cr,onChange:O=>{Yt(O.target.value),ie(!0)},onFocus:()=>ie(!0),onBlur:()=>setTimeout(()=>ie(!1),200),onKeyDown:O=>{O.key==="Enter"&&(O.preventDefault(),Xl())}}),d.jsx("button",{type:"button",onClick:Xl,className:"bg-emerald-600 text-white p-3 rounded-xl shadow-lg shadow-emerald-200 hover:bg-emerald-700 transition-colors",children:d.jsx(Fn,{size:20})}),J&&Gl.length>0&&d.jsxs("div",{className:"absolute top-full left-0 right-14 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[d.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes"}),Gl.filter(O=>O.toLowerCase().includes(Cr.toLowerCase())).slice(0,5).map((O,z)=>d.jsx("div",{className:"p-3 hover:bg-emerald-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700",onMouseDown:ae=>{ae.preventDefault(),Yt(O),ie(!1)},children:O.length>50?O.substring(0,50)+"...":O},z))]})]}),d.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:[le.defectsList&&le.defectsList.map((O,z)=>d.jsxs("div",{className:"flex justify-between items-start p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-left-2",children:[d.jsx("div",{className:"text-sm font-medium text-slate-700 leading-snug",children:O}),d.jsx("button",{type:"button",onClick:()=>Ud(z),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:d.jsx(Xr,{size:16})})]},z)),(!le.defectsList||le.defectsList.length===0)&&d.jsx("div",{className:"text-center text-xs text-slate-400 italic py-2",children:"Nenhum defeito listado."})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Dr,{value:le.solutionType,onChange:O=>De({...le,solutionType:O.target.value}),options:Vd,variant:"light",label:"Tipo de soluo"}),le.solutionType==="Preenchimento manual"&&d.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[d.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl border border-indigo-100 space-y-3",children:d.jsxs("div",{className:"relative flex gap-2",children:[d.jsx("input",{placeholder:"Descreva uma etapa da soluo...",className:"flex-1 p-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500/20",value:Cn,onChange:O=>{nn(O.target.value),me(!0)},onFocus:()=>me(!0),onBlur:()=>setTimeout(()=>me(!1),200),onKeyDown:O=>{O.key==="Enter"&&(O.preventDefault(),oa())}}),d.jsx("button",{type:"button",onClick:oa,className:"bg-indigo-600 text-white p-3 rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-colors",children:d.jsx(Fn,{size:20})}),se&&Dn.length>0&&d.jsxs("div",{className:"absolute top-full left-0 right-14 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[d.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes"}),Dn.filter(O=>O.toLowerCase().includes(Cn.toLowerCase())).slice(0,5).map((O,z)=>d.jsx("div",{className:"p-3 hover:bg-indigo-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700",onMouseDown:ae=>{ae.preventDefault(),nn(O),me(!1)},children:O.length>50?O.substring(0,50)+"...":O},z))]})]})}),d.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:[le.manualSolutionsList&&le.manualSolutionsList.map((O,z)=>d.jsxs("div",{className:"flex justify-between items-start p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-left-2",children:[d.jsx("div",{className:"text-sm font-medium text-slate-700 leading-snug",children:O}),d.jsx("button",{type:"button",onClick:()=>Yl(z),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:d.jsx(Xr,{size:16})})]},z)),(!le.manualSolutionsList||le.manualSolutionsList.length===0)&&d.jsx("div",{className:"text-center text-xs text-slate-400 italic py-2",children:"Nenhuma soluo listada."})]})]}),le.solutionType==="Manual com custos detalhados"&&d.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[d.jsxs("div",{className:"bg-green-50 p-4 rounded-2xl border border-green-100 space-y-3",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{placeholder:"Item, Pea ou Servio",className:"w-full p-2 bg-white border border-green-200 rounded-lg text-sm",value:Vt,onChange:O=>{Xt(O.target.value),me(!0)},onFocus:()=>me(!0),onBlur:()=>setTimeout(()=>me(!1),200)}),se&&Dn.length>0&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 max-h-48 overflow-y-auto animate-in slide-in-from-top-2",children:[d.jsx("div",{className:"p-2 bg-slate-50 text-[10px] uppercase font-bold text-slate-400",children:"Sugestes"}),Dn.filter(O=>O.toLowerCase().includes(Vt.toLowerCase())).slice(0,5).map((O,z)=>d.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-slate-50 text-sm text-slate-700",onMouseDown:ae=>{ae.preventDefault(),Xt(O),me(!1)},children:O},z))]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{placeholder:"Valor R$ 0,00",className:"flex-1 p-2 bg-white border border-green-200 rounded-lg text-sm",value:at,onChange:O=>zr(O.target.value)}),d.jsx("button",{type:"button",onClick:Wr,className:"bg-green-600 text-white p-2.5 rounded-lg shadow-lg shadow-green-200",children:d.jsx(Fn,{size:20})})]})]}),d.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:le.solutionsList.map(O=>d.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-right-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-slate-800",children:O.text}),d.jsxs("div",{className:"text-[10px] text-green-600 font-black",children:["R$ ",O.cost]})]}),d.jsx("button",{type:"button",onClick:()=>zs(O.id),children:d.jsx(Xr,{size:16,className:"text-red-300 hover:text-red-500"})})]},O.id))}),lr.solutionsList&&le.solutionsList.length===0&&d.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Adicione pelo menos um item na lista de solues"})]}),le.solutionType==="Conserto em bancada"&&d.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[d.jsx("div",{className:"bg-amber-50 p-4 rounded-2xl border border-amber-100 space-y-3",children:d.jsxs("div",{className:"relative flex gap-2",children:[d.jsx("input",{placeholder:"Descreva uma etapa do conserto em bancada...",className:"flex-1 p-3 bg-white border border-amber-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-amber-500/20",value:li,onChange:O=>ui(O.target.value),onKeyDown:O=>{O.key==="Enter"&&(O.preventDefault(),Jl())}}),d.jsx("button",{type:"button",onClick:Jl,className:"bg-amber-600 text-white p-3 rounded-xl shadow-lg shadow-amber-200 hover:bg-amber-700 transition-colors",children:d.jsx(Fn,{size:20})})]})}),d.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:[le.benchRepairList&&le.benchRepairList.map((O,z)=>d.jsxs("div",{className:"flex justify-between items-start p-3 bg-white border rounded-xl shadow-sm animate-in slide-in-from-left-2",children:[d.jsx("div",{className:"text-sm font-medium text-slate-700 leading-snug",children:O}),d.jsx("button",{type:"button",onClick:()=>On(z),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:d.jsx(Xr,{size:16})})]},z)),(!le.benchRepairList||le.benchRepairList.length===0)&&d.jsx("div",{className:"text-center text-xs text-slate-400 italic py-2",children:"Nenhuma etapa de conserto listada."})]}),lr.benchRepairList&&(!le.benchRepairList||le.benchRepairList.length===0)&&d.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Descreva as etapas do conserto em bancada"})]}),le.solutionType==="No passvel de conserto, substituir por novo equipamento / material"&&d.jsxs("div",{children:[d.jsx("textarea",{placeholder:"Detalhe a substituio por novo equipamento / material...",className:`w-full p-4 ${lr.notRepairableDetail?"bg-red-50 border-red-500":"bg-red-50 border-red-100"} text-red-900 border rounded-2xl outline-none font-bold`,value:le.notRepairableDetail,onChange:O=>{De({...le,notRepairableDetail:O.target.value}),lr.notRepairableDetail&&qr(z=>({...z,notRepairableDetail:!1}))},onBlur:()=>Hl("notRepairableDetail"),rows:3}),lr.notRepairableDetail&&d.jsx("p",{className:"text-red-500 text-xs mt-1 ml-4",children:"Detalhe a substituio por novo equipamento/material"})]})]})]})]}),d.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-6 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>N(!ce),children:[d.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-bold uppercase text-xs tracking-widest",children:[d.jsx(Mm,{size:16})," Financeiro & Custos (Controle Interno)"]}),ce?d.jsx(fS,{size:20,className:"text-slate-400"}):d.jsx(hS,{size:20,className:"text-slate-400"})]}),ce&&d.jsxs("div",{className:"space-y-6 animate-in slide-in-from-top-4 fade-in duration-300",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Nome do Terceiro / Transportadora"}),d.jsx("input",{placeholder:"Ex: JadLog / Lab Especializado",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:le.costThirdPartyName,onChange:O=>De({...le,costThirdPartyName:O.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Frete Terceiro (R$)"}),d.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:le.costThirdPartyShipping,onChange:O=>De({...le,costThirdPartyShipping:O.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Peas/Servios (R$)"}),d.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:le.costParts,onChange:O=>De({...le,costParts:O.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Frete Cliente (R$)"}),d.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:le.costClientShipping,onChange:O=>De({...le,costClientShipping:O.target.value})})]})]}),d.jsx("hr",{className:"border-slate-200/50"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 items-start",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-blue-500 uppercase",children:"Valor Sugerido (+60%)"}),d.jsxs("div",{className:"w-full p-4 bg-blue-50/50 border border-blue-100 rounded-2xl font-black text-blue-600 cursor-not-allowed text-sm",children:["R$ ",Dt(Wl)]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-purple-600 uppercase",children:"Soma Itens Laudo"}),d.jsxs("div",{className:"w-full p-4 bg-purple-50/50 border border-purple-100 rounded-2xl font-black text-purple-700 cursor-not-allowed text-sm",children:["R$ ",Dt(na)]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-green-600 uppercase",children:"Valor Cobrado (R$)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{placeholder:"0,00",className:"w-full p-4 bg-green-50 border border-green-100 rounded-2xl outline-none font-black text-green-700 text-sm",value:le.chargedAmount,onChange:O=>De({...le,chargedAmount:O.target.value})}),le.discount5Days&&d.jsx("div",{className:"absolute -right-2 -top-2 bg-red-500 text-white text-[10px] font-black px-2 py-1 rounded-full animate-pulse",children:"5% OFF"})]}),le.discount5Days&&le.finalChargedAmount>0&&d.jsxs("div",{className:"bg-green-100 p-3 rounded-xl border border-green-200",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-[10px] font-bold text-green-800 uppercase",children:"Valor Final com Desconto"}),d.jsxs("span",{className:"text-lg font-black text-green-900",children:["R$ ",Dt(le.finalChargedAmount)]})]}),d.jsx("div",{className:"text-[9px] text-green-600 mt-1",children:"Desconto de 5% aplicado para pagamento em 5 dias"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Condio Pagamento"}),d.jsx(Dr,{value:le.paymentCondition,onChange:O=>De({...le,paymentCondition:O.target.value,installments:""}),options:[" vista","Boleto","Carto"],label:"Condio de pagamento"})]}),(le.paymentCondition==="Boleto"||le.paymentCondition==="Carto")&&d.jsxs("div",{className:"space-y-2 animate-in fade-in",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Parcelas"}),le.paymentCondition==="Boleto"?d.jsxs("div",{className:"space-y-3",children:[d.jsx(Dr,{value:le.installments,onChange:O=>{const z=O.target.value==="5 dias (5% de desconto)";De({...le,installments:O.target.value,discount5Days:z})},options:ts.Boleto,label:"Parcelas boleto"}),le.discount5Days&&le.chargedAmount&&d.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 space-y-1",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-[10px] font-bold text-green-700 uppercase",children:"Desconto de 5%"}),d.jsxs("span",{className:"text-sm font-black text-green-600",children:["R$ ",Dt(le.discountAmount)]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-green-100",children:[d.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:"Valor Final"}),d.jsxs("span",{className:"text-lg font-black text-slate-800",children:["R$ ",Dt(le.finalChargedAmount)]})]})]})]}):d.jsx(Dr,{value:le.installments,onChange:O=>De({...le,installments:O.target.value}),options:ts.Carto,label:"Parcelas carto"})]})]}),d.jsxs("div",{className:`p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4 transition-colors ${jn>=0?"bg-green-100/50 border border-green-200":"bg-red-100/50 border border-red-200"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`p-3 rounded-full ${jn>=0?"bg-green-200 text-green-700":"bg-red-200 text-red-700"}`,children:d.jsx(x5,{size:24})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] font-black uppercase text-slate-500",children:"Resultado Operacional"}),d.jsx("div",{className:`text-2xl font-black ${jn>=0?"text-green-700":"text-red-700"}`,children:jn>=0?"LUCRO":"PREJUZO"})]})]}),d.jsxs("div",{className:"flex gap-8 text-right",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Custo Total"}),d.jsxs("div",{className:"font-bold text-slate-700",children:["R$ ",Dt(sn)]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Resultado"}),d.jsxs("div",{className:`text-xl font-black ${jn>=0?"text-green-600":"text-red-600"}`,children:["R$ ",Dt(jn)]})]})]})]})]})]}),d.jsxs("div",{className:"space-y-6 pt-6 border-t",children:[d.jsxs("div",{className:"flex items-center gap-2 text-slate-900 font-bold uppercase text-xs tracking-widest",children:[d.jsx(U_,{size:16})," Logstica e Status Final"]}),d.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-6",children:[d.jsx("div",{className:"w-full overflow-x-auto py-2",children:d.jsxs("div",{className:"flex items-center justify-between min-w-[600px] relative px-4",children:[d.jsx("div",{className:"absolute left-4 right-4 top-1/2 -translate-y-1/2 h-0.5 bg-slate-200 z-0"}),d.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 h-0.5 bg-blue-600 z-0 transition-all duration-500 ease-in-out",style:{width:`${rs}%`}}),Ls.map((O,z)=>{const ae=z<=an,be=z===an,_e=qs(O.value);return d.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-3 cursor-pointer group min-w-[80px]",onClick:()=>De({...le,status:O.value,statusDate:new Date().toISOString().split("T")[0]}),children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-300 shadow-sm ${ae?"bg-blue-600 border-blue-600 text-white scale-110":"bg-white border-slate-300 text-slate-300 group-hover:border-blue-300"}`,children:ae?d.jsx(dS,{size:14,strokeWidth:4}):d.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-200"})}),d.jsxs("div",{className:"text-center flex flex-col items-center",children:[d.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide transition-colors ${be?"text-blue-700":"text-slate-400"}`,children:O.label}),d.jsx("span",{className:`text-[10px] font-medium px-1.5 py-0.5 rounded mt-1 whitespace-nowrap ${_e?"bg-white text-slate-600 shadow-sm border border-slate-200":"text-slate-300"}`,children:_e||"---"})]})]},z)})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start pt-4 border-t border-slate-200/50",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Status Geral (Seleo Manual)"}),d.jsx(Dr,{value:le.status,onChange:O=>{De({...le,status:O.target.value,statusDate:new Date().toISOString().split("T")[0]})},options:Pn,label:"Status geral"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Data do Status Atual"}),d.jsx("input",{type:"date",className:"w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none font-bold",value:le.statusDate,onChange:O=>De({...le,statusDate:O.target.value})})]})]}),(le.status==="Em oramento"||le.status==="Aguardando aprovao do oramento")&&d.jsxs("div",{className:"space-y-1 animate-in fade-in",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Prazo de Entrega"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"number",placeholder:"Ex: 7",className:"w-20 p-4 border border-slate-200 rounded-l-2xl outline-none font-bold text-center",value:le.deliveryDeadline,onChange:O=>De({...le,deliveryDeadline:O.target.value})}),d.jsx("div",{className:"p-4 bg-slate-100 border border-slate-200 rounded-r-2xl font-bold text-slate-600",children:"dias teis"})]}),d.jsx("p",{className:"text-[10px] text-slate-400 mt-1 ml-4",children:"Esta informao ser exibida na proposta de oramento"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[le.status!=="Recebido"&&d.jsxs("div",{className:"space-y-1 animate-in fade-in",children:[d.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Enviado para Terceiro?"}),d.jsx(Dr,{value:le.sentToThirdParty,onChange:O=>De({...le,sentToThirdParty:O.target.value}),options:["No","Sim"],className:"bg-slate-100 border-none",label:"Enviado para terceiro"})]}),le.status==="Em rota de entrega"&&d.jsxs("div",{className:"space-y-1 animate-in zoom-in-95",children:[d.jsx("label",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Rastreamento"}),d.jsx("input",{placeholder:"Cdigo de Rastreio",className:"w-full p-4 bg-blue-50 border border-blue-100 rounded-2xl outline-none font-bold",value:le.trackingCode,onChange:O=>De({...le,trackingCode:O.target.value})})]})]}),le.sentToThirdParty==="Sim"&&le.status!=="Recebido"&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-6 bg-slate-100 rounded-3xl border border-slate-200 animate-in slide-in-from-top-4",children:[d.jsx("input",{placeholder:"Empresa Terceira",className:"w-full p-3 bg-white border rounded-xl text-sm",value:le.thirdPartyInfo,onChange:O=>De({...le,thirdPartyInfo:O.target.value})}),d.jsx("input",{placeholder:"Rastreio Terceiro",className:"w-full p-3 bg-white border rounded-xl text-sm",value:le.thirdPartyTracking,onChange:O=>De({...le,thirdPartyTracking:O.target.value})}),d.jsx("input",{type:"date",className:"w-full p-3 bg-white border rounded-xl text-sm",value:le.thirdPartyDate,onChange:O=>De({...le,thirdPartyDate:O.target.value})})]})]})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 pt-10 border-t",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:()=>Q(!1),className:"px-6 py-5 bg-slate-100 text-slate-600 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-slate-200 transition-colors",children:"Cancelar"}),pe&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",onClick:()=>tu("client"),className:"p-5 bg-blue-50 text-blue-600 rounded-2xl hover:bg-blue-100 transition-colors border border-blue-100",title:"Imprimir Relatrio do Cliente",children:d.jsx(V_,{size:20})}),(e==null?void 0:e.role)!=="client"&&d.jsx("button",{type:"button",onClick:()=>tu("internal"),className:"p-5 bg-slate-50 text-slate-600 rounded-2xl hover:bg-slate-100 transition-colors border border-slate-200",title:"Imprimir Relatrio Interno",children:d.jsx(Dh,{size:20})})]})]}),d.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4",children:[d.jsxs("button",{type:"button",onClick:lt,disabled:Ae,className:"flex-1 bg-indigo-50 text-indigo-700 border-2 border-indigo-100 p-5 rounded-2xl font-black text-xs hover:bg-indigo-100 transition-all flex items-center justify-center gap-3",children:[Ae?d.jsx(to,{className:"animate-spin",size:18}):d.jsx(pS,{size:18})," NOVA OS COM MESMO CLIENTE"]}),d.jsxs("button",{type:"submit",disabled:Ae,className:"flex-1 bg-blue-600 text-white p-5 rounded-2xl font-black text-lg hover:bg-blue-700 shadow-xl shadow-blue-200 transition-all flex items-center justify-center gap-3",children:[Ae?d.jsx(to,{className:"animate-spin",size:20}):d.jsx(Fm,{size:20})," SALVAR OS"]})]})]})]})})}),ue&&d.jsx("div",{className:"fixed inset-0 z-[60]",role:"dialog","aria-modal":"true","aria-labelledby":"contract-modal-title",onClick:O=>{O.target===O.currentTarget&&F(!1)},children:d.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md overflow-y-auto",children:d.jsx("div",{className:"min-h-full flex items-start justify-center p-4 py-8",children:d.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-4xl shadow-2xl border border-slate-200 animate-in zoom-in-95 duration-200 my-8",ref:o,tabIndex:-1,onKeyDown:O=>{O.key==="Escape"&&F(!1)},children:d.jsxs("form",{onSubmit:ln,className:"p-8 space-y-8",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{id:"contract-modal-title",className:"text-2xl font-black text-slate-900 tracking-tight",children:p?"Novo Contrato":"Configurar Contrato"}),d.jsx("p",{className:"text-slate-500 text-sm font-medium",children:p?"Preencha os dados do cliente e contrato":ze.clientName})]}),d.jsx("button",{type:"button",onClick:()=>F(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:d.jsx(Xr,{size:20})})]}),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold uppercase text-xs tracking-widest mb-2",children:[d.jsx(Qc,{size:16})," Dados do Cliente"]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Nome do Cliente *"}),d.jsx("input",{className:`w-full p-3 border rounded-xl font-bold ${p?"bg-white border-slate-200":"bg-slate-100 border-slate-200 cursor-not-allowed"}`,value:ze.clientName,onChange:O=>p&&ft({...ze,clientName:O.target.value}),placeholder:"Nome da Empresa / Hospital",readOnly:!p,required:!0})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"CNPJ"}),d.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ze.cnpj,onChange:O=>ft({...ze,cnpj:O.target.value}),placeholder:"00.000.000/0000-00"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Contato"}),d.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ze.contactPerson,onChange:O=>ft({...ze,contactPerson:O.target.value}),placeholder:"Nome do Responsvel"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"E-mail"}),d.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ze.email,onChange:O=>ft({...ze,email:O.target.value}),placeholder:"financeiro@hospital.com"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Endereo"}),d.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-medium text-sm",value:ze.address,onChange:O=>ft({...ze,address:O.target.value}),placeholder:"Rua, Nmero, Cidade - UF"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Vigncia (Incio - Fim)"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"date",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-sm",value:ze.startDate,onChange:O=>ft({...ze,startDate:O.target.value}),required:!0}),d.jsx("input",{type:"date",className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-bold text-sm",value:ze.endDate,onChange:O=>ft({...ze,endDate:O.target.value}),required:!0})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Mensal (R$)"}),d.jsx("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-xl font-black text-slate-800",value:ze.monthlyValue,onChange:O=>{const z=O.target.value,ae=nt(z);ft({...ze,monthlyValue:z,annualValue:(ae*12).toLocaleString("pt-BR",{minimumFractionDigits:2})})},placeholder:"0,00"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Valor Anual (Estimado)"}),d.jsx("input",{className:"w-full p-3 bg-blue-50 border border-blue-100 rounded-xl font-black text-blue-600",value:ze.annualValue,onChange:O=>ft({...ze,annualValue:O.target.value}),placeholder:"0,00"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Observaes"}),d.jsx("textarea",{rows:"3",className:"w-full p-3 bg-white border border-slate-200 rounded-xl text-sm resize-none",value:ze.observations,onChange:O=>ft({...ze,observations:O.target.value}),placeholder:"Detalhes adicionais..."})]})]}),d.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 space-y-4 h-fit",children:[d.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold uppercase text-xs tracking-widest mb-2",children:[d.jsx(S5,{size:16})," Itens Cobertos"]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[d.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500",checked:ze.coveredItems.videoSurgeryInstruments,onChange:O=>ft({...ze,coveredItems:{...ze.coveredItems,videoSurgeryInstruments:O.target.checked}})}),d.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Instrumentais de Vdeo Cirurgia"})]}),d.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[d.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500",checked:ze.coveredItems.openInstruments,onChange:O=>ft({...ze,coveredItems:{...ze.coveredItems,openInstruments:O.target.checked}})}),d.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Instrumentais Abertos"})]}),d.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[d.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500",checked:ze.coveredItems.videoSurgeryEquipment,onChange:O=>ft({...ze,coveredItems:{...ze.coveredItems,videoSurgeryEquipment:O.target.checked}})}),d.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Equipamentos de Vdeo"})]}),d.jsxs("label",{className:"flex items-center gap-3 p-4 bg-white rounded-xl border border-slate-100 cursor-pointer hover:border-indigo-300 transition-colors",children:[d.jsx("input",{type:"checkbox",className:"w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500",checked:ze.coveredItems.endoscopes,onChange:O=>ft({...ze,coveredItems:{...ze.coveredItems,endoscopes:O.target.checked}})}),d.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Endoscpios"})]})]})]})]})]}),d.jsxs("div",{className:"pt-4 border-t flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>F(!1),className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100",children:"Cancelar"}),d.jsxs("button",{type:"submit",disabled:Ae,className:"px-8 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg hover:bg-blue-700 flex items-center gap-2",children:[Ae?d.jsx(to,{className:"animate-spin",size:20}):d.jsx(Fm,{size:20}),"Salvar Contrato"]})]})]})})})})}),$&&d.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[60] flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl border border-slate-200 text-center space-y-6 animate-in zoom-in-95",children:[d.jsx("div",{className:"bg-red-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto text-red-500 mb-2",children:d.jsx(bl,{size:40})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Excluir OS?"}),d.jsxs("p",{className:"text-slate-500 mt-2",children:["Tem certeza que deseja remover permanentemente a OS ",d.jsx("span",{className:"font-bold text-slate-900",children:ye==null?void 0:ye.osNumber}),"?",d.jsx("br",{}),"Essa ao no pode ser desfeita."]})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>H(!1),className:"flex-1 py-4 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancelar"}),d.jsx("button",{onClick:nu,className:"flex-1 py-4 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 shadow-xl shadow-red-200 transition-colors",children:"Sim, Excluir"})]})]})}),d.jsx(P3,{isOpen:Z,onClose:()=>X(!1),selectedOrdersCount:Be.length,totalValue:ci.totalValue,initialData:ci,onConfirm:zd}),Ds.show&&d.jsx(C3,{message:Ds.message,type:Ds.type,onClose:()=>Rn(O=>({...O,show:!1}))})]}):d.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center p-8",children:[d.jsx(Dh,{className:"mx-auto text-red-500 mb-6",size:60}),d.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2",children:"Acesso Negado"}),d.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"Voc no tem permisso para acessar esta pgina. Entre em contato com o administrador do sistema."})]})}):d.jsx(q5,{})}function D3(){return d.jsx(cS,{children:d.jsx(j3,{})})}_p.createRoot(document.getElementById("root")).render(d.jsx(Hw.StrictMode,{children:d.jsx(cS,{children:d.jsx(D3,{})})}));
